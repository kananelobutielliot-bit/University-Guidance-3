var VR=Object.defineProperty;var GR=(e,t,r)=>t in e?VR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ha=(e,t,r)=>GR(e,typeof t!="symbol"?t+"":t,r);function d2(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Us(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function KR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var h2={exports:{}},Jf={},f2={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu=Symbol.for("react.element"),YR=Symbol.for("react.portal"),XR=Symbol.for("react.fragment"),QR=Symbol.for("react.strict_mode"),JR=Symbol.for("react.profiler"),ZR=Symbol.for("react.provider"),e3=Symbol.for("react.context"),t3=Symbol.for("react.forward_ref"),r3=Symbol.for("react.suspense"),n3=Symbol.for("react.memo"),s3=Symbol.for("react.lazy"),a_=Symbol.iterator;function i3(e){return e===null||typeof e!="object"?null:(e=a_&&e[a_]||e["@@iterator"],typeof e=="function"?e:null)}var m2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p2=Object.assign,g2={};function ol(e,t,r){this.props=e,this.context=t,this.refs=g2,this.updater=r||m2}ol.prototype.isReactComponent={};ol.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ol.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function v2(){}v2.prototype=ol.prototype;function wx(e,t,r){this.props=e,this.context=t,this.refs=g2,this.updater=r||m2}var _x=wx.prototype=new v2;_x.constructor=wx;p2(_x,ol.prototype);_x.isPureReactComponent=!0;var o_=Array.isArray,x2=Object.prototype.hasOwnProperty,jx={current:null},y2={key:!0,ref:!0,__self:!0,__source:!0};function b2(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)x2.call(t,n)&&!y2.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:pu,type:e,key:i,ref:o,props:s,_owner:jx.current}}function a3(e,t){return{$$typeof:pu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nx(e){return typeof e=="object"&&e!==null&&e.$$typeof===pu}function o3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var l_=/\/+/g;function Tp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?o3(""+e.key):t.toString(36)}function Gd(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case pu:case YR:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Tp(o,0):n,o_(s)?(r="",e!=null&&(r=e.replace(l_,"$&/")+"/"),Gd(s,t,r,"",function(u){return u})):s!=null&&(Nx(s)&&(s=a3(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(l_,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",o_(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Tp(i,l);o+=Gd(i,t,r,c,s)}else if(c=i3(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Tp(i,l++),o+=Gd(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ed(e,t,r){if(e==null)return e;var n=[],s=0;return Gd(e,n,"","",function(i){return t.call(r,i,s++)}),n}function l3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cr={current:null},Kd={transition:null},c3={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:Kd,ReactCurrentOwner:jx};function w2(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:ed,forEach:function(e,t,r){ed(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ed(e,function(){t++}),t},toArray:function(e){return ed(e,function(t){return t})||[]},only:function(e){if(!Nx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=ol;ye.Fragment=XR;ye.Profiler=JR;ye.PureComponent=wx;ye.StrictMode=QR;ye.Suspense=r3;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c3;ye.act=w2;ye.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=p2({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=jx.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x2.call(t,c)&&!y2.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:pu,type:e.type,key:s,ref:i,props:n,_owner:o}};ye.createContext=function(e){return e={$$typeof:e3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZR,_context:e},e.Consumer=e};ye.createElement=b2;ye.createFactory=function(e){var t=b2.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:t3,render:e}};ye.isValidElement=Nx;ye.lazy=function(e){return{$$typeof:s3,_payload:{_status:-1,_result:e},_init:l3}};ye.memo=function(e,t){return{$$typeof:n3,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=Kd.transition;Kd.transition={};try{e()}finally{Kd.transition=t}};ye.unstable_act=w2;ye.useCallback=function(e,t){return Cr.current.useCallback(e,t)};ye.useContext=function(e){return Cr.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return Cr.current.useDeferredValue(e)};ye.useEffect=function(e,t){return Cr.current.useEffect(e,t)};ye.useId=function(){return Cr.current.useId()};ye.useImperativeHandle=function(e,t,r){return Cr.current.useImperativeHandle(e,t,r)};ye.useInsertionEffect=function(e,t){return Cr.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return Cr.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return Cr.current.useMemo(e,t)};ye.useReducer=function(e,t,r){return Cr.current.useReducer(e,t,r)};ye.useRef=function(e){return Cr.current.useRef(e)};ye.useState=function(e){return Cr.current.useState(e)};ye.useSyncExternalStore=function(e,t,r){return Cr.current.useSyncExternalStore(e,t,r)};ye.useTransition=function(){return Cr.current.useTransition()};ye.version="18.3.1";f2.exports=ye;var y=f2.exports;const u3=Us(y),d3=d2({__proto__:null,default:u3},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h3=y,f3=Symbol.for("react.element"),m3=Symbol.for("react.fragment"),p3=Object.prototype.hasOwnProperty,g3=h3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v3={key:!0,ref:!0,__self:!0,__source:!0};function _2(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)p3.call(t,n)&&!v3.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:f3,type:e,key:i,ref:o,props:s,_owner:g3.current}}Jf.Fragment=m3;Jf.jsx=_2;Jf.jsxs=_2;h2.exports=Jf;var a=h2.exports,j2={exports:{}},rn={},N2={exports:{}},S2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,L){var U=A.length;A.push(L);e:for(;0<U;){var H=U-1>>>1,X=A[H];if(0<s(X,L))A[H]=L,A[U]=X,U=H;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var L=A[0],U=A.pop();if(U!==L){A[0]=U;e:for(var H=0,X=A.length,fe=X>>>1;H<fe;){var ae=2*(H+1)-1,ue=A[ae],Ae=ae+1,_e=A[Ae];if(0>s(ue,U))Ae<X&&0>s(_e,ue)?(A[H]=_e,A[Ae]=U,H=Ae):(A[H]=ue,A[ae]=U,H=ae);else if(Ae<X&&0>s(_e,U))A[H]=_e,A[Ae]=U,H=Ae;else break e}}return L}function s(A,L){var U=A.sortIndex-L.sortIndex;return U!==0?U:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,x=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=A)n(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(u)}}function _(A){if(x=!1,w(A),!p)if(r(c)!==null)p=!0,M(j);else{var L=r(u);L!==null&&P(_,L.startTime-A)}}function j(A,L){p=!1,x&&(x=!1,v(I),I=-1),m=!0;var U=f;try{for(w(L),h=r(c);h!==null&&(!(h.expirationTime>L)||A&&!O());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var X=H(h.expirationTime<=L);L=e.unstable_now(),typeof X=="function"?h.callback=X:h===r(c)&&n(c),w(L)}else n(c);h=r(c)}if(h!==null)var fe=!0;else{var ae=r(u);ae!==null&&P(_,ae.startTime-L),fe=!1}return fe}finally{h=null,f=U,m=!1}}var N=!1,C=null,I=-1,E=5,D=-1;function O(){return!(e.unstable_now()-D<E)}function k(){if(C!==null){var A=e.unstable_now();D=A;var L=!0;try{L=C(!0,A)}finally{L?S():(N=!1,C=null)}}else N=!1}var S;if(typeof b=="function")S=function(){b(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,R=T.port2;T.port1.onmessage=k,S=function(){R.postMessage(null)}}else S=function(){g(k,0)};function M(A){C=A,N||(N=!0,S())}function P(A,L){I=g(function(){A(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,M(j))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var U=f;f=L;try{return A()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var U=f;f=A;try{return L()}finally{f=U}},e.unstable_scheduleCallback=function(A,L,U){var H=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?H+U:H):U=H,A){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=U+X,A={id:d++,callback:L,priorityLevel:A,startTime:U,expirationTime:X,sortIndex:-1},U>H?(A.sortIndex=U,t(u,A),r(c)===null&&A===r(u)&&(x?(v(I),I=-1):x=!0,P(_,U-H))):(A.sortIndex=X,t(c,A),p||m||(p=!0,M(j))),A},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(A){var L=f;return function(){var U=f;f=L;try{return A.apply(this,arguments)}finally{f=U}}}})(S2);N2.exports=S2;var x3=N2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y3=y,en=x3;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E2=new Set,wc={};function Pa(e,t){Ro(e,t),Ro(e+"Capture",t)}function Ro(e,t){for(wc[e]=t,e=0;e<t.length;e++)E2.add(t[e])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qg=Object.prototype.hasOwnProperty,b3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c_={},u_={};function w3(e){return Qg.call(u_,e)?!0:Qg.call(c_,e)?!1:b3.test(e)?u_[e]=!0:(c_[e]=!0,!1)}function _3(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j3(e,t,r,n){if(t===null||typeof t>"u"||_3(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kr(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ir[e]=new kr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ir[t]=new kr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ir[e]=new kr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ir[e]=new kr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ir[e]=new kr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ir[e]=new kr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ir[e]=new kr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ir[e]=new kr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ir[e]=new kr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Sx=/[\-:]([a-z])/g;function Ex(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Sx,Ex);ir[t]=new kr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Sx,Ex);ir[t]=new kr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Sx,Ex);ir[t]=new kr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ir[e]=new kr(e,1,!1,e.toLowerCase(),null,!1,!1)});ir.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ir[e]=new kr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cx(e,t,r,n){var s=ir.hasOwnProperty(t)?ir[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j3(t,r,s,n)&&(r=null),n||s===null?w3(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Bs=y3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,td=Symbol.for("react.element"),ao=Symbol.for("react.portal"),oo=Symbol.for("react.fragment"),kx=Symbol.for("react.strict_mode"),Jg=Symbol.for("react.profiler"),C2=Symbol.for("react.provider"),k2=Symbol.for("react.context"),Ax=Symbol.for("react.forward_ref"),Zg=Symbol.for("react.suspense"),ev=Symbol.for("react.suspense_list"),Px=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),A2=Symbol.for("react.offscreen"),d_=Symbol.iterator;function Al(e){return e===null||typeof e!="object"?null:(e=d_&&e[d_]||e["@@iterator"],typeof e=="function"?e:null)}var lt=Object.assign,Ip;function Yl(e){if(Ip===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ip=t&&t[1]||""}return`
`+Ip+e}var Dp=!1;function Rp(e,t){if(!e||Dp)return"";Dp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Dp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Yl(e):""}function N3(e){switch(e.tag){case 5:return Yl(e.type);case 16:return Yl("Lazy");case 13:return Yl("Suspense");case 19:return Yl("SuspenseList");case 0:case 2:case 15:return e=Rp(e.type,!1),e;case 11:return e=Rp(e.type.render,!1),e;case 1:return e=Rp(e.type,!0),e;default:return""}}function tv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oo:return"Fragment";case ao:return"Portal";case Jg:return"Profiler";case kx:return"StrictMode";case Zg:return"Suspense";case ev:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k2:return(e.displayName||"Context")+".Consumer";case C2:return(e._context.displayName||"Context")+".Provider";case Ax:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Px:return t=e.displayName||null,t!==null?t:tv(e.type)||"Memo";case ri:t=e._payload,e=e._init;try{return tv(e(t))}catch{}}return null}function S3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tv(t);case 8:return t===kx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ci(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function P2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function E3(e){var t=P2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rd(e){e._valueTracker||(e._valueTracker=E3(e))}function O2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=P2(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function dh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rv(e,t){var r=t.checked;return lt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function h_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ci(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function T2(e,t){t=t.checked,t!=null&&Cx(e,"checked",t,!1)}function nv(e,t){T2(e,t);var r=Ci(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sv(e,t.type,r):t.hasOwnProperty("defaultValue")&&sv(e,t.type,Ci(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function f_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function sv(e,t,r){(t!=="number"||dh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xl=Array.isArray;function jo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ci(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function iv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return lt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function m_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(W(92));if(Xl(r)){if(1<r.length)throw Error(W(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ci(r)}}function I2(e,t){var r=Ci(t.value),n=Ci(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function p_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function D2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function av(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?D2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nd,R2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nd=nd||document.createElement("div"),nd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _c(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C3=["Webkit","ms","Moz","O"];Object.keys(rc).forEach(function(e){C3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rc[t]=rc[e]})});function M2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||rc.hasOwnProperty(e)&&rc[e]?(""+t).trim():t+"px"}function L2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=M2(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var k3=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ov(e,t){if(t){if(k3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function lv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cv=null;function Ox(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uv=null,No=null,So=null;function g_(e){if(e=xu(e)){if(typeof uv!="function")throw Error(W(280));var t=e.stateNode;t&&(t=nm(t),uv(e.stateNode,e.type,t))}}function $2(e){No?So?So.push(e):So=[e]:No=e}function F2(){if(No){var e=No,t=So;if(So=No=null,g_(e),t)for(e=0;e<t.length;e++)g_(t[e])}}function U2(e,t){return e(t)}function B2(){}var Mp=!1;function z2(e,t,r){if(Mp)return e(t,r);Mp=!0;try{return U2(e,t,r)}finally{Mp=!1,(No!==null||So!==null)&&(B2(),F2())}}function jc(e,t){var r=e.stateNode;if(r===null)return null;var n=nm(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(W(231,t,typeof r));return r}var dv=!1;if(Ss)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){dv=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{dv=!1}function A3(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var nc=!1,hh=null,fh=!1,hv=null,P3={onError:function(e){nc=!0,hh=e}};function O3(e,t,r,n,s,i,o,l,c){nc=!1,hh=null,A3.apply(P3,arguments)}function T3(e,t,r,n,s,i,o,l,c){if(O3.apply(this,arguments),nc){if(nc){var u=hh;nc=!1,hh=null}else throw Error(W(198));fh||(fh=!0,hv=u)}}function Oa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function W2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v_(e){if(Oa(e)!==e)throw Error(W(188))}function I3(e){var t=e.alternate;if(!t){if(t=Oa(e),t===null)throw Error(W(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return v_(s),e;if(i===n)return v_(s),t;i=i.sibling}throw Error(W(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(W(189))}}if(r.alternate!==n)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?e:t}function H2(e){return e=I3(e),e!==null?q2(e):null}function q2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=q2(e);if(t!==null)return t;e=e.sibling}return null}var V2=en.unstable_scheduleCallback,x_=en.unstable_cancelCallback,D3=en.unstable_shouldYield,R3=en.unstable_requestPaint,yt=en.unstable_now,M3=en.unstable_getCurrentPriorityLevel,Tx=en.unstable_ImmediatePriority,G2=en.unstable_UserBlockingPriority,mh=en.unstable_NormalPriority,L3=en.unstable_LowPriority,K2=en.unstable_IdlePriority,Zf=null,es=null;function $3(e){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Zf,e,void 0,(e.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:B3,F3=Math.log,U3=Math.LN2;function B3(e){return e>>>=0,e===0?32:31-(F3(e)/U3|0)|0}var sd=64,id=4194304;function Ql(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ph(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Ql(l):(i&=o,i!==0&&(n=Ql(i)))}else o=r&~s,o!==0?n=Ql(o):i!==0&&(n=Ql(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Fn(t),s=1<<r,n|=e[r],t&=~s;return n}function z3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W3(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Fn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=z3(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function fv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Y2(){var e=sd;return sd<<=1,!(sd&4194240)&&(sd=64),e}function Lp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fn(t),e[t]=r}function H3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Fn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Ix(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Fn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Te=0;function X2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Q2,Dx,J2,Z2,eC,mv=!1,ad=[],mi=null,pi=null,gi=null,Nc=new Map,Sc=new Map,ai=[],q3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y_(e,t){switch(e){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Nc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(t.pointerId)}}function Ol(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=xu(t),t!==null&&Dx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function V3(e,t,r,n,s){switch(t){case"focusin":return mi=Ol(mi,e,t,r,n,s),!0;case"dragenter":return pi=Ol(pi,e,t,r,n,s),!0;case"mouseover":return gi=Ol(gi,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Nc.set(i,Ol(Nc.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Sc.set(i,Ol(Sc.get(i)||null,e,t,r,n,s)),!0}return!1}function tC(e){var t=ea(e.target);if(t!==null){var r=Oa(t);if(r!==null){if(t=r.tag,t===13){if(t=W2(r),t!==null){e.blockedOn=t,eC(e.priority,function(){J2(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);cv=n,r.target.dispatchEvent(n),cv=null}else return t=xu(r),t!==null&&Dx(t),e.blockedOn=r,!1;t.shift()}return!0}function b_(e,t,r){Yd(e)&&r.delete(t)}function G3(){mv=!1,mi!==null&&Yd(mi)&&(mi=null),pi!==null&&Yd(pi)&&(pi=null),gi!==null&&Yd(gi)&&(gi=null),Nc.forEach(b_),Sc.forEach(b_)}function Tl(e,t){e.blockedOn===t&&(e.blockedOn=null,mv||(mv=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,G3)))}function Ec(e){function t(s){return Tl(s,e)}if(0<ad.length){Tl(ad[0],e);for(var r=1;r<ad.length;r++){var n=ad[r];n.blockedOn===e&&(n.blockedOn=null)}}for(mi!==null&&Tl(mi,e),pi!==null&&Tl(pi,e),gi!==null&&Tl(gi,e),Nc.forEach(t),Sc.forEach(t),r=0;r<ai.length;r++)n=ai[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ai.length&&(r=ai[0],r.blockedOn===null);)tC(r),r.blockedOn===null&&ai.shift()}var Eo=Bs.ReactCurrentBatchConfig,gh=!0;function K3(e,t,r,n){var s=Te,i=Eo.transition;Eo.transition=null;try{Te=1,Rx(e,t,r,n)}finally{Te=s,Eo.transition=i}}function Y3(e,t,r,n){var s=Te,i=Eo.transition;Eo.transition=null;try{Te=4,Rx(e,t,r,n)}finally{Te=s,Eo.transition=i}}function Rx(e,t,r,n){if(gh){var s=pv(e,t,r,n);if(s===null)Gp(e,t,n,vh,r),y_(e,n);else if(V3(s,e,t,r,n))n.stopPropagation();else if(y_(e,n),t&4&&-1<q3.indexOf(e)){for(;s!==null;){var i=xu(s);if(i!==null&&Q2(i),i=pv(e,t,r,n),i===null&&Gp(e,t,n,vh,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Gp(e,t,n,null,r)}}var vh=null;function pv(e,t,r,n){if(vh=null,e=Ox(n),e=ea(e),e!==null)if(t=Oa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=W2(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vh=e,null}function rC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M3()){case Tx:return 1;case G2:return 4;case mh:case L3:return 16;case K2:return 536870912;default:return 16}default:return 16}}var ui=null,Mx=null,Xd=null;function nC(){if(Xd)return Xd;var e,t=Mx,r=t.length,n,s="value"in ui?ui.value:ui.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Xd=s.slice(e,1<n?1-n:void 0)}function Qd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function od(){return!0}function w_(){return!1}function nn(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?od:w_,this.isPropagationStopped=w_,this}return lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lx=nn(ll),vu=lt({},ll,{view:0,detail:0}),X3=nn(vu),$p,Fp,Il,em=lt({},vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$x,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Il&&(Il&&e.type==="mousemove"?($p=e.screenX-Il.screenX,Fp=e.screenY-Il.screenY):Fp=$p=0,Il=e),$p)},movementY:function(e){return"movementY"in e?e.movementY:Fp}}),__=nn(em),Q3=lt({},em,{dataTransfer:0}),J3=nn(Q3),Z3=lt({},vu,{relatedTarget:0}),Up=nn(Z3),eM=lt({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),tM=nn(eM),rM=lt({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nM=nn(rM),sM=lt({},ll,{data:0}),j_=nn(sM),iM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oM[e])?!!t[e]:!1}function $x(){return lM}var cM=lt({},vu,{key:function(e){if(e.key){var t=iM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$x,charCode:function(e){return e.type==="keypress"?Qd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uM=nn(cM),dM=lt({},em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N_=nn(dM),hM=lt({},vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$x}),fM=nn(hM),mM=lt({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),pM=nn(mM),gM=lt({},em,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vM=nn(gM),xM=[9,13,27,32],Fx=Ss&&"CompositionEvent"in window,sc=null;Ss&&"documentMode"in document&&(sc=document.documentMode);var yM=Ss&&"TextEvent"in window&&!sc,sC=Ss&&(!Fx||sc&&8<sc&&11>=sc),S_=" ",E_=!1;function iC(e,t){switch(e){case"keyup":return xM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lo=!1;function bM(e,t){switch(e){case"compositionend":return aC(t);case"keypress":return t.which!==32?null:(E_=!0,S_);case"textInput":return e=t.data,e===S_&&E_?null:e;default:return null}}function wM(e,t){if(lo)return e==="compositionend"||!Fx&&iC(e,t)?(e=nC(),Xd=Mx=ui=null,lo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sC&&t.locale!=="ko"?null:t.data;default:return null}}var _M={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_M[e.type]:t==="textarea"}function oC(e,t,r,n){$2(n),t=xh(t,"onChange"),0<t.length&&(r=new Lx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ic=null,Cc=null;function jM(e){xC(e,0)}function tm(e){var t=ho(e);if(O2(t))return e}function NM(e,t){if(e==="change")return t}var lC=!1;if(Ss){var Bp;if(Ss){var zp="oninput"in document;if(!zp){var k_=document.createElement("div");k_.setAttribute("oninput","return;"),zp=typeof k_.oninput=="function"}Bp=zp}else Bp=!1;lC=Bp&&(!document.documentMode||9<document.documentMode)}function A_(){ic&&(ic.detachEvent("onpropertychange",cC),Cc=ic=null)}function cC(e){if(e.propertyName==="value"&&tm(Cc)){var t=[];oC(t,Cc,e,Ox(e)),z2(jM,t)}}function SM(e,t,r){e==="focusin"?(A_(),ic=t,Cc=r,ic.attachEvent("onpropertychange",cC)):e==="focusout"&&A_()}function EM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tm(Cc)}function CM(e,t){if(e==="click")return tm(t)}function kM(e,t){if(e==="input"||e==="change")return tm(t)}function AM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wn=typeof Object.is=="function"?Object.is:AM;function kc(e,t){if(Wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Qg.call(t,s)||!Wn(e[s],t[s]))return!1}return!0}function P_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function O_(e,t){var r=P_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=P_(r)}}function uC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dC(){for(var e=window,t=dh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=dh(e.document)}return t}function Ux(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PM(e){var t=dC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&uC(r.ownerDocument.documentElement,r)){if(n!==null&&Ux(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=O_(r,i);var o=O_(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OM=Ss&&"documentMode"in document&&11>=document.documentMode,co=null,gv=null,ac=null,vv=!1;function T_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vv||co==null||co!==dh(n)||(n=co,"selectionStart"in n&&Ux(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ac&&kc(ac,n)||(ac=n,n=xh(gv,"onSelect"),0<n.length&&(t=new Lx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=co)))}function ld(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var uo={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},Wp={},hC={};Ss&&(hC=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function rm(e){if(Wp[e])return Wp[e];if(!uo[e])return e;var t=uo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hC)return Wp[e]=t[r];return e}var fC=rm("animationend"),mC=rm("animationiteration"),pC=rm("animationstart"),gC=rm("transitionend"),vC=new Map,I_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){vC.set(e,t),Pa(t,[e])}for(var Hp=0;Hp<I_.length;Hp++){var qp=I_[Hp],TM=qp.toLowerCase(),IM=qp[0].toUpperCase()+qp.slice(1);Ii(TM,"on"+IM)}Ii(fC,"onAnimationEnd");Ii(mC,"onAnimationIteration");Ii(pC,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(gC,"onTransitionEnd");Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function D_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,T3(n,t,void 0,e),e.currentTarget=null}function xC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;D_(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;D_(s,l,u),i=c}}}if(fh)throw e=hv,fh=!1,hv=null,e}function Ge(e,t){var r=t[_v];r===void 0&&(r=t[_v]=new Set);var n=e+"__bubble";r.has(n)||(yC(t,e,2,!1),r.add(n))}function Vp(e,t,r){var n=0;t&&(n|=4),yC(r,e,n,t)}var cd="_reactListening"+Math.random().toString(36).slice(2);function Ac(e){if(!e[cd]){e[cd]=!0,E2.forEach(function(r){r!=="selectionchange"&&(DM.has(r)||Vp(r,!1,e),Vp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cd]||(t[cd]=!0,Vp("selectionchange",!1,t))}}function yC(e,t,r,n){switch(rC(t)){case 1:var s=K3;break;case 4:s=Y3;break;default:s=Rx}r=s.bind(null,t,r,e),s=void 0,!dv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Gp(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ea(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}z2(function(){var u=i,d=Ox(r),h=[];e:{var f=vC.get(e);if(f!==void 0){var m=Lx,p=e;switch(e){case"keypress":if(Qd(r)===0)break e;case"keydown":case"keyup":m=uM;break;case"focusin":p="focus",m=Up;break;case"focusout":p="blur",m=Up;break;case"beforeblur":case"afterblur":m=Up;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=__;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=J3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=fM;break;case fC:case mC:case pC:m=tM;break;case gC:m=pM;break;case"scroll":m=X3;break;case"wheel":m=vM;break;case"copy":case"cut":case"paste":m=nM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=N_}var x=(t&4)!==0,g=!x&&e==="scroll",v=x?f!==null?f+"Capture":null:f;x=[];for(var b=u,w;b!==null;){w=b;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=jc(b,v),_!=null&&x.push(Pc(b,_,w)))),g)break;b=b.return}0<x.length&&(f=new m(f,p,null,r,d),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==cv&&(p=r.relatedTarget||r.fromElement)&&(ea(p)||p[Es]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=r.relatedTarget||r.toElement,m=u,p=p?ea(p):null,p!==null&&(g=Oa(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(x=__,_="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=N_,_="onPointerLeave",v="onPointerEnter",b="pointer"),g=m==null?f:ho(m),w=p==null?f:ho(p),f=new x(_,b+"leave",m,r,d),f.target=g,f.relatedTarget=w,_=null,ea(d)===u&&(x=new x(v,b+"enter",p,r,d),x.target=w,x.relatedTarget=g,_=x),g=_,m&&p)t:{for(x=m,v=p,b=0,w=x;w;w=qa(w))b++;for(w=0,_=v;_;_=qa(_))w++;for(;0<b-w;)x=qa(x),b--;for(;0<w-b;)v=qa(v),w--;for(;b--;){if(x===v||v!==null&&x===v.alternate)break t;x=qa(x),v=qa(v)}x=null}else x=null;m!==null&&R_(h,f,m,x,!1),p!==null&&g!==null&&R_(h,g,p,x,!0)}}e:{if(f=u?ho(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=NM;else if(C_(f))if(lC)j=kM;else{j=EM;var N=SM}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=CM);if(j&&(j=j(e,u))){oC(h,j,r,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&sv(f,"number",f.value)}switch(N=u?ho(u):window,e){case"focusin":(C_(N)||N.contentEditable==="true")&&(co=N,gv=u,ac=null);break;case"focusout":ac=gv=co=null;break;case"mousedown":vv=!0;break;case"contextmenu":case"mouseup":case"dragend":vv=!1,T_(h,r,d);break;case"selectionchange":if(OM)break;case"keydown":case"keyup":T_(h,r,d)}var C;if(Fx)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else lo?iC(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(sC&&r.locale!=="ko"&&(lo||I!=="onCompositionStart"?I==="onCompositionEnd"&&lo&&(C=nC()):(ui=d,Mx="value"in ui?ui.value:ui.textContent,lo=!0)),N=xh(u,I),0<N.length&&(I=new j_(I,e,null,r,d),h.push({event:I,listeners:N}),C?I.data=C:(C=aC(r),C!==null&&(I.data=C)))),(C=yM?bM(e,r):wM(e,r))&&(u=xh(u,"onBeforeInput"),0<u.length&&(d=new j_("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=C))}xC(h,t)})}function Pc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xh(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jc(e,r),i!=null&&n.unshift(Pc(e,i,s)),i=jc(e,t),i!=null&&n.push(Pc(e,i,s))),e=e.return}return n}function qa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function R_(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=jc(r,i),c!=null&&o.unshift(Pc(r,c,l))):s||(c=jc(r,i),c!=null&&o.push(Pc(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var RM=/\r\n?/g,MM=/\u0000|\uFFFD/g;function M_(e){return(typeof e=="string"?e:""+e).replace(RM,`
`).replace(MM,"")}function ud(e,t,r){if(t=M_(t),M_(e)!==t&&r)throw Error(W(425))}function yh(){}var xv=null,yv=null;function bv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wv=typeof setTimeout=="function"?setTimeout:void 0,LM=typeof clearTimeout=="function"?clearTimeout:void 0,L_=typeof Promise=="function"?Promise:void 0,$M=typeof queueMicrotask=="function"?queueMicrotask:typeof L_<"u"?function(e){return L_.resolve(null).then(e).catch(FM)}:wv;function FM(e){setTimeout(function(){throw e})}function Kp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Ec(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ec(t)}function vi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cl=Math.random().toString(36).slice(2),Jn="__reactFiber$"+cl,Oc="__reactProps$"+cl,Es="__reactContainer$"+cl,_v="__reactEvents$"+cl,UM="__reactListeners$"+cl,BM="__reactHandles$"+cl;function ea(e){var t=e[Jn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Es]||r[Jn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$_(e);e!==null;){if(r=e[Jn])return r;e=$_(e)}return t}e=r,r=e.parentNode}return null}function xu(e){return e=e[Jn]||e[Es],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ho(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function nm(e){return e[Oc]||null}var jv=[],fo=-1;function Di(e){return{current:e}}function Ye(e){0>fo||(e.current=jv[fo],jv[fo]=null,fo--)}function Ve(e,t){fo++,jv[fo]=e.current,e.current=t}var ki={},pr=Di(ki),Mr=Di(!1),pa=ki;function Mo(e,t){var r=e.type.contextTypes;if(!r)return ki;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Lr(e){return e=e.childContextTypes,e!=null}function bh(){Ye(Mr),Ye(pr)}function F_(e,t,r){if(pr.current!==ki)throw Error(W(168));Ve(pr,t),Ve(Mr,r)}function bC(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(W(108,S3(e)||"Unknown",s));return lt({},r,n)}function wh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,pa=pr.current,Ve(pr,e),Ve(Mr,Mr.current),!0}function U_(e,t,r){var n=e.stateNode;if(!n)throw Error(W(169));r?(e=bC(e,t,pa),n.__reactInternalMemoizedMergedChildContext=e,Ye(Mr),Ye(pr),Ve(pr,e)):Ye(Mr),Ve(Mr,r)}var hs=null,sm=!1,Yp=!1;function wC(e){hs===null?hs=[e]:hs.push(e)}function zM(e){sm=!0,wC(e)}function Ri(){if(!Yp&&hs!==null){Yp=!0;var e=0,t=Te;try{var r=hs;for(Te=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}hs=null,sm=!1}catch(s){throw hs!==null&&(hs=hs.slice(e+1)),V2(Tx,Ri),s}finally{Te=t,Yp=!1}}return null}var mo=[],po=0,_h=null,jh=0,dn=[],hn=0,ga=null,gs=1,vs="";function Wi(e,t){mo[po++]=jh,mo[po++]=_h,_h=e,jh=t}function _C(e,t,r){dn[hn++]=gs,dn[hn++]=vs,dn[hn++]=ga,ga=e;var n=gs;e=vs;var s=32-Fn(n)-1;n&=~(1<<s),r+=1;var i=32-Fn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,gs=1<<32-Fn(t)+s|r<<s|n,vs=i+e}else gs=1<<i|r<<s|n,vs=e}function Bx(e){e.return!==null&&(Wi(e,1),_C(e,1,0))}function zx(e){for(;e===_h;)_h=mo[--po],mo[po]=null,jh=mo[--po],mo[po]=null;for(;e===ga;)ga=dn[--hn],dn[hn]=null,vs=dn[--hn],dn[hn]=null,gs=dn[--hn],dn[hn]=null}var Jr=null,Xr=null,rt=!1,Tn=null;function jC(e,t){var r=fn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function B_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jr=e,Xr=vi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jr=e,Xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ga!==null?{id:gs,overflow:vs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jr=e,Xr=null,!0):!1;default:return!1}}function Nv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sv(e){if(rt){var t=Xr;if(t){var r=t;if(!B_(e,t)){if(Nv(e))throw Error(W(418));t=vi(r.nextSibling);var n=Jr;t&&B_(e,t)?jC(n,r):(e.flags=e.flags&-4097|2,rt=!1,Jr=e)}}else{if(Nv(e))throw Error(W(418));e.flags=e.flags&-4097|2,rt=!1,Jr=e}}}function z_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jr=e}function dd(e){if(e!==Jr)return!1;if(!rt)return z_(e),rt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bv(e.type,e.memoizedProps)),t&&(t=Xr)){if(Nv(e))throw NC(),Error(W(418));for(;t;)jC(e,t),t=vi(t.nextSibling)}if(z_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xr=vi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xr=null}}else Xr=Jr?vi(e.stateNode.nextSibling):null;return!0}function NC(){for(var e=Xr;e;)e=vi(e.nextSibling)}function Lo(){Xr=Jr=null,rt=!1}function Wx(e){Tn===null?Tn=[e]:Tn.push(e)}var WM=Bs.ReactCurrentBatchConfig;function Dl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var n=r.stateNode}if(!n)throw Error(W(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,e))}return e}function hd(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function W_(e){var t=e._init;return t(e._payload)}function SC(e){function t(v,b){if(e){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=wi(v,b),v.index=0,v.sibling=null,v}function i(v,b,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,w,_){return b===null||b.tag!==6?(b=rg(w,v.mode,_),b.return=v,b):(b=s(b,w),b.return=v,b)}function c(v,b,w,_){var j=w.type;return j===oo?d(v,b,w.props.children,_,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ri&&W_(j)===b.type)?(_=s(b,w.props),_.ref=Dl(v,b,w),_.return=v,_):(_=sh(w.type,w.key,w.props,null,v.mode,_),_.ref=Dl(v,b,w),_.return=v,_)}function u(v,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=ng(w,v.mode,_),b.return=v,b):(b=s(b,w.children||[]),b.return=v,b)}function d(v,b,w,_,j){return b===null||b.tag!==7?(b=da(w,v.mode,_,j),b.return=v,b):(b=s(b,w),b.return=v,b)}function h(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=rg(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case td:return w=sh(b.type,b.key,b.props,null,v.mode,w),w.ref=Dl(v,null,b),w.return=v,w;case ao:return b=ng(b,v.mode,w),b.return=v,b;case ri:var _=b._init;return h(v,_(b._payload),w)}if(Xl(b)||Al(b))return b=da(b,v.mode,w,null),b.return=v,b;hd(v,b)}return null}function f(v,b,w,_){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case td:return w.key===j?c(v,b,w,_):null;case ao:return w.key===j?u(v,b,w,_):null;case ri:return j=w._init,f(v,b,j(w._payload),_)}if(Xl(w)||Al(w))return j!==null?null:d(v,b,w,_,null);hd(v,w)}return null}function m(v,b,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(b,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case td:return v=v.get(_.key===null?w:_.key)||null,c(b,v,_,j);case ao:return v=v.get(_.key===null?w:_.key)||null,u(b,v,_,j);case ri:var N=_._init;return m(v,b,w,N(_._payload),j)}if(Xl(_)||Al(_))return v=v.get(w)||null,d(b,v,_,j,null);hd(b,_)}return null}function p(v,b,w,_){for(var j=null,N=null,C=b,I=b=0,E=null;C!==null&&I<w.length;I++){C.index>I?(E=C,C=null):E=C.sibling;var D=f(v,C,w[I],_);if(D===null){C===null&&(C=E);break}e&&C&&D.alternate===null&&t(v,C),b=i(D,b,I),N===null?j=D:N.sibling=D,N=D,C=E}if(I===w.length)return r(v,C),rt&&Wi(v,I),j;if(C===null){for(;I<w.length;I++)C=h(v,w[I],_),C!==null&&(b=i(C,b,I),N===null?j=C:N.sibling=C,N=C);return rt&&Wi(v,I),j}for(C=n(v,C);I<w.length;I++)E=m(C,v,I,w[I],_),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?I:E.key),b=i(E,b,I),N===null?j=E:N.sibling=E,N=E);return e&&C.forEach(function(O){return t(v,O)}),rt&&Wi(v,I),j}function x(v,b,w,_){var j=Al(w);if(typeof j!="function")throw Error(W(150));if(w=j.call(w),w==null)throw Error(W(151));for(var N=j=null,C=b,I=b=0,E=null,D=w.next();C!==null&&!D.done;I++,D=w.next()){C.index>I?(E=C,C=null):E=C.sibling;var O=f(v,C,D.value,_);if(O===null){C===null&&(C=E);break}e&&C&&O.alternate===null&&t(v,C),b=i(O,b,I),N===null?j=O:N.sibling=O,N=O,C=E}if(D.done)return r(v,C),rt&&Wi(v,I),j;if(C===null){for(;!D.done;I++,D=w.next())D=h(v,D.value,_),D!==null&&(b=i(D,b,I),N===null?j=D:N.sibling=D,N=D);return rt&&Wi(v,I),j}for(C=n(v,C);!D.done;I++,D=w.next())D=m(C,v,I,D.value,_),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?I:D.key),b=i(D,b,I),N===null?j=D:N.sibling=D,N=D);return e&&C.forEach(function(k){return t(v,k)}),rt&&Wi(v,I),j}function g(v,b,w,_){if(typeof w=="object"&&w!==null&&w.type===oo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case td:e:{for(var j=w.key,N=b;N!==null;){if(N.key===j){if(j=w.type,j===oo){if(N.tag===7){r(v,N.sibling),b=s(N,w.props.children),b.return=v,v=b;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ri&&W_(j)===N.type){r(v,N.sibling),b=s(N,w.props),b.ref=Dl(v,N,w),b.return=v,v=b;break e}r(v,N);break}else t(v,N);N=N.sibling}w.type===oo?(b=da(w.props.children,v.mode,_,w.key),b.return=v,v=b):(_=sh(w.type,w.key,w.props,null,v.mode,_),_.ref=Dl(v,b,w),_.return=v,v=_)}return o(v);case ao:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=s(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=ng(w,v.mode,_),b.return=v,v=b}return o(v);case ri:return N=w._init,g(v,b,N(w._payload),_)}if(Xl(w))return p(v,b,w,_);if(Al(w))return x(v,b,w,_);hd(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=s(b,w),b.return=v,v=b):(r(v,b),b=rg(w,v.mode,_),b.return=v,v=b),o(v)):r(v,b)}return g}var $o=SC(!0),EC=SC(!1),Nh=Di(null),Sh=null,go=null,Hx=null;function qx(){Hx=go=Sh=null}function Vx(e){var t=Nh.current;Ye(Nh),e._currentValue=t}function Ev(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Co(e,t){Sh=e,Hx=go=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tr=!0),e.firstContext=null)}function vn(e){var t=e._currentValue;if(Hx!==e)if(e={context:e,memoizedValue:t,next:null},go===null){if(Sh===null)throw Error(W(308));go=e,Sh.dependencies={lanes:0,firstContext:e}}else go=go.next=e;return t}var ta=null;function Gx(e){ta===null?ta=[e]:ta.push(e)}function CC(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Gx(t)):(r.next=s.next,s.next=r),t.interleaved=r,Cs(e,n)}function Cs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ni=!1;function Kx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ws(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ee&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Cs(e,r)}return s=n.interleaved,s===null?(t.next=t,Gx(n)):(t.next=s.next,s.next=t),n.interleaved=t,Cs(e,r)}function Jd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ix(e,r)}}function H_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Eh(e,t,r,n){var s=e.updateQueue;ni=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(f=t,m=r,x.tag){case 1:if(p=x.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=lt({},h,f);break e;case 2:ni=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);xa|=o,e.lanes=o,e.memoizedState=h}}function q_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(W(191,s));s.call(n)}}}var yu={},ts=Di(yu),Tc=Di(yu),Ic=Di(yu);function ra(e){if(e===yu)throw Error(W(174));return e}function Yx(e,t){switch(Ve(Ic,t),Ve(Tc,e),Ve(ts,yu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:av(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=av(t,e)}Ye(ts),Ve(ts,t)}function Fo(){Ye(ts),Ye(Tc),Ye(Ic)}function AC(e){ra(Ic.current);var t=ra(ts.current),r=av(t,e.type);t!==r&&(Ve(Tc,e),Ve(ts,r))}function Xx(e){Tc.current===e&&(Ye(ts),Ye(Tc))}var it=Di(0);function Ch(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xp=[];function Qx(){for(var e=0;e<Xp.length;e++)Xp[e]._workInProgressVersionPrimary=null;Xp.length=0}var Zd=Bs.ReactCurrentDispatcher,Qp=Bs.ReactCurrentBatchConfig,va=0,ot=null,kt=null,Bt=null,kh=!1,oc=!1,Dc=0,HM=0;function lr(){throw Error(W(321))}function Jx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Wn(e[r],t[r]))return!1;return!0}function Zx(e,t,r,n,s,i){if(va=i,ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zd.current=e===null||e.memoizedState===null?KM:YM,e=r(n,s),oc){i=0;do{if(oc=!1,Dc=0,25<=i)throw Error(W(301));i+=1,Bt=kt=null,t.updateQueue=null,Zd.current=XM,e=r(n,s)}while(oc)}if(Zd.current=Ah,t=kt!==null&&kt.next!==null,va=0,Bt=kt=ot=null,kh=!1,t)throw Error(W(300));return e}function ey(){var e=Dc!==0;return Dc=0,e}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ot.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function xn(){if(kt===null){var e=ot.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var t=Bt===null?ot.memoizedState:Bt.next;if(t!==null)Bt=t,kt=e;else{if(e===null)throw Error(W(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Bt===null?ot.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function Rc(e,t){return typeof t=="function"?t(e):t}function Jp(e){var t=xn(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=kt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((va&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,ot.lanes|=d,xa|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Wn(n,t.memoizedState)||(Tr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ot.lanes|=i,xa|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Zp(e){var t=xn(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Wn(i,t.memoizedState)||(Tr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function PC(){}function OC(e,t){var r=ot,n=xn(),s=t(),i=!Wn(n.memoizedState,s);if(i&&(n.memoizedState=s,Tr=!0),n=n.queue,ty(DC.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Bt!==null&&Bt.memoizedState.tag&1){if(r.flags|=2048,Mc(9,IC.bind(null,r,n,s,t),void 0,null),qt===null)throw Error(W(349));va&30||TC(r,t,s)}return s}function TC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ot.updateQueue,t===null?(t={lastEffect:null,stores:null},ot.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function IC(e,t,r,n){t.value=r,t.getSnapshot=n,RC(t)&&MC(e)}function DC(e,t,r){return r(function(){RC(t)&&MC(e)})}function RC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Wn(e,r)}catch{return!0}}function MC(e){var t=Cs(e,1);t!==null&&Un(t,e,1,-1)}function V_(e){var t=Qn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rc,lastRenderedState:e},t.queue=e,e=e.dispatch=GM.bind(null,ot,e),[t.memoizedState,e]}function Mc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ot.updateQueue,t===null?(t={lastEffect:null,stores:null},ot.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function LC(){return xn().memoizedState}function eh(e,t,r,n){var s=Qn();ot.flags|=e,s.memoizedState=Mc(1|t,r,void 0,n===void 0?null:n)}function im(e,t,r,n){var s=xn();n=n===void 0?null:n;var i=void 0;if(kt!==null){var o=kt.memoizedState;if(i=o.destroy,n!==null&&Jx(n,o.deps)){s.memoizedState=Mc(t,r,i,n);return}}ot.flags|=e,s.memoizedState=Mc(1|t,r,i,n)}function G_(e,t){return eh(8390656,8,e,t)}function ty(e,t){return im(2048,8,e,t)}function $C(e,t){return im(4,2,e,t)}function FC(e,t){return im(4,4,e,t)}function UC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function BC(e,t,r){return r=r!=null?r.concat([e]):null,im(4,4,UC.bind(null,t,e),r)}function ry(){}function zC(e,t){var r=xn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function WC(e,t){var r=xn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function HC(e,t,r){return va&21?(Wn(r,t)||(r=Y2(),ot.lanes|=r,xa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tr=!0),e.memoizedState=r)}function qM(e,t){var r=Te;Te=r!==0&&4>r?r:4,e(!0);var n=Qp.transition;Qp.transition={};try{e(!1),t()}finally{Te=r,Qp.transition=n}}function qC(){return xn().memoizedState}function VM(e,t,r){var n=bi(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},VC(e))GC(t,r);else if(r=CC(e,t,r,n),r!==null){var s=_r();Un(r,e,n,s),KC(r,t,n)}}function GM(e,t,r){var n=bi(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(VC(e))GC(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Wn(l,o)){var c=t.interleaved;c===null?(s.next=s,Gx(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=CC(e,t,s,n),r!==null&&(s=_r(),Un(r,e,n,s),KC(r,t,n))}}function VC(e){var t=e.alternate;return e===ot||t!==null&&t===ot}function GC(e,t){oc=kh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function KC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ix(e,r)}}var Ah={readContext:vn,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},KM={readContext:vn,useCallback:function(e,t){return Qn().memoizedState=[e,t===void 0?null:t],e},useContext:vn,useEffect:G_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,eh(4194308,4,UC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return eh(4194308,4,e,t)},useInsertionEffect:function(e,t){return eh(4,2,e,t)},useMemo:function(e,t){var r=Qn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Qn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=VM.bind(null,ot,e),[n.memoizedState,e]},useRef:function(e){var t=Qn();return e={current:e},t.memoizedState=e},useState:V_,useDebugValue:ry,useDeferredValue:function(e){return Qn().memoizedState=e},useTransition:function(){var e=V_(!1),t=e[0];return e=qM.bind(null,e[1]),Qn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ot,s=Qn();if(rt){if(r===void 0)throw Error(W(407));r=r()}else{if(r=t(),qt===null)throw Error(W(349));va&30||TC(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,G_(DC.bind(null,n,i,e),[e]),n.flags|=2048,Mc(9,IC.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Qn(),t=qt.identifierPrefix;if(rt){var r=vs,n=gs;r=(n&~(1<<32-Fn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Dc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=HM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},YM={readContext:vn,useCallback:zC,useContext:vn,useEffect:ty,useImperativeHandle:BC,useInsertionEffect:$C,useLayoutEffect:FC,useMemo:WC,useReducer:Jp,useRef:LC,useState:function(){return Jp(Rc)},useDebugValue:ry,useDeferredValue:function(e){var t=xn();return HC(t,kt.memoizedState,e)},useTransition:function(){var e=Jp(Rc)[0],t=xn().memoizedState;return[e,t]},useMutableSource:PC,useSyncExternalStore:OC,useId:qC,unstable_isNewReconciler:!1},XM={readContext:vn,useCallback:zC,useContext:vn,useEffect:ty,useImperativeHandle:BC,useInsertionEffect:$C,useLayoutEffect:FC,useMemo:WC,useReducer:Zp,useRef:LC,useState:function(){return Zp(Rc)},useDebugValue:ry,useDeferredValue:function(e){var t=xn();return kt===null?t.memoizedState=e:HC(t,kt.memoizedState,e)},useTransition:function(){var e=Zp(Rc)[0],t=xn().memoizedState;return[e,t]},useMutableSource:PC,useSyncExternalStore:OC,useId:qC,unstable_isNewReconciler:!1};function An(e,t){if(e&&e.defaultProps){t=lt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Cv(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:lt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var am={isMounted:function(e){return(e=e._reactInternals)?Oa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_r(),s=bi(e),i=ws(n,s);i.payload=t,r!=null&&(i.callback=r),t=xi(e,i,s),t!==null&&(Un(t,e,s,n),Jd(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_r(),s=bi(e),i=ws(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=xi(e,i,s),t!==null&&(Un(t,e,s,n),Jd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_r(),n=bi(e),s=ws(r,n);s.tag=2,t!=null&&(s.callback=t),t=xi(e,s,n),t!==null&&(Un(t,e,n,r),Jd(t,e,n))}};function K_(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!kc(r,n)||!kc(s,i):!0}function YC(e,t,r){var n=!1,s=ki,i=t.contextType;return typeof i=="object"&&i!==null?i=vn(i):(s=Lr(t)?pa:pr.current,n=t.contextTypes,i=(n=n!=null)?Mo(e,s):ki),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=am,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Y_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&am.enqueueReplaceState(t,t.state,null)}function kv(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Kx(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=vn(i):(i=Lr(t)?pa:pr.current,s.context=Mo(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Cv(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&am.enqueueReplaceState(s,s.state,null),Eh(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Uo(e,t){try{var r="",n=t;do r+=N3(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function eg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Av(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var QM=typeof WeakMap=="function"?WeakMap:Map;function XC(e,t,r){r=ws(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Oh||(Oh=!0,Fv=n),Av(e,t)},r}function QC(e,t,r){r=ws(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Av(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Av(e,t),typeof n!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function X_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new QM;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=d5.bind(null,e,t,r),t.then(e,e))}function Q_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function J_(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ws(-1,1),t.tag=2,xi(r,t,1))),r.lanes|=1),e)}var JM=Bs.ReactCurrentOwner,Tr=!1;function gr(e,t,r,n){t.child=e===null?EC(t,null,r,n):$o(t,e.child,r,n)}function Z_(e,t,r,n,s){r=r.render;var i=t.ref;return Co(t,s),n=Zx(e,t,r,n,i,s),r=ey(),e!==null&&!Tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ks(e,t,s)):(rt&&r&&Bx(t),t.flags|=1,gr(e,t,n,s),t.child)}function ej(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!uy(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,JC(e,t,i,n,s)):(e=sh(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:kc,r(o,n)&&e.ref===t.ref)return ks(e,t,s)}return t.flags|=1,e=wi(i,n),e.ref=t.ref,e.return=t,t.child=e}function JC(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(kc(i,n)&&e.ref===t.ref)if(Tr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Tr=!0);else return t.lanes=e.lanes,ks(e,t,s)}return Pv(e,t,r,n,s)}function ZC(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(xo,qr),qr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(xo,qr),qr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ve(xo,qr),qr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ve(xo,qr),qr|=n;return gr(e,t,s,r),t.child}function ek(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Pv(e,t,r,n,s){var i=Lr(r)?pa:pr.current;return i=Mo(t,i),Co(t,s),r=Zx(e,t,r,n,i,s),n=ey(),e!==null&&!Tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ks(e,t,s)):(rt&&n&&Bx(t),t.flags|=1,gr(e,t,r,s),t.child)}function tj(e,t,r,n,s){if(Lr(r)){var i=!0;wh(t)}else i=!1;if(Co(t,s),t.stateNode===null)th(e,t),YC(t,r,n),kv(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=vn(u):(u=Lr(r)?pa:pr.current,u=Mo(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Y_(t,o,n,u),ni=!1;var f=t.memoizedState;o.state=f,Eh(t,n,o,s),c=t.memoizedState,l!==n||f!==c||Mr.current||ni?(typeof d=="function"&&(Cv(t,r,d,n),c=t.memoizedState),(l=ni||K_(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,kC(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:An(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=vn(c):(c=Lr(r)?pa:pr.current,c=Mo(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Y_(t,o,n,c),ni=!1,f=t.memoizedState,o.state=f,Eh(t,n,o,s);var p=t.memoizedState;l!==h||f!==p||Mr.current||ni?(typeof m=="function"&&(Cv(t,r,m,n),p=t.memoizedState),(u=ni||K_(t,r,u,n,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Ov(e,t,r,n,i,s)}function Ov(e,t,r,n,s,i){ek(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&U_(t,r,!1),ks(e,t,i);n=t.stateNode,JM.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=$o(t,e.child,null,i),t.child=$o(t,null,l,i)):gr(e,t,l,i),t.memoizedState=n.state,s&&U_(t,r,!0),t.child}function tk(e){var t=e.stateNode;t.pendingContext?F_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&F_(e,t.context,!1),Yx(e,t.containerInfo)}function rj(e,t,r,n,s){return Lo(),Wx(s),t.flags|=256,gr(e,t,r,n),t.child}var Tv={dehydrated:null,treeContext:null,retryLane:0};function Iv(e){return{baseLanes:e,cachePool:null,transitions:null}}function rk(e,t,r){var n=t.pendingProps,s=it.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ve(it,s&1),e===null)return Sv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cm(o,n,0,null),e=da(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Iv(r),t.memoizedState=Tv,e):ny(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ZM(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wi(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=wi(l,i):(i=da(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Iv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Tv,n}return i=e.child,e=i.sibling,n=wi(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ny(e,t){return t=cm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fd(e,t,r,n){return n!==null&&Wx(n),$o(t,e.child,null,r),e=ny(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ZM(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=eg(Error(W(422))),fd(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=cm({mode:"visible",children:n.children},s,0,null),i=da(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&$o(t,e.child,null,o),t.child.memoizedState=Iv(o),t.memoizedState=Tv,i);if(!(t.mode&1))return fd(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(W(419)),n=eg(i,n,void 0),fd(e,t,o,n)}if(l=(o&e.childLanes)!==0,Tr||l){if(n=qt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Cs(e,s),Un(n,e,s,-1))}return cy(),n=eg(Error(W(421))),fd(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=h5.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Xr=vi(s.nextSibling),Jr=t,rt=!0,Tn=null,e!==null&&(dn[hn++]=gs,dn[hn++]=vs,dn[hn++]=ga,gs=e.id,vs=e.overflow,ga=t),t=ny(t,n.children),t.flags|=4096,t)}function nj(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ev(e.return,t,r)}function tg(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function nk(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(gr(e,t,n.children,r),n=it.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nj(e,r,t);else if(e.tag===19)nj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ve(it,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ch(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),tg(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ch(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}tg(t,!0,r,null,i);break;case"together":tg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function th(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ks(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),xa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,r=wi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function e5(e,t,r){switch(t.tag){case 3:tk(t),Lo();break;case 5:AC(t);break;case 1:Lr(t.type)&&wh(t);break;case 4:Yx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ve(Nh,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ve(it,it.current&1),t.flags|=128,null):r&t.child.childLanes?rk(e,t,r):(Ve(it,it.current&1),e=ks(e,t,r),e!==null?e.sibling:null);Ve(it,it.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return nk(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ve(it,it.current),n)break;return null;case 22:case 23:return t.lanes=0,ZC(e,t,r)}return ks(e,t,r)}var sk,Dv,ik,ak;sk=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dv=function(){};ik=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ra(ts.current);var i=null;switch(r){case"input":s=rv(e,s),n=rv(e,n),i=[];break;case"select":s=lt({},s,{value:void 0}),n=lt({},n,{value:void 0}),i=[];break;case"textarea":s=iv(e,s),n=iv(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yh)}ov(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ge("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};ak=function(e,t,r,n){r!==n&&(t.flags|=4)};function Rl(e,t){if(!rt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function t5(e,t,r){var n=t.pendingProps;switch(zx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(t),null;case 1:return Lr(t.type)&&bh(),cr(t),null;case 3:return n=t.stateNode,Fo(),Ye(Mr),Ye(pr),Qx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(dd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tn!==null&&(zv(Tn),Tn=null))),Dv(e,t),cr(t),null;case 5:Xx(t);var s=ra(Ic.current);if(r=t.type,e!==null&&t.stateNode!=null)ik(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(W(166));return cr(t),null}if(e=ra(ts.current),dd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Jn]=t,n[Oc]=i,e=(t.mode&1)!==0,r){case"dialog":Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":case"embed":Ge("load",n);break;case"video":case"audio":for(s=0;s<Jl.length;s++)Ge(Jl[s],n);break;case"source":Ge("error",n);break;case"img":case"image":case"link":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"input":h_(n,i),Ge("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",n);break;case"textarea":m_(n,i),Ge("invalid",n)}ov(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ud(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ud(n.textContent,l,e),s=["children",""+l]):wc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ge("scroll",n)}switch(r){case"input":rd(n),f_(n,i,!0);break;case"textarea":rd(n),p_(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yh)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=D2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Jn]=t,e[Oc]=n,sk(e,t,!1,!1),t.stateNode=e;e:{switch(o=lv(r,n),r){case"dialog":Ge("cancel",e),Ge("close",e),s=n;break;case"iframe":case"object":case"embed":Ge("load",e),s=n;break;case"video":case"audio":for(s=0;s<Jl.length;s++)Ge(Jl[s],e);s=n;break;case"source":Ge("error",e),s=n;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),s=n;break;case"details":Ge("toggle",e),s=n;break;case"input":h_(e,n),s=rv(e,n),Ge("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=lt({},n,{value:void 0}),Ge("invalid",e);break;case"textarea":m_(e,n),s=iv(e,n),Ge("invalid",e);break;default:s=n}ov(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?L2(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&R2(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_c(e,c):typeof c=="number"&&_c(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",e):c!=null&&Cx(e,i,c,o))}switch(r){case"input":rd(e),f_(e,n,!1);break;case"textarea":rd(e),p_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ci(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?jo(e,!!n.multiple,i,!1):n.defaultValue!=null&&jo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cr(t),null;case 6:if(e&&t.stateNode!=null)ak(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(W(166));if(r=ra(Ic.current),ra(ts.current),dd(t)){if(n=t.stateNode,r=t.memoizedProps,n[Jn]=t,(i=n.nodeValue!==r)&&(e=Jr,e!==null))switch(e.tag){case 3:ud(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ud(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Jn]=t,t.stateNode=n}return cr(t),null;case 13:if(Ye(it),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rt&&Xr!==null&&t.mode&1&&!(t.flags&128))NC(),Lo(),t.flags|=98560,i=!1;else if(i=dd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(W(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Jn]=t}else Lo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cr(t),i=!1}else Tn!==null&&(zv(Tn),Tn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||it.current&1?Tt===0&&(Tt=3):cy())),t.updateQueue!==null&&(t.flags|=4),cr(t),null);case 4:return Fo(),Dv(e,t),e===null&&Ac(t.stateNode.containerInfo),cr(t),null;case 10:return Vx(t.type._context),cr(t),null;case 17:return Lr(t.type)&&bh(),cr(t),null;case 19:if(Ye(it),i=t.memoizedState,i===null)return cr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Rl(i,!1);else{if(Tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ch(e),o!==null){for(t.flags|=128,Rl(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ve(it,it.current&1|2),t.child}e=e.sibling}i.tail!==null&&yt()>Bo&&(t.flags|=128,n=!0,Rl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ch(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Rl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return cr(t),null}else 2*yt()-i.renderingStartTime>Bo&&r!==1073741824&&(t.flags|=128,n=!0,Rl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=yt(),t.sibling=null,r=it.current,Ve(it,n?r&1|2:r&1),t):(cr(t),null);case 22:case 23:return ly(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?qr&1073741824&&(cr(t),t.subtreeFlags&6&&(t.flags|=8192)):cr(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function r5(e,t){switch(zx(t),t.tag){case 1:return Lr(t.type)&&bh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fo(),Ye(Mr),Ye(pr),Qx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xx(t),null;case 13:if(Ye(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));Lo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ye(it),null;case 4:return Fo(),null;case 10:return Vx(t.type._context),null;case 22:case 23:return ly(),null;case 24:return null;default:return null}}var md=!1,dr=!1,n5=typeof WeakSet=="function"?WeakSet:Set,Z=null;function vo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ft(e,t,n)}else r.current=null}function Rv(e,t,r){try{r()}catch(n){ft(e,t,n)}}var sj=!1;function s5(e,t){if(xv=gh,e=dC(),Ux(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(yv={focusedElem:e,selectionRange:r},gh=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,g=p.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:An(t.type,x),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(_){ft(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return p=sj,sj=!1,p}function lc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rv(t,r,i)}s=s.next}while(s!==n)}}function om(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Mv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ok(e){var t=e.alternate;t!==null&&(e.alternate=null,ok(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jn],delete t[Oc],delete t[_v],delete t[UM],delete t[BM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lk(e){return e.tag===5||e.tag===3||e.tag===4}function ij(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yh));else if(n!==4&&(e=e.child,e!==null))for(Lv(e,t,r),e=e.sibling;e!==null;)Lv(e,t,r),e=e.sibling}function $v(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for($v(e,t,r),e=e.sibling;e!==null;)$v(e,t,r),e=e.sibling}var Qt=null,On=!1;function ei(e,t,r){for(r=r.child;r!==null;)ck(e,t,r),r=r.sibling}function ck(e,t,r){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Zf,r)}catch{}switch(r.tag){case 5:dr||vo(r,t);case 6:var n=Qt,s=On;Qt=null,ei(e,t,r),Qt=n,On=s,Qt!==null&&(On?(e=Qt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Qt.removeChild(r.stateNode));break;case 18:Qt!==null&&(On?(e=Qt,r=r.stateNode,e.nodeType===8?Kp(e.parentNode,r):e.nodeType===1&&Kp(e,r),Ec(e)):Kp(Qt,r.stateNode));break;case 4:n=Qt,s=On,Qt=r.stateNode.containerInfo,On=!0,ei(e,t,r),Qt=n,On=s;break;case 0:case 11:case 14:case 15:if(!dr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rv(r,t,o),s=s.next}while(s!==n)}ei(e,t,r);break;case 1:if(!dr&&(vo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ft(r,t,l)}ei(e,t,r);break;case 21:ei(e,t,r);break;case 22:r.mode&1?(dr=(n=dr)||r.memoizedState!==null,ei(e,t,r),dr=n):ei(e,t,r);break;default:ei(e,t,r)}}function aj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new n5),t.forEach(function(n){var s=f5.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Cn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qt=l.stateNode,On=!1;break e;case 3:Qt=l.stateNode.containerInfo,On=!0;break e;case 4:Qt=l.stateNode.containerInfo,On=!0;break e}l=l.return}if(Qt===null)throw Error(W(160));ck(i,o,s),Qt=null,On=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uk(t,e),t=t.sibling}function uk(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cn(t,e),Yn(e),n&4){try{lc(3,e,e.return),om(3,e)}catch(x){ft(e,e.return,x)}try{lc(5,e,e.return)}catch(x){ft(e,e.return,x)}}break;case 1:Cn(t,e),Yn(e),n&512&&r!==null&&vo(r,r.return);break;case 5:if(Cn(t,e),Yn(e),n&512&&r!==null&&vo(r,r.return),e.flags&32){var s=e.stateNode;try{_c(s,"")}catch(x){ft(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&T2(s,i),lv(l,o);var u=lv(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?L2(s,h):d==="dangerouslySetInnerHTML"?R2(s,h):d==="children"?_c(s,h):Cx(s,d,h,u)}switch(l){case"input":nv(s,i);break;case"textarea":I2(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?jo(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?jo(s,!!i.multiple,i.defaultValue,!0):jo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oc]=i}catch(x){ft(e,e.return,x)}}break;case 6:if(Cn(t,e),Yn(e),n&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){ft(e,e.return,x)}}break;case 3:if(Cn(t,e),Yn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ec(t.containerInfo)}catch(x){ft(e,e.return,x)}break;case 4:Cn(t,e),Yn(e);break;case 13:Cn(t,e),Yn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ay=yt())),n&4&&aj(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(dr=(u=dr)||d,Cn(t,e),dr=u):Cn(t,e),Yn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Z=e,d=e.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,m=f.child,f.tag){case 0:case 11:case 14:case 15:lc(4,f,f.return);break;case 1:vo(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){ft(n,r,x)}}break;case 5:vo(f,f.return);break;case 22:if(f.memoizedState!==null){lj(h);continue}}m!==null?(m.return=f,Z=m):lj(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=M2("display",o))}catch(x){ft(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){ft(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Cn(t,e),Yn(e),n&4&&aj(e);break;case 21:break;default:Cn(t,e),Yn(e)}}function Yn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(lk(r)){var n=r;break e}r=r.return}throw Error(W(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(_c(s,""),n.flags&=-33);var i=ij(e);$v(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ij(e);Lv(e,l,o);break;default:throw Error(W(161))}}catch(c){ft(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function i5(e,t,r){Z=e,dk(e)}function dk(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||md;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||dr;l=md;var u=dr;if(md=o,(dr=c)&&!u)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?cj(s):c!==null?(c.return=o,Z=c):cj(s);for(;i!==null;)Z=i,dk(i),i=i.sibling;Z=s,md=l,dr=u}oj(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):oj(e)}}function oj(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dr||om(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:An(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&q_(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}q_(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ec(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}dr||t.flags&512&&Mv(t)}catch(f){ft(t,t.return,f)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function lj(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function cj(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{om(4,t)}catch(c){ft(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ft(t,s,c)}}var i=t.return;try{Mv(t)}catch(c){ft(t,i,c)}break;case 5:var o=t.return;try{Mv(t)}catch(c){ft(t,o,c)}}}catch(c){ft(t,t.return,c)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var a5=Math.ceil,Ph=Bs.ReactCurrentDispatcher,sy=Bs.ReactCurrentOwner,gn=Bs.ReactCurrentBatchConfig,Ee=0,qt=null,Nt=null,rr=0,qr=0,xo=Di(0),Tt=0,Lc=null,xa=0,lm=0,iy=0,cc=null,Or=null,ay=0,Bo=1/0,us=null,Oh=!1,Fv=null,yi=null,pd=!1,di=null,Th=0,uc=0,Uv=null,rh=-1,nh=0;function _r(){return Ee&6?yt():rh!==-1?rh:rh=yt()}function bi(e){return e.mode&1?Ee&2&&rr!==0?rr&-rr:WM.transition!==null?(nh===0&&(nh=Y2()),nh):(e=Te,e!==0||(e=window.event,e=e===void 0?16:rC(e.type)),e):1}function Un(e,t,r,n){if(50<uc)throw uc=0,Uv=null,Error(W(185));gu(e,r,n),(!(Ee&2)||e!==qt)&&(e===qt&&(!(Ee&2)&&(lm|=r),Tt===4&&oi(e,rr)),$r(e,n),r===1&&Ee===0&&!(t.mode&1)&&(Bo=yt()+500,sm&&Ri()))}function $r(e,t){var r=e.callbackNode;W3(e,t);var n=ph(e,e===qt?rr:0);if(n===0)r!==null&&x_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&x_(r),t===1)e.tag===0?zM(uj.bind(null,e)):wC(uj.bind(null,e)),$M(function(){!(Ee&6)&&Ri()}),r=null;else{switch(X2(n)){case 1:r=Tx;break;case 4:r=G2;break;case 16:r=mh;break;case 536870912:r=K2;break;default:r=mh}r=yk(r,hk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function hk(e,t){if(rh=-1,nh=0,Ee&6)throw Error(W(327));var r=e.callbackNode;if(ko()&&e.callbackNode!==r)return null;var n=ph(e,e===qt?rr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ih(e,n);else{t=n;var s=Ee;Ee|=2;var i=mk();(qt!==e||rr!==t)&&(us=null,Bo=yt()+500,ua(e,t));do try{c5();break}catch(l){fk(e,l)}while(!0);qx(),Ph.current=i,Ee=s,Nt!==null?t=0:(qt=null,rr=0,t=Tt)}if(t!==0){if(t===2&&(s=fv(e),s!==0&&(n=s,t=Bv(e,s))),t===1)throw r=Lc,ua(e,0),oi(e,n),$r(e,yt()),r;if(t===6)oi(e,n);else{if(s=e.current.alternate,!(n&30)&&!o5(s)&&(t=Ih(e,n),t===2&&(i=fv(e),i!==0&&(n=i,t=Bv(e,i))),t===1))throw r=Lc,ua(e,0),oi(e,n),$r(e,yt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(W(345));case 2:Hi(e,Or,us);break;case 3:if(oi(e,n),(n&130023424)===n&&(t=ay+500-yt(),10<t)){if(ph(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){_r(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=wv(Hi.bind(null,e,Or,us),t);break}Hi(e,Or,us);break;case 4:if(oi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Fn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=yt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*a5(n/1960))-n,10<n){e.timeoutHandle=wv(Hi.bind(null,e,Or,us),n);break}Hi(e,Or,us);break;case 5:Hi(e,Or,us);break;default:throw Error(W(329))}}}return $r(e,yt()),e.callbackNode===r?hk.bind(null,e):null}function Bv(e,t){var r=cc;return e.current.memoizedState.isDehydrated&&(ua(e,t).flags|=256),e=Ih(e,t),e!==2&&(t=Or,Or=r,t!==null&&zv(t)),e}function zv(e){Or===null?Or=e:Or.push.apply(Or,e)}function o5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Wn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function oi(e,t){for(t&=~iy,t&=~lm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Fn(t),n=1<<r;e[r]=-1,t&=~n}}function uj(e){if(Ee&6)throw Error(W(327));ko();var t=ph(e,0);if(!(t&1))return $r(e,yt()),null;var r=Ih(e,t);if(e.tag!==0&&r===2){var n=fv(e);n!==0&&(t=n,r=Bv(e,n))}if(r===1)throw r=Lc,ua(e,0),oi(e,t),$r(e,yt()),r;if(r===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hi(e,Or,us),$r(e,yt()),null}function oy(e,t){var r=Ee;Ee|=1;try{return e(t)}finally{Ee=r,Ee===0&&(Bo=yt()+500,sm&&Ri())}}function ya(e){di!==null&&di.tag===0&&!(Ee&6)&&ko();var t=Ee;Ee|=1;var r=gn.transition,n=Te;try{if(gn.transition=null,Te=1,e)return e()}finally{Te=n,gn.transition=r,Ee=t,!(Ee&6)&&Ri()}}function ly(){qr=xo.current,Ye(xo)}function ua(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,LM(r)),Nt!==null)for(r=Nt.return;r!==null;){var n=r;switch(zx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bh();break;case 3:Fo(),Ye(Mr),Ye(pr),Qx();break;case 5:Xx(n);break;case 4:Fo();break;case 13:Ye(it);break;case 19:Ye(it);break;case 10:Vx(n.type._context);break;case 22:case 23:ly()}r=r.return}if(qt=e,Nt=e=wi(e.current,null),rr=qr=t,Tt=0,Lc=null,iy=lm=xa=0,Or=cc=null,ta!==null){for(t=0;t<ta.length;t++)if(r=ta[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ta=null}return e}function fk(e,t){do{var r=Nt;try{if(qx(),Zd.current=Ah,kh){for(var n=ot.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kh=!1}if(va=0,Bt=kt=ot=null,oc=!1,Dc=0,sy.current=null,r===null||r.return===null){Tt=1,Lc=t,Nt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=rr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Q_(o);if(m!==null){m.flags&=-257,J_(m,o,l,i,t),m.mode&1&&X_(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var x=new Set;x.add(c),t.updateQueue=x}else p.add(c);break e}else{if(!(t&1)){X_(i,u,t),cy();break e}c=Error(W(426))}}else if(rt&&l.mode&1){var g=Q_(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),J_(g,o,l,i,t),Wx(Uo(c,l));break e}}i=c=Uo(c,l),Tt!==4&&(Tt=2),cc===null?cc=[i]:cc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=XC(i,c,t);H_(i,v);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yi===null||!yi.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=QC(i,l,t);H_(i,_);break e}}i=i.return}while(i!==null)}gk(r)}catch(j){t=j,Nt===r&&r!==null&&(Nt=r=r.return);continue}break}while(!0)}function mk(){var e=Ph.current;return Ph.current=Ah,e===null?Ah:e}function cy(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),qt===null||!(xa&268435455)&&!(lm&268435455)||oi(qt,rr)}function Ih(e,t){var r=Ee;Ee|=2;var n=mk();(qt!==e||rr!==t)&&(us=null,ua(e,t));do try{l5();break}catch(s){fk(e,s)}while(!0);if(qx(),Ee=r,Ph.current=n,Nt!==null)throw Error(W(261));return qt=null,rr=0,Tt}function l5(){for(;Nt!==null;)pk(Nt)}function c5(){for(;Nt!==null&&!D3();)pk(Nt)}function pk(e){var t=xk(e.alternate,e,qr);e.memoizedProps=e.pendingProps,t===null?gk(e):Nt=t,sy.current=null}function gk(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=r5(r,t),r!==null){r.flags&=32767,Nt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Tt=6,Nt=null;return}}else if(r=t5(r,t,qr),r!==null){Nt=r;return}if(t=t.sibling,t!==null){Nt=t;return}Nt=t=e}while(t!==null);Tt===0&&(Tt=5)}function Hi(e,t,r){var n=Te,s=gn.transition;try{gn.transition=null,Te=1,u5(e,t,r,n)}finally{gn.transition=s,Te=n}return null}function u5(e,t,r,n){do ko();while(di!==null);if(Ee&6)throw Error(W(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(H3(e,i),e===qt&&(Nt=qt=null,rr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pd||(pd=!0,yk(mh,function(){return ko(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=gn.transition,gn.transition=null;var o=Te;Te=1;var l=Ee;Ee|=4,sy.current=null,s5(e,r),uk(r,e),PM(yv),gh=!!xv,yv=xv=null,e.current=r,i5(r),R3(),Ee=l,Te=o,gn.transition=i}else e.current=r;if(pd&&(pd=!1,di=e,Th=s),i=e.pendingLanes,i===0&&(yi=null),$3(r.stateNode),$r(e,yt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Oh)throw Oh=!1,e=Fv,Fv=null,e;return Th&1&&e.tag!==0&&ko(),i=e.pendingLanes,i&1?e===Uv?uc++:(uc=0,Uv=e):uc=0,Ri(),null}function ko(){if(di!==null){var e=X2(Th),t=gn.transition,r=Te;try{if(gn.transition=null,Te=16>e?16:e,di===null)var n=!1;else{if(e=di,di=null,Th=0,Ee&6)throw Error(W(331));var s=Ee;for(Ee|=4,Z=e.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:lc(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,m=d.return;if(ok(d),d===u){Z=null;break}if(f!==null){f.return=m,Z=f;break}Z=m}}}var p=i.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(x!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Z=v;break e}Z=i.return}}var b=e.current;for(Z=b;Z!==null;){o=Z;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Z=w;else e:for(o=b;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:om(9,l)}}catch(j){ft(l,l.return,j)}if(l===o){Z=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Z=_;break e}Z=l.return}}if(Ee=s,Ri(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Zf,e)}catch{}n=!0}return n}finally{Te=r,gn.transition=t}}return!1}function dj(e,t,r){t=Uo(r,t),t=XC(e,t,1),e=xi(e,t,1),t=_r(),e!==null&&(gu(e,1,t),$r(e,t))}function ft(e,t,r){if(e.tag===3)dj(e,e,r);else for(;t!==null;){if(t.tag===3){dj(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yi===null||!yi.has(n))){e=Uo(r,e),e=QC(t,e,1),t=xi(t,e,1),e=_r(),t!==null&&(gu(t,1,e),$r(t,e));break}}t=t.return}}function d5(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_r(),e.pingedLanes|=e.suspendedLanes&r,qt===e&&(rr&r)===r&&(Tt===4||Tt===3&&(rr&130023424)===rr&&500>yt()-ay?ua(e,0):iy|=r),$r(e,t)}function vk(e,t){t===0&&(e.mode&1?(t=id,id<<=1,!(id&130023424)&&(id=4194304)):t=1);var r=_r();e=Cs(e,t),e!==null&&(gu(e,t,r),$r(e,r))}function h5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vk(e,r)}function f5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(W(314))}n!==null&&n.delete(t),vk(e,r)}var xk;xk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mr.current)Tr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Tr=!1,e5(e,t,r);Tr=!!(e.flags&131072)}else Tr=!1,rt&&t.flags&1048576&&_C(t,jh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;th(e,t),e=t.pendingProps;var s=Mo(t,pr.current);Co(t,r),s=Zx(null,t,n,e,s,r);var i=ey();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(n)?(i=!0,wh(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kx(t),s.updater=am,t.stateNode=s,s._reactInternals=t,kv(t,n,e,r),t=Ov(null,t,n,!0,i,r)):(t.tag=0,rt&&i&&Bx(t),gr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(th(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=p5(n),e=An(n,e),s){case 0:t=Pv(null,t,n,e,r);break e;case 1:t=tj(null,t,n,e,r);break e;case 11:t=Z_(null,t,n,e,r);break e;case 14:t=ej(null,t,n,An(n.type,e),r);break e}throw Error(W(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:An(n,s),Pv(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:An(n,s),tj(e,t,n,s,r);case 3:e:{if(tk(t),e===null)throw Error(W(387));n=t.pendingProps,i=t.memoizedState,s=i.element,kC(e,t),Eh(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Uo(Error(W(423)),t),t=rj(e,t,n,r,s);break e}else if(n!==s){s=Uo(Error(W(424)),t),t=rj(e,t,n,r,s);break e}else for(Xr=vi(t.stateNode.containerInfo.firstChild),Jr=t,rt=!0,Tn=null,r=EC(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lo(),n===s){t=ks(e,t,r);break e}gr(e,t,n,r)}t=t.child}return t;case 5:return AC(t),e===null&&Sv(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,bv(n,s)?o=null:i!==null&&bv(n,i)&&(t.flags|=32),ek(e,t),gr(e,t,o,r),t.child;case 6:return e===null&&Sv(t),null;case 13:return rk(e,t,r);case 4:return Yx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$o(t,null,n,r):gr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:An(n,s),Z_(e,t,n,s,r);case 7:return gr(e,t,t.pendingProps,r),t.child;case 8:return gr(e,t,t.pendingProps.children,r),t.child;case 12:return gr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ve(Nh,n._currentValue),n._currentValue=o,i!==null)if(Wn(i.value,o)){if(i.children===s.children&&!Mr.current){t=ks(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ws(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ev(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ev(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Co(t,r),s=vn(s),n=n(s),t.flags|=1,gr(e,t,n,r),t.child;case 14:return n=t.type,s=An(n,t.pendingProps),s=An(n.type,s),ej(e,t,n,s,r);case 15:return JC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:An(n,s),th(e,t),t.tag=1,Lr(n)?(e=!0,wh(t)):e=!1,Co(t,r),YC(t,n,s),kv(t,n,s,r),Ov(null,t,n,!0,e,r);case 19:return nk(e,t,r);case 22:return ZC(e,t,r)}throw Error(W(156,t.tag))};function yk(e,t){return V2(e,t)}function m5(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,r,n){return new m5(e,t,r,n)}function uy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p5(e){if(typeof e=="function")return uy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ax)return 11;if(e===Px)return 14}return 2}function wi(e,t){var r=e.alternate;return r===null?(r=fn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function sh(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")uy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case oo:return da(r.children,s,i,t);case kx:o=8,s|=8;break;case Jg:return e=fn(12,r,t,s|2),e.elementType=Jg,e.lanes=i,e;case Zg:return e=fn(13,r,t,s),e.elementType=Zg,e.lanes=i,e;case ev:return e=fn(19,r,t,s),e.elementType=ev,e.lanes=i,e;case A2:return cm(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C2:o=10;break e;case k2:o=9;break e;case Ax:o=11;break e;case Px:o=14;break e;case ri:o=16,n=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=fn(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function da(e,t,r,n){return e=fn(7,e,n,t),e.lanes=r,e}function cm(e,t,r,n){return e=fn(22,e,n,t),e.elementType=A2,e.lanes=r,e.stateNode={isHidden:!1},e}function rg(e,t,r){return e=fn(6,e,null,t),e.lanes=r,e}function ng(e,t,r){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function g5(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lp(0),this.expirationTimes=Lp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dy(e,t,r,n,s,i,o,l,c){return e=new g5(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=fn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kx(i),e}function v5(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ao,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function bk(e){if(!e)return ki;e=e._reactInternals;e:{if(Oa(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var r=e.type;if(Lr(r))return bC(e,r,t)}return t}function wk(e,t,r,n,s,i,o,l,c){return e=dy(r,n,!0,e,s,i,o,l,c),e.context=bk(null),r=e.current,n=_r(),s=bi(r),i=ws(n,s),i.callback=t??null,xi(r,i,s),e.current.lanes=s,gu(e,s,n),$r(e,n),e}function um(e,t,r,n){var s=t.current,i=_r(),o=bi(s);return r=bk(r),t.context===null?t.context=r:t.pendingContext=r,t=ws(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=xi(s,t,o),e!==null&&(Un(e,s,o,i),Jd(e,s,o)),o}function Dh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hy(e,t){hj(e,t),(e=e.alternate)&&hj(e,t)}function x5(){return null}var _k=typeof reportError=="function"?reportError:function(e){console.error(e)};function fy(e){this._internalRoot=e}dm.prototype.render=fy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));um(e,t,null,null)};dm.prototype.unmount=fy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ya(function(){um(null,e,null,null)}),t[Es]=null}};function dm(e){this._internalRoot=e}dm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Z2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ai.length&&t!==0&&t<ai[r].priority;r++);ai.splice(r,0,e),r===0&&tC(e)}};function my(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fj(){}function y5(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Dh(o);i.call(u)}}var o=wk(t,n,e,0,null,!1,!1,"",fj);return e._reactRootContainer=o,e[Es]=o.current,Ac(e.nodeType===8?e.parentNode:e),ya(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Dh(c);l.call(u)}}var c=dy(e,0,!1,null,null,!1,!1,"",fj);return e._reactRootContainer=c,e[Es]=c.current,Ac(e.nodeType===8?e.parentNode:e),ya(function(){um(t,c,r,n)}),c}function fm(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Dh(o);l.call(c)}}um(t,o,e,s)}else o=y5(r,t,e,s,n);return Dh(o)}Q2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ql(t.pendingLanes);r!==0&&(Ix(t,r|1),$r(t,yt()),!(Ee&6)&&(Bo=yt()+500,Ri()))}break;case 13:ya(function(){var n=Cs(e,1);if(n!==null){var s=_r();Un(n,e,1,s)}}),hy(e,1)}};Dx=function(e){if(e.tag===13){var t=Cs(e,134217728);if(t!==null){var r=_r();Un(t,e,134217728,r)}hy(e,134217728)}};J2=function(e){if(e.tag===13){var t=bi(e),r=Cs(e,t);if(r!==null){var n=_r();Un(r,e,t,n)}hy(e,t)}};Z2=function(){return Te};eC=function(e,t){var r=Te;try{return Te=e,t()}finally{Te=r}};uv=function(e,t,r){switch(t){case"input":if(nv(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=nm(n);if(!s)throw Error(W(90));O2(n),nv(n,s)}}}break;case"textarea":I2(e,r);break;case"select":t=r.value,t!=null&&jo(e,!!r.multiple,t,!1)}};U2=oy;B2=ya;var b5={usingClientEntryPoint:!1,Events:[xu,ho,nm,$2,F2,oy]},Ml={findFiberByHostInstance:ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w5={bundleType:Ml.bundleType,version:Ml.version,rendererPackageName:Ml.rendererPackageName,rendererConfig:Ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=H2(e),e===null?null:e.stateNode},findFiberByHostInstance:Ml.findFiberByHostInstance||x5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{Zf=gd.inject(w5),es=gd}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b5;rn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!my(t))throw Error(W(200));return v5(e,t,null,r)};rn.createRoot=function(e,t){if(!my(e))throw Error(W(299));var r=!1,n="",s=_k;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=dy(e,1,!1,null,null,r,!1,n,s),e[Es]=t.current,Ac(e.nodeType===8?e.parentNode:e),new fy(t)};rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=H2(t),e=e===null?null:e.stateNode,e};rn.flushSync=function(e){return ya(e)};rn.hydrate=function(e,t,r){if(!hm(t))throw Error(W(200));return fm(null,e,t,!0,r)};rn.hydrateRoot=function(e,t,r){if(!my(e))throw Error(W(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=_k;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=wk(t,null,e,1,r??null,s,!1,i,o),e[Es]=t.current,Ac(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new dm(t)};rn.render=function(e,t,r){if(!hm(t))throw Error(W(200));return fm(null,e,t,!1,r)};rn.unmountComponentAtNode=function(e){if(!hm(e))throw Error(W(40));return e._reactRootContainer?(ya(function(){fm(null,null,e,!1,function(){e._reactRootContainer=null,e[Es]=null})}),!0):!1};rn.unstable_batchedUpdates=oy;rn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!hm(r))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return fm(e,t,r,!1,n)};rn.version="18.3.1-next-f1338f8080-20240426";function jk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jk)}catch(e){console.error(e)}}jk(),j2.exports=rn;var py=j2.exports,Nk,mj=py;Nk=mj.createRoot,mj.hydrateRoot;const _5=()=>{const[e,t]=y.useState("desktop");return y.useEffect(()=>{const r=()=>{const n=window.innerWidth,s=navigator.userAgent,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s);n<768||i?t("mobile"):n<1200?t("tablet"):t("desktop")};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=()=>{};var pj={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(e,t){if(!e)throw ul(t)},ul=function(e){return new Error("Firebase Database ("+Sk.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},N5=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const s=e[r++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[r++];t[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[r++],o=e[r++],l=e[r++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const i=e[r++],o=e[r++];t[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,l=o?e[s+1]:0,c=s+2<e.length,u=c?e[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ek(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):N5(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<e.length;){const i=r[e.charAt(s++)],l=s<e.length?r[e.charAt(s)]:0;++s;const u=s<e.length?r[e.charAt(s)]:64;++s;const h=s<e.length?r[e.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new S5;const f=i<<2|l>>4;if(n.push(f),u!==64){const m=l<<4&240|u>>2;if(n.push(m),h!==64){const p=u<<6&192|h;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class S5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ck=function(e){const t=Ek(e);return gy.encodeByteArray(t,!0)},Rh=function(e){return Ck(e).replace(/\./g,"")},Wv=function(e){try{return gy.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(e){return kk(void 0,e)}function kk(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!C5(r)||(e[r]=kk(e[r],t[r]));return e}function C5(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=()=>k5().__FIREBASE_DEFAULTS__,P5=()=>{if(typeof process>"u"||typeof pj>"u")return;const e=pj.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},O5=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Wv(e[1]);return t&&JSON.parse(t)},Ak=()=>{try{return j5()||A5()||P5()||O5()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},T5=e=>{var t,r;return(r=(t=Ak())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},I5=e=>{const t=T5(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},Pk=()=>{var e;return(e=Ak())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function D5(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Rh(JSON.stringify(r)),Rh(JSON.stringify(o)),""].join(".")}const dc={};function M5(){const e={prod:[],emulator:[]};for(const t of Object.keys(dc))dc[t]?e.emulator.push(t):e.prod.push(t);return e}function L5(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let gj=!1;function $5(e,t){if(typeof window>"u"||typeof document>"u"||!vy(window.location.host)||dc[e]===t||dc[e]||gj)return;dc[e]=t;function r(f){return`__firebase__banner__${f}`}const n="__firebase__banner",i=M5().prod.length>0;function o(){const f=document.getElementById(n);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{gj=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=L5(n),m=r("text"),p=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),g=document.getElementById(x)||document.createElement("a"),v=r("preprendIcon"),b=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;l(w),d(g,x);const _=u();c(b,v),w.append(b,p,g,_),document.body.appendChild(w)}i?(p.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ok(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(F5())}function U5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B5(){return Sk.NODE_ADMIN===!0}function z5(){try{return typeof indexedDB=="object"}catch{return!1}}function W5(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;t(((i=s.error)==null?void 0:i.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="FirebaseError";class wu extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=H5,Object.setPrototypeOf(this,wu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tk.prototype.create)}}class Tk{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?q5(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new wu(s,l,n)}}function q5(e,t){return e.replace(V5,(r,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const V5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(e){return JSON.parse(e)}function Ot(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=function(e){let t={},r={},n={},s="";try{const i=e.split(".");t=$c(Wv(i[0])||""),r=$c(Wv(i[1])||""),s=i[2],n=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:n,signature:s}},G5=function(e){const t=Ik(e),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},K5=function(e){const t=Ik(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zo(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function vj(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Mh(e,t,r){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=t.call(r,e[s],s,e));return n}function Lh(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const s of r){if(!n.includes(s))return!1;const i=e[s],o=t[s];if(xj(i)&&xj(o)){if(!Lh(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function xj(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const n=this.W_;if(typeof t=="string")for(let h=0;h<16;h++)n[h]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let h=0;h<16;h++)n[h]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let h=16;h<80;h++){const f=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=l^i&(o^l),d=1518500249):(u=i^o^l,d=1859775393):h<60?(u=i&o|l&(i|o),d=2400959708):(u=i^o^l,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+n[h]&4294967295;c=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const n=r-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<r;){if(o===0)for(;s<=n;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<r;)if(i[o]=t.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<r;)if(i[o]=t[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)t[n]=this.chain_[s]>>i&255,++n;return t}}function mm(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s>=55296&&s<=56319){const i=s-55296;n++,q(n<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(n)-56320;s=65536+(i<<10)+o}s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):s<65536?(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},pm=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(e){return e&&e._delegate?e._delegate:e}class Fc{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J5=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new bu;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(e6(t))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(t=qi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=qi){return this.instances.has(t)}getOptions(t=qi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(t),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&t(i,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Z5(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=qi){return this.component?this.component.multipleInstances?t:qi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Z5(e){return e===qi?void 0:e}function e6(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new J5(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(He||(He={}));const r6={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},n6=He.INFO,s6={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},i6=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),s=s6[t];if(s)console[s](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Dk{constructor(t){this.name=t,this._logLevel=n6,this._logHandler=i6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in He))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?r6[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...t),this._logHandler(this,He.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...t),this._logHandler(this,He.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,He.INFO,...t),this._logHandler(this,He.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,He.WARN,...t),this._logHandler(this,He.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...t),this._logHandler(this,He.ERROR,...t)}}const a6=(e,t)=>t.some(r=>e instanceof r);let yj,bj;function o6(){return yj||(yj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l6(){return bj||(bj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rk=new WeakMap,Hv=new WeakMap,Mk=new WeakMap,sg=new WeakMap,xy=new WeakMap;function c6(e){const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{r(_i(e.result)),s()},o=()=>{n(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&Rk.set(r,e)}).catch(()=>{}),xy.set(t,e),t}function u6(e){if(Hv.has(e))return;const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Hv.set(e,t)}let qv={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Hv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Mk.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _i(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function d6(e){qv=e(qv)}function h6(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(ig(this),t,...r);return Mk.set(n,t.sort?t.sort():[t]),_i(n)}:l6().includes(e)?function(...t){return e.apply(ig(this),t),_i(Rk.get(this))}:function(...t){return _i(e.apply(ig(this),t))}}function f6(e){return typeof e=="function"?h6(e):(e instanceof IDBTransaction&&u6(e),a6(e,o6())?new Proxy(e,qv):e)}function _i(e){if(e instanceof IDBRequest)return c6(e);if(sg.has(e))return sg.get(e);const t=f6(e);return t!==e&&(sg.set(e,t),xy.set(t,e)),t}const ig=e=>xy.get(e);function m6(e,t,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),l=_i(o);return n&&o.addEventListener("upgradeneeded",c=>{n(_i(o.result),c.oldVersion,c.newVersion,_i(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const p6=["get","getKey","getAll","getAllKeys","count"],g6=["put","add","delete","clear"],ag=new Map;function wj(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ag.get(t))return ag.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=g6.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||p6.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return ag.set(t,i),i}d6(e=>({...e,get:(t,r,n)=>wj(t,r)||e.get(t,r,n),has:(t,r)=>!!wj(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(x6(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function x6(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Vv="@firebase/app",_j="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Dk("@firebase/app"),y6="@firebase/app-compat",b6="@firebase/analytics-compat",w6="@firebase/analytics",_6="@firebase/app-check-compat",j6="@firebase/app-check",N6="@firebase/auth",S6="@firebase/auth-compat",E6="@firebase/database",C6="@firebase/data-connect",k6="@firebase/database-compat",A6="@firebase/functions",P6="@firebase/functions-compat",O6="@firebase/installations",T6="@firebase/installations-compat",I6="@firebase/messaging",D6="@firebase/messaging-compat",R6="@firebase/performance",M6="@firebase/performance-compat",L6="@firebase/remote-config",$6="@firebase/remote-config-compat",F6="@firebase/storage",U6="@firebase/storage-compat",B6="@firebase/firestore",z6="@firebase/ai",W6="@firebase/firestore-compat",H6="firebase",q6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="[DEFAULT]",V6={[Vv]:"fire-core",[y6]:"fire-core-compat",[w6]:"fire-analytics",[b6]:"fire-analytics-compat",[j6]:"fire-app-check",[_6]:"fire-app-check-compat",[N6]:"fire-auth",[S6]:"fire-auth-compat",[E6]:"fire-rtdb",[C6]:"fire-data-connect",[k6]:"fire-rtdb-compat",[A6]:"fire-fn",[P6]:"fire-fn-compat",[O6]:"fire-iid",[T6]:"fire-iid-compat",[I6]:"fire-fcm",[D6]:"fire-fcm-compat",[R6]:"fire-perf",[M6]:"fire-perf-compat",[L6]:"fire-rc",[$6]:"fire-rc-compat",[F6]:"fire-gcs",[U6]:"fire-gcs-compat",[B6]:"fire-fst",[W6]:"fire-fst-compat",[z6]:"fire-vertex","fire-js":"fire-js",[H6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,G6=new Map,Kv=new Map;function jj(e,t){try{e.container.addComponent(t)}catch(r){As.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Fh(e){const t=e.name;if(Kv.has(t))return As.debug(`There were multiple attempts to register component ${t}.`),!1;Kv.set(t,e);for(const r of $h.values())jj(r,e);for(const r of G6.values())jj(r,e);return!0}function K6(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Y6(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ji=new Tk("app","Firebase",X6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=q6;function Lk(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:Gv,automaticDataCollectionEnabled:!0,...t},s=n.name;if(typeof s!="string"||!s)throw ji.create("bad-app-name",{appName:String(s)});if(r||(r=Pk()),!r)throw ji.create("no-options");const i=$h.get(s);if(i){if(Lh(r,i.options)&&Lh(n,i.config))return i;throw ji.create("duplicate-app",{appName:s})}const o=new t6(s);for(const c of Kv.values())o.addComponent(c);const l=new Q6(r,n,o);return $h.set(s,l),l}function Z6(e=Gv){const t=$h.get(e);if(!t&&e===Gv&&Pk())return Lk();if(!t)throw ji.create("no-app",{appName:e});return t}function Ao(e,t,r){let n=V6[e]??e;r&&(n+=`-${r}`);const s=n.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${t}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),As.warn(o.join(" "));return}Fh(new Fc(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="firebase-heartbeat-database",tL=1,Uc="firebase-heartbeat-store";let og=null;function $k(){return og||(og=m6(eL,tL,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Uc)}catch(r){console.warn(r)}}}}).catch(e=>{throw ji.create("idb-open",{originalErrorMessage:e.message})})),og}async function rL(e){try{const r=(await $k()).transaction(Uc),n=await r.objectStore(Uc).get(Fk(e));return await r.done,n}catch(t){if(t instanceof wu)As.warn(t.message);else{const r=ji.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});As.warn(r.message)}}}async function Nj(e,t){try{const n=(await $k()).transaction(Uc,"readwrite");await n.objectStore(Uc).put(t,Fk(e)),await n.done}catch(r){if(r instanceof wu)As.warn(r.message);else{const n=ji.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});As.warn(n.message)}}}function Fk(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=1024,sL=30;class iL{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new oL(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sj();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>sL){const o=lL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){As.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Sj(),{heartbeatsToSend:n,unsentEntries:s}=aL(this._heartbeatsCache.heartbeats),i=Rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return As.warn(r),""}}}function Sj(){return new Date().toISOString().substring(0,10)}function aL(e,t=nL){const r=[];let n=e.slice();for(const s of e){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ej(r)>t){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Ej(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class oL{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z5()?W5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await rL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return Nj(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return Nj(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function Ej(e){return Rh(JSON.stringify({version:2,heartbeats:e})).length}function lL(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(e){Fh(new Fc("platform-logger",t=>new v6(t),"PRIVATE")),Fh(new Fc("heartbeat",t=>new iL(t),"PRIVATE")),Ao(Vv,_j,e),Ao(Vv,_j,"esm2020"),Ao("fire-js","")}cL("");var uL="firebase",dL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ao(uL,dL,"app");var Cj={};const kj="@firebase/database",Aj="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uk="";function hL(e){Uk=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ot(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:$c(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return os(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new fL(t)}}catch{}return new mL},na=Bk("localStorage"),pL=Bk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Dk("@firebase/database"),gL=function(){let e=1;return function(){return e++}}(),zk=function(e){const t=Q5(e),r=new X5;r.update(t);const n=r.digest();return gy.encodeByteArray(n)},_u=function(...e){let t="";for(let r=0;r<e.length;r++){const n=e[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=_u.apply(null,n):typeof n=="object"?t+=Ot(n):t+=n,t+=" "}return t};let hc=null,Pj=!0;const vL=function(e,t){q(!0,"Can't turn on custom loggers persistently."),Po.logLevel=He.VERBOSE,hc=Po.log.bind(Po)},er=function(...e){if(Pj===!0&&(Pj=!1,hc===null&&pL.get("logging_enabled")===!0&&vL()),hc){const t=_u.apply(null,e);hc(t)}},ju=function(e){return function(...t){er(e,...t)}},Yv=function(...e){const t="FIREBASE INTERNAL ERROR: "+_u(...e);Po.error(t)},Ps=function(...e){const t=`FIREBASE FATAL ERROR: ${_u(...e)}`;throw Po.error(t),new Error(t)},jr=function(...e){const t="FIREBASE WARNING: "+_u(...e);Po.warn(t)},xL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&jr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yy=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},yL=function(e){if(document.readyState==="complete")e();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Wo="[MIN_NAME]",ba="[MAX_NAME]",Ta=function(e,t){if(e===t)return 0;if(e===Wo||t===ba)return-1;if(t===Wo||e===ba)return 1;{const r=Oj(e),n=Oj(t);return r!==null?n!==null?r-n===0?e.length-t.length:r-n:-1:n!==null?1:e<t?-1:1}},bL=function(e,t){return e===t?0:e<t?-1:1},Ll=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ot(t))},by=function(e){if(typeof e!="object"||e===null)return Ot(e);const t=[];for(const n in e)t.push(n);t.sort();let r="{";for(let n=0;n<t.length;n++)n!==0&&(r+=","),r+=Ot(t[n]),r+=":",r+=by(e[t[n]]);return r+="}",r},Wk=function(e,t){const r=e.length;if(r<=t)return[e];const n=[];for(let s=0;s<r;s+=t)s+t>r?n.push(e.substring(s,r)):n.push(e.substring(s,s+t));return n};function ar(e,t){for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])}const Hk=function(e){q(!yy(e),"Invalid JSON number");const t=11,r=52,n=(1<<t-1)-1;let s,i,o,l,c;e===0?(i=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-n)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),n),i=l+n,o=Math.round(e*Math.pow(2,r-l)-Math.pow(2,r))):(i=0,o=Math.round(e/Math.pow(2,1-n-r))));const u=[];for(c=r;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},wL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_L=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function jL(e,t){let r="Unknown Error";e==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?r="Client doesn't have permission to access the desired data.":e==="unavailable"&&(r="The service is unavailable");const n=new Error(e+" at "+t._path.toString()+": "+r);return n.code=e.toUpperCase(),n}const NL=new RegExp("^-?(0*)\\d{1,10}$"),SL=-2147483648,EL=2147483647,Oj=function(e){if(NL.test(e)){const t=Number(e);if(t>=SL&&t<=EL)return t}return null},hl=function(e){try{e()}catch(t){setTimeout(()=>{const r=t.stack||"";throw jr("Exception was thrown by user callback.",r),t},Math.floor(0))}},CL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fc=function(e,t){const r=setTimeout(e,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(t,r){this.appCheckProvider=r,this.appName=t.name,Y6(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,n):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)==null||r.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){jr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(t,r,n){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(er("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,n):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',jr(t)}}class ih{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}ih.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="5",qk="v",Vk="s",Gk="r",Kk="f",Yk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xk="ls",Qk="p",Xv="ac",Jk="websocket",Zk="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,r,n,s,i=!1,o="",l=!1,c=!1,u=null){this.secure=r,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=na.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&na.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function PL(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function tA(e,t,r){q(typeof t=="string","typeof type must == string"),q(typeof r=="object","typeof params must == object");let n;if(t===Jk)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Zk)n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);PL(e)&&(r.ns=e.namespace);const s=[];return ar(r,(i,o)=>{s.push(i+"="+o)}),n+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.counters_={}}incrementCounter(t,r=1){os(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return E5(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg={},cg={};function _y(e){const t=e.toString();return lg[t]||(lg[t]=new OL),lg[t]}function TL(e,t){const r=e.toString();return cg[r]||(cg[r]=t()),cg[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&hl(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="start",DL="close",RL="pLPCommand",ML="pRTLPCB",rA="id",nA="pw",sA="ser",LL="cb",$L="seg",FL="ts",UL="d",BL="dframe",iA=1870,aA=30,zL=iA-aA,WL=25e3,HL=3e4;class yo{constructor(t,r,n,s,i,o,l){this.connId=t,this.repoInfo=r,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ju(t),this.stats_=_y(r),this.urlFn=c=>(this.appCheckToken&&(c[Xv]=this.appCheckToken),tA(r,Zk,c))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new IL(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HL)),yL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jy((...i)=>{const[o,l,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Tj)this.id=l,this.password=c;else if(o===DL)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const n={};n[Tj]="t",n[sA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[LL]=this.scriptTagHolder.uniqueCallbackIdentifier),n[qk]=wy,this.transportSessionId&&(n[Vk]=this.transportSessionId),this.lastSessionId&&(n[Xk]=this.lastSessionId),this.applicationId&&(n[Qk]=this.applicationId),this.appCheckToken&&(n[Xv]=this.appCheckToken),typeof location<"u"&&location.hostname&&Yk.test(location.hostname)&&(n[Gk]=Kk);const s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yo.forceAllow_=!0}static forceDisallow(){yo.forceDisallow_=!0}static isAvailable(){return yo.forceAllow_?!0:!yo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wL()&&!_L()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=Ot(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=Ck(r),s=Wk(n,zL);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[BL]="t",n[rA]=t,n[nA]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=Ot(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class jy{constructor(t,r,n,s){this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gL(),window[RL+this.uniqueCallbackIdentifier]=t,window[ML+this.uniqueCallbackIdentifier]=r,this.myIFrame=jy.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){er("frame writing exception"),l.stack&&er(l.stack),er(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||er("No IE domain setting required")}catch{const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[rA]=this.myID,t[nA]=this.myPW,t[sA]=this.currentSerial;let r=this.urlFn(t),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+aA+n.length<=iA;){const o=this.pendingSegs.shift();n=n+"&"+$L+s+"="+o.seg+"&"+FL+s+"="+o.ts+"&"+UL+s+"="+o.d,s++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,n){this.pendingSegs.push({seg:t,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},s=setTimeout(n,Math.floor(WL)),i=()=>{clearTimeout(s),n()};this.addTag(t,i)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{er("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=16384,VL=45e3;let Uh=null;typeof MozWebSocket<"u"?Uh=MozWebSocket:typeof WebSocket<"u"&&(Uh=WebSocket);class In{constructor(t,r,n,s,i,o,l){this.connId=t,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ju(this.connId),this.stats_=_y(r),this.connURL=In.connectionURL_(r,o,l,s,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,n,s,i){const o={};return o[qk]=wy,typeof location<"u"&&location.hostname&&Yk.test(location.hostname)&&(o[Gk]=Kk),r&&(o[Vk]=r),n&&(o[Xk]=n),s&&(o[Xv]=s),i&&(o[Qk]=i),tA(t,Jk,o)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,na.set("previous_websocket_failure",!0);try{let n;B5(),this.mySock=new Uh(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){In.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&Uh!==null&&!In.forceDisallow_}static previouslyFailed(){return na.isInMemoryStorage||na.get("previous_websocket_failure")===!0}markConnectionHealthy(){na.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=$c(r);this.onMessage(n)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(q(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(t){this.resetKeepAlive();const r=Ot(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=Wk(r,qL);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(VL))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}In.responsesRequiredToBeHealthy=2;In.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{static get ALL_TRANSPORTS(){return[yo,In]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=In&&In.isAvailable();let n=r&&!In.previouslyFailed();if(t.webSocketOnly&&(r||jr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[In];else{const s=this.transports_=[];for(const i of Bc.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Bc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Bc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=6e4,KL=5e3,YL=10*1024,XL=100*1024,ug="t",Ij="d",QL="s",Dj="r",JL="e",Rj="o",Mj="a",Lj="n",$j="p",ZL="h";class e${constructor(t,r,n,s,i,o,l,c,u,d){this.id=t,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ju("c:"+this.id+":"),this.transportManager_=new Bc(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=fc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>XL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ug in t){const r=t[ug];r===Mj?this.upgradeIfSecondaryHealthy_():r===Dj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Rj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=Ll("t",t),n=Ll("d",t);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$j,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Mj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Lj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=Ll("t",t),n=Ll("d",t);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=Ll(ug,t);if(Ij in t){const n=t[Ij];if(r===ZL){const s={...n};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(r===Lj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===QL?this.onConnectionShutdown_(n):r===Dj?this.onReset_(n):r===JL?Yv("Server Error: "+n):r===Rj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yv("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,n=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),wy!==n&&jr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),fc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(GL))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$j,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(na.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{put(t,r,n,s){}merge(t,r,n,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,n){}onDisconnectMerge(t,r,n){}onDisconnectCancel(t,r){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lA=class{constructor(t){this.allowedEvents_=t,this.listeners_={},q(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,r)}}on(t,r,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:n});const s=this.getInitialEvent(t);s&&r.apply(n,s)}off(t,r,n){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let i=0;i<s.length;i++)if(s[i].callback===r&&(!n||n===s[i].context)){s.splice(i,1);return}}validateEventType_(t){q(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends lA{static getInstance(){return new Bh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ok()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return q(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=32,Uj=768;let De=class{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}};function Ce(){return new De("")}function ge(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ai(e){return e.pieces_.length-e.pieceNum_}function qe(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new De(e.pieces_,t)}function Ny(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function t$(e){let t="";for(let r=e.pieceNum_;r<e.pieces_.length;r++)e.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[r])));return t||"/"}function zc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function cA(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let r=e.pieceNum_;r<e.pieces_.length-1;r++)t.push(e.pieces_[r]);return new De(t,0)}function mt(e,t){const r=[];for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);if(t instanceof De)for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);else{const n=t.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&r.push(n[s])}return new De(r,0)}function xe(e){return e.pieceNum_>=e.pieces_.length}function yr(e,t){const r=ge(e),n=ge(t);if(r===null)return t;if(r===n)return yr(qe(e),qe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function r$(e,t){const r=zc(e,0),n=zc(t,0);for(let s=0;s<r.length&&s<n.length;s++){const i=Ta(r[s],n[s]);if(i!==0)return i}return r.length===n.length?0:r.length<n.length?-1:1}function Sy(e,t){if(Ai(e)!==Ai(t))return!1;for(let r=e.pieceNum_,n=t.pieceNum_;r<=e.pieces_.length;r++,n++)if(e.pieces_[r]!==t.pieces_[n])return!1;return!0}function mn(e,t){let r=e.pieceNum_,n=t.pieceNum_;if(Ai(e)>Ai(t))return!1;for(;r<e.pieces_.length;){if(e.pieces_[r]!==t.pieces_[n])return!1;++r,++n}return!0}class n${constructor(t,r){this.errorPrefix_=r,this.parts_=zc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=pm(this.parts_[n]);uA(this)}}function s$(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=pm(t),uA(e)}function i$(e){const t=e.parts_.pop();e.byteLength_-=pm(t),e.parts_.length>0&&(e.byteLength_-=1)}function uA(e){if(e.byteLength_>Uj)throw new Error(e.errorPrefix_+"has a key path longer than "+Uj+" bytes ("+e.byteLength_+").");if(e.parts_.length>Fj)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Fj+") or object contains a cycle "+Vi(e))}function Vi(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey extends lA{static getInstance(){return new Ey}constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(t){return q(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=1e3,a$=60*5*1e3,Bj=30*1e3,o$=1.3,l$=3e4,c$="server_kill",zj=3;class _s extends oA{constructor(t,r,n,s,i,o,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=_s.nextPersistentConnectionId_++,this.log_=ju("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$l,this.maxReconnectDelay_=a$,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ey.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Bh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,n){const s=++this.requestNumber_,i={r:s,a:t,b:r};this.log_(Ot(i)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[s]=n)}get(t){this.initConnection_();const r=new bu,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),r.promise}listen(t,r,n,s){this.initConnection_();const i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:n};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(t){const r=t.query,n=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+n+" for "+s);const i={p:n},o="q";t.tag&&(i.q=r._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest(o,i,l=>{const c=l.d,u=l.s;_s.warnOnListenWarnings_(c,r),(this.listens.get(n)&&this.listens.get(n).get(s))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(n,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&os(t,"w")){const n=zo(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',i=r._path.toString();jr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||K5(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Bj)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=G5(t)?"auth":"gauth",n={cred:t};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,s=>{const i=s.s,o=s.d||"error";this.authToken_===t&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,n=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(t,r){const n=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,t._queryObject,r)}sendUnlisten_(t,r,n,s){this.log_("Unlisten on "+t+" for "+r);const i={p:t},o="n";s&&(i.q=n,i.t=s),this.sendRequest(o,i)}onDisconnectPut(t,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:n})}onDisconnectMerge(t,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:n})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,n,s){const i={p:r,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(t,r,n,s){this.putInternal("p",t,r,n,s)}merge(t,r,n,s){this.putInternal("m",t,r,n,s)}putInternal(t,r,n,s,i){this.initConnection_();const o={p:r,d:n};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,n,i=>{this.log_(r+" response",i),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const i=n.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ot(t));const r=t.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Yv("Unrecognized action received from server: "+Ot(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>l$&&(this.reconnectDelay_=$l),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*o$)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+_s.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,n())},u=function(h){q(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?er("getToken() completed but was canceled"):(er("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new e$(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,n,m=>{jr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(c$)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&jr(h),c())}}}interrupt(t){er("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){er("Resuming connection for reason: "+t),delete this.interruptReasons_[t],vj(this.interruptReasons_)&&(this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let n;r?n=r.map(i=>by(i)).join("$"):n="default";const s=this.removeListen_(t,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const n=new De(t).toString();let s;if(this.listens.has(n)){const i=this.listens.get(n);s=i.get(r),i.delete(r),i.size===0&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(t,r){er("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zj&&(this.reconnectDelay_=Bj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){er("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+Uk.replace(/\./g,"-")]=1,Ok()?t["framework.cordova"]=1:U5()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Bh.getInstance().currentlyOnline();return vj(this.interruptReasons_)&&t}}_s.nextPersistentConnectionId_=0;_s.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new ve(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const n=new ve(Wo,t),s=new ve(Wo,r);return this.compare(n,s)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd;class dA extends gm{static get __EMPTY_NODE(){return vd}static set __EMPTY_NODE(t){vd=t}compare(t,r){return Ta(t.name,r.name)}isDefinedOn(t){throw ul("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return ve.MIN}maxPost(){return new ve(ba,vd)}makePost(t,r){return q(typeof t=="string","KeyIndex indexValue must always be a string."),new ve(t,vd)}toString(){return".key"}}const Oo=new dA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,r,n,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=r?n(t.key,r):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class zt{constructor(t,r,n,s,i){this.key=t,this.value=r,this.color=n??zt.RED,this.left=s??Ir.EMPTY_NODE,this.right=i??Ir.EMPTY_NODE}copy(t,r,n,s,i){return new zt(t??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let s=this;const i=n(t,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(t,r,n),null):i===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ir.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let n,s;if(n=this,r(t,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(t,n.key)===0){if(n.right.isEmpty())return Ir.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}zt.RED=!0;zt.BLACK=!1;class u${copy(t,r,n,s,i){return this}insert(t,r,n){return new zt(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ir{constructor(t,r=Ir.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new Ir(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,zt.BLACK,null,null))}remove(t){return new Ir(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,zt.BLACK,null,null))}get(t){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(t,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(t){let r,n=this.root_,s=null;for(;!n.isEmpty();)if(r=this.comparator_(t,n.key),r===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new xd(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new xd(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new xd(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new xd(this.root_,null,this.comparator_,!0,t)}}Ir.EMPTY_NODE=new u$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(e,t){return Ta(e.name,t.name)}function Cy(e,t){return Ta(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv;function h$(e){Qv=e}const hA=function(e){return typeof e=="number"?"number:"+Hk(e):"string:"+e},fA=function(e){if(e.isLeafNode()){const t=e.val();q(typeof t=="string"||typeof t=="number"||typeof t=="object"&&os(t,".sv"),"Priority must be a string or number.")}else q(e===Qv||e.isEmpty(),"priority of unexpected type.");q(e===Qv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wj;class Ft{static set __childrenNodeConstructor(t){Wj=t}static get __childrenNodeConstructor(){return Wj}constructor(t,r=Ft.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ft(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xe(t)?this:ge(t)===".priority"?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:Ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const n=ge(t);return n===null?r:r.isEmpty()&&n!==".priority"?this:(q(n!==".priority"||Ai(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(qe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+hA(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=Hk(this.value_):t+=this.value_,this.lazyHash_=zk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ft.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ft.__childrenNodeConstructor?-1:(q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,n=typeof this.value_,s=Ft.VALUE_TYPE_ORDER.indexOf(r),i=Ft.VALUE_TYPE_ORDER.indexOf(n);return q(s>=0,"Unknown leaf type: "+r),q(i>=0,"Unknown leaf type: "+n),s===i?n==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Ft.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mA,pA;function f$(e){mA=e}function m$(e){pA=e}class p$ extends gm{compare(t,r){const n=t.node.getPriority(),s=r.node.getPriority(),i=n.compareTo(s);return i===0?Ta(t.name,r.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(ba,new Ft("[PRIORITY-POST]",pA))}makePost(t,r){const n=mA(t);return new ve(r,new Ft("[PRIORITY-POST]",n))}toString(){return".priority"}}const pt=new p$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=Math.log(2);class v${constructor(t){const r=i=>parseInt(Math.log(i)/g$,10),n=i=>parseInt(Array(i+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const s=n(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const zh=function(e,t,r,n){e.sort(t);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=e[c],f=r?r(h):h,new zt(f,h.node,zt.BLACK,null,null);{const m=parseInt(d/2,10)+c,p=s(c,m),x=s(m+1,u);return h=e[m],f=r?r(h):h,new zt(f,h.node,zt.BLACK,p,x)}},i=function(c){let u=null,d=null,h=e.length;const f=function(p,x){const g=h-p,v=h;h-=p;const b=s(g+1,v),w=e[g],_=r?r(w):w;m(new zt(_,w.node,x,null,b))},m=function(p){u?(u.left=p,u=p):(d=p,u=p)};for(let p=0;p<c.count;++p){const x=c.nextBitIsOne(),g=Math.pow(2,c.count-(p+1));x?f(g,zt.BLACK):(f(g,zt.BLACK),f(g,zt.RED))}return d},o=new v$(e.length),l=i(o);return new Ir(n||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg;const Va={};class xs{static get Default(){return q(Va&&pt,"ChildrenNode.ts has not been loaded"),dg=dg||new xs({".priority":Va},{".priority":pt}),dg}constructor(t,r){this.indexes_=t,this.indexSet_=r}get(t){const r=zo(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof Ir?r:null}hasIndex(t){return os(this.indexSet_,t.toString())}addIndex(t,r){q(t!==Oo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const i=r.getIterator(ve.Wrap);let o=i.getNext();for(;o;)s=s||t.isDefinedOn(o.node),n.push(o),o=i.getNext();let l;s?l=zh(n,t.getCompare()):l=Va;const c=t.toString(),u={...this.indexSet_};u[c]=t;const d={...this.indexes_};return d[c]=l,new xs(d,u)}addToIndexes(t,r){const n=Mh(this.indexes_,(s,i)=>{const o=zo(this.indexSet_,i);if(q(o,"Missing index implementation for "+i),s===Va)if(o.isDefinedOn(t.node)){const l=[],c=r.getIterator(ve.Wrap);let u=c.getNext();for(;u;)u.name!==t.name&&l.push(u),u=c.getNext();return l.push(t),zh(l,o.getCompare())}else return Va;else{const l=r.get(t.name);let c=s;return l&&(c=c.remove(new ve(t.name,l))),c.insert(t,t.node)}});return new xs(n,this.indexSet_)}removeFromIndexes(t,r){const n=Mh(this.indexes_,s=>{if(s===Va)return s;{const i=r.get(t.name);return i?s.remove(new ve(t.name,i)):s}});return new xs(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl;class le{static get EMPTY_NODE(){return Fl||(Fl=new le(new Ir(Cy),null,xs.Default))}constructor(t,r,n){this.children_=t,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&fA(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fl}updatePriority(t){return this.children_.isEmpty()?this:new le(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?Fl:r}}getChild(t){const r=ge(t);return r===null?this:this.getImmediateChild(r).getChild(qe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const n=new ve(t,r);let s,i;r.isEmpty()?(s=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(t,r),i=this.indexMap_.addToIndexes(n,this.children_));const o=s.isEmpty()?Fl:this.priorityNode_;return new le(s,o,i)}}updateChild(t,r){const n=ge(t);if(n===null)return r;{q(ge(t)!==".priority"||Ai(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(qe(t),r);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let n=0,s=0,i=!0;if(this.forEachChild(pt,(o,l)=>{r[o]=l.val(t),n++,i&&le.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!t&&i&&s<2*n){const o=[];for(const l in r)o[l]=r[l];return o}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+hA(this.getPriority().val())+":"),this.forEachChild(pt,(r,n)=>{const s=n.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":zk(t)}return this.lazyHash_}getPredecessorChildName(t,r,n){const s=this.resolveIndex_(n);if(s){const i=s.getPredecessorKey(new ve(t,r));return i?i.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ve(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ve(r,this.children_.get(r)):null}forEachChild(t,r){const n=this.resolveIndex_(t);return n?n.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,ve.Wrap);let i=s.peek();for(;i!=null&&r.compare(i,t)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,ve.Wrap);let i=s.peek();for(;i!=null&&r.compare(i,t)>0;)s.getNext(),i=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Nu?-1:0}withIndex(t){if(t===Oo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new le(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Oo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(pt),s=r.getIterator(pt);let i=n.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Oo?null:this.indexMap_.get(t.toString())}}le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class x$ extends le{constructor(){super(new Ir(Cy),le.EMPTY_NODE,xs.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return le.EMPTY_NODE}isEmpty(){return!1}}const Nu=new x$;Object.defineProperties(ve,{MIN:{value:new ve(Wo,le.EMPTY_NODE)},MAX:{value:new ve(ba,Nu)}});dA.__EMPTY_NODE=le.EMPTY_NODE;Ft.__childrenNodeConstructor=le;h$(Nu);m$(Nu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=!0;function Pt(e,t=null){if(e===null)return le.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),q(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const r=e;return new Ft(r,Pt(t))}if(!(e instanceof Array)&&y$){const r=[];let n=!1;if(ar(e,(o,l)=>{if(o.substring(0,1)!=="."){const c=Pt(l);c.isEmpty()||(n=n||!c.getPriority().isEmpty(),r.push(new ve(o,c)))}}),r.length===0)return le.EMPTY_NODE;const i=zh(r,d$,o=>o.name,Cy);if(n){const o=zh(r,pt.getCompare());return new le(i,Pt(t),new xs({".priority":o},{".priority":pt}))}else return new le(i,Pt(t),xs.Default)}else{let r=le.EMPTY_NODE;return ar(e,(n,s)=>{if(os(e,n)&&n.substring(0,1)!=="."){const i=Pt(s);(i.isLeafNode()||!i.isEmpty())&&(r=r.updateImmediateChild(n,i))}}),r.updatePriority(Pt(t))}}f$(Pt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b$ extends gm{constructor(t){super(),this.indexPath_=t,q(!xe(t)&&ge(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const n=this.extractChild(t.node),s=this.extractChild(r.node),i=n.compareTo(s);return i===0?Ta(t.name,r.name):i}makePost(t,r){const n=Pt(t),s=le.EMPTY_NODE.updateChild(this.indexPath_,n);return new ve(r,s)}maxPost(){const t=le.EMPTY_NODE.updateChild(this.indexPath_,Nu);return new ve(ba,t)}toString(){return zc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w$ extends gm{compare(t,r){const n=t.node.compareTo(r.node);return n===0?Ta(t.name,r.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(t,r){const n=Pt(t);return new ve(r,n)}toString(){return".value"}}const _$=new w$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(e){return{type:"value",snapshotNode:e}}function Ho(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Wc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Hc(e,t,r){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:r}}function j$(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(t){this.index_=t}updateChild(t,r,n,s,i,o){q(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(r);return l.getChild(s).equals(n.getChild(s))&&l.isEmpty()===n.isEmpty()||(o!=null&&(n.isEmpty()?t.hasChild(r)?o.trackChildChange(Wc(r,l)):q(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Ho(r,n)):o.trackChildChange(Hc(r,n,l))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(t,r,n){return n!=null&&(t.isLeafNode()||t.forEachChild(pt,(s,i)=>{r.hasChild(s)||n.trackChildChange(Wc(s,i))}),r.isLeafNode()||r.forEachChild(pt,(s,i)=>{if(t.hasChild(s)){const o=t.getImmediateChild(s);o.equals(i)||n.trackChildChange(Hc(s,i,o))}else n.trackChildChange(Ho(s,i))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?le.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t){this.indexedFilter_=new ky(t.getIndex()),this.index_=t.getIndex(),this.startPost_=qc.getStartPost_(t),this.endPost_=qc.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&n}updateChild(t,r,n,s,i,o){return this.matches(new ve(r,n))||(n=le.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,n,s,i,o)}updateFullNode(t,r,n){r.isLeafNode()&&(r=le.EMPTY_NODE);let s=r.withIndex(this.index_);s=s.updatePriority(le.EMPTY_NODE);const i=this;return r.forEachChild(pt,(o,l)=>{i.matches(new ve(o,l))||(s=s.updateImmediateChild(o,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,n)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new qc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,n,s,i,o){return this.rangedFilter_.matches(new ve(r,n))||(n=le.EMPTY_NODE),t.getImmediateChild(r).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,n,s,i,o):this.fullLimitUpdateChild_(t,r,n,i,o)}updateFullNode(t,r,n){let s;if(r.isLeafNode()||r.isEmpty())s=le.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){s=le.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=r.withIndex(this.index_),s=s.updatePriority(le.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,n)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,n,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,m)=>h(m,f)}else o=this.index_.getCompare();const l=t;q(l.numChildren()===this.limit_,"");const c=new ve(r,n),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(l.hasChild(r)){const h=l.getImmediateChild(r);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===r||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,c);if(d&&!n.isEmpty()&&m>=0)return i!=null&&i.trackChildChange(Hc(r,n,h)),l.updateImmediateChild(r,n);{i!=null&&i.trackChildChange(Wc(r,h));const x=l.updateImmediateChild(r,le.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Ho(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return n.isEmpty()?t:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(Wc(u.name,u.node)),i.trackChildChange(Ho(r,n))),l.updateImmediateChild(r,n).updateImmediateChild(u.name,le.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wo}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ba}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pt}copy(){const t=new Ay;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function S$(e){return e.loadsAllData()?new ky(e.getIndex()):e.hasLimit()?new N$(e):new qc(e)}function Hj(e){const t={};if(e.isDefault())return t;let r;if(e.index_===pt?r="$priority":e.index_===_$?r="$value":e.index_===Oo?r="$key":(q(e.index_ instanceof b$,"Unrecognized index type!"),r=e.index_.toString()),t.orderBy=Ot(r),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ot(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ot(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ot(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ot(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function qj(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let r=e.viewFrom_;r===""&&(e.isViewFromLeft()?r="l":r="r"),t.vf=r}return e.index_!==pt&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends oA{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(q(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,r,n,s){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=ju("p:rest:"),this.listens_={}}listen(t,r,n,s){const i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);const o=Wh.getListenId_(t,n),l={};this.listens_[o]=l;const c=Hj(t._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,n),zo(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(t,r){const n=Wh.getListenId_(t,r);delete this.listens_[n]}get(t){const r=Hj(t._queryParams),n=t._path.toString(),s=new bu;return this.restRequest_(n+".json",r,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(n,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(t){}restRequest_(t,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(r.auth=s.accessToken),i&&i.token&&(r.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Y5(r);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=$c(l.responseText)}catch{jr("Failed to parse JSON response for "+o+": "+l.responseText)}n(null,c)}else l.status!==401&&l.status!==404&&jr("Got unsuccessful REST response for "+o+" Status: "+l.status),n(l.status);n=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this.rootNode_=le.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(){return{value:null,children:new Map}}function vA(e,t,r){if(xe(t))e.value=r,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,r);else{const n=ge(t);e.children.has(n)||e.children.set(n,Hh());const s=e.children.get(n);t=qe(t),vA(s,t,r)}}function Jv(e,t,r){e.value!==null?r(t,e.value):C$(e,(n,s)=>{const i=new De(t.toString()+"/"+n);Jv(s,i,r)})}function C$(e,t){e.children.forEach((r,n)=>{t(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r={...t};return this.last_&&ar(this.last_,(n,s)=>{r[n]=r[n]-s}),this.last_=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=10*1e3,A$=30*1e3,P$=5*60*1e3;class O${constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new k$(t);const n=Vj+(A$-Vj)*Math.random();fc(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),r={};let n=!1;ar(t,(s,i)=>{i>0&&os(this.statsToReport_,s)&&(r[s]=i,n=!0)}),n&&this.server_.reportStats(r),fc(this.reportStats_.bind(this),Math.floor(Math.random()*2*P$))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ln||(Ln={}));function Py(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Oy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ty(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t,r,n){this.path=t,this.affectedTree=r,this.revert=n,this.type=Ln.ACK_USER_WRITE,this.source=Py()}operationForChild(t){if(xe(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new De(t));return new qh(Ce(),r,this.revert)}}else return q(ge(this.path)===t,"operationForChild called for unrelated child."),new qh(qe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t,r){this.source=t,this.path=r,this.type=Ln.LISTEN_COMPLETE}operationForChild(t){return xe(this.path)?new Vc(this.source,Ce()):new Vc(this.source,qe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t,r,n){this.source=t,this.path=r,this.snap=n,this.type=Ln.OVERWRITE}operationForChild(t){return xe(this.path)?new wa(this.source,Ce(),this.snap.getImmediateChild(t)):new wa(this.source,qe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(t,r,n){this.source=t,this.path=r,this.children=n,this.type=Ln.MERGE}operationForChild(t){if(xe(this.path)){const r=this.children.subtree(new De(t));return r.isEmpty()?null:r.value?new wa(this.source,Ce(),r.value):new qo(this.source,Ce(),r)}else return q(ge(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new qo(this.source,qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t,r,n){this.node_=t,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(xe(t))return this.isFullyInitialized()&&!this.filtered_;const r=ge(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function I$(e,t,r,n){const s=[],i=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(j$(o.childName,o.snapshotNode))}),Ul(e,s,"child_removed",t,n,r),Ul(e,s,"child_added",t,n,r),Ul(e,s,"child_moved",i,n,r),Ul(e,s,"child_changed",t,n,r),Ul(e,s,"value",t,n,r),s}function Ul(e,t,r,n,s,i){const o=n.filter(l=>l.type===r);o.sort((l,c)=>R$(e,l,c)),o.forEach(l=>{const c=D$(e,l,i);s.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(c,e.query_))})})}function D$(e,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function R$(e,t,r){if(t.childName==null||r.childName==null)throw ul("Should only compare child_ events.");const n=new ve(t.childName,t.snapshotNode),s=new ve(r.childName,r.snapshotNode);return e.index_.compare(n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(e,t){return{eventCache:e,serverCache:t}}function mc(e,t,r,n){return vm(new Pi(t,r,n),e.serverCache)}function xA(e,t,r,n){return vm(e.eventCache,new Pi(t,r,n))}function Vh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function _a(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg;const M$=()=>(hg||(hg=new Ir(bL)),hg);class ze{static fromObject(t){let r=new ze(null);return ar(t,(n,s)=>{r=r.set(new De(n),s)}),r}constructor(t,r=M$()){this.value=t,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:Ce(),value:this.value};if(xe(t))return null;{const n=ge(t),s=this.children.get(n);if(s!==null){const i=s.findRootMostMatchingPathAndValue(qe(t),r);return i!=null?{path:mt(new De(n),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(xe(t))return this;{const r=ge(t),n=this.children.get(r);return n!==null?n.subtree(qe(t)):new ze(null)}}set(t,r){if(xe(t))return new ze(r,this.children);{const n=ge(t),i=(this.children.get(n)||new ze(null)).set(qe(t),r),o=this.children.insert(n,i);return new ze(this.value,o)}}remove(t){if(xe(t))return this.children.isEmpty()?new ze(null):new ze(null,this.children);{const r=ge(t),n=this.children.get(r);if(n){const s=n.remove(qe(t));let i;return s.isEmpty()?i=this.children.remove(r):i=this.children.insert(r,s),this.value===null&&i.isEmpty()?new ze(null):new ze(this.value,i)}else return this}}get(t){if(xe(t))return this.value;{const r=ge(t),n=this.children.get(r);return n?n.get(qe(t)):null}}setTree(t,r){if(xe(t))return r;{const n=ge(t),i=(this.children.get(n)||new ze(null)).setTree(qe(t),r);let o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),new ze(this.value,o)}}fold(t){return this.fold_(Ce(),t)}fold_(t,r){const n={};return this.children.inorderTraversal((s,i)=>{n[s]=i.fold_(mt(t,s),r)}),r(t,this.value,n)}findOnPath(t,r){return this.findOnPath_(t,Ce(),r)}findOnPath_(t,r,n){const s=this.value?n(r,this.value):!1;if(s)return s;if(xe(t))return null;{const i=ge(t),o=this.children.get(i);return o?o.findOnPath_(qe(t),mt(r,i),n):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,Ce(),r)}foreachOnPath_(t,r,n){if(xe(t))return this;{this.value&&n(r,this.value);const s=ge(t),i=this.children.get(s);return i?i.foreachOnPath_(qe(t),mt(r,s),n):new ze(null)}}foreach(t){this.foreach_(Ce(),t)}foreach_(t,r){this.children.inorderTraversal((n,s)=>{s.foreach_(mt(t,n),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,n)=>{n.value&&t(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.writeTree_=t}static empty(){return new Bn(new ze(null))}}function pc(e,t,r){if(xe(t))return new Bn(new ze(r));{const n=e.writeTree_.findRootMostValueAndPath(t);if(n!=null){const s=n.path;let i=n.value;const o=yr(s,t);return i=i.updateChild(o,r),new Bn(e.writeTree_.set(s,i))}else{const s=new ze(r),i=e.writeTree_.setTree(t,s);return new Bn(i)}}}function Zv(e,t,r){let n=e;return ar(r,(s,i)=>{n=pc(n,mt(t,s),i)}),n}function Gj(e,t){if(xe(t))return Bn.empty();{const r=e.writeTree_.setTree(t,new ze(null));return new Bn(r)}}function e0(e,t){return Ia(e,t)!=null}function Ia(e,t){const r=e.writeTree_.findRootMostValueAndPath(t);return r!=null?e.writeTree_.get(r.path).getChild(yr(r.path,t)):null}function Kj(e){const t=[],r=e.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(pt,(n,s)=>{t.push(new ve(n,s))}):e.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&t.push(new ve(n,s.value))}),t}function Ni(e,t){if(xe(t))return e;{const r=Ia(e,t);return r!=null?new Bn(new ze(r)):new Bn(e.writeTree_.subtree(t))}}function t0(e){return e.writeTree_.isEmpty()}function Vo(e,t){return yA(Ce(),e.writeTree_,t)}function yA(e,t,r){if(t.value!=null)return r.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal((s,i)=>{s===".priority"?(q(i.value!==null,"Priority writes must always be leaf nodes"),n=i.value):r=yA(mt(e,s),i,r)}),!r.getChild(e).isEmpty()&&n!==null&&(r=r.updateChild(mt(e,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(e,t){return jA(t,e)}function L$(e,t,r,n,s){q(n>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:r,writeId:n,visible:s}),s&&(e.visibleWrites=pc(e.visibleWrites,t,r)),e.lastWriteId=n}function $$(e,t,r,n){q(n>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:r,writeId:n,visible:!0}),e.visibleWrites=Zv(e.visibleWrites,t,r),e.lastWriteId=n}function F$(e,t){for(let r=0;r<e.allWrites.length;r++){const n=e.allWrites[r];if(n.writeId===t)return n}return null}function U$(e,t){const r=e.allWrites.findIndex(l=>l.writeId===t);q(r>=0,"removeWrite called with nonexistent writeId.");const n=e.allWrites[r];e.allWrites.splice(r,1);let s=n.visible,i=!1,o=e.allWrites.length-1;for(;s&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=r&&B$(l,n.path)?s=!1:mn(n.path,l.path)&&(i=!0)),o--}if(s){if(i)return z$(e),!0;if(n.snap)e.visibleWrites=Gj(e.visibleWrites,n.path);else{const l=n.children;ar(l,c=>{e.visibleWrites=Gj(e.visibleWrites,mt(n.path,c))})}return!0}else return!1}function B$(e,t){if(e.snap)return mn(e.path,t);for(const r in e.children)if(e.children.hasOwnProperty(r)&&mn(mt(e.path,r),t))return!0;return!1}function z$(e){e.visibleWrites=bA(e.allWrites,W$,Ce()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function W$(e){return e.visible}function bA(e,t,r){let n=Bn.empty();for(let s=0;s<e.length;++s){const i=e[s];if(t(i)){const o=i.path;let l;if(i.snap)mn(r,o)?(l=yr(r,o),n=pc(n,l,i.snap)):mn(o,r)&&(l=yr(o,r),n=pc(n,Ce(),i.snap.getChild(l)));else if(i.children){if(mn(r,o))l=yr(r,o),n=Zv(n,l,i.children);else if(mn(o,r))if(l=yr(o,r),xe(l))n=Zv(n,Ce(),i.children);else{const c=zo(i.children,ge(l));if(c){const u=c.getChild(qe(l));n=pc(n,Ce(),u)}}}else throw ul("WriteRecord should have .snap or .children")}}return n}function wA(e,t,r,n,s){if(!n&&!s){const i=Ia(e.visibleWrites,t);if(i!=null)return i;{const o=Ni(e.visibleWrites,t);if(t0(o))return r;if(r==null&&!e0(o,Ce()))return null;{const l=r||le.EMPTY_NODE;return Vo(o,l)}}}else{const i=Ni(e.visibleWrites,t);if(!s&&t0(i))return r;if(!s&&r==null&&!e0(i,Ce()))return null;{const o=function(u){return(u.visible||s)&&(!n||!~n.indexOf(u.writeId))&&(mn(u.path,t)||mn(t,u.path))},l=bA(e.allWrites,o,t),c=r||le.EMPTY_NODE;return Vo(l,c)}}}function H$(e,t,r){let n=le.EMPTY_NODE;const s=Ia(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(pt,(i,o)=>{n=n.updateImmediateChild(i,o)}),n;if(r){const i=Ni(e.visibleWrites,t);return r.forEachChild(pt,(o,l)=>{const c=Vo(Ni(i,new De(o)),l);n=n.updateImmediateChild(o,c)}),Kj(i).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{const i=Ni(e.visibleWrites,t);return Kj(i).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function q$(e,t,r,n,s){q(n||s,"Either existingEventSnap or existingServerSnap must exist");const i=mt(t,r);if(e0(e.visibleWrites,i))return null;{const o=Ni(e.visibleWrites,i);return t0(o)?s.getChild(r):Vo(o,s.getChild(r))}}function V$(e,t,r,n){const s=mt(t,r),i=Ia(e.visibleWrites,s);if(i!=null)return i;if(n.isCompleteForChild(r)){const o=Ni(e.visibleWrites,s);return Vo(o,n.getNode().getImmediateChild(r))}else return null}function G$(e,t){return Ia(e.visibleWrites,t)}function K$(e,t,r,n,s,i,o){let l;const c=Ni(e.visibleWrites,t),u=Ia(c,Ce());if(u!=null)l=u;else if(r!=null)l=Vo(c,r);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=o.getCompare(),f=i?l.getReverseIteratorFrom(n,o):l.getIteratorFrom(n,o);let m=f.getNext();for(;m&&d.length<s;)h(m,n)!==0&&d.push(m),m=f.getNext();return d}else return[]}function Y$(){return{visibleWrites:Bn.empty(),allWrites:[],lastWriteId:-1}}function Gh(e,t,r,n){return wA(e.writeTree,e.treePath,t,r,n)}function Iy(e,t){return H$(e.writeTree,e.treePath,t)}function Yj(e,t,r,n){return q$(e.writeTree,e.treePath,t,r,n)}function Kh(e,t){return G$(e.writeTree,mt(e.treePath,t))}function X$(e,t,r,n,s,i){return K$(e.writeTree,e.treePath,t,r,n,s,i)}function Dy(e,t,r){return V$(e.writeTree,e.treePath,t,r)}function _A(e,t){return jA(mt(e.treePath,t),e.writeTree)}function jA(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,n=t.childName;q(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),q(n!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const i=s.type;if(r==="child_added"&&i==="child_removed")this.changeMap.set(n,Hc(n,t.snapshotNode,s.snapshotNode));else if(r==="child_removed"&&i==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&i==="child_changed")this.changeMap.set(n,Wc(n,s.oldSnap));else if(r==="child_changed"&&i==="child_added")this.changeMap.set(n,Ho(n,t.snapshotNode));else if(r==="child_changed"&&i==="child_changed")this.changeMap.set(n,Hc(n,t.snapshotNode,s.oldSnap));else throw ul("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${getCompleteChild(t){return null}getChildAfterChild(t,r,n){return null}}const NA=new J$;class Ry{constructor(t,r,n=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const n=this.optCompleteServerCache_!=null?new Pi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Dy(this.writes_,t,n)}}getChildAfterChild(t,r,n){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:_a(this.viewCache_),i=X$(this.writes_,s,r,1,n,t);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(e){return{filter:e}}function eF(e,t){q(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),q(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function tF(e,t,r,n,s){const i=new Q$;let o,l;if(r.type===Ln.OVERWRITE){const u=r;u.source.fromUser?o=r0(e,t,u.path,u.snap,n,s,i):(q(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!xe(u.path),o=Yh(e,t,u.path,u.snap,n,s,l,i))}else if(r.type===Ln.MERGE){const u=r;u.source.fromUser?o=nF(e,t,u.path,u.children,n,s,i):(q(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),o=n0(e,t,u.path,u.children,n,s,l,i))}else if(r.type===Ln.ACK_USER_WRITE){const u=r;u.revert?o=aF(e,t,u.path,n,s,i):o=sF(e,t,u.path,u.affectedTree,n,s,i)}else if(r.type===Ln.LISTEN_COMPLETE)o=iF(e,t,r.path,n,i);else throw ul("Unknown operation type: "+r.type);const c=i.getChanges();return rF(t,o,c),{viewCache:o,changes:c}}function rF(e,t,r){const n=t.eventCache;if(n.isFullyInitialized()){const s=n.getNode().isLeafNode()||n.getNode().isEmpty(),i=Vh(e);(r.length>0||!e.eventCache.isFullyInitialized()||s&&!n.getNode().equals(i)||!n.getNode().getPriority().equals(i.getPriority()))&&r.push(gA(Vh(t)))}}function SA(e,t,r,n,s,i){const o=t.eventCache;if(Kh(n,r)!=null)return t;{let l,c;if(xe(r))if(q(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=_a(t),d=u instanceof le?u:le.EMPTY_NODE,h=Iy(n,d);l=e.filter.updateFullNode(t.eventCache.getNode(),h,i)}else{const u=Gh(n,_a(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,i)}else{const u=ge(r);if(u===".priority"){q(Ai(r)===1,"Can't have a priority with additional path components");const d=o.getNode();c=t.serverCache.getNode();const h=Yj(n,r,d,c);h!=null?l=e.filter.updatePriority(d,h):l=o.getNode()}else{const d=qe(r);let h;if(o.isCompleteForChild(u)){c=t.serverCache.getNode();const f=Yj(n,r,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=Dy(n,u,t.serverCache);h!=null?l=e.filter.updateChild(o.getNode(),u,h,d,s,i):l=o.getNode()}}return mc(t,l,o.isFullyInitialized()||xe(r),e.filter.filtersNodes())}}function Yh(e,t,r,n,s,i,o,l){const c=t.serverCache;let u;const d=o?e.filter:e.filter.getIndexedFilter();if(xe(r))u=d.updateFullNode(c.getNode(),n,null);else if(d.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(r,n);u=d.updateFullNode(c.getNode(),m,null)}else{const m=ge(r);if(!c.isCompleteForPath(r)&&Ai(r)>1)return t;const p=qe(r),g=c.getNode().getImmediateChild(m).updateChild(p,n);m===".priority"?u=d.updatePriority(c.getNode(),g):u=d.updateChild(c.getNode(),m,g,p,NA,null)}const h=xA(t,u,c.isFullyInitialized()||xe(r),d.filtersNodes()),f=new Ry(s,h,i);return SA(e,h,r,s,f,l)}function r0(e,t,r,n,s,i,o){const l=t.eventCache;let c,u;const d=new Ry(s,t,i);if(xe(r))u=e.filter.updateFullNode(t.eventCache.getNode(),n,o),c=mc(t,u,!0,e.filter.filtersNodes());else{const h=ge(r);if(h===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),n),c=mc(t,u,l.isFullyInitialized(),l.isFiltered());else{const f=qe(r),m=l.getNode().getImmediateChild(h);let p;if(xe(f))p=n;else{const x=d.getCompleteChild(h);x!=null?Ny(f)===".priority"&&x.getChild(cA(f)).isEmpty()?p=x:p=x.updateChild(f,n):p=le.EMPTY_NODE}if(m.equals(p))c=t;else{const x=e.filter.updateChild(l.getNode(),h,p,f,d,o);c=mc(t,x,l.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function Xj(e,t){return e.eventCache.isCompleteForChild(t)}function nF(e,t,r,n,s,i,o){let l=t;return n.foreach((c,u)=>{const d=mt(r,c);Xj(t,ge(d))&&(l=r0(e,l,d,u,s,i,o))}),n.foreach((c,u)=>{const d=mt(r,c);Xj(t,ge(d))||(l=r0(e,l,d,u,s,i,o))}),l}function Qj(e,t,r){return r.foreach((n,s)=>{t=t.updateChild(n,s)}),t}function n0(e,t,r,n,s,i,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,u;xe(r)?u=n:u=new ze(null).setTree(r,n);const d=t.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const m=t.serverCache.getNode().getImmediateChild(h),p=Qj(e,m,f);c=Yh(e,c,new De(h),p,s,i,o,l)}}),u.children.inorderTraversal((h,f)=>{const m=!t.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!m){const p=t.serverCache.getNode().getImmediateChild(h),x=Qj(e,p,f);c=Yh(e,c,new De(h),x,s,i,o,l)}}),c}function sF(e,t,r,n,s,i,o){if(Kh(s,r)!=null)return t;const l=t.serverCache.isFiltered(),c=t.serverCache;if(n.value!=null){if(xe(r)&&c.isFullyInitialized()||c.isCompleteForPath(r))return Yh(e,t,r,c.getNode().getChild(r),s,i,l,o);if(xe(r)){let u=new ze(null);return c.getNode().forEachChild(Oo,(d,h)=>{u=u.set(new De(d),h)}),n0(e,t,r,u,s,i,l,o)}else return t}else{let u=new ze(null);return n.foreach((d,h)=>{const f=mt(r,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),n0(e,t,r,u,s,i,l,o)}}function iF(e,t,r,n,s){const i=t.serverCache,o=xA(t,i.getNode(),i.isFullyInitialized()||xe(r),i.isFiltered());return SA(e,o,r,n,NA,s)}function aF(e,t,r,n,s,i){let o;if(Kh(n,r)!=null)return t;{const l=new Ry(n,t,s),c=t.eventCache.getNode();let u;if(xe(r)||ge(r)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=Gh(n,_a(t));else{const h=t.serverCache.getNode();q(h instanceof le,"serverChildren would be complete if leaf node"),d=Iy(n,h)}d=d,u=e.filter.updateFullNode(c,d,i)}else{const d=ge(r);let h=Dy(n,d,t.serverCache);h==null&&t.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=e.filter.updateChild(c,d,h,qe(r),l,i):t.eventCache.getNode().hasChild(d)?u=e.filter.updateChild(c,d,le.EMPTY_NODE,qe(r),l,i):u=c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Gh(n,_a(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,i)))}return o=t.serverCache.isFullyInitialized()||Kh(n,Ce())!=null,mc(t,u,o,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,s=new ky(n.getIndex()),i=S$(n);this.processor_=Z$(i);const o=r.serverCache,l=r.eventCache,c=s.updateFullNode(le.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(le.EMPTY_NODE,l.getNode(),null),d=new Pi(c,o.isFullyInitialized(),s.filtersNodes()),h=new Pi(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=vm(h,d),this.eventGenerator_=new T$(this.query_)}get query(){return this.query_}}function lF(e){return e.viewCache_.serverCache.getNode()}function cF(e){return Vh(e.viewCache_)}function uF(e,t){const r=_a(e.viewCache_);return r&&(e.query._queryParams.loadsAllData()||!xe(t)&&!r.getImmediateChild(ge(t)).isEmpty())?r.getChild(t):null}function Jj(e){return e.eventRegistrations_.length===0}function dF(e,t){e.eventRegistrations_.push(t)}function Zj(e,t,r){const n=[];if(r){q(t==null,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(r,s);o&&n.push(o)})}if(t){let s=[];for(let i=0;i<e.eventRegistrations_.length;++i){const o=e.eventRegistrations_[i];if(!o.matches(t))s.push(o);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(i+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return n}function e1(e,t,r,n){t.type===Ln.MERGE&&t.source.queryId!==null&&(q(_a(e.viewCache_),"We should always have a full cache before handling merges"),q(Vh(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,i=tF(e.processor_,s,t,r,n);return eF(e.processor_,i.viewCache),q(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=i.viewCache,EA(e,i.changes,i.viewCache.eventCache.getNode(),null)}function hF(e,t){const r=e.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(pt,(i,o)=>{n.push(Ho(i,o))}),r.isFullyInitialized()&&n.push(gA(r.getNode())),EA(e,n,r.getNode(),t)}function EA(e,t,r,n){const s=n?[n]:e.eventRegistrations_;return I$(e.eventGenerator_,t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh;class CA{constructor(){this.views=new Map}}function fF(e){q(!Xh,"__referenceConstructor has already been defined"),Xh=e}function mF(){return q(Xh,"Reference.ts has not been loaded"),Xh}function pF(e){return e.views.size===0}function My(e,t,r,n){const s=t.source.queryId;if(s!==null){const i=e.views.get(s);return q(i!=null,"SyncTree gave us an op for an invalid query."),e1(i,t,r,n)}else{let i=[];for(const o of e.views.values())i=i.concat(e1(o,t,r,n));return i}}function kA(e,t,r,n,s){const i=t._queryIdentifier,o=e.views.get(i);if(!o){let l=Gh(r,s?n:null),c=!1;l?c=!0:n instanceof le?(l=Iy(r,n),c=!1):(l=le.EMPTY_NODE,c=!1);const u=vm(new Pi(l,c,!1),new Pi(n,s,!1));return new oF(t,u)}return o}function gF(e,t,r,n,s,i){const o=kA(e,t,n,s,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),dF(o,r),hF(o,r)}function vF(e,t,r,n){const s=t._queryIdentifier,i=[];let o=[];const l=Oi(e);if(s==="default")for(const[c,u]of e.views.entries())o=o.concat(Zj(u,r,n)),Jj(u)&&(e.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=e.views.get(s);c&&(o=o.concat(Zj(c,r,n)),Jj(c)&&(e.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!Oi(e)&&i.push(new(mF())(t._repo,t._path)),{removed:i,events:o}}function AA(e){const t=[];for(const r of e.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function Si(e,t){let r=null;for(const n of e.views.values())r=r||uF(n,t);return r}function PA(e,t){if(t._queryParams.loadsAllData())return ym(e);{const n=t._queryIdentifier;return e.views.get(n)}}function OA(e,t){return PA(e,t)!=null}function Oi(e){return ym(e)!=null}function ym(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh;function xF(e){q(!Qh,"__referenceConstructor has already been defined"),Qh=e}function yF(){return q(Qh,"Reference.ts has not been loaded"),Qh}let bF=1;class t1{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ze(null),this.pendingWriteTree_=Y$(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TA(e,t,r,n,s){return L$(e.pendingWriteTree_,t,r,n,s),s?fl(e,new wa(Py(),t,r)):[]}function wF(e,t,r,n){$$(e.pendingWriteTree_,t,r,n);const s=ze.fromObject(r);return fl(e,new qo(Py(),t,s))}function hi(e,t,r=!1){const n=F$(e.pendingWriteTree_,t);if(U$(e.pendingWriteTree_,t)){let i=new ze(null);return n.snap!=null?i=i.set(Ce(),!0):ar(n.children,o=>{i=i.set(new De(o),!0)}),fl(e,new qh(n.path,i,r))}else return[]}function Su(e,t,r){return fl(e,new wa(Oy(),t,r))}function _F(e,t,r){const n=ze.fromObject(r);return fl(e,new qo(Oy(),t,n))}function jF(e,t){return fl(e,new Vc(Oy(),t))}function NF(e,t,r){const n=$y(e,r);if(n){const s=Fy(n),i=s.path,o=s.queryId,l=yr(i,t),c=new Vc(Ty(o),l);return Uy(e,i,c)}else return[]}function Jh(e,t,r,n,s=!1){const i=t._path,o=e.syncPointTree_.get(i);let l=[];if(o&&(t._queryIdentifier==="default"||OA(o,t))){const c=vF(o,t,r,n);pF(o)&&(e.syncPointTree_=e.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=e.syncPointTree_.findOnPath(i,(f,m)=>Oi(m));if(d&&!h){const f=e.syncPointTree_.subtree(i);if(!f.isEmpty()){const m=CF(f);for(let p=0;p<m.length;++p){const x=m[p],g=x.query,v=MA(e,x);e.listenProvider_.startListening(gc(g),Gc(e,g),v.hashFn,v.onComplete)}}}!h&&u.length>0&&!n&&(d?e.listenProvider_.stopListening(gc(t),null):u.forEach(f=>{const m=e.queryToTagMap.get(bm(f));e.listenProvider_.stopListening(gc(f),m)}))}kF(e,u)}return l}function IA(e,t,r,n){const s=$y(e,n);if(s!=null){const i=Fy(s),o=i.path,l=i.queryId,c=yr(o,t),u=new wa(Ty(l),c,r);return Uy(e,o,u)}else return[]}function SF(e,t,r,n){const s=$y(e,n);if(s){const i=Fy(s),o=i.path,l=i.queryId,c=yr(o,t),u=ze.fromObject(r),d=new qo(Ty(l),c,u);return Uy(e,o,d)}else return[]}function s0(e,t,r,n=!1){const s=t._path;let i=null,o=!1;e.syncPointTree_.foreachOnPath(s,(f,m)=>{const p=yr(f,s);i=i||Si(m,p),o=o||Oi(m)});let l=e.syncPointTree_.get(s);l?(o=o||Oi(l),i=i||Si(l,Ce())):(l=new CA,e.syncPointTree_=e.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=le.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((m,p)=>{const x=Si(p,Ce());x&&(i=i.updateImmediateChild(m,x))}));const u=OA(l,t);if(!u&&!t._queryParams.loadsAllData()){const f=bm(t);q(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=AF();e.queryToTagMap.set(f,m),e.tagToQueryMap.set(m,f)}const d=xm(e.pendingWriteTree_,s);let h=gF(l,t,r,d,i,c);if(!u&&!o&&!n){const f=PA(l,t);h=h.concat(PF(e,t,f))}return h}function Ly(e,t,r){const s=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(o,l)=>{const c=yr(o,t),u=Si(l,c);if(u)return u});return wA(s,t,i,r,!0)}function EF(e,t){const r=t._path;let n=null;e.syncPointTree_.foreachOnPath(r,(u,d)=>{const h=yr(u,r);n=n||Si(d,h)});let s=e.syncPointTree_.get(r);s?n=n||Si(s,Ce()):(s=new CA,e.syncPointTree_=e.syncPointTree_.set(r,s));const i=n!=null,o=i?new Pi(n,!0,!1):null,l=xm(e.pendingWriteTree_,t._path),c=kA(s,t,l,i?o.getNode():le.EMPTY_NODE,i);return cF(c)}function fl(e,t){return DA(t,e.syncPointTree_,null,xm(e.pendingWriteTree_,Ce()))}function DA(e,t,r,n){if(xe(e.path))return RA(e,t,r,n);{const s=t.get(Ce());r==null&&s!=null&&(r=Si(s,Ce()));let i=[];const o=ge(e.path),l=e.operationForChild(o),c=t.children.get(o);if(c&&l){const u=r?r.getImmediateChild(o):null,d=_A(n,o);i=i.concat(DA(l,c,u,d))}return s&&(i=i.concat(My(s,e,n,r))),i}}function RA(e,t,r,n){const s=t.get(Ce());r==null&&s!=null&&(r=Si(s,Ce()));let i=[];return t.children.inorderTraversal((o,l)=>{const c=r?r.getImmediateChild(o):null,u=_A(n,o),d=e.operationForChild(o);d&&(i=i.concat(RA(d,l,c,u)))}),s&&(i=i.concat(My(s,e,n,r))),i}function MA(e,t){const r=t.query,n=Gc(e,r);return{hashFn:()=>(lF(t)||le.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return n?NF(e,r._path,n):jF(e,r._path);{const i=jL(s,r);return Jh(e,r,null,i)}}}}function Gc(e,t){const r=bm(t);return e.queryToTagMap.get(r)}function bm(e){return e._path.toString()+"$"+e._queryIdentifier}function $y(e,t){return e.tagToQueryMap.get(t)}function Fy(e){const t=e.indexOf("$");return q(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new De(e.substr(0,t))}}function Uy(e,t,r){const n=e.syncPointTree_.get(t);q(n,"Missing sync point for query tag that we're tracking");const s=xm(e.pendingWriteTree_,t);return My(n,r,s,null)}function CF(e){return e.fold((t,r,n)=>{if(r&&Oi(r))return[ym(r)];{let s=[];return r&&(s=AA(r)),ar(n,(i,o)=>{s=s.concat(o)}),s}})}function gc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(yF())(e._repo,e._path):e}function kF(e,t){for(let r=0;r<t.length;++r){const n=t[r];if(!n._queryParams.loadsAllData()){const s=bm(n),i=e.queryToTagMap.get(s);e.queryToTagMap.delete(s),e.tagToQueryMap.delete(i)}}}function AF(){return bF++}function PF(e,t,r){const n=t._path,s=Gc(e,t),i=MA(e,r),o=e.listenProvider_.startListening(gc(t),s,i.hashFn,i.onComplete),l=e.syncPointTree_.subtree(n);if(s)q(!Oi(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,d,h)=>{if(!xe(u)&&d&&Oi(d))return[ym(d).query];{let f=[];return d&&(f=f.concat(AA(d).map(m=>m.query))),ar(h,(m,p)=>{f=f.concat(p)}),f}});for(let u=0;u<c.length;++u){const d=c[u];e.listenProvider_.stopListening(gc(d),Gc(e,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new By(r)}node(){return this.node_}}class zy{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=mt(this.path_,t);return new zy(this.syncTree_,r)}node(){return Ly(this.syncTree_,this.path_)}}const OF=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},r1=function(e,t,r){if(!e||typeof e!="object")return e;if(q(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return TF(e[".sv"],t,r);if(typeof e[".sv"]=="object")return IF(e[".sv"],t);q(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},TF=function(e,t,r){switch(e){case"timestamp":return r.timestamp;default:q(!1,"Unexpected server value: "+e)}},IF=function(e,t,r){e.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const n=e.increment;typeof n!="number"&&q(!1,"Unexpected increment value: "+n);const s=t.node();if(q(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;const o=s.getValue();return typeof o!="number"?n:o+n},LA=function(e,t,r,n){return Wy(t,new zy(r,e),n)},$A=function(e,t,r){return Wy(e,new By(t),r)};function Wy(e,t,r){const n=e.getPriority().val(),s=r1(n,t.getImmediateChild(".priority"),r);let i;if(e.isLeafNode()){const o=e,l=r1(o.getValue(),t,r);return l!==o.getValue()||s!==o.getPriority().val()?new Ft(l,Pt(s)):e}else{const o=e;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Ft(s))),o.forEachChild(pt,(l,c)=>{const u=Wy(c,t.getImmediateChild(l),r);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(t="",r=null,n={children:{},childCount:0}){this.name=t,this.parent=r,this.node=n}}function qy(e,t){let r=t instanceof De?t:new De(t),n=e,s=ge(r);for(;s!==null;){const i=zo(n.node.children,s)||{children:{},childCount:0};n=new Hy(s,n,i),r=qe(r),s=ge(r)}return n}function ml(e){return e.node.value}function FA(e,t){e.node.value=t,i0(e)}function UA(e){return e.node.childCount>0}function DF(e){return ml(e)===void 0&&!UA(e)}function wm(e,t){ar(e.node.children,(r,n)=>{t(new Hy(r,e,n))})}function BA(e,t,r,n){r&&t(e),wm(e,s=>{BA(s,t,!0)})}function RF(e,t,r){let n=e.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function Eu(e){return new De(e.parent===null?e.name:Eu(e.parent)+"/"+e.name)}function i0(e){e.parent!==null&&MF(e.parent,e.name,e)}function MF(e,t,r){const n=DF(r),s=os(e.node.children,t);n&&s?(delete e.node.children[t],e.node.childCount--,i0(e)):!n&&!s&&(e.node.children[t]=r.node,e.node.childCount++,i0(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=/[\[\].#$\/\u0000-\u001F\u007F]/,$F=/[\[\].#$\u0000-\u001F\u007F]/,fg=10*1024*1024,Vy=function(e){return typeof e=="string"&&e.length!==0&&!LF.test(e)},zA=function(e){return typeof e=="string"&&e.length!==0&&!$F.test(e)},FF=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),zA(e)},UF=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!yy(e)||e&&typeof e=="object"&&os(e,".sv")},BF=function(e,t,r,n){_m(mm(e,"value"),t,r)},_m=function(e,t,r){const n=r instanceof De?new n$(r,e):r;if(t===void 0)throw new Error(e+"contains undefined "+Vi(n));if(typeof t=="function")throw new Error(e+"contains a function "+Vi(n)+" with contents = "+t.toString());if(yy(t))throw new Error(e+"contains "+t.toString()+" "+Vi(n));if(typeof t=="string"&&t.length>fg/3&&pm(t)>fg)throw new Error(e+"contains a string greater than "+fg+" utf8 bytes "+Vi(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,i=!1;if(ar(t,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Vy(o)))throw new Error(e+" contains an invalid key ("+o+") "+Vi(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);s$(n,o),_m(e,l,n),i$(n)}),s&&i)throw new Error(e+' contains ".value" child '+Vi(n)+" in addition to actual children.")}},zF=function(e,t){let r,n;for(r=0;r<t.length;r++){n=t[r];const i=zc(n);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Vy(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(r$);let s=null;for(r=0;r<t.length;r++){if(n=t[r],s!==null&&mn(s,n))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}},WF=function(e,t,r,n){const s=mm(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const i=[];ar(t,(o,l)=>{const c=new De(o);if(_m(s,l,mt(r,c)),Ny(c)===".priority"&&!UF(l))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),zF(s,i)},WA=function(e,t,r,n){if(!zA(r))throw new Error(mm(e,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},HF=function(e,t,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),WA(e,t,r)},HA=function(e,t){if(ge(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},qF=function(e,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Vy(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!FF(r))throw new Error(mm(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jm(e,t){let r=null;for(let n=0;n<t.length;n++){const s=t[n],i=s.getPath();r!==null&&!Sy(i,r.path)&&(e.eventLists_.push(r),r=null),r===null&&(r={events:[],path:i}),r.events.push(s)}r&&e.eventLists_.push(r)}function qA(e,t,r){jm(e,r),VA(e,n=>Sy(n,t))}function yn(e,t,r){jm(e,r),VA(e,n=>mn(n,t)||mn(t,n))}function VA(e,t){e.recursionDepth_++;let r=!0;for(let n=0;n<e.eventLists_.length;n++){const s=e.eventLists_[n];if(s){const i=s.path;t(i)?(GF(e.eventLists_[n]),e.eventLists_[n]=null):r=!1}}r&&(e.eventLists_=[]),e.recursionDepth_--}function GF(e){for(let t=0;t<e.events.length;t++){const r=e.events[t];if(r!==null){e.events[t]=null;const n=r.getEventRunner();hc&&er("event: "+r.toString()),hl(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="repo_interrupt",YF=25;class XF{constructor(t,r,n,s){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new VF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hh(),this.transactionQueueTree_=new Hy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QF(e,t,r){if(e.stats_=_y(e.repoInfo_),e.forceRestClient_||CL())e.server_=new Wh(e.repoInfo_,(n,s,i,o)=>{n1(e,n,s,i,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>s1(e,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ot(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new _s(e.repoInfo_,t,(n,s,i,o)=>{n1(e,n,s,i,o)},n=>{s1(e,n)},n=>{ZF(e,n)},e.authTokenProvider_,e.appCheckProvider_,r),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(n=>{e.server_.refreshAuthToken(n)}),e.appCheckProvider_.addTokenChangeListener(n=>{e.server_.refreshAppCheckToken(n.token)}),e.statsReporter_=TL(e.repoInfo_,()=>new O$(e.stats_,e.server_)),e.infoData_=new E$,e.infoSyncTree_=new t1({startListening:(n,s,i,o)=>{let l=[];const c=e.infoData_.getNode(n._path);return c.isEmpty()||(l=Su(e.infoSyncTree_,n._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Gy(e,"connected",!1),e.serverSyncTree_=new t1({startListening:(n,s,i,o)=>(e.server_.listen(n,i,s,(l,c)=>{const u=o(l,c);yn(e.eventQueue_,n._path,u)}),[]),stopListening:(n,s)=>{e.server_.unlisten(n,s)}})}function JF(e){const r=e.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Nm(e){return OF({timestamp:JF(e)})}function n1(e,t,r,n,s){e.dataUpdateCount++;const i=new De(t);r=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,r):r;let o=[];if(s)if(n){const c=Mh(r,u=>Pt(u));o=SF(e.serverSyncTree_,i,c,s)}else{const c=Pt(r);o=IA(e.serverSyncTree_,i,c,s)}else if(n){const c=Mh(r,u=>Pt(u));o=_F(e.serverSyncTree_,i,c)}else{const c=Pt(r);o=Su(e.serverSyncTree_,i,c)}let l=i;o.length>0&&(l=Go(e,i)),yn(e.eventQueue_,l,o)}function s1(e,t){Gy(e,"connected",t),t===!1&&nU(e)}function ZF(e,t){ar(t,(r,n)=>{Gy(e,r,n)})}function Gy(e,t,r){const n=new De("/.info/"+t),s=Pt(r);e.infoData_.updateSnapshot(n,s);const i=Su(e.infoSyncTree_,n,s);yn(e.eventQueue_,n,i)}function Ky(e){return e.nextWriteId_++}function eU(e,t,r){const n=EF(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(s=>{const i=Pt(s).withIndex(t._queryParams.getIndex());s0(e.serverSyncTree_,t,r,!0);let o;if(t._queryParams.loadsAllData())o=Su(e.serverSyncTree_,t._path,i);else{const l=Gc(e.serverSyncTree_,t);o=IA(e.serverSyncTree_,t._path,i,l)}return yn(e.eventQueue_,t._path,o),Jh(e.serverSyncTree_,t,r,null,!0),i},s=>(Cu(e,"get for query "+Ot(t)+" failed: "+s),Promise.reject(new Error(s))))}function tU(e,t,r,n,s){Cu(e,"set",{path:t.toString(),value:r,priority:n});const i=Nm(e),o=Pt(r,n),l=Ly(e.serverSyncTree_,t),c=$A(o,l,i),u=Ky(e),d=TA(e.serverSyncTree_,t,c,u,!0);jm(e.eventQueue_,d),e.server_.put(t.toString(),o.val(!0),(f,m)=>{const p=f==="ok";p||jr("set at "+t+" failed: "+f);const x=hi(e.serverSyncTree_,u,!p);yn(e.eventQueue_,t,x),a0(e,s,f,m)});const h=Xy(e,t);Go(e,h),yn(e.eventQueue_,h,[])}function rU(e,t,r,n){Cu(e,"update",{path:t.toString(),value:r});let s=!0;const i=Nm(e),o={};if(ar(r,(l,c)=>{s=!1,o[l]=LA(mt(t,l),Pt(c),e.serverSyncTree_,i)}),s)er("update() called with empty data.  Don't do anything."),a0(e,n,"ok",void 0);else{const l=Ky(e),c=wF(e.serverSyncTree_,t,o,l);jm(e.eventQueue_,c),e.server_.merge(t.toString(),r,(u,d)=>{const h=u==="ok";h||jr("update at "+t+" failed: "+u);const f=hi(e.serverSyncTree_,l,!h),m=f.length>0?Go(e,t):t;yn(e.eventQueue_,m,f),a0(e,n,u,d)}),ar(r,u=>{const d=Xy(e,mt(t,u));Go(e,d)}),yn(e.eventQueue_,t,[])}}function nU(e){Cu(e,"onDisconnectEvents");const t=Nm(e),r=Hh();Jv(e.onDisconnect_,Ce(),(s,i)=>{const o=LA(s,i,e.serverSyncTree_,t);vA(r,s,o)});let n=[];Jv(r,Ce(),(s,i)=>{n=n.concat(Su(e.serverSyncTree_,s,i));const o=Xy(e,s);Go(e,o)}),e.onDisconnect_=Hh(),yn(e.eventQueue_,Ce(),n)}function sU(e,t,r){let n;ge(t._path)===".info"?n=s0(e.infoSyncTree_,t,r):n=s0(e.serverSyncTree_,t,r),qA(e.eventQueue_,t._path,n)}function i1(e,t,r){let n;ge(t._path)===".info"?n=Jh(e.infoSyncTree_,t,r):n=Jh(e.serverSyncTree_,t,r),qA(e.eventQueue_,t._path,n)}function iU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(KF)}function Cu(e,...t){let r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),er(r,...t)}function a0(e,t,r,n){t&&hl(()=>{if(r==="ok")t(null);else{const s=(r||"error").toUpperCase();let i=s;n&&(i+=": "+n);const o=new Error(i);o.code=s,t(o)}})}function GA(e,t,r){return Ly(e.serverSyncTree_,t,r)||le.EMPTY_NODE}function Yy(e,t=e.transactionQueueTree_){if(t||Sm(e,t),ml(t)){const r=YA(e,t);q(r.length>0,"Sending zero length transaction queue"),r.every(s=>s.status===0)&&aU(e,Eu(t),r)}else UA(t)&&wm(t,r=>{Yy(e,r)})}function aU(e,t,r){const n=r.map(u=>u.currentWriteId),s=GA(e,t,n);let i=s;const o=s.hash();for(let u=0;u<r.length;u++){const d=r[u];q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=yr(t,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const l=i.val(!0),c=t;e.server_.put(c.toString(),l,u=>{Cu(e,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<r.length;f++)r[f].status=2,d=d.concat(hi(e.serverSyncTree_,r[f].currentWriteId)),r[f].onComplete&&h.push(()=>r[f].onComplete(null,!0,r[f].currentOutputSnapshotResolved)),r[f].unwatcher();Sm(e,qy(e.transactionQueueTree_,t)),Yy(e,e.transactionQueueTree_),yn(e.eventQueue_,t,d);for(let f=0;f<h.length;f++)hl(h[f])}else{if(u==="datastale")for(let h=0;h<r.length;h++)r[h].status===3?r[h].status=4:r[h].status=0;else{jr("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<r.length;h++)r[h].status=4,r[h].abortReason=u}Go(e,t)}},o)}function Go(e,t){const r=KA(e,t),n=Eu(r),s=YA(e,r);return oU(e,s,n),n}function oU(e,t,r){if(t.length===0)return;const n=[];let s=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const c=t[l],u=yr(r,c.path);let d=!1,h;if(q(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(hi(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=YF)d=!0,h="maxretry",s=s.concat(hi(e.serverSyncTree_,c.currentWriteId,!0));else{const f=GA(e,c.path,o);c.currentInputSnapshot=f;const m=t[l].update(f.val());if(m!==void 0){_m("transaction failed: Data returned ",m,c.path);let p=Pt(m);typeof m=="object"&&m!=null&&os(m,".priority")||(p=p.updatePriority(f.getPriority()));const g=c.currentWriteId,v=Nm(e),b=$A(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=Ky(e),o.splice(o.indexOf(g),1),s=s.concat(TA(e.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(hi(e.serverSyncTree_,g,!0))}else d=!0,h="nodata",s=s.concat(hi(e.serverSyncTree_,c.currentWriteId,!0))}yn(e.eventQueue_,r,s),s=[],d&&(t[l].status=2,function(f){setTimeout(f,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(h==="nodata"?n.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):n.push(()=>t[l].onComplete(new Error(h),!1,null))))}Sm(e,e.transactionQueueTree_);for(let l=0;l<n.length;l++)hl(n[l]);Yy(e,e.transactionQueueTree_)}function KA(e,t){let r,n=e.transactionQueueTree_;for(r=ge(t);r!==null&&ml(n)===void 0;)n=qy(n,r),t=qe(t),r=ge(t);return n}function YA(e,t){const r=[];return XA(e,t,r),r.sort((n,s)=>n.order-s.order),r}function XA(e,t,r){const n=ml(t);if(n)for(let s=0;s<n.length;s++)r.push(n[s]);wm(t,s=>{XA(e,s,r)})}function Sm(e,t){const r=ml(t);if(r){let n=0;for(let s=0;s<r.length;s++)r[s].status!==2&&(r[n]=r[s],n++);r.length=n,FA(t,r.length>0?r:void 0)}wm(t,n=>{Sm(e,n)})}function Xy(e,t){const r=Eu(KA(e,t)),n=qy(e.transactionQueueTree_,t);return RF(n,s=>{mg(e,s)}),mg(e,n),BA(n,s=>{mg(e,s)}),r}function mg(e,t){const r=ml(t);if(r){const n=[];let s=[],i=-1;for(let o=0;o<r.length;o++)r[o].status===3||(r[o].status===1?(q(i===o-1,"All SENT items should be at beginning of queue."),i=o,r[o].status=3,r[o].abortReason="set"):(q(r[o].status===0,"Unexpected transaction status in abort"),r[o].unwatcher(),s=s.concat(hi(e.serverSyncTree_,r[o].currentWriteId,!0)),r[o].onComplete&&n.push(r[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?FA(t,void 0):r.length=i+1,yn(e.eventQueue_,Eu(t),s);for(let o=0;o<n.length;o++)hl(n[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(e){let t="";const r=e.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let s=r[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function cU(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const r of e.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):jr(`Invalid query segment '${r}' in query '${e}'`)}return t}const a1=function(e,t){const r=uU(e),n=r.namespace;r.domain==="firebase.com"&&Ps(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&Ps("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||xL();const s=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new eA(r.host,r.secure,n,s,t,"",n!==r.subdomain),path:new De(r.pathString)}},uU=function(e){let t="",r="",n="",s="",i="",o=!0,l="https",c=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let d=e.indexOf("/");d===-1&&(d=e.length);let h=e.indexOf("?");h===-1&&(h=e.length),t=e.substring(0,Math.min(d,h)),d<h&&(s=lU(e.substring(d,h)));const f=cU(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o=l==="https"||l==="wss",c=parseInt(t.substring(u+1),10)):u=t.length;const m=t.slice(0,u);if(m.toLowerCase()==="localhost")r="localhost";else if(m.split(".").length<=2)r=m;else{const p=t.indexOf(".");n=t.substring(0,p).toLowerCase(),r=t.substring(p+1),i=n}"ns"in f&&(i=f.ns)}return{host:t,port:c,domain:r,subdomain:n,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(t,r,n,s){this.eventType=t,this.eventRegistration=r,this.snapshot=n,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ot(this.snapshot.exportVal())}}class hU{constructor(t,r,n){this.eventRegistration=t,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(t,r,n,s){this._repo=t,this._path=r,this._queryParams=n,this._orderByCalled=s}get key(){return xe(this._path)?null:Ny(this._path)}get ref(){return new zs(this._repo,this._path)}get _queryIdentifier(){const t=qj(this._queryParams),r=by(t);return r==="{}"?"default":r}get _queryObject(){return qj(this._queryParams)}isEqual(t){if(t=dl(t),!(t instanceof Qy))return!1;const r=this._repo===t._repo,n=Sy(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return r&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+t$(this._path)}}class zs extends Qy{constructor(t,r){super(t,r,new Ay,!1)}get parent(){const t=cA(this._path);return t===null?null:new zs(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Kc{constructor(t,r,n){this._node=t,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new De(t),n=sa(this.ref,t);return new Kc(this._node.getChild(r),n,pt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>t(new Kc(s,sa(this.ref,n),pt)))}hasChild(t){const r=new De(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function G(e,t){return e=dl(e),e._checkNotDeleted("ref"),t!==void 0?sa(e._root,t):e._root}function sa(e,t){return e=dl(e),ge(e._path)===null?HF("child","path",t):WA("child","path",t),new zs(e._repo,mt(e._path,t))}function Yc(e){return HA("remove",e._path),gt(e,null)}function gt(e,t){e=dl(e),HA("set",e._path),BF("set",t,e._path);const r=new bu;return tU(e._repo,e._path,t,null,r.wrapCallback(()=>{})),r.promise}function fU(e,t){WF("update",t,e._path);const r=new bu;return rU(e._repo,e._path,t,r.wrapCallback(()=>{})),r.promise}function me(e){e=dl(e);const t=new QA(()=>{}),r=new Em(t);return eU(e._repo,e,r).then(n=>new Kc(n,new zs(e._repo,e._path),e._queryParams.getIndex()))}class Em{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const n=r._queryParams.getIndex();return new dU("value",this,new Kc(t.snapshotNode,new zs(r._repo,r._path),n))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new hU(this,t,r):null}matches(t){return t instanceof Em?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function mU(e,t,r,n,s){let i;if(typeof n=="object"&&(i=void 0,s=n),typeof n=="function"&&(i=n),s&&s.onlyOnce){const c=r,u=(d,h)=>{i1(e._repo,e,l),c(d,h)};u.userCallback=r.userCallback,u.context=r.context,r=u}const o=new QA(r,i||void 0),l=new Em(o);return sU(e._repo,e,l),()=>i1(e._repo,e,l)}function Pr(e,t,r,n){return mU(e,"value",t,r,n)}fF(zs);xF(zs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="FIREBASE_DATABASE_EMULATOR_HOST",o0={};let gU=!1;function vU(e,t,r,n){const s=t.lastIndexOf(":"),i=t.substring(0,s),o=vy(i);e.repoInfo_=new eA(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,r),n&&(e.authTokenProvider_=n)}function xU(e,t,r,n,s){let i=n||e.options.databaseURL;i===void 0&&(e.options.projectId||Ps("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),er("Using default host for project ",e.options.projectId),i=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=a1(i,s),l=o.repoInfo,c;typeof process<"u"&&Cj&&(c=Cj[pU]),c?(i=`http://${c}?ns=${l.namespace}`,o=a1(i,s),l=o.repoInfo):o.repoInfo.secure;const u=new AL(e.name,e.options,t);qF("Invalid Firebase Database URL",o),xe(o.path)||Ps("Database URL must point to the root of a Firebase Database (not including a child path).");const d=bU(l,e,u,new kL(e,r));return new wU(d,e)}function yU(e,t){const r=o0[t];(!r||r[e.key]!==e)&&Ps(`Database ${t}(${e.repoInfo_}) has already been deleted.`),iU(e),delete r[e.key]}function bU(e,t,r,n){let s=o0[t.name];s||(s={},o0[t.name]=s);let i=s[e.toURLString()];return i&&Ps("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new XF(e,gU,r,n),s[e.toURLString()]=i,i}class wU{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(QF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zs(this._repo,Ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ps("Cannot call "+t+" on a deleted database.")}}function _U(e=Z6(),t){const r=K6(e,"database").getImmediate({identifier:t});if(!r._instanceStarted){const n=I5("database");n&&jU(r,...n)}return r}function jU(e,t,r,n={}){e=dl(e),e._checkNotDeleted("useEmulator");const s=`${t}:${r}`,i=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&Lh(n,i.repoInfo_.emulatorOptions))return;Ps("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&Ps('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ih(ih.OWNER);else if(n.mockUserToken){const l=typeof n.mockUserToken=="string"?n.mockUserToken:R5(n.mockUserToken,e.app.options.projectId);o=new ih(l)}vy(t)&&(D5(t),$5("Database",!0)),vU(i,s,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(e){hL(J6),Fh(new Fc("database",(t,{instanceIdentifier:r})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return xU(n,s,i,r)},"PUBLIC").setMultipleInstances(!0)),Ao(kj,Aj,e),Ao(kj,Aj,"esm2020")}_s.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};_s.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};NU();const JA={apiKey:"AIzaSyBqJNXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",authDomain:"educare-b132a.firebaseapp.com",databaseURL:"https://educare-b132a-default-rtdb.firebaseio.com",projectId:"educare-b132a",storageBucket:"educare-b132a.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdefghijklmnop"};console.log("Firebase config:",JA);let ZA;try{ZA=Lk(JA),console.log("Firebase app initialized successfully")}catch(e){throw console.error("Firebase initialization error:",e),e}let V;try{V=_U(ZA),console.log("Firebase database initialized successfully")}catch(e){throw console.error("Firebase database initialization error:",e),e}class SU{constructor(){Ha(this,"USER_KEY","educare_user")}storeUser(t){try{localStorage.setItem(this.USER_KEY,JSON.stringify(t)),console.log("User stored successfully:",t)}catch(r){console.error("Failed to store user:",r)}}getStoredUser(){try{const t=localStorage.getItem(this.USER_KEY);if(t){const r=JSON.parse(t);return console.log("Retrieved stored user:",r),r}return null}catch(t){return console.error("Failed to retrieve user:",t),null}}getCurrentUser(){return this.getStoredUser()}clearUser(){try{localStorage.removeItem(this.USER_KEY),console.log("User data cleared")}catch(t){console.error("Failed to clear user:",t)}}hasStoredUser(){return localStorage.getItem(this.USER_KEY)!==null}}const at=new SU;class EU{extractUsername(t){return t.split("@")[0].toLowerCase()}async authenticateUser(t){try{const{email:r,password:n}=t,s=this.extractUsername(r);console.log("Attempting to authenticate:",s);const i=G(V),o=await me(sa(i,"Schoolss"));if(!o.exists())return console.log("No schools found in database"),{success:!1,error:"NETWORK_ERROR",message:"Database connection error. Please try again."};const l=o.val();console.log("Found schools:",Object.keys(l));let c=!1,u=!1,d=null,h=null;console.log("=== STEP 1: Checking all schools ===");for(const[f,m]of Object.entries(l))if(console.log(`Searching in school: ${f}`),m&&typeof m=="object"&&"users"in m){const p=m.users;if(p&&s in p){c=!0;const x=p[s];if(console.log(`Found user ${s} in ${f}:`,x),x.Password===n){console.log("Password verified successfully for student");const g=x.Name||x.name||"Student";let v;try{const _=await me(sa(i,`Schoolss/${f}/Individual average/Students`));if(_.exists()){const j=_.val();if(j&&g in j){const N=j[g];v=typeof N=="string"?parseFloat(N):N,console.log(`Found average grade for ${g}:`,v)}}}catch(_){console.error("Error fetching student average:",_)}let b={};try{const _=await me(sa(i,`Schoolss/${f}/Marks`));if(_.exists()){const j=_.val();for(const[N,C]of Object.entries(j))if(C&&typeof C=="object"&&s in C){const I=C[s];if(I&&I.Rating&&I.Rating["sub rating"]){const E=I.Rating["sub rating"],D=typeof E=="string"?parseFloat(E):E;b[N]=D}}}}catch(_){console.error("Error fetching subject grades:",_)}const w={username:s,name:g,grade:x.Grade||"Unknown",role:x.Role||"Student",school:f,averageGrade:v,subjectGrades:b};at.storeUser(w),d={success:!0,user:{username:s,name:g,grade:x.Grade||"Unknown",role:x.Role||"Student",school:f,averageGrade:v,subjectGrades:b}};break}else console.log("Password mismatch for student - will continue checking counselors")}}if(d)return console.log("=== Returning successful school login ==="),d;console.log("=== STEP 2: Checking University Counsellors ==="),console.log(`Comparing FULL email: "${r}" (NOT stripped username: "${s}")`);try{const f=await me(sa(i,"University Data/University Counsellors "));if(f.exists()){const m=f.val();console.log("Found counselors:",Object.keys(m));for(const[p,x]of Object.entries(m))if(console.log(`Checking counselor: ${p}`),x&&typeof x=="object"){const g=x,v=g.email||g.Email;console.log(`Counselor email: "${v}", User entered: "${r}"`),console.log("Counselor data structure:",JSON.stringify(g,null,2));const b=r.toLowerCase(),w=v?v.toLowerCase():"";if(console.log(`Email comparison: "${w}" === "${b}" ? ${w===b}`),v&&w===b)if(console.log(` Found matching email for counselor: ${p}`),u=!0,console.log(`Password comparison: "${g.Password}" === "${n}" ? ${g.Password===n}`),g.Password===n){console.log(" Password verified for counselor");let _="counselor";g.Role==="Pool Management"?_="pool_management":g.Role==="Essay"&&(_="essay");const j={username:r,name:g.Name||p,grade:"Counselor",role:_,school:"University Counsellor"};at.storeUser(j),h={success:!0,user:{username:r,name:g.Name||p,grade:"Counselor",role:_,school:"University Counsellor"}};break}else console.log("Password mismatch for counselor")}}else console.log("University Counsellors node does not exist")}catch(f){console.error("Error checking University Counsellors:",f)}return h?(console.log("=== Returning successful counselor login ==="),h):(console.log("=== STEP 3: Determining error ==="),console.log(`Found in schools: ${c}, Found in counselors: ${u}`),c||u?(console.log("User found but password incorrect"),{success:!1,error:"WRONG_PASSWORD",message:"The password you entered is incorrect. Please try again."}):(console.log("Email not found in either Schoolss or University Counsellors"),{success:!1,error:"USER_NOT_FOUND",message:"This email address is not in our database. Please check your email or contact your administrator."}))}catch(r){return console.error("Authentication error:",r),{success:!1,error:"NETWORK_ERROR",message:"Network error. Please check your connection and try again."}}}}const CU=()=>{at.clearUser()},eP=new EU;var l0=function(e,t){return l0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},l0(e,t)};function tP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zh=function(){return Zh=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Zh.apply(this,arguments)};function pl(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function rP(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function nP(e,t){return function(r,n){t(r,n,e)}}function sP(e,t,r,n,s,i){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,f=!1,m=r.length-1;m>=0;m--){var p={};for(var x in n)p[x]=x==="access"?{}:n[x];for(var x in n.access)p.access[x]=n.access[x];p.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(v||null))};var g=(0,r[m])(l==="accessor"?{get:d.get,set:d.set}:d[c],p);if(l==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(d.get=h),(h=o(g.set))&&(d.set=h),(h=o(g.init))&&s.unshift(h)}else(h=o(g))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),f=!0}function iP(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function aP(e){return typeof e=="symbol"?e:"".concat(e)}function oP(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function lP(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function re(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function cP(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Cm=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function uP(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Cm(t,e,r)}function ef(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jy(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function dP(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Jy(arguments[t]));return e}function hP(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n}function fP(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Ko(e){return this instanceof Ko?(this.v=e,this):new Ko(e)}function mP(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(m){return function(p){return Promise.resolve(p).then(m,h)}}function l(m,p){n[m]&&(s[m]=function(x){return new Promise(function(g,v){i.push([m,x,g,v])>1||c(m,x)})},p&&(s[m]=p(s[m])))}function c(m,p){try{u(n[m](p))}catch(x){f(i[0][3],x)}}function u(m){m.value instanceof Ko?Promise.resolve(m.value.v).then(d,h):f(i[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function f(m,p){m(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function pP(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Ko(e[s](o)),done:!1}:i?i(o):o}:i}}function gP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ef=="function"?ef(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),s(l,c,o.done,o.value)})}}function s(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function vP(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var kU=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},c0=function(e){return c0=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},c0(e)};function xP(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=c0(e),n=0;n<r.length;n++)r[n]!=="default"&&Cm(t,e,r[n]);return kU(t,e),t}function yP(e){return e&&e.__esModule?e:{default:e}}function bP(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function wP(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function _P(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function jP(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var AU=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function NP(e){function t(i){e.error=e.hasError?new AU(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function SP(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):e}const PU={__extends:tP,__assign:Zh,__rest:pl,__decorate:rP,__param:nP,__esDecorate:sP,__runInitializers:iP,__propKey:aP,__setFunctionName:oP,__metadata:lP,__awaiter:re,__generator:cP,__createBinding:Cm,__exportStar:uP,__values:ef,__read:Jy,__spread:dP,__spreadArrays:hP,__spreadArray:fP,__await:Ko,__asyncGenerator:mP,__asyncDelegator:pP,__asyncValues:gP,__makeTemplateObject:vP,__importStar:xP,__importDefault:yP,__classPrivateFieldGet:bP,__classPrivateFieldSet:wP,__classPrivateFieldIn:_P,__addDisposableResource:jP,__disposeResources:NP,__rewriteRelativeImportExtension:SP},OU=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jP,get __assign(){return Zh},__asyncDelegator:pP,__asyncGenerator:mP,__asyncValues:gP,__await:Ko,__awaiter:re,__classPrivateFieldGet:bP,__classPrivateFieldIn:_P,__classPrivateFieldSet:wP,__createBinding:Cm,__decorate:rP,__disposeResources:NP,__esDecorate:sP,__exportStar:uP,__extends:tP,__generator:cP,__importDefault:yP,__importStar:xP,__makeTemplateObject:vP,__metadata:lP,__param:nP,__propKey:aP,__read:Jy,__rest:pl,__rewriteRelativeImportExtension:SP,__runInitializers:iP,__setFunctionName:oP,__spread:dP,__spreadArray:fP,__spreadArrays:hP,__values:ef,default:PU},Symbol.toStringTag,{value:"Module"})),TU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Zy extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class IU extends Zy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class o1 extends Zy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class l1 extends Zy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var u0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(u0||(u0={}));class DU{constructor(t,{headers:r={},customFetch:n,region:s=u0.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=TU(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return re(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const p=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,p.searchParams.set("forceFunctionRegion",m));let x;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(f["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(f["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let g=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(g=o.signal,d.addEventListener("abort",()=>o.abort())):g=o.signal);const v=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:x,signal:g}).catch(j=>{throw new IU(j)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new o1(v);if(!v.ok)throw new l1(v);let w=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield v.json():w==="application/octet-stream"||w==="application/pdf"?_=yield v.blob():w==="text/event-stream"?_=v:w==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof l1||l instanceof o1?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var vr={};const gl=KR(OU);var yd={},bd={},wd={},_d={},jd={},Nd={},c1;function EP(){if(c1)return Nd;c1=1,Object.defineProperty(Nd,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Nd.default=e,Nd}var u1;function CP(){if(u1)return jd;u1=1,Object.defineProperty(jd,"__esModule",{value:!0});const t=gl.__importDefault(EP());class r{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,f;let m=null,p=null,x=null,g=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?p=j:p=JSON.parse(j))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(x=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(m={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,x=null,g=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const w=await c.text();try{m=JSON.parse(w),Array.isArray(m)&&c.status===404&&(p=[],m=null,g=200,v="OK")}catch{c.status===404&&w===""?(g=204,v="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,g=200,v="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:p,count:x,status:g,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h,f,m,p;let x="";const g=c==null?void 0:c.cause;if(g){const v=(u=g==null?void 0:g.message)!==null&&u!==void 0?u:"",b=(d=g==null?void 0:g.code)!==null&&d!==void 0?d:"";x=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,x+=`

Caused by: ${(f=g==null?void 0:g.name)!==null&&f!==void 0?f:"Error"}: ${v}`,b&&(x+=` (${b})`),g!=null&&g.stack&&(x+=`
${g.stack}`)}else x=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"FetchError"}: ${c==null?void 0:c.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,i)}returns(){return this}overrideTypes(){return this}}return jd.default=r,jd}var d1;function kP(){if(d1)return _d;d1=1,Object.defineProperty(_d,"__esModule",{value:!0});const t=gl.__importDefault(CP());class r extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return _d.default=r,_d}var h1;function eb(){if(h1)return wd;h1=1,Object.defineProperty(wd,"__esModule",{value:!0});const t=gl.__importDefault(kP()),r=new RegExp("[,()]");class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return wd.default=n,wd}var f1;function AP(){if(f1)return bd;f1=1,Object.defineProperty(bd,"__esModule",{value:!0});const t=gl.__importDefault(eb());class r{constructor(s,{headers:i={},schema:o,fetch:l}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(s,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return bd.default=r,bd}var m1;function RU(){if(m1)return yd;m1=1,Object.defineProperty(yd,"__esModule",{value:!0});const e=gl,t=e.__importDefault(AP()),r=e.__importDefault(eb());class n{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let m;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([x,g])=>g!==void 0).map(([x,g])=>[x,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([x,g])=>{f.searchParams.append(x,g)})):(h="POST",m=o);const p=new Headers(this.headers);return u&&p.set("Prefer",`count=${u}`),new r.default({method:h,url:f,headers:p,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return yd.default=n,yd}Object.defineProperty(vr,"__esModule",{value:!0});var PP=vr.PostgrestError=UP=vr.PostgrestBuilder=$P=vr.PostgrestTransformBuilder=MP=vr.PostgrestFilterBuilder=DP=vr.PostgrestQueryBuilder=TP=vr.PostgrestClient=void 0;const vl=gl,OP=vl.__importDefault(RU());var TP=vr.PostgrestClient=OP.default;const IP=vl.__importDefault(AP());var DP=vr.PostgrestQueryBuilder=IP.default;const RP=vl.__importDefault(eb());var MP=vr.PostgrestFilterBuilder=RP.default;const LP=vl.__importDefault(kP());var $P=vr.PostgrestTransformBuilder=LP.default;const FP=vl.__importDefault(CP());var UP=vr.PostgrestBuilder=FP.default;const BP=vl.__importDefault(EP());PP=vr.PostgrestError=BP.default;var zP=vr.default={PostgrestClient:OP.default,PostgrestQueryBuilder:IP.default,PostgrestFilterBuilder:RP.default,PostgrestTransformBuilder:LP.default,PostgrestBuilder:FP.default,PostgrestError:BP.default};const MU=d2({__proto__:null,get PostgrestBuilder(){return UP},get PostgrestClient(){return TP},get PostgrestError(){return PP},get PostgrestFilterBuilder(){return MP},get PostgrestQueryBuilder(){return DP},get PostgrestTransformBuilder(){return $P},default:zP},[vr]),{PostgrestClient:LU,PostgrestQueryBuilder:Ise,PostgrestFilterBuilder:Dse,PostgrestTransformBuilder:Rse,PostgrestBuilder:Mse,PostgrestError:Lse}=zP||MU;class $U{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const FU="2.83.0",UU=`realtime-js/${FU}`,WP="1.0.0",BU="2.0.0",p1=WP,d0=1e4,zU=1e3,WU=100;var Qi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qi||(Qi={}));var Ct;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ct||(Ct={}));var un;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(un||(un={}));var h0;(function(e){e.websocket="websocket"})(h0||(h0={}));var Ji;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ji||(Ji={}));class HU{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:s,topic:i,payload:o}=t,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=this.META_LENGTH+c.length+l.length+i.length+s.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let h=new DataView(d),f=0;h.setUint8(f++,this.KINDS.push),h.setUint8(f++,c.length),h.setUint8(f++,l.length),h.setUint8(f++,i.length),h.setUint8(f++,s.length),Array.from(c,p=>h.setUint8(f++,p.charCodeAt(0))),Array.from(l,p=>h.setUint8(f++,p.charCodeAt(0))),Array.from(i,p=>h.setUint8(f++,p.charCodeAt(0))),Array.from(s,p=>h.setUint8(f++,p.charCodeAt(0)));var m=new Uint8Array(d.byteLength+o.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(o),d.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,s,i;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(f),p=0;m.setUint8(p++,this.KINDS.userBroadcastPush),m.setUint8(p++,c.length),m.setUint8(p++,l.length),m.setUint8(p++,o.length),m.setUint8(p++,u.length),m.setUint8(p++,this.BINARY_ENCODING),Array.from(c,g=>m.setUint8(p++,g.charCodeAt(0))),Array.from(l,g=>m.setUint8(p++,g.charCodeAt(0))),Array.from(o,g=>m.setUint8(p++,g.charCodeAt(0))),Array.from(u,g=>m.setUint8(p++,g.charCodeAt(0)));var x=new Uint8Array(f.byteLength+d.byteLength);return x.set(new Uint8Array(f),0),x.set(new Uint8Array(d),f.byteLength),x.buffer}_encodeJsonUserBroadcastPush(t){var r,n,s,i;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let x=new DataView(p),g=0;x.setUint8(g++,this.KINDS.userBroadcastPush),x.setUint8(g++,c.length),x.setUint8(g++,l.length),x.setUint8(g++,o.length),x.setUint8(g++,u.length),x.setUint8(g++,this.JSON_ENCODING),Array.from(c,b=>x.setUint8(g++,b.charCodeAt(0))),Array.from(l,b=>x.setUint8(g++,b.charCodeAt(0))),Array.from(o,b=>x.setUint8(g++,b.charCodeAt(0))),Array.from(u,b=>x.setUint8(g++,b.charCodeAt(0)));var v=new Uint8Array(p.byteLength+f.byteLength);return v.set(new Uint8Array(p),0),v.set(new Uint8Array(f),p.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,s);case this.KINDS.reply:return this._decodeReply(t,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodePush(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(l,l+s));l=l+s;const u=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+o));l=l+o;const h=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:d,payload:h}}_decodeReply(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=n.decode(t.slice(c,c+l));c=c+l;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),p={status:f,response:m};return{join_ref:u,ref:d,topic:h,event:un.reply,payload:p}}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,p={type:this.BROADCAST,event:d,payload:m};return o>0&&(p.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:p}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class HP{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Be||(Be={}));const g1=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=qU(o,e,t,s),i),{}):{}},qU=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?qP(i,o):f0(o)},qP=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return YU(t,r)}switch(e){case Be.bool:return VU(t);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return GU(t);case Be.json:case Be.jsonb:return KU(t);case Be.timestamp:return XU(t);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return f0(t);default:return f0(t)}},f0=e=>e,VU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},GU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},KU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},YU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>qP(t,l))}return e},XU=e=>typeof e=="string"?e.replace(" ","T"):e,VP=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class pg{constructor(t,r,n={},s=d0){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var v1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(v1||(v1={}));class vc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=vc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=vc.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),p=d.filter(g=>m.indexOf(g.presence_ref)<0),x=h.filter(g=>f.indexOf(g.presence_ref)<0);p.length>0&&(l[u]=p),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var x1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(x1||(x1={}));var xc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(xc||(xc={}));var ds;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ds||(ds={}));class tb{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new pg(this,un.join,this.params,this.timeout),this.rejoinTimer=new HP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(un.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new vc(this),this.broadcastEndpointURL=VP(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[xc.PRESENCE]&&this.bindings[xc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ds.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ds.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){t==null||t(ds.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(p=x==null?void 0:x.length)!==null&&p!==void 0?p:0,v=[];for(let b=0;b<g;b++){const w=x[b],{filter:{event:_,schema:j,table:N,filter:C}}=w,I=m&&m[b];if(I&&I.event===_&&I.schema===j&&I.table===N&&I.filter===C)v.push(Object.assign(Object.assign({},w),{id:I.id}));else{this.unsubscribe(),this.state=Ct.errored,t==null||t(ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(ds.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ct.errored,t==null||t(ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ct.joined&&t===xc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ct.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(un.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new pg(this,un.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new pg(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>WU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=un;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var p,x,g;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(x=m.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,x,g,v,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(p=m.filter)===null||p===void 0?void 0:p.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const _=(b=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:x,table:g,commit_timestamp:v,type:b,errors:w}=p;f=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:v,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&tb.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(un.close,{},t)}_onError(t){this._on(un.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=g1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=g1(t.columns,t.old_record)),r}}const gg=()=>{},Sd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QU=[1e3,2e3,5e3,1e4],JU=1e4,ZU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class e8{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=d0,this.transport=null,this.heartbeatIntervalMs=Sd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gg,this.ref=0,this.reconnectTimer=null,this.vsn=p1,this.logger=gg,this.conn=null,this.sendBuffer=[],this.serializer=new HU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${h0.websocket}`,this.httpEndpoint=VP(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$U.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Qi.connecting:return Ji.Connecting;case Qi.open:return Ji.Open;case Qi.closing:return Ji.Closing;default:return Ji.Closed}}isConnected(){return this.connectionState()===Ji.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new tb(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(zU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Sd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qi.open||this.conn.readyState===Qi.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(un.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ZU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:UU};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(un.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new HP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:d0,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Sd.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:gg,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:p1,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:p=>QU[p-1]||JU,this.vsn){case WP:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(p,x)=>x(JSON.stringify(p)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(p,x)=>x(JSON.parse(p));break;case BU:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class rb extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function st(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class t8 extends rb{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class m0 extends rb{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const nb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),r8=()=>Response,p0=e=>{if(Array.isArray(e))return e.map(r=>p0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=p0(n)}),t},n8=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},vg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},s8=(e,t,r)=>re(void 0,void 0,void 0,function*(){const n=yield r8();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new t8(vg(s),i,o))}).catch(s=>{t(new m0(vg(s),s))}):t(new m0(vg(e),e))}),i8=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(n8(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function ku(e,t,r,n,s,i){return re(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,i8(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>s8(c,l,n))})})}function Xc(e,t,r,n){return re(this,void 0,void 0,function*(){return ku(e,"GET",t,r,n)})}function Pn(e,t,r,n,s){return re(this,void 0,void 0,function*(){return ku(e,"POST",t,n,s,r)})}function g0(e,t,r,n,s){return re(this,void 0,void 0,function*(){return ku(e,"PUT",t,n,s,r)})}function a8(e,t,r,n){return re(this,void 0,void 0,function*(){return ku(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function sb(e,t,r,n,s){return re(this,void 0,void 0,function*(){return ku(e,"DELETE",t,n,s,r)})}class o8{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(st(t))return{data:null,error:t};throw t}})}}var GP;class l8{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[GP]="BlobDownloadBuilder",this.promise=null}asStream(){return new o8(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(st(t))return{data:null,error:t};throw t}})}}GP=Symbol.toStringTag;const c8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},y1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class u8{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=nb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return re(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},y1),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?g0:Pn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(st(i))return{data:null,error:i};throw i}})}upload(t,r,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return re(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:y1.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield g0(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(st(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Pn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new rb("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}update(t,r,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return re(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(st(s))return{data:null,error:s};throw s}})}copy(t,r,n){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield Pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(st(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Pn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(st(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return re(this,void 0,void 0,function*(){try{const s=yield Pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(st(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Xc(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new l8(c,this.shouldThrowOnError)}info(t){return re(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Xc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:p0(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}exists(t){return re(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield a8(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n)&&n instanceof m0){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return re(this,void 0,void 0,function*(){try{return{data:yield sb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}list(t,r,n){return re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},c8),r),{prefix:t||""});return{data:yield Pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(st(s))return{data:null,error:s};throw s}})}listV2(t,r){return re(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Pn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const KP="2.83.0",YP={"X-Client-Info":`storage-js/${KP}`};class d8{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YP),r),this.fetch=nb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return re(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Xc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}getBucket(t){return re(this,void 0,void 0,function*(){try{return{data:yield Xc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}createBucket(t){return re(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Pn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(st(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return re(this,void 0,void 0,function*(){try{return{data:yield g0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}emptyBucket(t){return re(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}deleteBucket(t){return re(this,void 0,void 0,function*(){try{return{data:yield sb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class h8{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YP),r),this.fetch=nb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return re(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}listBuckets(t){return re(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Xc(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}deleteBucket(t){return re(this,void 0,void 0,function*(){try{return{data:yield sb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}}const ib={"X-Client-Info":`storage-js/${KP}`,"Content-Type":"application/json"};class XP extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class xg extends XP{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class f8 extends XP{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var b1;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(b1||(b1={}));const ab=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),m8=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},w1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),p8=(e,t,r)=>re(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new xg(w1(o),s,l))}).catch(()=>{const o=s+"",l=i.statusText||`HTTP ${s} error`;t(new xg(l,s,o))});else{const o=s+"",l=i.statusText||`HTTP ${s} error`;t(new xg(l,s,o))}}else t(new f8(w1(e),e))}),g8=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(m8(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function v8(e,t,r,n,s,i){return re(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,g8(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>p8(c,l,n))})})}function Kr(e,t,r,n,s){return re(this,void 0,void 0,function*(){return v8(e,"POST",t,n,s,r)})}class x8{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ib),r),this.fetch=ab(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return re(this,void 0,void 0,function*(){try{return{data:(yield Kr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return re(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}listIndexes(t){return re(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return re(this,void 0,void 0,function*(){try{return{data:(yield Kr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}}class y8{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ib),r),this.fetch=ab(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return re(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Kr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}getVectors(t){return re(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}listVectors(t){return re(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Kr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}queryVectors(t){return re(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return re(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Kr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}}class b8{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ib),r),this.fetch=ab(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return re(this,void 0,void 0,function*(){try{return{data:(yield Kr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}getBucket(t){return re(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}listBuckets(){return re(this,arguments,void 0,function*(t={}){try{return{data:yield Kr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return re(this,void 0,void 0,function*(){try{return{data:(yield Kr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}}class w8 extends b8{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new _8(this.url,this.headers,t,this.fetch)}}class _8 extends x8{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return re(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return re(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return re(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return re(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new j8(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class j8 extends y8{constructor(t,r,n,s,i){super(t,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return re(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return re(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return re(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return re(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return re(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class N8 extends d8{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new u8(this.url,this.headers,t,this.fetch)}get vectors(){return new w8(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new h8(this.url+"/iceberg",this.headers,this.fetch)}}const S8="2.83.0";let Zl="";typeof Deno<"u"?Zl="deno":typeof document<"u"?Zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zl="react-native":Zl="node";const E8={"X-Client-Info":`supabase-js-${Zl}/${S8}`},C8={headers:E8},k8={schema:"public"},A8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P8={},O8=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),T8=()=>Headers,I8=(e,t,r)=>{const n=O8(r),s=T8();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))}};function D8(e){return e.endsWith("/")?e:e+"/"}function R8(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function M8(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(D8(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const QP="2.83.0",no=30*1e3,v0=3,yg=v0*no,L8="http://localhost:9999",$8="supabase.auth.token",F8={"X-Client-Info":`gotrue-js/${QP}`},x0="X-Supabase-Api-Version",JP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},U8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B8=10*60*1e3;class Qc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function se(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class z8 extends Qc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function W8(e){return se(e)&&e.name==="AuthApiError"}class Zi extends Qc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Mi extends Qc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Hr extends Mi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function H8(e){return se(e)&&e.name==="AuthSessionMissingError"}class Ga extends Mi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ed extends Mi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Cd extends Mi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function q8(e){return se(e)&&e.name==="AuthImplicitGrantRedirectError"}class _1 extends Mi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class y0 extends Mi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function bg(e){return se(e)&&e.name==="AuthRetryableFetchError"}class j1 extends Mi{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class b0 extends Mi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),N1=` 	
\r=`.split(""),V8=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<N1.length;t+=1)e[N1[t].charCodeAt(0)]=-2;for(let t=0;t<tf.length;t+=1)e[tf[t].charCodeAt(0)]=t;return e})();function S1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tf[n]),t.queuedBits-=6}}function ZP(e,t,r){const n=V8[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function E1(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Y8(o,n,r)};for(let o=0;o<e.length;o+=1)ZP(e.charCodeAt(o),s,i);return t.join("")}function G8(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function K8(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}G8(n,t)}}function Y8(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function To(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)ZP(e.charCodeAt(s),r,n);return new Uint8Array(t)}function X8(e){const t=[];return K8(e,r=>t.push(r)),new Uint8Array(t)}function ia(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>S1(s,r,n)),S1(null,r,n),t.join("")}function Q8(e){return Math.round(Date.now()/1e3)+e}function J8(){return Symbol("auth-callback")}const Yt=()=>typeof window<"u"&&typeof document<"u",Bi={tested:!1,writable:!1},eO=()=>{if(!Yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bi.tested)return Bi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bi.tested=!0,Bi.writable=!0}catch{Bi.tested=!0,Bi.writable=!1}return Bi.writable};function Z8(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const tO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eB=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",so=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},zi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ti=async(e,t)=>{await e.removeItem(t)};class km{constructor(){this.promise=new km.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}km.promiseConstructor=Promise;function wg(e){const t=e.split(".");if(t.length!==3)throw new b0("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!U8.test(t[n]))throw new b0("JWT not in base64url format");return{header:JSON.parse(E1(t[0])),payload:JSON.parse(E1(t[1])),signature:To(t[2]),raw:{header:t[0],payload:t[1]}}}async function tB(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rB(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function nB(e){return("0"+e.toString(16)).substr(-2)}function sB(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,nB).join("")}async function iB(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function aB(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await iB(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ka(e,t,r=!1){const n=sB();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await so(e,`${t}-code-verifier`,s);const i=await aB(n);return[i,n===i?"plain":"s256"]}const oB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lB(e){const t=e.headers.get(x0);if(!t||!t.match(oB))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function cB(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function uB(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ya(e){if(!dB.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _g(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hB(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function C1(e){return JSON.parse(JSON.stringify(e))}const Gi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fB=[502,503,504];async function k1(e){var t;if(!eB(e))throw new y0(Gi(e),0);if(fB.includes(e.status))throw new y0(Gi(e),e.status);let r;try{r=await e.json()}catch(i){throw new Zi(Gi(i),i)}let n;const s=lB(e);if(s&&s.getTime()>=JP["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new j1(Gi(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Hr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new j1(Gi(r),e.status,r.weak_password.reasons);throw new z8(Gi(r),e.status||500,n)}const mB=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function oe(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[x0]||(i[x0]=JP["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await pB(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function pB(e,t,r,n,s,i){const o=mB(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new y0(Gi(c),0)}if(l.ok||await k1(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await k1(c)}}function kn(e){var t;let r=null;xB(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Q8(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function A1(e){const t=kn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function li(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function gB(e){return{data:e,error:null}}function vB(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=pl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function P1(e){return e}function xB(e){return e.access_token&&e.refresh_token&&e.expires_in}const jg=["global","local","others"];class yB{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=tO(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=jg[0]){if(jg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jg.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:li})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=pl(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:vB,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:li})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:P1});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const x=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(se(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ya(t);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:li})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ya(t);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:li})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ya(t);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:li})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ya(t.userId);try{const{data:r,error:n}=await oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ya(t.userId),Ya(t.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:P1});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const x=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(se(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}}function O1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Xa={debug:!!(globalThis&&eO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rO extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class bB extends rO{}async function wB(e,t,r){Xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Xa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new bB(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xa.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function _B(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nO(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function jB(e){return parseInt(e,16)}function NB(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function SB(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=nO(e.address),p=d?`${d}://${n}`:n,x=e.statement?`${e.statement}
`:"",g=`${p} wants you to sign in with your Ethereum account:
${m}

${x}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}v+=b}return`${g}
${v}`}class _t extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class rf extends _t{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function EB({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(sO(o)){if(i.rp.id!==o)return new _t({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function CB({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(sO(n)){if(r.rpId!==n)return new _t({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class kB{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const AB=new kB;function PB(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=pl(e,["challenge","user","excludeCredentials"]),i=To(t).buffer,o=Object.assign(Object.assign({},r),{id:To(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:To(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function OB(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=pl(e,["challenge","allowCredentials"]),s=To(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:To(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function TB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ia(new Uint8Array(e.response.attestationObject)),clientDataJSON:ia(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function IB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ia(new Uint8Array(s.authenticatorData)),clientDataJSON:ia(new Uint8Array(s.clientDataJSON)),signature:ia(new Uint8Array(s.signature)),userHandle:s.userHandle?ia(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function sO(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function T1(){var e,t;return!!(Yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function DB(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rf("Browser returned unexpected credential type",t)}:{data:null,error:new rf("Empty credential response",t)}}catch(t){return{data:null,error:EB({error:t,options:e})}}}async function RB(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rf("Browser returned unexpected credential type",t)}:{data:null,error:new rf("Empty credential response",t)}}catch(t){return{data:null,error:CB({error:t,options:e})}}}const MB={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},LB={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function nf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=nf(l,o):n[i]=nf(o)}else n[i]=o}return n}function $B(e,t){return nf(MB,e,t||{})}function FB(e,t){return nf(LB,e,t||{})}class UB{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??AB.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=$B(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await DB({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=FB(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await RB(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return se(o)?{data:null,error:o}:{data:null,error:new Zi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Qc("rpId is required for WebAuthn authentication")};try{if(!T1())return{data:null,error:new Zi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return se(o)?{data:null,error:o}:{data:null,error:new Zi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Qc("rpId is required for WebAuthn registration")};try{if(!T1())return{data:null,error:new Zi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return se(o)?{data:null,error:o}:{data:null,error:new Zi("Unexpected error in register",o)}}}}_B();const BB={url:L8,storageKey:$8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function I1(e,t,r){return await r()}const Qa={};class Jc{get jwks(){var t,r;return(r=(t=Qa[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Qa[this.storageKey]=Object.assign(Object.assign({},Qa[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Qa[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Qa[this.storageKey]=Object.assign(Object.assign({},Qa[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},BB),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Jc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Jc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Yt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new yB({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tO(i.fetch),this.lock=i.lock||I1,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Yt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=wB:this.lock=I1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new UB(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:eO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=O1(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=O1(this.memoryStorage)),Yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${QP}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Yt()&&(r=Z8(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Yt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),q8(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return se(r)?this._returnResult({error:r}):this._returnResult({error:new Zi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:kn}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Ka(this.storage,this.storageKey)),i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:kn})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:kn})}else throw new Ed("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:A1})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:A1})}else throw new Ed("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Ga;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,f;let m,p;if("message"in t)m=t.message,p=t.signature;else{const{chain:x,wallet:g,statement:v,options:b}=t;let w;if(Yt())if(typeof g=="object")w=g;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")w=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=nO(j[0]);let C=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const E=await w.request({method:"eth_chainId"});C=jB(E)}const I={domain:_.host,address:N,statement:v,uri:_.href,version:"1",chainId:C,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=SB(I),p=await w.request({method:"personal_sign",params:[NB(m),N]})}try{const{data:x,error:g}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:p},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:kn});if(g)throw g;if(!x||!x.session||!x.user){const v=new Ga;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:g})}catch(x){if(se(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,m;let p,x;if("message"in t)p=t.message,x=t.signature;else{const{chain:g,wallet:v,statement:b,options:w}=t;let _;if(Yt())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)p=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),x=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:g,error:v}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:ia(x)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:kn});if(v)throw v;if(!g||!g.session||!g.user){const b=new Ga;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(se(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(t){const r=await zi(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:kn});if(await ti(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Ga;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:kn}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Ga;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ka(this.storage,this.storageKey));const{error:h}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Ed("You must provide either an email or phone number.")}catch(l){if(se(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:kn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Ka(this.storage,this.storageKey));const u=await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:gB});return!((i=u.data)===null||i===void 0)&&i.url&&Yt()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(se(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Hr;const{error:s}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Ed("You must provide either an email or phone number and a type")}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await zi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<yg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await zi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=_g()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=hB(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:li}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hr}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:li})})}catch(r){if(se(r))return H8(r)&&(await this._removeSession(),await ti(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Hr;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ka(this.storage,this.storageKey));const{data:u,error:d}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:li});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(se(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=wg(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Hr;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Yt())throw new Cd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Cd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _1("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Cd("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=no&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:x,error:g}=await this._getUser(i);if(g)throw g;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(se(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await zi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(W8(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await ti(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=J8(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ka(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Yt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(se(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:kn}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ga}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rB(async s=>(s>0&&await tB(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:kn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&bg(i)&&Date.now()+o-n<no})}catch(n){if(this._debug(r,"error",n),se(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Yt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await zi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await zi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await so(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:_g()}else if(s&&!s.user&&!s.user){const o=await zi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ti(this.storage,this.storageKey+"-user"),await so(this.storage,this.storageKey,s)):s.user=_g()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yg;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${yg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),bg(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Hr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new km;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Hr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),se(i)){const o={data:null,error:i};return bg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await so(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=C1(s);await so(this.storage,this.storageKey,i)}else{const s=C1(r);await so(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ti(this.storage,this.storageKey),await ti(this.storage,this.storageKey+"-code-verifier"),await ti(this.storage,this.storageKey+"-user"),this.userStorage&&await ti(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),no);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/no);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${no}ms, refresh threshold is ${v0} ticks`),s<=v0&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rO)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ka(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?TB(t.webauthn.credential_response):IB(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:PB(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:OB(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=wg(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Hr});const o=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Yt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Hr});const o=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Yt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Hr})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+B8>s)return n;const{data:i,error:o}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return this._returnResult({data:null,error:p});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=wg(n);r!=null&&r.allowExpired||cB(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=uB(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,X8(`${l}.${c}`)))throw new b0("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}}Jc.nextInstanceID={};const zB=Jc;class WB extends zB{constructor(t){super(t)}}class HB{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=M8(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:k8,realtime:P8,auth:Object.assign(Object.assign({},A8),{storageKey:c}),global:C8},d=R8(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=I8(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new LU(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new N8(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new DU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u,throwOnError:d},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WB({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new e8(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qB=(e,t,r)=>new HB(e,t,r);function VB(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}VB()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const GB="https://nagpednvxncbezrspism.supabase.co",KB="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5hZ3BlZG52eG5jYmV6cnNwaXNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwNTM1NzIsImV4cCI6MjA4MjYyOTU3Mn0.k5Q5mAxMnPtjRmU4Veb4KoboN9GPUL6twaT_7vqlao0",Ht=qB(GB,KB),D1={login:async(e,t)=>{const{data:r,error:n}=await Ht.from("counselors").select("id, email, name, password_hash, role").eq("email",e).maybeSingle();if(n||!r)throw new Error("Invalid credentials");if(r.password_hash!==`demo_hash_${t}`)throw new Error("Invalid credentials");const s={id:r.id,email:r.email,name:r.name,role:r.role};return localStorage.setItem("counselor",JSON.stringify(s)),s},logout:()=>{localStorage.removeItem("counselor")},getCurrentCounselor:()=>{const e=localStorage.getItem("counselor");return e?JSON.parse(e):null},isAuthenticated:()=>!!localStorage.getItem("counselor")};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(e,t)=>{const r=y.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>y.createElement("svg",{ref:d,...YB,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${XB(e)}`,l].join(" "),...u},[...t.map(([h,f])=>y.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=Q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Q("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=Q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=Q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=Q("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Q("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=Q("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Q("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=Q("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=Q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=Q("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=Q("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=Q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=Q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=Q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Q("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=Q("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=Q("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=Q("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=Q("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=Q("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=Q("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Q("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=Q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=Q("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=Q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=Q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Q("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=Q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Q("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=Q("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=Q("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=Q("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=Q("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=Q("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=Q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=Q("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=Q("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=Q("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Q("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=Q("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=Q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=Q("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=Q("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),w7=({onLogin:e,onCounselorLogin:t})=>{const[r,n]=y.useState(""),[s,i]=y.useState(""),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,h]=y.useState(""),[f,m]=y.useState(""),[p,x]=y.useState(""),g=async v=>{v.preventDefault(),h(""),m(""),x(""),u(!0);try{const b=await eP.authenticateUser({email:r,password:s});if(b.success&&b.user)if(console.log("Login successful:",b.user),b.user.role==="pool_management"||b.user.role==="essay"){console.log("Routing to counselor dashboard");const w={id:b.user.username,email:b.user.username,name:b.user.name,role:b.user.role};t(w)}else console.log("Routing to student dashboard"),e(b.user);else switch(b.error){case"USER_NOT_FOUND":h(b.message||"Email not found");break;case"WRONG_PASSWORD":m(b.message||"Incorrect password");break;case"NETWORK_ERROR":default:x(b.message||"Login failed. Please try again.");break}}catch(b){console.error("Login error:",b),x("Login failed. Please try again.")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:a.jsxs("div",{className:"max-w-md w-full mx-auto",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 sm:p-8 border border-blue-100 animate-fade-in",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("img",{src:"/white_logo.png",alt:"EduCare Logo",className:"w-12 h-12 object-contain opacity-90"})}),a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"EduCare"}),a.jsx("p",{className:"text-base sm:text-lg text-[#04adee] font-semibold",children:"University Guidance"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2 mb-6",children:"Empowering your academic journey"})]}),p&&a.jsx("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-600 text-sm",children:p})}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(Au,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",id:"email",value:r,onChange:v=>n(v.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent transition-all duration-200 text-sm sm:text-base ${d?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your email",required:!0})]}),d&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(hO,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:o?"text":"password",id:"password",value:s,onChange:v=>i(v.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent transition-all duration-200 text-sm sm:text-base ${f?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your password",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 transition-colors",children:o?a.jsx(lO,{className:"w-5 h-5"}):a.jsx(cO,{className:"w-5 h-5"})})]}),f&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]})]}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#04adee] text-white py-3 px-4 rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-[#04adee] focus:ring-offset-2 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign in to EduCare"})]})]}),a.jsx("div",{className:"text-center mt-6 text-xs sm:text-sm text-gray-500",children:" 2025 EduCare. Enhancing education through efficiency."})]})})},_7=({currentPage:e,setCurrentPage:t,onLogout:r,isOpen:n,onClose:s,isCollapsed:i=!1,onToggleCollapse:o})=>{const l=[{id:"profile",label:"My Profile",icon:Yo},{id:"admit-profiles",label:"Admission Stories",icon:nr},{id:"scholarships",label:"Scholarships",icon:or},{id:"applications",label:"Applications",icon:Pe},{id:"essay-editor",label:"Essay Editor",icon:h7},{id:"resources",label:"Resources",icon:mr},{id:"counselors",label:"Counselors",icon:Zc},{id:"chat",label:"Inbox",icon:Pu}],c=u=>{t(u),s()};return a.jsxs("div",{className:`
      fixed lg:static inset-y-0 left-0 z-40 bg-white shadow-lg border-r border-gray-200 flex flex-col
      transform transition-all duration-300 ease-in-out
      ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      ${i?"w-20":"w-64"}
    `,children:[a.jsx("div",{className:"p-4 lg:p-6 border-b border-gray-200 mt-16 lg:mt-0 flex-shrink-0",children:a.jsxs("div",{className:`flex items-center ${i?"justify-center":""}`,children:[a.jsx("img",{src:"/white_logo.png",alt:"EduCare Logo",className:"w-8 h-8 lg:w-10 lg:h-10 object-contain"}),!i&&a.jsxs("div",{className:"ml-3",children:[a.jsx("h2",{className:"text-lg lg:text-xl font-bold text-gray-900",children:"EduCare"}),a.jsx("p",{className:"text-xs lg:text-sm text-[#04adee]",children:"University Guidance"})]})]})}),o&&a.jsx("button",{onClick:o,className:"hidden lg:flex absolute -right-3 top-24 bg-white border border-gray-200 rounded-full p-1.5 shadow-md hover:bg-gray-50 transition-colors z-50",title:i?"Expand sidebar":"Collapse sidebar",children:i?a.jsx(oO,{className:"w-4 h-4 text-gray-600"}):a.jsx(aO,{className:"w-4 h-4 text-gray-600"})}),a.jsx("nav",{className:"flex-1 py-4 lg:py-6 overflow-y-auto",children:a.jsx("ul",{className:`space-y-2 ${i?"px-2":"px-3 lg:px-4"}`,children:l.map(u=>{const d=u.icon,h=e===u.id;return a.jsx("li",{children:a.jsxs("button",{onClick:()=>c(u.id),className:`w-full flex items-center rounded-lg transition-all duration-200 ${i?"justify-center p-3":"px-4 py-3"} ${h?"bg-[#04adee] bg-opacity-10 text-[#04adee] border border-[#04adee] border-opacity-20 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,title:i?u.label:void 0,children:[a.jsx(d,{className:`w-4 h-4 lg:w-5 lg:h-5 ${i?"":"mr-3"} ${h?"text-[#04adee]":"text-gray-500"}`}),!i&&a.jsx("span",{className:"font-medium text-sm lg:text-base",children:u.label})]})},u.id)})})}),a.jsx("div",{className:`border-t border-gray-200 flex-shrink-0 ${i?"p-2":"p-3 lg:p-4"}`,children:a.jsxs("button",{onClick:r,className:`w-full flex items-center text-gray-700 hover:bg-red-50 hover:text-red-600 rounded-lg transition-all duration-200 touch-manipulation ${i?"justify-center p-3":"px-4 py-3"}`,title:i?"Logout":void 0,children:[a.jsx(w0,{className:`w-4 h-4 lg:w-5 lg:h-5 ${i?"":"mr-3"}`}),!i&&a.jsx("span",{className:"font-medium text-sm lg:text-base",children:"Logout"})]})})]})};function vO(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=vO(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Xe(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=vO(e))&&(n&&(n+=" "),n+=t);return n}var j7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function cb(e){if(typeof e!="string")return!1;var t=j7;return t.includes(e)}var N7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],S7=new Set(N7);function xO(e){return typeof e!="string"?!1:S7.has(e)}function yO(e){return typeof e=="string"&&e.startsWith("data-")}function Os(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(xO(r)||yO(r))&&(t[r]=e[r]);return t}function ub(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Os(t)}return typeof e=="object"&&!Array.isArray(e)?Os(e):null}function wn(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(xO(r)||yO(r)||cb(r))&&(t[r]=e[r]);return t}var E7=["children","width","height","viewBox","className","style","title","desc"];function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(null,arguments)}function C7(e,t){if(e==null)return{};var r,n,s=k7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function k7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bO=y.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=C7(e,E7),h=i||{width:n,height:s,x:0,y:0},f=Xe("recharts-surface",o);return y.createElement("svg",_0({},wn(d),{className:f,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),y.createElement("title",null,c),y.createElement("desc",null,u),r)}),A7=["children","className"];function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(null,arguments)}function P7(e,t){if(e==null)return{};var r,n,s=O7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function O7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ts=y.forwardRef((e,t)=>{var{children:r,className:n}=e,s=P7(e,A7),i=Xe("recharts-layer",n);return y.createElement("g",j0({className:i},wn(s),{ref:t}),r)}),T7=y.createContext(null);function We(e){return function(){return e}}const wO=Math.cos,of=Math.sin,Gn=Math.sqrt,lf=Math.PI,Am=2*lf,N0=Math.PI,S0=2*N0,Ki=1e-6,I7=S0-Ki;function _O(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function D7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _O;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class R7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_O:D7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,d=o-t,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Ki)if(!(Math.abs(h*c-u*d)>Ki)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,p=s-l,x=c*c+u*u,g=m*m+p*p,v=Math.sqrt(x),b=Math.sqrt(f),w=i*Math.tan((N0-Math.acos((x+f-g)/(2*v*b)))/2),_=w/b,j=w/v;Math.abs(_-1)>Ki&&this._append`L${t+_*d},${r+_*h}`,this._append`A${i},${i},0,0,${+(h*m>d*p)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ki||Math.abs(this._y1-d)>Ki)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%S0+S0),f>I7?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:f>Ki&&this._append`A${n},${n},0,${+(f>=N0)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function db(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new R7(t)}function hb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jO(e){this._context=e}jO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Pm(e){return new jO(e)}function NO(e){return e[0]}function SO(e){return e[1]}function EO(e,t){var r=We(!0),n=null,s=Pm,i=null,o=db(l);e=typeof e=="function"?e:e===void 0?NO:We(e),t=typeof t=="function"?t:t===void 0?SO:We(t);function l(c){var u,d=(c=hb(c)).length,h,f=!1,m;for(n==null&&(i=s(m=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,u,c),+t(h,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:We(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:We(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:We(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function kd(e,t,r){var n=null,s=We(!0),i=null,o=Pm,l=null,c=db(u);e=typeof e=="function"?e:e===void 0?NO:We(+e),t=typeof t=="function"?t:We(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?SO:We(+r);function u(h){var f,m,p,x=(h=hb(h)).length,g,v=!1,b,w=new Array(x),_=new Array(x);for(i==null&&(l=o(b=c())),f=0;f<=x;++f){if(!(f<x&&s(g=h[f],f,h))===v)if(v=!v)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=m;--p)l.point(w[p],_[p]);l.lineEnd(),l.areaEnd()}v&&(w[f]=+e(g,f,h),_[f]=+t(g,f,h),l.point(n?+n(g,f,h):w[f],r?+r(g,f,h):_[f]))}if(b)return l=null,b+""||null}function d(){return EO().defined(s).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:We(+h),n=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:We(+h),u):e},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:We(+h),u):n},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:We(+h),r=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:We(+h),u):t},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:We(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:We(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class CO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function M7(e){return new CO(e,!0)}function L7(e){return new CO(e,!1)}const fb={draw(e,t){const r=Gn(t/lf);e.moveTo(r,0),e.arc(0,0,r,0,Am)}},$7={draw(e,t){const r=Gn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},kO=Gn(1/3),F7=kO*2,U7={draw(e,t){const r=Gn(t/F7),n=r*kO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},B7={draw(e,t){const r=Gn(t),n=-r/2;e.rect(n,n,r,r)}},z7=.8908130915292852,AO=of(lf/10)/of(7*lf/10),W7=of(Am/10)*AO,H7=-wO(Am/10)*AO,q7={draw(e,t){const r=Gn(t*z7),n=W7*r,s=H7*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Am*i/5,l=wO(o),c=of(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},Ng=Gn(3),V7={draw(e,t){const r=-Gn(t/(Ng*3));e.moveTo(0,r*2),e.lineTo(-Ng*r,-r),e.lineTo(Ng*r,-r),e.closePath()}},on=-.5,ln=Gn(3)/2,E0=1/Gn(12),G7=(E0/2+1)*3,K7={draw(e,t){const r=Gn(t/G7),n=r/2,s=r*E0,i=n,o=r*E0+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(on*n-ln*s,ln*n+on*s),e.lineTo(on*i-ln*o,ln*i+on*o),e.lineTo(on*l-ln*c,ln*l+on*c),e.lineTo(on*n+ln*s,on*s-ln*n),e.lineTo(on*i+ln*o,on*o-ln*i),e.lineTo(on*l+ln*c,on*c-ln*l),e.closePath()}};function Y7(e,t){let r=null,n=db(s);e=typeof e=="function"?e:We(e||fb),t=typeof t=="function"?t:We(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:We(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:We(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function cf(){}function uf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function PO(e){this._context=e}PO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function X7(e){return new PO(e)}function OO(e){this._context=e}OO.prototype={areaStart:cf,areaEnd:cf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q7(e){return new OO(e)}function TO(e){this._context=e}TO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:uf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J7(e){return new TO(e)}function IO(e){this._context=e}IO.prototype={areaStart:cf,areaEnd:cf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Z7(e){return new IO(e)}function F1(e){return e<0?-1:1}function U1(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(F1(i)+F1(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function B1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Sg(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function df(e){this._context=e}df.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sg(this,this._t0,B1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sg(this,B1(this,r=U1(this,e,t)),r);break;default:Sg(this,this._t0,r=U1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function DO(e){this._context=new RO(e)}(DO.prototype=Object.create(df.prototype)).point=function(e,t){df.prototype.point.call(this,t,e)};function RO(e){this._context=e}RO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function e9(e){return new df(e)}function t9(e){return new DO(e)}function MO(e){this._context=e}MO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=z1(e),s=z1(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function z1(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function r9(e){return new MO(e)}function Om(e,t){this._context=e,this._t=t}Om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function n9(e){return new Om(e,.5)}function s9(e){return new Om(e,0)}function i9(e){return new Om(e,1)}function Na(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function C0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function a9(e,t){return e[t]}function o9(e){const t=[];return t.key=e,t}function l9(){var e=We([]),t=C0,r=Na,n=a9;function s(i){var o=Array.from(e.apply(this,arguments),o9),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(h,o[l].key,u,i)]).data=h;for(l=0,d=hb(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:We(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:We(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?C0:typeof i=="function"?i:We(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Na,s):r},s}function c9(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Na(e,t)}}function u9(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Na(e,t)}}function d9(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[n][1]||0,f=d[n-1][1]||0,m=(h-f)/2,p=0;p<l;++p){var x=e[t[p]],g=x[n][1]||0,v=x[n-1][1]||0;m+=g-v}c+=h,u+=m*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,Na(e,t)}}var Tm={},LO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(LO);var mb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(mb);var Im={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Im);var Dm={},$O={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})($O);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$O,r=Im;function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],o=s.length;if(o===0)return i;let l=0,c="",u="",d=!1;for(s.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const h=s[l];u?h==="\\"&&l+1<o?(l++,c+=s[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,i.push(c),c=""):c+=h:h==="["?(d=!0,c&&(i.push(c),c="")):h==="."?c&&(i.push(c),c=""):c+=h,l++}return c&&i.push(c),i}e.toPath=n})(Dm);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LO,r=mb,n=Im,s=Dm;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||t.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}e.get=i})(Tm);var h9=Tm.get;const Xo=Us(h9);var f9=4;function fi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f9,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function ht(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((s,i,o)=>{var l=r[o-1];return typeof l=="string"?s+l+i:l!==void 0?s+fi(l)+i:s+i},"")}var Dr=e=>e===0?0:e>0?1:-1,Hn=e=>typeof e=="number"&&e!=+e,Is=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ne=e=>(typeof e=="number"||e instanceof Number)&&!Hn(e),ss=e=>ne(e)||typeof e=="string",m9=0,eu=e=>{var t=++m9;return"".concat(e||"").concat(t)},qn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ne(t)&&typeof t!="string")return n;var i;if(Is(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Hn(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},FO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Zt(e,t,r){return ne(e)&&ne(t)?fi(e+r*(t-e)):t}function p9(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Xo(n,t))===r)}var Vt=e=>e===null||typeof e>"u",Tu=e=>Vt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function g9(e){return e!=null}function Iu(){}var v9=["type","size","sizeType"];function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k0.apply(null,arguments)}function W1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function H1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W1(Object(r),!0).forEach(function(n){x9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x9(e,t,r){return(t=y9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y9(e){var t=b9(e,"string");return typeof t=="symbol"?t:t+""}function b9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w9(e,t){if(e==null)return{};var r,n,s=_9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UO={symbolCircle:fb,symbolCross:$7,symbolDiamond:U7,symbolSquare:B7,symbolStar:q7,symbolTriangle:V7,symbolWye:K7},j9=Math.PI/180,N9=e=>{var t="symbol".concat(Tu(e));return UO[t]||fb},S9=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*j9;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},E9=(e,t)=>{UO["symbol".concat(Tu(e))]=t},BO=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=w9(e,v9),i=H1(H1({},s),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var f=N9(o),m=Y7().type(f).size(S9(r,n,o)),p=m();if(p!==null)return p},{className:c,cx:u,cy:d}=i,h=wn(i);return ne(u)&&ne(d)&&ne(r)?y.createElement("path",k0({},h,{className:Xe("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};BO.registerSymbol=E9;var zO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,C9=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{cb(s)&&(n[s]=i=>r[s](r,i))}),n},k9=(e,t,r)=>n=>(e(t,r,n),null),pb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];cb(s)&&typeof i=="function"&&(n||(n={}),n[s]=k9(i,t,r))}),n};function q1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function A9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q1(Object(r),!0).forEach(function(n){P9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P9(e,t,r){return(t=O9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O9(e){var t=T9(e,"string");return typeof t=="symbol"?t:t+""}function T9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sn(e,t){var r=A9({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var WO={},HO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(HO);var gb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(gb);var qO={},Rm={},VO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(VO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VO;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Rm);var GO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(GO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rm,r=GO;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(qO);var KO={},YO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tm;function r(n){return function(s){return t.get(s,n)}}e.property=r})(YO);var XO={},vb={},QO={},xb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(xb);var yb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(yb);var bb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(bb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xb,r=yb,n=bb;function s(d,h,f){return typeof f!="function"?s(d,h,()=>{}):i(d,h,function m(p,x,g,v,b,w){const _=f(p,x,g,v,b,w);return _!==void 0?!!_:i(p,x,m,w)},new Map)}function i(d,h,f,m){if(h===d)return!0;switch(typeof h){case"object":return o(d,h,f,m);case"function":return Object.keys(h).length>0?i(d,{...h},f,m):n.eq(d,h);default:return t.isObject(d)?typeof h=="string"?h==="":!0:n.eq(d,h)}}function o(d,h,f,m){if(h==null)return!0;if(Array.isArray(h))return c(d,h,f,m);if(h instanceof Map)return l(d,h,f,m);if(h instanceof Set)return u(d,h,f,m);const p=Object.keys(h);if(d==null||r.isPrimitive(d))return p.length===0;if(p.length===0)return!0;if(m!=null&&m.has(h))return m.get(h)===d;m==null||m.set(h,d);try{for(let x=0;x<p.length;x++){const g=p[x];if(!r.isPrimitive(d)&&!(g in d)||h[g]===void 0&&d[g]!==void 0||h[g]===null&&d[g]!==null||!f(d[g],h[g],g,d,h,m))return!1}return!0}finally{m==null||m.delete(h)}}function l(d,h,f,m){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[p,x]of h.entries()){const g=d.get(p);if(f(g,x,p,d,h,m)===!1)return!1}return!0}function c(d,h,f,m){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const p=new Set;for(let x=0;x<h.length;x++){const g=h[x];let v=!1;for(let b=0;b<d.length;b++){if(p.has(b))continue;const w=d[b];let _=!1;if(f(w,g,x,d,h,m)&&(_=!0),_){p.add(b),v=!0;break}}if(!v)return!1}return!0}function u(d,h,f,m){return h.size===0?!0:d instanceof Set?c([...d],[...h],f,m):!1}e.isMatchWith=s,e.isSetMatch=u})(QO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QO;function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(vb);var JO={},wb={},ZO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(ZO);var _b={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(_b);var jb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",p="[object Error]",x="[object DataView]",g="[object Uint8Array]",v="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",I="[object BigInt64Array]",E="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=d,e.bigInt64ArrayTag=I,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=x,e.dateTag=l,e.errorTag=p,e.float32ArrayTag=E,e.float64ArrayTag=D,e.functionTag=h,e.int16ArrayTag=N,e.int32ArrayTag=C,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=g,e.uint8ClampedArrayTag=v})(jb);var eT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(eT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZO,r=_b,n=jb,s=yb,i=eT;function o(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,f,m=new Map,p=void 0){const x=p==null?void 0:p(d,h,f,m);if(x!==void 0)return x;if(s.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const g=new Array(d.length);m.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,f,m,p);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;m.set(d,g);for(const[v,b]of d)g.set(v,l(b,v,f,m,p));return g}if(d instanceof Set){const g=new Set;m.set(d,g);for(const v of d)g.add(l(v,void 0,f,m,p));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,f,m,p);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,g),c(g,d,f,m,p),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return m.set(d,g),c(g,d,f,m,p),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return m.set(d,g),c(g,d,f,m,p),g}if(d instanceof Error){const g=new d.constructor;return m.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,f,m,p),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return m.set(d,g),c(g,d,f,m,p),g}if(d instanceof Number){const g=new Number(d.valueOf());return m.set(d,g),c(g,d,f,m,p),g}if(d instanceof String){const g=new String(d.valueOf());return m.set(d,g),c(g,d,f,m,p),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return m.set(d,g),c(g,d,f,m,p),g}return d}function c(d,h,f=d,m,p){const x=[...Object.keys(h),...t.getSymbols(h)];for(let g=0;g<x.length;g++){const v=x[g],b=Object.getOwnPropertyDescriptor(d,v);(b==null||b.writable)&&(d[v]=l(h[v],v,f,m,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(wb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wb;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(JO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vb,r=JO;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(XO);var tT={},rT={},nT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wb,r=jb;function n(s,i){return t.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(nT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nT;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(rT);var sT={},Nb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Nb);var iT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_b;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(iT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mb,r=Nb,n=iT,s=Dm;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}e.has=i})(sT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vb,r=Im,n=rT,s=Tm,i=sT;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(tT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gb,r=YO,n=XO,s=tT;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(KO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HO,r=gb,n=qO,s=KO;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(WO);var I9=WO.uniqBy;const V1=Us(I9);function D9(e,t,r){return t===!0?V1(e,r):typeof t=="function"?V1(e,t):e}var aT={exports:{}},oT={},lT={exports:{}},cT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=y;function R9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var M9=typeof Object.is=="function"?Object.is:R9,L9=Qo.useState,$9=Qo.useEffect,F9=Qo.useLayoutEffect,U9=Qo.useDebugValue;function B9(e,t){var r=t(),n=L9({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return F9(function(){s.value=r,s.getSnapshot=t,Eg(s)&&i({inst:s})},[e,r,t]),$9(function(){return Eg(s)&&i({inst:s}),e(function(){Eg(s)&&i({inst:s})})},[e]),U9(r),r}function Eg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!M9(e,r)}catch{return!0}}function z9(e,t){return t()}var W9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?z9:B9;cT.useSyncExternalStore=Qo.useSyncExternalStore!==void 0?Qo.useSyncExternalStore:W9;lT.exports=cT;var H9=lT.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=y,q9=H9;function V9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var G9=typeof Object.is=="function"?Object.is:V9,K9=q9.useSyncExternalStore,Y9=Mm.useRef,X9=Mm.useEffect,Q9=Mm.useMemo,J9=Mm.useDebugValue;oT.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=Y9(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Q9(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var p=o.value;if(s(p,m))return h=p}return h=m}if(p=h,G9(d,m))return p;var x=n(m);return s!==void 0&&s(p,x)?(d=m,p):(d=m,h=x)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=K9(e,i[0],i[1]);return X9(function(){o.hasValue=!0,o.value=l},[l]),J9(l),l};aT.exports=oT;var Z9=aT.exports,Sb=y.createContext(null),ez=e=>e,wt=()=>{var e=y.useContext(Sb);return e?e.store.dispatch:ez},ah=()=>{},tz=()=>ah,rz=(e,t)=>e===t;function ie(e){var t=y.useContext(Sb);return Z9.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:tz,t?t.store.getState:ah,t?t.store.getState:ah,t?e:ah,rz)}function nz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function sz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function iz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var G1=e=>Array.isArray(e)?e:[e];function az(e){const t=Array.isArray(e[0])?e[0]:e;return iz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function oz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var lz=class{constructor(e){this.value=e}deref(){return this.value}},cz=typeof WeakRef<"u"?WeakRef:lz,uz=0,K1=1;function Ad(){return{s:uz,v:void 0,o:null,p:null}}function uT(e,t={}){let r=Ad();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var h;let l=r;const{length:c}=arguments;for(let f=0,m=c;f<m;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const g=x.get(p);g===void 0?(l=Ad(),x.set(p,l)):l=g}else{let x=l.p;x===null&&(l.p=x=new Map);const g=x.get(p);g===void 0?(l=Ad(),x.set(p,l)):l=g}}const u=l;let d;if(l.s===K1)d=l.v;else if(d=e.apply(null,arguments),i++,n){const f=((h=s==null?void 0:s.deref)==null?void 0:h.call(s))??s;f!=null&&n(f,d)&&(d=f,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new cz(d):d}return u.s=K1,u.v=d,d}return o.clearCache=()=>{r=Ad(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function dz(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),nz(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:m=uT,argsMemoizeOptions:p=[]}=d,x=G1(f),g=G1(p),v=az(s),b=h(function(){return i++,u.apply(null,arguments)},...x),w=m(function(){o++;const j=oz(v,arguments);return l=b.apply(null,j),l},...g);return Object.assign(w,{resultFunc:u,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var F=dz(uT),hz=Object.assign((e,t=F)=>{sz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>hz}),dT={},hT={},fT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(fT);var mT={},Eb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Eb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Eb,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(mT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fT,r=mT,n=Dm;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,p)=>{let x=m;for(let g=0;g<p.length&&x!=null;++g)x=x[p[g]];return x},d=(m,p)=>p==null||m==null?p:typeof m=="object"&&"key"in m?Object.hasOwn(p,m.key)?p[m.key]:u(p,m.path):typeof m=="function"?m(p):Array.isArray(m)?u(p,m):typeof p=="object"?p[m]:p,h=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:h.map(p=>d(p,m))})).slice().sort((m,p)=>{for(let x=0;x<h.length;x++){const g=t.compareValues(m.criteria[x],p.criteria[x],l[x]);if(g!==0)return g}return 0}).map(m=>m.original)}e.orderBy=s})(hT);var pT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(r,0),s}e.flatten=t})(pT);var Cb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nb,r=Rm,n=xb,s=bb;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(Cb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hT,r=pT,n=Cb;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(dT);var fz=dT.sortBy;const Lm=Us(fz);var gT=e=>e.legend.settings,mz=e=>e.legend.size,pz=e=>e.legend.payload;F([pz,gT],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Lm(n,r):n});var Pd=1;function gz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Pd||Math.abs(o.left-t.left)>Pd||Math.abs(o.top-t.top)>Pd||Math.abs(o.width-t.width)>Pd)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Xt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var vz=typeof Symbol=="function"&&Symbol.observable||"@@observable",Y1=vz,Cg=()=>Math.random().toString(36).substring(7).split("").join("."),xz={INIT:`@@redux/INIT${Cg()}`,REPLACE:`@@redux/REPLACE${Cg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Cg()}`},hf=xz;function kb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vT(e,t,r){if(typeof e!="function")throw new Error(Xt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Xt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Xt(1));return r(vT)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((g,v)=>{o.set(v,g)}))}function d(){if(c)throw new Error(Xt(3));return s}function h(g){if(typeof g!="function")throw new Error(Xt(4));if(c)throw new Error(Xt(5));let v=!0;u();const b=l++;return o.set(b,g),function(){if(v){if(c)throw new Error(Xt(6));v=!1,u(),o.delete(b),i=null}}}function f(g){if(!kb(g))throw new Error(Xt(7));if(typeof g.type>"u")throw new Error(Xt(8));if(typeof g.type!="string")throw new Error(Xt(17));if(c)throw new Error(Xt(9));try{c=!0,s=n(s,g)}finally{c=!1}return(i=o).forEach(b=>{b()}),g}function m(g){if(typeof g!="function")throw new Error(Xt(10));n=g,f({type:hf.REPLACE})}function p(){const g=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Xt(11));function b(){const _=v;_.next&&_.next(d())}return b(),{unsubscribe:g(b)}},[Y1](){return this}}}return f({type:hf.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[Y1]:p}}function yz(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:hf.INIT})>"u")throw new Error(Xt(12));if(typeof r(void 0,{type:hf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xt(13))})}function xT(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{yz(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const h=n[d],f=r[h],m=o[h],p=f(m,l);if(typeof p>"u")throw l&&l.type,new Error(Xt(14));u[h]=p,c=c||p!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function ff(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function bz(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Xt(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=ff(...l)(s.dispatch),{...s,dispatch:i}}}function yT(e){return kb(e)&&"type"in e&&typeof e.type=="string"}var bT=Symbol.for("immer-nothing"),X1=Symbol.for("immer-draftable"),Er=Symbol.for("immer-state");function Dn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qr=Object,Jo=Qr.getPrototypeOf,mf="constructor",$m="prototype",A0="configurable",pf="enumerable",oh="writable",tu="value",Ds=e=>!!e&&!!e[Er];function Vn(e){var t;return e?wT(e)||Fm(e)||!!e[X1]||!!((t=e[mf])!=null&&t[X1])||Um(e)||Bm(e):!1}var wz=Qr[$m][mf].toString(),Q1=new WeakMap;function wT(e){if(!e||!Ab(e))return!1;const t=Jo(e);if(t===null||t===Qr[$m])return!0;const r=Qr.hasOwnProperty.call(t,mf)&&t[mf];if(r===Object)return!0;if(!io(r))return!1;let n=Q1.get(r);return n===void 0&&(n=Function.toString.call(r),Q1.set(r,n)),n===wz}function Du(e,t,r=!0){Ru(e)===0?(r?Reflect.ownKeys(e):Qr.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Ru(e){const t=e[Er];return t?t.type_:Fm(e)?1:Um(e)?2:Bm(e)?3:0}var J1=(e,t,r=Ru(e))=>r===2?e.has(t):Qr[$m].hasOwnProperty.call(e,t),P0=(e,t,r=Ru(e))=>r===2?e.get(t):e[t],gf=(e,t,r,n=Ru(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function _z(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Fm=Array.isArray,Um=e=>e instanceof Map,Bm=e=>e instanceof Set,Ab=e=>typeof e=="object",io=e=>typeof e=="function",kg=e=>typeof e=="boolean",fs=e=>e.copy_||e.base_,Pb=e=>e.modified_?e.copy_:e.base_;function O0(e,t){if(Um(e))return new Map(e);if(Bm(e))return new Set(e);if(Fm(e))return Array[$m].slice.call(e);const r=wT(e);if(t===!0||t==="class_only"&&!r){const n=Qr.getOwnPropertyDescriptors(e);delete n[Er];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l[oh]===!1&&(l[oh]=!0,l[A0]=!0),(l.get||l.set)&&(n[o]={[A0]:!0,[oh]:!0,[pf]:l[pf],[tu]:e[o]})}return Qr.create(Jo(e),n)}else{const n=Jo(e);if(n!==null&&r)return{...e};const s=Qr.create(n);return Qr.assign(s,e)}}function Ob(e,t=!1){return zm(e)||Ds(e)||!Vn(e)||(Ru(e)>1&&Qr.defineProperties(e,{set:Od,add:Od,clear:Od,delete:Od}),Qr.freeze(e),t&&Du(e,(r,n)=>{Ob(n,!0)},!1)),e}function jz(){Dn(2)}var Od={[tu]:jz};function zm(e){return e===null||!Ab(e)?!0:Qr.isFrozen(e)}var vf="MapSet",T0="Patches",_T={};function Zo(e){const t=_T[e];return t||Dn(0,e),t}var Nz=e=>!!_T[e],ru,jT=()=>ru,Sz=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Nz(vf)?Zo(vf):void 0});function Z1(e,t){t&&(e.patchPlugin_=Zo(T0),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function I0(e){D0(e),e.drafts_.forEach(Ez),e.drafts_=null}function D0(e){e===ru&&(ru=e.parent_)}var eN=e=>ru=Sz(ru,e);function Ez(e){const t=e[Er];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function tN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Er].modified_&&(I0(t),Dn(4)),Vn(e)&&(e=rN(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(r[Er].base_,e,t)}else e=rN(t,r);return Cz(t,e,!0),I0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bT?e:void 0}function rN(e,t){if(zm(t))return t;const r=t[Er];if(!r)return Tb(t,e.handledSet_,e);if(!Wm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);ET(r,e)}return r.copy_}function Cz(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ob(t,r)}function NT(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Wm=(e,t)=>e.scope_===t,kz=[];function ST(e,t,r,n){const s=fs(e),i=e.type_;if(n!==void 0&&P0(s,n,i)===t){gf(s,n,r,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Du(s,(c,u)=>{if(Ds(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=e.draftLocations_.get(t)??kz;for(const l of o)gf(s,l,r,i)}function Az(e,t,r){e.callbacks_.push(function(s){var l;const i=t;if(!i||!Wm(i,s))return;(l=s.mapSetPlugin_)==null||l.fixSetContents(i);const o=Pb(i);ST(e,i.draft_??i,o,r),ET(i,s)})}function ET(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:s}=t;if(s){const i=s.getPath(e);i&&s.generatePatches_(e,i,t)}NT(e)}}function Pz(e,t,r){const{scope_:n}=e;if(Ds(r)){const s=r[Er];Wm(s,n)&&s.callbacks_.push(function(){lh(e);const o=Pb(s);ST(e,r,o,t)})}else Vn(r)&&e.callbacks_.push(function(){const i=fs(e);P0(i,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Tb(P0(e.copy_,t,e.type_),n.handledSet_,n)})}function Tb(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ds(e)||t.has(e)||!Vn(e)||zm(e)||(t.add(e),Du(e,(n,s)=>{if(Ds(s)){const i=s[Er];if(Wm(i,r)){const o=Pb(i);gf(e,n,o,e.type_),NT(i)}}else Vn(s)&&Tb(s,t,r)})),e}function Oz(e,t){const r=Fm(e),n={type_:r?1:0,scope_:t?t.scope_:jT(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=n,i=Ib;r&&(s=[n],i=nu);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,[l,n]}var Ib={get(e,t){if(t===Er)return e;const r=fs(e);if(!J1(r,t,e.type_))return Tz(e,r,t);const n=r[t];if(e.finalized_||!Vn(n))return n;if(n===Ag(e.base_,t)){lh(e);const s=e.type_===1?+t:t,i=M0(e.scope_,n,e,s);return e.copy_[s]=i}return n},has(e,t){return t in fs(e)},ownKeys(e){return Reflect.ownKeys(fs(e))},set(e,t,r){const n=CT(fs(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Ag(fs(e),t),i=s==null?void 0:s[Er];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(_z(r,s)&&(r!==void 0||J1(e.base_,t,e.type_)))return!0;lh(e),R0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Pz(e,t,r)),!0},deleteProperty(e,t){return lh(e),Ag(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),R0(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=fs(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[oh]:!0,[A0]:e.type_!==1||t!=="length",[pf]:n[pf],[tu]:r[t]}},defineProperty(){Dn(11)},getPrototypeOf(e){return Jo(e.base_)},setPrototypeOf(){Dn(12)}},nu={};Du(Ib,(e,t)=>{nu[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});nu.deleteProperty=function(e,t){return nu.set.call(this,e,t,void 0)};nu.set=function(e,t,r){return Ib.set.call(this,e[0],t,r,e[0])};function Ag(e,t){const r=e[Er];return(r?fs(r):e)[t]}function Tz(e,t,r){var s;const n=CT(t,r);return n?tu in n?n[tu]:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function CT(e,t){if(!(t in e))return;let r=Jo(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Jo(r)}}function R0(e){e.modified_||(e.modified_=!0,e.parent_&&R0(e.parent_))}function lh(e){e.copy_||(e.assigned_=new Map,e.copy_=O0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Iz=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,s)=>{if(io(r)&&!io(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,h=>n.call(this,h,...d))}}io(n)||Dn(6),s!==void 0&&!io(s)&&Dn(7);let i;if(Vn(r)){const o=eN(this),l=M0(o,r,void 0);let c=!0;try{i=n(l),c=!1}finally{c?I0(o):D0(o)}return Z1(o,s),tN(i,o)}else if(!r||!Ab(r)){if(i=n(r),i===void 0&&(i=r),i===bT&&(i=void 0),this.autoFreeze_&&Ob(i,!0),s){const o=[],l=[];Zo(T0).generateReplacementPatches_(r,i,{patches_:o,inversePatches_:l}),s(o,l)}return i}else Dn(1,r)},this.produceWithPatches=(r,n)=>{if(io(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let s,i;return[this.produce(r,n,(l,c)=>{s=l,i=c}),s,i]},kg(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),kg(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),kg(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Vn(t)||Dn(8),Ds(t)&&(t=zn(t));const r=eN(this),n=M0(r,t,void 0);return n[Er].isManual_=!0,D0(r),n}finishDraft(t,r){const n=t&&t[Er];(!n||!n.isManual_)&&Dn(9);const{scope_:s}=n;return Z1(s,r),tN(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const i=r[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(r=r.slice(n+1));const s=Zo(T0).applyPatches_;return Ds(t)?s(t,r):this.produce(t,i=>s(i,r))}};function M0(e,t,r,n){const[s,i]=Um(t)?Zo(vf).proxyMap_(t,r):Bm(t)?Zo(vf).proxySet_(t,r):Oz(t,r);return((r==null?void 0:r.scope_)??jT()).drafts_.push(s),i.callbacks_=(r==null?void 0:r.callbacks_)??[],i.key_=n,r&&n!==void 0?Az(r,i,n):i.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(i);const{patchPlugin_:u}=c;i.modified_&&u&&u.generatePatches_(i,[],c)}),s}function zn(e){return Ds(e)||Dn(10,e),kT(e)}function kT(e){if(!Vn(e)||zm(e))return e;const t=e[Er];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=O0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=O0(e,!0);return Du(r,(s,i)=>{gf(r,s,kT(i))},n),t&&(t.finalized_=!1),r}var Dz=new Iz,AT=Dz.produce;function PT(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var Rz=PT(),Mz=PT,Lz=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ff:ff.apply(null,arguments)};function _n(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Zr(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>yT(n)&&n.type===e,r}var OT=class ec extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ec.prototype)}static get[Symbol.species](){return ec}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ec(...t[0].concat(this)):new ec(...t.concat(this))}};function nN(e){return Vn(e)?AT(e,()=>{}):e}function Td(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function $z(e){return typeof e=="boolean"}var Fz=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new OT;return r&&($z(r)?o.push(Rz):o.push(Mz(r.extraArgument))),o},TT="RTK_autoBatch",tt=()=>e=>({payload:e,meta:{[TT]:!0}}),sN=e=>t=>{setTimeout(t,e)},IT=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:sN(10):e.type==="callback"?e.queueNotification:sN(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>s&&d(),f=n.subscribe(h);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var h;try{return s=!((h=d==null?void 0:d.meta)!=null&&h[TT]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},Uz=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new OT(e);return n&&s.push(IT(typeof n=="object"?n:void 0)),s};function Bz(e){const t=Fz(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(kb(r))l=xT(r);else throw new Error(Zr(1));let c;typeof n=="function"?c=n(t):c=t();let u=ff;s&&(u=Lz({trace:!1,...typeof s=="object"&&s}));const d=bz(...c),h=Uz(d);let f=typeof o=="function"?o(h):h();const m=u(...f);return vT(l,i,m)}function DT(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Zr(28));if(l in t)throw new Error(Zr(29));return t[l]=o,s},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function zz(e){return typeof e=="function"}function Wz(e,t){let[r,n,s]=DT(t),i;if(zz(e))i=()=>nN(e());else{const l=nN(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,h)=>{if(h)if(Ds(d)){const m=h(d,c);return m===void 0?d:m}else{if(Vn(d))return AT(d,f=>h(f,c));{const f=h(d,c);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return o.getInitialState=i,o}var Hz="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qz=(e=21)=>{let t="",r=e;for(;r--;)t+=Hz[Math.random()*64|0];return t},Vz=Symbol.for("rtk-slice-createasyncthunk");function Gz(e,t){return`${e}/${t}`}function Kz({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Vz];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Zr(11));const l=(typeof s.reducers=="function"?s.reducers(Xz()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const N=typeof _=="string"?_:_.type;if(!N)throw new Error(Zr(12));if(N in u.sliceCaseReducersByType)throw new Error(Zr(13));return u.sliceCaseReducersByType[N]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],N={reducerName:_,type:Gz(i,_),createNotation:typeof s.reducers=="function"};Jz(j)?eW(N,j,d,t):Qz(N,j,d)});function h(){const[_={},j=[],N=void 0]=typeof s.extraReducers=="function"?DT(s.extraReducers):[s.extraReducers],C={..._,...u.sliceCaseReducersByType};return Wz(s.initialState,I=>{for(let E in C)I.addCase(E,C[E]);for(let E of u.sliceMatchers)I.addMatcher(E.matcher,E.reducer);for(let E of j)I.addMatcher(E.matcher,E.reducer);N&&I.addDefaultCase(N)})}const f=_=>_,m=new Map,p=new WeakMap;let x;function g(_,j){return x||(x=h()),x(_,j)}function v(){return x||(x=h()),x.getInitialState()}function b(_,j=!1){function N(I){let E=I[_];return typeof E>"u"&&j&&(E=Td(p,N,v)),E}function C(I=f){const E=Td(m,j,()=>new WeakMap);return Td(E,I,()=>{const D={};for(const[O,k]of Object.entries(s.selectors??{}))D[O]=Yz(k,I,()=>Td(p,I,v),j);return D})}return{reducerPath:_,getSelectors:C,get selectors(){return C(N)},selectSlice:N}}const w={name:i,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...b(o),injectInto(_,{reducerPath:j,...N}={}){const C=j??o;return _.inject({reducerPath:C,reducer:g},N),{...w,...b(C,!0)}}};return w}}function Yz(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var Ur=Kz();function Xz(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Qz({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!Zz(n))throw new Error(Zr(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?_n(e,o):_n(e))}function Jz(e){return e._reducerDefinitionType==="asyncThunk"}function Zz(e){return e._reducerDefinitionType==="reducerWithPrepare"}function eW({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Zr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,h=s(e,i,d);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(t,{fulfilled:o||Id,pending:l||Id,rejected:c||Id,settled:u||Id})}function Id(){}var tW="task",RT="listener",MT="completed",Db="cancelled",rW=`task-${Db}`,nW=`task-${MT}`,L0=`${RT}-${Db}`,sW=`${RT}-${MT}`,Hm=class{constructor(e){Ha(this,"name","TaskAbortError");Ha(this,"message");this.code=e,this.message=`${tW} ${Db} (reason: ${e})`}},Rb=(e,t)=>{if(typeof e!="function")throw new TypeError(Zr(32))},xf=()=>{},LT=(e,t=xf)=>(e.catch(t),e),$T=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ha=e=>{if(e.aborted)throw new Hm(e.reason)};function FT(e,t){let r=xf;return new Promise((n,s)=>{const i=()=>s(new Hm(e.reason));if(e.aborted){i();return}r=$T(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=xf})}var iW=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Hm?"cancelled":"rejected",error:r}}finally{t==null||t()}},yf=e=>t=>LT(FT(e,t).then(r=>(ha(e),r))),UT=e=>{const t=yf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Io}=Object,iN={},qm="listenerMiddleware",aW=(e,t)=>{const r=n=>$T(e,()=>n.abort(e.reason));return(n,s)=>{Rb(n);const i=new AbortController;r(i);const o=iW(async()=>{ha(e),ha(i.signal);const l=await n({pause:yf(i.signal),delay:UT(i.signal),signal:i.signal});return ha(i.signal),l},()=>i.abort(nW));return s!=null&&s.autoJoin&&t.push(o.catch(xf)),{result:yf(e)(o),cancel(){i.abort(rW)}}}},oW=(e,t)=>{const r=async(n,s)=>{ha(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await FT(t,Promise.race(l));return ha(t),c}finally{i()}};return(n,s)=>LT(r(n,s))},BT=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=_n(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Zr(21));return Rb(i),{predicate:s,type:t,effect:i}},zT=Io(e=>{const{type:t,predicate:r,effect:n}=BT(e);return{id:qz(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Zr(22))}}},{withTypes:()=>zT}),aN=(e,t)=>{const{type:r,effect:n,predicate:s}=BT(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},$0=e=>{e.pending.forEach(t=>{t.abort(L0)})},lW=(e,t)=>()=>{for(const r of t.keys())$0(r);e.clear()},oN=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},WT=Io(_n(`${qm}/add`),{withTypes:()=>WT}),cW=_n(`${qm}/removeAll`),HT=Io(_n(`${qm}/remove`),{withTypes:()=>HT}),uW=(...e)=>{console.error(`${qm}/error`,...e)},Mu=(e={})=>{const t=new Map,r=new Map,n=m=>{const p=r.get(m)??0;r.set(m,p+1)},s=m=>{const p=r.get(m)??1;p===1?r.delete(m):r.set(m,p-1)},{extra:i,onError:o=uW}=e;Rb(o);const l=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),p=>{m.unsubscribe(),p!=null&&p.cancelActive&&$0(m)}),c=m=>{const p=aN(t,m)??zT(m);return l(p)};Io(c,{withTypes:()=>c});const u=m=>{const p=aN(t,m);return p&&(p.unsubscribe(),m.cancelActive&&$0(p)),!!p};Io(u,{withTypes:()=>u});const d=async(m,p,x,g)=>{const v=new AbortController,b=oW(c,v.signal),w=[];try{m.pending.add(v),n(m),await Promise.resolve(m.effect(p,Io({},x,{getOriginalState:g,condition:(_,j)=>b(_,j).then(Boolean),take:b,delay:UT(v.signal),pause:yf(v.signal),extra:i,signal:v.signal,fork:aW(v.signal,w),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((_,j,N)=>{_!==v&&(_.abort(L0),N.delete(_))})},cancel:()=>{v.abort(L0),m.pending.delete(v)},throwIfCancelled:()=>{ha(v.signal)}})))}catch(_){_ instanceof Hm||oN(o,_,{raisedBy:"effect"})}finally{await Promise.all(w),v.abort(sW),s(m),m.pending.delete(v)}},h=lW(t,r);return{middleware:m=>p=>x=>{if(!yT(x))return p(x);if(WT.match(x))return c(x.payload);if(cW.match(x)){h();return}if(HT.match(x))return u(x.payload);let g=m.getState();const v=()=>{if(g===iN)throw new Error(Zr(23));return g};let b;try{if(b=p(x),t.size>0){const w=m.getState(),_=Array.from(t.values());for(const j of _){let N=!1;try{N=j.predicate(x,w,g)}catch(C){N=!1,oN(o,C,{raisedBy:"predicate"})}N&&d(j,x,m,v)}}}finally{g=iN}return b},startListening:c,stopListening:u,clearListeners:h}};function Zr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dW={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},qT=Ur({name:"chartLayout",initialState:dW,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:hW,setLayout:fW,setChartSize:mW,setScale:pW}=qT.actions,gW=qT.reducer;function VT(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function ct(e){return Number.isFinite(e)}function is(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function lN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lN(Object(r),!0).forEach(function(n){vW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vW(e,t,r){return(t=xW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xW(e){var t=yW(e,"string");return typeof t=="symbol"?t:t+""}function yW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sr(e,t,r){return Vt(e)||Vt(t)?r:ss(t)?Xo(e,t,r):typeof t=="function"?t(e):r}var bW=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&ne(e[i]))return bo(bo({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&ne(e[o]))return bo(bo({},e),{},{[o]:e[o]+(s||0)})}return e},Ma=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",GT=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},KT=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:f,axisType:m}=e;if(!o)return null;var p=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=s==="category"&&o.bandwidth?o.bandwidth()/p:0;if(x=m==="angleAxis"&&i&&i.length>=2?Dr(i[0]-i[1])*2*x:x,h||f){var g=(h||f||[]).map((v,b)=>{var w=n?n.indexOf(v):v;return{coordinate:o(w)+x,value:v,offset:x,index:b}});return g.filter(v=>!Hn(v.coordinate))}return c&&u?u.map((v,b)=>({coordinate:o(v)+x,value:v,index:b,offset:x})):o.ticks&&d!=null?o.ticks(d).map((v,b)=>({coordinate:o(v)+x,value:v,offset:x,index:b})):o.domain().map((v,b)=>({coordinate:o(v)+x,value:n?n[v]:v,index:b,offset:x}))},cN=1e-4,wW=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-cN,i=Math.max(n[0],n[1])+cN,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},_W=(e,t)=>{if(!t||t.length!==2||!ne(t[0])||!ne(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ne(e[0])||e[0]<r)&&(s[0]=r),(!ne(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},jW=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var i=0,o=0,l=0;l<r;++l){var c=e[l],u=c==null?void 0:c[s];if(u!=null){var d=u[1],h=u[0],f=Hn(d)?h:d;f>=0?(u[0]=i,u[1]=i+f,i=d):(u[0]=o,u[1]=o+f,o=d)}}}},NW=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var i=0,o=0;o<r;++o){var l=e[o],c=l==null?void 0:l[s];if(c!=null){var u=Hn(c[1])?c[0]:c[1];u>=0?(c[0]=i,c[1]=i+u,i=c[1]):(c[0]=0,c[1]=0)}}}},SW={sign:jW,expand:c9,none:Na,silhouette:u9,wiggle:d9,positive:NW},EW=(e,t,r)=>{var n,s=(n=SW[r])!==null&&n!==void 0?n:Na,i=l9().keys(t).value((l,c)=>Number(sr(l,c,0))).order(C0).offset(s),o=i(e);return o.forEach((l,c)=>{l.forEach((u,d)=>{var h=sr(e[d],t[c],0);Array.isArray(h)&&h.length===2&&ne(h[0])&&ne(h[1])&&(u[0]=h[0],u[1]=h[1])})}),o};function CW(e){return e==null?void 0:String(e)}var uN=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=sr(i,t.dataKey,t.scale.domain()[o]);return Vt(l)?null:t.scale(l)-s/2+n},kW=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},AW=e=>{var t=e.flat(2).filter(ne);return[Math.min(...t),Math.max(...t)]},PW=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],OW=(e,t,r)=>{if(e!=null)return PW(Object.keys(e).reduce((n,s)=>{var i=e[s];if(!i)return n;var{stackedData:o}=i,l=o.reduce((c,u)=>{var d=VT(u,t,r),h=AW(d);return!ct(h[0])||!ct(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},dN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bf=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Lm(t,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),i)}return i===1/0?0:i}return r?void 0:0};function fN(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return bo(bo({},t),{},{dataKey:r,payload:n,value:s,name:i})}function YT(e,t){if(e)return String(e);if(typeof t=="string")return t}var TW=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},IW=(e,t)=>t==="centric"?e.angle:e.radius,Ws=e=>e.layout.width,Hs=e=>e.layout.height,DW=e=>e.layout.scale,XT=e=>e.layout.margin,Vm=F(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Gm=F(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),RW="data-recharts-item-index",MW="data-recharts-item-id",Lu=60;function mN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mN(Object(r),!0).forEach(function(n){LW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LW(e,t,r){return(t=$W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $W(e){var t=FW(e,"string");return typeof t=="symbol"?t:t+""}function FW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UW=e=>e.brush.height;function BW(e){var t=Gm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Lu;return r+s}return r},0)}function zW(e){var t=Gm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Lu;return r+s}return r},0)}function WW(e){var t=Vm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function HW(e){var t=Vm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Gt=F([Ws,Hs,XT,UW,BW,zW,WW,HW,gT,mz],(e,t,r,n,s,i,o,l,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+i},h={top:(r.top||0)+o,bottom:(r.bottom||0)+l},f=Dd(Dd({},h),d),m=f.bottom;f.bottom+=n,f=bW(f,c,u);var p=e-f.left-f.right,x=t-f.top-f.bottom;return Dd(Dd({brushBottom:m},f),{},{width:Math.max(p,0),height:Math.max(x,0)})}),qW=F(Gt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Mb=F(Ws,Hs,(e,t)=>({x:0,y:0,width:e,height:t})),VW=y.createContext(null),Br=()=>y.useContext(VW)!=null,Km=e=>e.brush,Ym=F([Km,Gt,XT],(e,t,r)=>({height:e.height,x:ne(e.x)?e.x:t.left,y:ne(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ne(e.width)?e.width:t.width})),QT={},JT={},ZT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},h=()=>{u&&d(),x()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},p=()=>{f!==null&&(clearTimeout(f),f=null)},x=()=>{p(),o=void 0,l=null},g=()=>{d()},v=function(...b){if(s!=null&&s.aborted)return;o=this,l=b;const w=f==null;m(),c&&w&&d()};return v.schedule=m,v.cancel=x,v.flush=g,s==null||s.addEventListener("abort",x,{once:!0}),v}e.debounce=t})(ZT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZT;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const f=t.debounce(function(...x){d=n.apply(this,x),h=null},s,{edges:u}),m=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=n.apply(this,x),h=Date.now(),f.cancel(),f.schedule(),d):(f.apply(this,x),d)},p=()=>(f.flush(),d);return m.cancel=f.cancel,m.flush=p,m}e.debounce=r})(JT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JT;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(QT);var GW=QT.throttle;const KW=Us(GW);var wf=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>s[o++]))}},eI=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:o}=r,l=Is(n)?e:Number(n),c=Is(s)?t:Number(s);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},YW={width:0,height:0,overflow:"visible"},XW={width:0,overflowX:"visible"},QW={height:0,overflowY:"visible"},JW={},ZW=e=>{var{width:t,height:r}=e,n=Is(t),s=Is(r);return n&&s?YW:n?XW:s?QW:JW};function eH(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(null,arguments)}function pN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pN(Object(r),!0).forEach(function(n){tH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tH(e,t,r){return(t=rH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=nH(e,"string");return typeof t=="symbol"?t:t+""}function nH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tI=y.createContext({width:-1,height:-1});function sH(e){return is(e.width)&&is(e.height)}function rI(e){var{children:t,width:r,height:n}=e,s=y.useMemo(()=>({width:r,height:n}),[r,n]);return sH(s)?y.createElement(tI.Provider,{value:s},t):null}var Lb=()=>y.useContext(tI),iH=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:f,onResize:m,style:p={}}=e,x=y.useRef(null),g=y.useRef();g.current=m,y.useImperativeHandle(t,()=>x.current);var[v,b]=y.useState({containerWidth:n.width,containerHeight:n.height}),w=y.useCallback((I,E)=>{b(D=>{var O=Math.round(I),k=Math.round(E);return D.containerWidth===O&&D.containerHeight===k?D:{containerWidth:O,containerHeight:k}})},[]);y.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return Iu;var I=k=>{var S,{width:T,height:R}=k[0].contentRect;w(T,R),(S=g.current)===null||S===void 0||S.call(g,T,R)};d>0&&(I=KW(I,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(I),{width:D,height:O}=x.current.getBoundingClientRect();return w(D,O),E.observe(x.current),()=>{E.disconnect()}},[w,d]);var{containerWidth:_,containerHeight:j}=v;wf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:C}=eI(_,j,{width:s,height:i,aspect:r,maxHeight:c});return wf(N!=null&&N>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,C,s,i,o,l,r),y.createElement("div",{id:h?"".concat(h):void 0,className:Xe("recharts-responsive-container",f),style:gN(gN({},p),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:x},y.createElement("div",{style:ZW({width:s,height:i})},y.createElement(rI,{width:N,height:C},u)))}),nI=y.forwardRef((e,t)=>{var r=Lb();if(is(r.width)&&is(r.height))return e.children;var{width:n,height:s}=eH({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=eI(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return ne(i)&&ne(o)?y.createElement(rI,{width:i,height:o},e.children):y.createElement(iH,F0({},e,{width:n,height:s,ref:t}))});function sI(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Xm=()=>{var e,t=Br(),r=ie(qW),n=ie(Ym),s=(e=ie(Km))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},aH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iI=()=>{var e;return(e=ie(Gt))!==null&&e!==void 0?e:aH},aI=()=>ie(Ws),oI=()=>ie(Hs),Ie=e=>e.layout.layoutType,$u=()=>ie(Ie),oH=()=>{var e=$u();return e!==void 0},Qm=e=>{var t=wt(),r=Br(),{width:n,height:s}=e,i=Lb(),o=n,l=s;return i&&(o=i.width>0?i.width:n,l=i.height>0?i.height:s),y.useEffect(()=>{!r&&is(o)&&is(l)&&t(mW({width:o,height:l}))},[t,r,o,l]),null},lI=Symbol.for("immer-nothing"),vN=Symbol.for("immer-draftable"),tn=Symbol.for("immer-state");function Rn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var su=Object.getPrototypeOf;function el(e){return!!e&&!!e[tn]}function Sa(e){var t;return e?cI(e)||Array.isArray(e)||!!e[vN]||!!((t=e.constructor)!=null&&t[vN])||Fu(e)||Zm(e):!1}var lH=Object.prototype.constructor.toString(),xN=new WeakMap;function cI(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=xN.get(r);return n===void 0&&(n=Function.toString.call(r),xN.set(r,n)),n===lH}function _f(e,t,r=!0){Jm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Jm(e){const t=e[tn];return t?t.type_:Array.isArray(e)?1:Fu(e)?2:Zm(e)?3:0}function U0(e,t){return Jm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uI(e,t,r){const n=Jm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function cH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fu(e){return e instanceof Map}function Zm(e){return e instanceof Set}function Yi(e){return e.copy_||e.base_}function B0(e,t){if(Fu(e))return new Map(e);if(Zm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cI(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[tn];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(su(e),n)}else{const n=su(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function $b(e,t=!1){return ep(e)||el(e)||!Sa(e)||(Jm(e)>1&&Object.defineProperties(e,{set:Rd,add:Rd,clear:Rd,delete:Rd}),Object.freeze(e),t&&Object.values(e).forEach(r=>$b(r,!0))),e}function uH(){Rn(2)}var Rd={value:uH};function ep(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var dH={};function Ea(e){const t=dH[e];return t||Rn(0,e),t}var iu;function dI(){return iu}function hH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yN(e,t){t&&(Ea("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function z0(e){W0(e),e.drafts_.forEach(fH),e.drafts_=null}function W0(e){e===iu&&(iu=e.parent_)}function bN(e){return iu=hH(iu,e)}function fH(e){const t=e[tn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function wN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[tn].modified_&&(z0(t),Rn(4)),Sa(e)&&(e=jf(t,e),t.parent_||Nf(t,e)),t.patches_&&Ea("Patches").generateReplacementPatches_(r[tn].base_,e,t.patches_,t.inversePatches_)):e=jf(t,r,[]),z0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lI?e:void 0}function jf(e,t,r){if(ep(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[tn];if(!s)return _f(t,(i,o)=>_N(e,s,t,i,o,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Nf(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let o=i,l=!1;s.type_===3&&(o=new Set(i),i.clear(),l=!0),_f(o,(c,u)=>_N(e,s,i,c,u,r,l),n),Nf(e,i,!1),r&&e.patches_&&Ea("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function _N(e,t,r,n,s,i,o){if(s==null||typeof s!="object"&&!o)return;const l=ep(s);if(!(l&&!o)){if(el(s)){const c=i&&t&&t.type_!==3&&!U0(t.assigned_,n)?i.concat(n):void 0,u=jf(e,s,c);if(uI(r,n,u),el(u))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(Sa(s)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&l)return;jf(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Fu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Nf(e,s)}}}function Nf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$b(t,r)}function mH(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:dI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Fb;r&&(s=[n],i=au);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var Fb={get(e,t){if(t===tn)return e;const r=Yi(e);if(!U0(r,t))return pH(e,r,t);const n=r[t];return e.finalized_||!Sa(n)?n:n===Pg(e.base_,t)?(Og(e),e.copy_[t]=q0(n,e)):n},has(e,t){return t in Yi(e)},ownKeys(e){return Reflect.ownKeys(Yi(e))},set(e,t,r){const n=hI(Yi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Pg(Yi(e),t),i=s==null?void 0:s[tn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(cH(r,s)&&(r!==void 0||U0(e.base_,t)))return!0;Og(e),H0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Pg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Og(e),H0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Yi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Rn(11)},getPrototypeOf(e){return su(e.base_)},setPrototypeOf(){Rn(12)}},au={};_f(Fb,(e,t)=>{au[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});au.deleteProperty=function(e,t){return au.set.call(this,e,t,void 0)};au.set=function(e,t,r){return Fb.set.call(this,e[0],t,r,e[0])};function Pg(e,t){const r=e[tn];return(r?Yi(r):e)[t]}function pH(e,t,r){var s;const n=hI(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function hI(e,t){if(!(t in e))return;let r=su(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=su(r)}}function H0(e){e.modified_||(e.modified_=!0,e.parent_&&H0(e.parent_))}function Og(e){e.copy_||(e.copy_=B0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var gH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Rn(6),n!==void 0&&typeof n!="function"&&Rn(7);let s;if(Sa(t)){const i=bN(this),o=q0(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?z0(i):W0(i)}return yN(i,n),wN(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===lI&&(s=void 0),this.autoFreeze_&&$b(s,!0),n){const i=[],o=[];Ea("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else Rn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Sa(e)||Rn(8),el(e)&&(e=vH(e));const t=bN(this),r=q0(e,void 0);return r[tn].isManual_=!0,W0(t),r}finishDraft(e,t){const r=e&&e[tn];(!r||!r.isManual_)&&Rn(9);const{scope_:n}=r;return yN(n,t),wN(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Ea("Patches").applyPatches_;return el(e)?n(e,t):this.produce(e,s=>n(s,t))}};function q0(e,t){const r=Fu(e)?Ea("MapSet").proxyMap_(e,t):Zm(e)?Ea("MapSet").proxySet_(e,t):mH(e,t);return(t?t.scope_:dI()).drafts_.push(r),r}function vH(e){return el(e)||Rn(10,e),fI(e)}function fI(e){if(!Sa(e)||ep(e))return e;const t=e[tn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=B0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=B0(e,!0);return _f(r,(s,i)=>{uI(r,s,fI(i))},n),t&&(t.finalized_=!1),r}var xH=new gH;xH.produce;var yH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},mI=Ur({name:"legend",initialState:yH,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:tt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,s=zn(e).payload.indexOf(r);s>-1&&(e.payload[s]=n)},prepare:tt()},removeLegendPayload:{reducer(e,t){var r=zn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:tt()}}}),{setLegendSize:Fse,setLegendSettings:Use,addLegendPayload:bH,replaceLegendPayload:wH,removeLegendPayload:_H}=mI.actions,jH=mI.reducer;function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(null,arguments)}function jN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jN(Object(r),!0).forEach(function(n){NH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NH(e,t,r){return(t=SH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CH(e){return Array.isArray(e)&&ss(e[0])&&ss(e[1])?e.join(" ~ "):e}var kH=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:f=!1}=e,m=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?Lm(i,l):i).map((C,I)=>{if(C.type==="none")return null;var E=C.formatter||o||CH,{value:D,name:O}=C,k=D,S=O;if(E){var T=E(D,O,C,I,i);if(Array.isArray(T))[k,S]=T;else if(T!=null)k=T;else return null}var R=Tg({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:R},ss(S)?y.createElement("span",{className:"recharts-tooltip-item-name"},S):null,ss(S)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},k),y.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},p=Tg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=Tg({margin:0},s),g=!Vt(d),v=g?d:"",b=Xe("recharts-default-tooltip",c),w=Xe("recharts-tooltip-label",u);g&&h&&i!==void 0&&i!==null&&(v=h(d,i));var _=f?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",V0({className:b,style:p},_),y.createElement("p",{className:w,style:x},y.isValidElement(v)?v:"".concat(v)),m())},Bl="recharts-tooltip-wrapper",AH={visibility:"hidden"};function PH(e){var{coordinate:t,translateX:r,translateY:n}=e;return Xe(Bl,{["".concat(Bl,"-right")]:ne(r)&&t&&ne(t.x)&&r>=t.x,["".concat(Bl,"-left")]:ne(r)&&t&&ne(t.x)&&r<t.x,["".concat(Bl,"-bottom")]:ne(n)&&t&&ne(t.y)&&n>=t.y,["".concat(Bl,"-top")]:ne(n)&&t&&ne(t.y)&&n<t.y})}function NN(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&ne(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?d:h;var f=c[n];if(f==null)return 0;if(o[n]){var m=d,p=f;return m<p?Math.max(h,f):Math.max(d,f)}if(u==null)return 0;var x=h+l,g=f+u;return x>g?Math.max(d,f):Math.max(h,f)}function OH(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function TH(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,h;return o.height>0&&o.width>0&&r?(d=NN({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=NN({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=OH({translateX:d,translateY:h,useTranslate3d:l})):u=AH,{cssProperties:u,cssClasses:PH({translateX:d,translateY:h,coordinate:r})}}function SN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Md(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(r),!0).forEach(function(n){G0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G0(e,t,r){return(t=IH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IH(e){var t=DH(e,"string");return typeof t=="symbol"?t:t+""}function DH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RH extends y.PureComponent{constructor(){super(...arguments),G0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),G0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:p,lastBoundingBox:x,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:b,cssProperties:w}=TH({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:f,viewBox:m}),_=v?{}:Md(Md({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=Md(Md({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},p);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:j,ref:g},i)}}var pI=()=>{var e;return(e=ie(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0.apply(null,arguments)}function EN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function CN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(r),!0).forEach(function(n){MH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MH(e,t,r){return(t=LH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LH(e){var t=$H(e,"string");return typeof t=="symbol"?t:t+""}function $H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kN={curveBasisClosed:Q7,curveBasisOpen:J7,curveBasis:X7,curveBumpX:M7,curveBumpY:L7,curveLinearClosed:Z7,curveLinear:Pm,curveMonotoneX:e9,curveMonotoneY:t9,curveNatural:r9,curveStep:n9,curveStepAfter:i9,curveStepBefore:s9},Sf=e=>ct(e.x)&&ct(e.y),AN=e=>e.base!=null&&Sf(e.base)&&Sf(e),zl=e=>e.x,Wl=e=>e.y,FH=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Tu(e));return(r==="curveMonotone"||r==="curveBump")&&t?kN["".concat(r).concat(t==="vertical"?"Y":"X")]:kN[r]||Pm},UH=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=FH(t,s),l=i?r.filter(Sf):r,c;if(Array.isArray(n)){var u=r.map((m,p)=>CN(CN({},m),{},{base:n[p]}));s==="vertical"?c=kd().y(Wl).x1(zl).x0(m=>m.base.x):c=kd().x(zl).y1(Wl).y0(m=>m.base.y);var d=c.defined(AN).curve(o),h=i?u.filter(AN):u;return d(h)}s==="vertical"&&ne(n)?c=kd().y(Wl).x1(zl).x0(n):ne(n)?c=kd().x(zl).y1(Wl).y0(n):c=EO().x(zl).y(Wl);var f=c.defined(Sf).curve(o);return f(l)},gI=e=>{var{className:t,points:r,path:n,pathRef:s}=e,i=$u();if((!r||!r.length)&&!n)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=r&&r.length?UH(o):n;return y.createElement("path",K0({},Os(e),C9(e),{className:Xe("recharts-curve",t),d:l===null?void 0:l,ref:s}))},BH=["x","y","top","left","width","height","className"];function Y0(){return Y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y0.apply(null,arguments)}function PN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(r),!0).forEach(function(n){WH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WH(e,t,r){return(t=HH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=qH(e,"string");return typeof t=="symbol"?t:t+""}function qH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VH(e,t){if(e==null)return{};var r,n,s=GH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KH=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),YH=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=VH(e,BH),u=zH({x:t,y:r,top:n,left:s,width:i,height:o},c);return!ne(t)||!ne(r)||!ne(i)||!ne(o)||!ne(n)||!ne(s)?null:y.createElement("path",Y0({},wn(u),{className:Xe("recharts-cross",l),d:KH(t,r,i,o,n,s)}))};function XH(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function ON(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ON(Object(r),!0).forEach(function(n){QH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ON(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QH(e,t,r){return(t=JH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JH(e){var t=ZH(e,"string");return typeof t=="symbol"?t:t+""}function ZH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eq=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vI=(e,t,r)=>e.map(n=>"".concat(eq(n)," ").concat(t,"ms ").concat(r)).join(","),tq=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ou=(e,t)=>Object.keys(t).reduce((r,n)=>TN(TN({},r),{},{[n]:e(n,t[n])}),{});function IN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(r),!0).forEach(function(n){rq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rq(e,t,r){return(t=nq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nq(e){var t=sq(e,"string");return typeof t=="symbol"?t:t+""}function sq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ef=(e,t,r)=>e+(t-e)*r,X0=e=>{var{from:t,to:r}=e;return t!==r},xI=(e,t,r)=>{var n=ou((s,i)=>{if(X0(i)){var[o,l]=e(i.from,i.to,i.velocity);return At(At({},i),{},{from:o,velocity:l})}return i},t);return r<1?ou((s,i)=>X0(i)&&n[s]!=null?At(At({},i),{},{velocity:Ef(i.velocity,n[s].velocity,r),from:Ef(i.from,n[s].from,r)}):i,t):xI(e,n,r-1)};function iq(e,t,r,n,s,i){var o,l=n.reduce((f,m)=>At(At({},f),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>ou((f,m)=>m.from,l),u=()=>!Object.values(l).filter(X0).length,d=null,h=f=>{o||(o=f);var m=f-o,p=m/r.dt;l=xI(r,l,p),s(At(At(At({},e),t),c())),o=f,u()||(d=i.setTimeout(h))};return()=>(d=i.setTimeout(h),()=>{var f;(f=d)===null||f===void 0||f()})}function aq(e,t,r,n,s,i,o){var l=null,c=s.reduce((h,f)=>{var m=e[f],p=t[f];return m==null||p==null?h:At(At({},h),{},{[f]:[m,p]})},{}),u,d=h=>{u||(u=h);var f=(h-u)/n,m=ou((x,g)=>Ef(...g,r(f)),c);if(i(At(At(At({},e),t),m)),f<1)l=o.setTimeout(d);else{var p=ou((x,g)=>Ef(...g,r(1)),c);i(At(At(At({},e),t),p))}};return()=>(l=o.setTimeout(d),()=>{var h;(h=l)===null||h===void 0||h()})}const oq=(e,t,r,n,s,i)=>{var o=tq(e,t);return r==null?()=>(s(At(At({},e),t)),()=>{}):r.isStepper===!0?iq(e,t,r,o,s,i):aq(e,t,r,n,o,s,i)};var Cf=1e-4,yI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bI=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),DN=(e,t)=>r=>{var n=yI(e,t);return bI(n,r)},lq=(e,t)=>r=>{var n=yI(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return bI(s,r)},cq=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var s=n.map(i=>parseFloat(i));return[s[0],s[1],s[2],s[3]]},uq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=cq(r[0]);if(s)return s}}return r.length===4?r:[0,0,1,1]},dq=(e,t,r,n)=>{var s=DN(e,r),i=DN(t,n),o=lq(e,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,h=d,f=0;f<8;++f){var m=s(h)-d,p=o(h);if(Math.abs(m-d)<Cf||p<Cf)return i(h);h=l(h-m/p)}return i(h)};return c.isStepper=!1,c},RN=function(){return dq(...uq(...arguments))},hq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,h=c+(u-d)*s/1e3,f=c*s/1e3+o;return Math.abs(f-l)<Cf&&Math.abs(h)<Cf?[l,0]:[f,h]};return i.isStepper=!0,i.dt=s,i},fq=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return RN(e);case"spring":return hq();default:if(e.split("(")[0]==="cubic-bezier")return RN(e)}return typeof e=="function"?e:null};function mq(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class pq{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function gq(){return mq(new pq)}var vq=y.createContext(gq);function xq(e,t){var r=y.useContext(vq);return y.useMemo(()=>t??r(e),[e,t,r])}var yq=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),tp={isSsr:yq()},bq={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},MN={t:0},Ig={t:1};function Ub(e){var t=sn(e,bq),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=r==="auto"?!tp.isSsr:r,h=xq(t.animationId,t.animationManager),[f,m]=y.useState(d?MN:Ig),p=y.useRef(null);return y.useEffect(()=>{d||m(Ig)},[d]),y.useEffect(()=>{if(!d||!n)return Iu;var x=oq(MN,Ig,fq(i),s,m,h.getTimeoutController()),g=()=>{p.current=x()};return h.start([c,o,g,s,l]),()=>{h.stop(),p.current&&p.current(),l()}},[d,n,s,i,o,c,l,h]),u(f.t)}function Bb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(eu(t)),n=y.useRef(e);return n.current!==e&&(r.current=eu(t),n.current=e),r.current}var wq=["radius"],_q=["radius"],LN,$N,FN,UN,BN,zN,WN,HN,qN,VN;function GN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(r),!0).forEach(function(n){jq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jq(e,t,r){return(t=Nq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nq(e){var t=Sq(e,"string");return typeof t=="symbol"?t:t+""}function Sq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kf(){return kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kf.apply(null,arguments)}function YN(e,t){if(e==null)return{};var r,n,s=Eq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Eq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Xn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var XN=(e,t,r,n,s)=>{var i=fi(r),o=fi(n),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,u=i>=0?1:-1,d=o>=0&&i>=0||o<0&&i<0?1:0,h;if(l>0&&s instanceof Array){for(var f=[0,0,0,0],m=0,p=4;m<p;m++)f[m]=s[m]>l?l:s[m];h=ht(LN||(LN=Xn(["M",",",""])),e,t+c*f[0]),f[0]>0&&(h+=ht($N||($N=Xn(["A ",",",",0,0,",",",",",""])),f[0],f[0],d,e+u*f[0],t)),h+=ht(FN||(FN=Xn(["L ",",",""])),e+r-u*f[1],t),f[1]>0&&(h+=ht(UN||(UN=Xn(["A ",",",",0,0,",`,
        `,",",""])),f[1],f[1],d,e+r,t+c*f[1])),h+=ht(BN||(BN=Xn(["L ",",",""])),e+r,t+n-c*f[2]),f[2]>0&&(h+=ht(zN||(zN=Xn(["A ",",",",0,0,",`,
        `,",",""])),f[2],f[2],d,e+r-u*f[2],t+n)),h+=ht(WN||(WN=Xn(["L ",",",""])),e+u*f[3],t+n),f[3]>0&&(h+=ht(HN||(HN=Xn(["A ",",",",0,0,",`,
        `,",",""])),f[3],f[3],d,e,t+n-c*f[3])),h+="Z"}else if(l>0&&s===+s&&s>0){var x=Math.min(l,s);h=ht(qN||(qN=Xn(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*x,x,x,d,e+u*x,t,e+r-u*x,t,x,x,d,e+r,t+c*x,e+r,t+n-c*x,x,x,d,e+r-u*x,t+n,e+u*x,t+n,x,x,d,e,t+n-c*x)}else h=ht(VN||(VN=Xn(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return h},QN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wI=e=>{var t=sn(e,QN),r=y.useRef(null),[n,s]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&s(P)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:p,isUpdateAnimationActive:x}=t,g=y.useRef(l),v=y.useRef(c),b=y.useRef(i),w=y.useRef(o),_=y.useMemo(()=>({x:i,y:o,width:l,height:c,radius:u}),[i,o,l,c,u]),j=Bb(_,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var N=Xe("recharts-rectangle",d);if(!x){var C=wn(t),{radius:I}=C,E=YN(C,wq);return y.createElement("path",kf({},E,{x:fi(i),y:fi(o),width:fi(l),height:fi(c),radius:typeof u=="number"?u:void 0,className:N,d:XN(i,o,l,c,u)}))}var D=g.current,O=v.current,k=b.current,S=w.current,T="0px ".concat(n===-1?1:n,"px"),R="".concat(n,"px 0px"),M=vI(["strokeDasharray"],f,typeof h=="string"?h:QN.animationEasing);return y.createElement(Ub,{animationId:j,key:j,canBegin:n>0,duration:f,easing:h,isActive:x,begin:m},P=>{var A=Zt(D,l,P),L=Zt(O,c,P),U=Zt(k,i,P),H=Zt(S,o,P);r.current&&(g.current=A,v.current=L,b.current=U,w.current=H);var X;p?P>0?X={transition:M,strokeDasharray:R}:X={strokeDasharray:T}:X={strokeDasharray:R};var fe=wn(t),{radius:ae}=fe,ue=YN(fe,_q);return y.createElement("path",kf({},ue,{radius:typeof u=="number"?u:void 0,className:N,d:XN(U,H,A,L,u),ref:r,style:KN(KN({},X),t.style)}))})};function JN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JN(Object(r),!0).forEach(function(n){Cq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cq(e,t,r){return(t=kq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kq(e){var t=Aq(e,"string");return typeof t=="symbol"?t:t+""}function Aq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Af=Math.PI/180,Pq=e=>e*180/Math.PI,tr=(e,t,r,n)=>({x:e+Math.cos(-Af*n)*r,y:t+Math.sin(-Af*n)*r}),Oq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Tq=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},Iq=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=Tq({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:Pq(c),angleInRadian:c}},Dq=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},Rq=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},Mq=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=Iq({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=Dq(t),d=i,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?ZN(ZN({},t),{},{radius:s,angle:Rq(d,t)}):null};function _I(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=tr(t,r,n,s),l=tr(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}var eS,tS,rS,nS,sS,iS,aS;function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q0.apply(null,arguments)}function aa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Lq=(e,t)=>{var r=Dr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Ld=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/Af,h=c?s:s+i*d,f=tr(t,r,u,h),m=tr(t,r,n,h),p=c?s-i*d:s,x=tr(t,r,u*Math.cos(d*Af),p);return{center:f,circleTangency:m,lineTangency:x,theta:d}},jI=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=Lq(i,o),c=i+l,u=tr(t,r,s,i),d=tr(t,r,s,c),h=ht(eS||(eS=aa(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,s,s,+(Math.abs(l)>180),+(i>c),d.x,d.y);if(n>0){var f=tr(t,r,n,i),m=tr(t,r,n,c);h+=ht(tS||(tS=aa(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,n,n,+(Math.abs(l)>180),+(i<=c),f.x,f.y)}else h+=ht(rS||(rS=aa(["L ",","," Z"])),t,r);return h},$q=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=Dr(u-c),{circleTangency:h,lineTangency:f,theta:m}=Ld({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:p,lineTangency:x,theta:g}=Ld({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-m-g;if(v<0)return o?ht(nS||(nS=aa(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),f.x,f.y,i,i,i*2,i,i,-i*2):jI({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var b=ht(sS||(sS=aa(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),f.x,f.y,i,i,+(d<0),h.x,h.y,s,s,+(v>180),+(d<0),p.x,p.y,i,i,+(d<0),x.x,x.y);if(n>0){var{circleTangency:w,lineTangency:_,theta:j}=Ld({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:C,theta:I}=Ld({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-j-I;if(E<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+=ht(iS||(iS=aa(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,i,i,+(d<0),N.x,N.y,n,n,+(E>180),+(d>0),w.x,w.y,i,i,+(d<0),_.x,_.y)}else b+=ht(aS||(aS=aa(["L",",","Z"])),t,r);return b},Fq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},NI=e=>{var t=sn(e,Fq),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(i<s||u===d)return null;var f=Xe("recharts-sector",h),m=i-s,p=qn(o,m,0,!0),x;return p>0&&Math.abs(u-d)<360?x=$q({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(p,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=jI({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),y.createElement("path",Q0({},wn(t),{className:f,d:x}))};function Uq(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(zO(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:o,angle:l}=t,c=tr(n,s,i,l),u=tr(n,s,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return _I(t)}}var SI={},EI={},CI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Eb;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(CI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CI;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(EI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cb,r=EI;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}e.range=n})(SI);var Bq=SI.range;const kI=Us(Bq);function Ei(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zb(e){let t,r,n;e.length!==2?(t=Ei,r=(l,c)=>Ei(e(l),c),n=(l,c)=>e(l)-c):(t=e===Ei||e===zq?e:Wq,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function Wq(){return 0}function AI(e){return e===null?NaN:+e}function*Hq(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const qq=zb(Ei),Uu=qq.right;zb(AI).center;class oS extends Map{constructor(t,r=Kq){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(lS(this,t))}has(t){return super.has(lS(this,t))}set(t,r){return super.set(Vq(this,t),r)}delete(t){return super.delete(Gq(this,t))}}function lS({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Vq({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Gq({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Kq(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yq(e=Ei){if(e===Ei)return PI;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function PI(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xq=Math.sqrt(50),Qq=Math.sqrt(10),Jq=Math.sqrt(2);function Pf(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Xq?10:i>=Qq?5:i>=Jq?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Pf(e,t,r*2):[l,c,u]}function J0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Pf(t,e,r):Pf(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function Z0(e,t,r){return t=+t,e=+e,r=+r,Pf(e,t,r)[2]}function ex(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Z0(t,e,r):Z0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function cS(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function uS(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function OI(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?PI:Yq(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*h/c+f)),p=Math.min(n,Math.floor(t+(c-u)*h/c+f));OI(e,t,m,p,s)}const i=e[t];let o=r,l=n;for(Hl(e,r,t),s(e[n],i)>0&&Hl(e,r,n);o<l;){for(Hl(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Hl(e,r,l):(++l,Hl(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Hl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Zq(e,t,r){if(e=Float64Array.from(Hq(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return uS(e);if(t>=1)return cS(e);var n,s=(n-1)*t,i=Math.floor(s),o=cS(OI(e,i).subarray(0,i+1)),l=uS(e.subarray(i+1));return o+(l-o)*(s-i)}}function eV(e,t,r=AI){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function tV(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Nn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tx=Symbol("implicit");function Wb(){var e=new oS,t=[],r=[],n=tx;function s(i){let o=e.get(i);if(o===void 0){if(n!==tx)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new oS;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Wb(t,r).unknown(n)},Nn.apply(s,arguments),s}function Hb(){var e=Wb().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,m=s<n,p=m?s:n,x=m?n:s;i=(x-p)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),p+=(x-p-i*(f-c))*d,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var g=tV(f).map(function(v){return p+i*v});return r(m?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return Hb(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},Nn.apply(h(),arguments)}function TI(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return TI(t())},e}function rV(){return TI(Hb.apply(null,arguments).paddingInner(1))}function qb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function II(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Bu(){}var lu=.7,Of=1/lu,Do="\\s*([+-]?\\d+)\\s*",cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nV=/^#([0-9a-f]{3,8})$/,sV=new RegExp(`^rgb\\(${Do},${Do},${Do}\\)$`),iV=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),aV=new RegExp(`^rgba\\(${Do},${Do},${Do},${cu}\\)$`),oV=new RegExp(`^rgba\\(${rs},${rs},${rs},${cu}\\)$`),lV=new RegExp(`^hsl\\(${cu},${rs},${rs}\\)$`),cV=new RegExp(`^hsla\\(${cu},${rs},${rs},${cu}\\)$`),dS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qb(Bu,uu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hS,formatHex:hS,formatHex8:uV,formatHsl:dV,formatRgb:fS,toString:fS});function hS(){return this.rgb().formatHex()}function uV(){return this.rgb().formatHex8()}function dV(){return DI(this).formatHsl()}function fS(){return this.rgb().formatRgb()}function uu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=nV.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?mS(t):r===3?new Rr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?$d(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?$d(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sV.exec(e))?new Rr(t[1],t[2],t[3],1):(t=iV.exec(e))?new Rr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aV.exec(e))?$d(t[1],t[2],t[3],t[4]):(t=oV.exec(e))?$d(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lV.exec(e))?vS(t[1],t[2]/100,t[3]/100,1):(t=cV.exec(e))?vS(t[1],t[2]/100,t[3]/100,t[4]):dS.hasOwnProperty(e)?mS(dS[e]):e==="transparent"?new Rr(NaN,NaN,NaN,0):null}function mS(e){return new Rr(e>>16&255,e>>8&255,e&255,1)}function $d(e,t,r,n){return n<=0&&(e=t=r=NaN),new Rr(e,t,r,n)}function hV(e){return e instanceof Bu||(e=uu(e)),e?(e=e.rgb(),new Rr(e.r,e.g,e.b,e.opacity)):new Rr}function rx(e,t,r,n){return arguments.length===1?hV(e):new Rr(e,t,r,n??1)}function Rr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}qb(Rr,rx,II(Bu,{brighter(e){return e=e==null?Of:Math.pow(Of,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lu:Math.pow(lu,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rr(fa(this.r),fa(this.g),fa(this.b),Tf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pS,formatHex:pS,formatHex8:fV,formatRgb:gS,toString:gS}));function pS(){return`#${oa(this.r)}${oa(this.g)}${oa(this.b)}`}function fV(){return`#${oa(this.r)}${oa(this.g)}${oa(this.b)}${oa((isNaN(this.opacity)?1:this.opacity)*255)}`}function gS(){const e=Tf(this.opacity);return`${e===1?"rgb(":"rgba("}${fa(this.r)}, ${fa(this.g)}, ${fa(this.b)}${e===1?")":`, ${e})`}`}function Tf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function oa(e){return e=fa(e),(e<16?"0":"")+e.toString(16)}function vS(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Mn(e,t,r,n)}function DI(e){if(e instanceof Mn)return new Mn(e.h,e.s,e.l,e.opacity);if(e instanceof Bu||(e=uu(e)),!e)return new Mn;if(e instanceof Mn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Mn(o,l,c,e.opacity)}function mV(e,t,r,n){return arguments.length===1?DI(e):new Mn(e,t,r,n??1)}function Mn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}qb(Mn,mV,II(Bu,{brighter(e){return e=e==null?Of:Math.pow(Of,e),new Mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lu:Math.pow(lu,e),new Mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Rr(Dg(e>=240?e-240:e+120,s,n),Dg(e,s,n),Dg(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Mn(xS(this.h),Fd(this.s),Fd(this.l),Tf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Tf(this.opacity);return`${e===1?"hsl(":"hsla("}${xS(this.h)}, ${Fd(this.s)*100}%, ${Fd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xS(e){return e=(e||0)%360,e<0?e+360:e}function Fd(e){return Math.max(0,Math.min(1,e||0))}function Dg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Vb=e=>()=>e;function pV(e,t){return function(r){return e+r*t}}function gV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function vV(e){return(e=+e)==1?RI:function(t,r){return r-t?gV(t,r,e):Vb(isNaN(t)?r:t)}}function RI(e,t){var r=t-e;return r?pV(e,r):Vb(isNaN(e)?t:e)}const yS=function e(t){var r=vV(t);function n(s,i){var o=r((s=rx(s)).r,(i=rx(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=RI(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function xV(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function yV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bV(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=bl(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function wV(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function If(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function _V(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=bl(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var nx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rg=new RegExp(nx.source,"g");function jV(e){return function(){return e}}function NV(e){return function(t){return e(t)+""}}function SV(e,t){var r=nx.lastIndex=Rg.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=nx.exec(e))&&(s=Rg.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:If(n,s)})),r=Rg.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?NV(c[0].x):jV(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function bl(e,t){var r=typeof t,n;return t==null||r==="boolean"?Vb(t):(r==="number"?If:r==="string"?(n=uu(t))?(t=n,yS):SV:t instanceof uu?yS:t instanceof Date?wV:yV(t)?xV:Array.isArray(t)?bV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_V:If)(e,t)}function Gb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function EV(e,t){t===void 0&&(t=e,e=bl);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function CV(e){return function(){return e}}function Df(e){return+e}var bS=[0,1];function br(e){return e}function sx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:CV(isNaN(t)?NaN:.5)}function kV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function AV(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=sx(s,n),i=r(o,i)):(n=sx(n,s),i=r(i,o)),function(l){return i(n(l))}}function PV(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=sx(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Uu(e,l,1,n)-1;return i[c](s[c](l))}}function zu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rp(){var e=bS,t=bS,r=bl,n,s,i,o=br,l,c,u;function d(){var f=Math.min(e.length,t.length);return o!==br&&(o=kV(e[0],e[f-1])),l=f>2?PV:AV,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(s((u||(u=l(t,e.map(n),If)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Df),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=Gb,d()},h.clamp=function(f){return arguments.length?(o=f?!0:br,d()):o!==br},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return n=f,s=m,d()}}function Kb(){return rp()(br,br)}function OV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function tl(e){return e=Rf(Math.abs(e)),e?e[1]:NaN}function TV(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function IV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var DV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function du(e){if(!(t=DV.exec(e)))throw new Error("invalid format: "+e);var t;return new Yb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}du.prototype=Yb.prototype;function Yb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function RV(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var MI;function MV(e,t){var r=Rf(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(MI=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Rf(e,Math.max(0,t+i-1))[0]}function wS(e,t){var r=Rf(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const _S={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:OV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wS(e*100,t),r:wS,s:MV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jS(e){return e}var NS=Array.prototype.map,SS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function LV(e){var t=e.grouping===void 0||e.thousands===void 0?jS:TV(NS.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?jS:IV(NS.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=du(h);var f=h.fill,m=h.align,p=h.sign,x=h.symbol,g=h.zero,v=h.width,b=h.comma,w=h.precision,_=h.trim,j=h.type;j==="n"?(b=!0,j="g"):_S[j]||(w===void 0&&(w=12),_=!0,j="g"),(g||f==="0"&&m==="=")&&(g=!0,f="0",m="=");var N=x==="$"?r:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",C=x==="$"?n:/[%p]/.test(j)?o:"",I=_S[j],E=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function D(O){var k=N,S=C,T,R,M;if(j==="c")S=I(O)+S,O="";else{O=+O;var P=O<0||1/O<0;if(O=isNaN(O)?c:I(Math.abs(O),w),_&&(O=RV(O)),P&&+O==0&&p!=="+"&&(P=!1),k=(P?p==="("?p:l:p==="-"||p==="("?"":p)+k,S=(j==="s"?SS[8+MI/3]:"")+S+(P&&p==="("?")":""),E){for(T=-1,R=O.length;++T<R;)if(M=O.charCodeAt(T),48>M||M>57){S=(M===46?s+O.slice(T+1):O.slice(T))+S,O=O.slice(0,T);break}}}b&&!g&&(O=t(O,1/0));var A=k.length+O.length+S.length,L=A<v?new Array(v-A+1).join(f):"";switch(b&&g&&(O=t(L+O,L.length?v-S.length:1/0),L=""),m){case"<":O=k+O+S+L;break;case"=":O=k+L+O+S;break;case"^":O=L.slice(0,A=L.length>>1)+k+O+S+L.slice(A);break;default:O=L+k+O+S;break}return i(O)}return D.toString=function(){return h+""},D}function d(h,f){var m=u((h=du(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(tl(f)/3)))*3,x=Math.pow(10,-p),g=SS[8+p/3];return function(v){return m(x*v)+g}}return{format:u,formatPrefix:d}}var Ud,Xb,LI;$V({thousands:",",grouping:[3],currency:["$",""]});function $V(e){return Ud=LV(e),Xb=Ud.format,LI=Ud.formatPrefix,Ud}function FV(e){return Math.max(0,-tl(Math.abs(e)))}function UV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tl(t)/3)))*3-tl(Math.abs(e)))}function BV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tl(t)-tl(e))+1}function $I(e,t,r,n){var s=ex(e,t,r),i;switch(n=du(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=UV(s,o))&&(n.precision=i),LI(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=BV(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=FV(s))&&(n.precision=i-(n.type==="%")*2);break}}return Xb(n)}function Li(e){var t=e.domain;return e.ticks=function(r){var n=t();return J0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return $I(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=Z0(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function FI(){var e=Kb();return e.copy=function(){return zu(e,FI())},Nn.apply(e,arguments),Li(e)}function UI(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Df),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return UI(e).unknown(t)},e=arguments.length?Array.from(e,Df):[0,1],Li(r)}function BI(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function ES(e){return Math.log(e)}function CS(e){return Math.exp(e)}function zV(e){return-Math.log(-e)}function WV(e){return-Math.exp(-e)}function HV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qV(e){return e===10?HV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function VV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kS(e){return(t,r)=>-e(-t,r)}function Qb(e){const t=e(ES,CS),r=t.domain;let n=10,s,i;function o(){return s=VV(n),i=qV(n),r()[0]<0?(s=kS(s),i=kS(i),e(zV,WV)):e(ES,CS),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),p,x;const g=l==null?10:+l;let v=[];if(!(n%1)&&m-f<g){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(p=1;p<n;++p)if(x=f<0?p/i(-f):p*i(f),!(x<u)){if(x>d)break;v.push(x)}}else for(;f<=m;++f)for(p=n-1;p>=1;--p)if(x=f>0?p/i(-f):p*i(f),!(x<u)){if(x>d)break;v.push(x)}v.length*2<g&&(v=J0(u,d,g))}else v=J0(f,m,Math.min(m-f,g)).map(i);return h?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=du(c)).precision==null&&(c.trim=!0),c=Xb(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let h=d/i(Math.round(s(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},t.nice=()=>r(BI(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function zI(){const e=Qb(rp()).domain([1,10]);return e.copy=()=>zu(e,zI()).base(e.base()),Nn.apply(e,arguments),e}function AS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Jb(e){var t=1,r=e(AS(t),PS(t));return r.constant=function(n){return arguments.length?e(AS(t=+n),PS(t)):t},Li(r)}function WI(){var e=Jb(rp());return e.copy=function(){return zu(e,WI()).constant(e.constant())},Nn.apply(e,arguments)}function OS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function GV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function KV(e){return e<0?-e*e:e*e}function Zb(e){var t=e(br,br),r=1;function n(){return r===1?e(br,br):r===.5?e(GV,KV):e(OS(r),OS(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Li(t)}function ew(){var e=Zb(rp());return e.copy=function(){return zu(e,ew()).exponent(e.exponent())},Nn.apply(e,arguments),e}function YV(){return ew.apply(null,arguments).exponent(.5)}function TS(e){return Math.sign(e)*e*e}function XV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function HI(){var e=Kb(),t=[0,1],r=!1,n;function s(i){var o=XV(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(TS(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Df)).map(TS)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return HI(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Nn.apply(s,arguments),Li(s)}function qI(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=eV(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Uu(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ei),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return qI().domain(e).range(t).unknown(n)},Nn.apply(i,arguments)}function VI(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Uu(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return VI().domain([e,t]).range(s).unknown(i)},Nn.apply(Li(o),arguments)}function GI(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Uu(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return GI().domain(e).range(t).unknown(r)},Nn.apply(s,arguments)}const Mg=new Date,Lg=new Date;function It(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>It(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Mg.setTime(+i),Lg.setTime(+o),e(Mg),e(Lg),Math.floor(r(Mg,Lg))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Mf=It(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Mf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?It(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Mf);Mf.range;const ys=1e3,pn=ys*60,bs=pn*60,Rs=bs*24,tw=Rs*7,IS=Rs*30,$g=Rs*365,la=It(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ys)},(e,t)=>(t-e)/ys,e=>e.getUTCSeconds());la.range;const rw=It(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ys)},(e,t)=>{e.setTime(+e+t*pn)},(e,t)=>(t-e)/pn,e=>e.getMinutes());rw.range;const nw=It(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pn)},(e,t)=>(t-e)/pn,e=>e.getUTCMinutes());nw.range;const sw=It(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ys-e.getMinutes()*pn)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getHours());sw.range;const iw=It(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getUTCHours());iw.range;const Wu=It(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pn)/Rs,e=>e.getDate()-1);Wu.range;const np=It(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rs,e=>e.getUTCDate()-1);np.range;const KI=It(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rs,e=>Math.floor(e/Rs));KI.range;function La(e){return It(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*pn)/tw)}const sp=La(0),Lf=La(1),QV=La(2),JV=La(3),rl=La(4),ZV=La(5),eG=La(6);sp.range;Lf.range;QV.range;JV.range;rl.range;ZV.range;eG.range;function $a(e){return It(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/tw)}const ip=$a(0),$f=$a(1),tG=$a(2),rG=$a(3),nl=$a(4),nG=$a(5),sG=$a(6);ip.range;$f.range;tG.range;rG.range;nl.range;nG.range;sG.range;const aw=It(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());aw.range;const ow=It(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ow.range;const Ms=It(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ms.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:It(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ms.range;const Ls=It(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ls.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:It(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ls.range;function YI(e,t,r,n,s,i){const o=[[la,1,ys],[la,5,5*ys],[la,15,15*ys],[la,30,30*ys],[i,1,pn],[i,5,5*pn],[i,15,15*pn],[i,30,30*pn],[s,1,bs],[s,3,3*bs],[s,6,6*bs],[s,12,12*bs],[n,1,Rs],[n,2,2*Rs],[r,1,tw],[t,1,IS],[t,3,3*IS],[e,1,$g]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),p=m?m.range(u,+d+1):[];return f?p.reverse():p}function c(u,d,h){const f=Math.abs(d-u)/h,m=zb(([,,g])=>g).right(o,f);if(m===o.length)return e.every(ex(u/$g,d/$g,h));if(m===0)return Mf.every(Math.max(ex(u,d,h),1));const[p,x]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return p.every(x)}return[l,c]}const[iG,aG]=YI(Ls,ow,ip,KI,iw,nw),[oG,lG]=YI(Ms,aw,sp,Wu,sw,rw);function Fg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ug(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ql(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function cG(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Vl(s),d=Gl(s),h=Vl(i),f=Gl(i),m=Vl(o),p=Gl(o),x=Vl(l),g=Gl(l),v=Vl(c),b=Gl(c),w={a:P,A,b:L,B:U,c:null,d:FS,e:FS,f:TG,g:zG,G:HG,H:AG,I:PG,j:OG,L:XI,m:IG,M:DG,p:H,q:X,Q:zS,s:WS,S:RG,u:MG,U:LG,V:$G,w:FG,W:UG,x:null,X:null,y:BG,Y:WG,Z:qG,"%":BS},_={a:fe,A:ae,b:ue,B:Ae,c:null,d:US,e:US,f:YG,g:iK,G:oK,H:VG,I:GG,j:KG,L:JI,m:XG,M:QG,p:_e,q:Ne,Q:zS,s:WS,S:JG,u:ZG,U:eK,V:tK,w:rK,W:nK,x:null,X:null,y:sK,Y:aK,Z:lK,"%":BS},j={a:D,A:O,b:k,B:S,c:T,d:LS,e:LS,f:SG,g:MS,G:RS,H:$S,I:$S,j:wG,L:NG,m:bG,M:_G,p:E,q:yG,Q:CG,s:kG,S:jG,u:mG,U:pG,V:gG,w:fG,W:vG,x:R,X:M,y:MS,Y:RS,Z:xG,"%":EG};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N($,te){return function(J){var z=[],vt=-1,je=0,ut=$.length,Fe,zr,B;for(J instanceof Date||(J=new Date(+J));++vt<ut;)$.charCodeAt(vt)===37&&(z.push($.slice(je,vt)),(zr=DS[Fe=$.charAt(++vt)])!=null?Fe=$.charAt(++vt):zr=Fe==="e"?" ":"0",(B=te[Fe])&&(Fe=B(J,zr)),z.push(Fe),je=vt+1);return z.push($.slice(je,vt)),z.join("")}}function C($,te){return function(J){var z=ql(1900,void 0,1),vt=I(z,$,J+="",0),je,ut;if(vt!=J.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(te&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(je=Ug(ql(z.y,0,1)),ut=je.getUTCDay(),je=ut>4||ut===0?$f.ceil(je):$f(je),je=np.offset(je,(z.V-1)*7),z.y=je.getUTCFullYear(),z.m=je.getUTCMonth(),z.d=je.getUTCDate()+(z.w+6)%7):(je=Fg(ql(z.y,0,1)),ut=je.getDay(),je=ut>4||ut===0?Lf.ceil(je):Lf(je),je=Wu.offset(je,(z.V-1)*7),z.y=je.getFullYear(),z.m=je.getMonth(),z.d=je.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),ut="Z"in z?Ug(ql(z.y,0,1)).getUTCDay():Fg(ql(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(ut+5)%7:z.w+z.U*7-(ut+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Ug(z)):Fg(z)}}function I($,te,J,z){for(var vt=0,je=te.length,ut=J.length,Fe,zr;vt<je;){if(z>=ut)return-1;if(Fe=te.charCodeAt(vt++),Fe===37){if(Fe=te.charAt(vt++),zr=j[Fe in DS?te.charAt(vt++):Fe],!zr||(z=zr($,J,z))<0)return-1}else if(Fe!=J.charCodeAt(z++))return-1}return z}function E($,te,J){var z=u.exec(te.slice(J));return z?($.p=d.get(z[0].toLowerCase()),J+z[0].length):-1}function D($,te,J){var z=m.exec(te.slice(J));return z?($.w=p.get(z[0].toLowerCase()),J+z[0].length):-1}function O($,te,J){var z=h.exec(te.slice(J));return z?($.w=f.get(z[0].toLowerCase()),J+z[0].length):-1}function k($,te,J){var z=v.exec(te.slice(J));return z?($.m=b.get(z[0].toLowerCase()),J+z[0].length):-1}function S($,te,J){var z=x.exec(te.slice(J));return z?($.m=g.get(z[0].toLowerCase()),J+z[0].length):-1}function T($,te,J){return I($,t,te,J)}function R($,te,J){return I($,r,te,J)}function M($,te,J){return I($,n,te,J)}function P($){return o[$.getDay()]}function A($){return i[$.getDay()]}function L($){return c[$.getMonth()]}function U($){return l[$.getMonth()]}function H($){return s[+($.getHours()>=12)]}function X($){return 1+~~($.getMonth()/3)}function fe($){return o[$.getUTCDay()]}function ae($){return i[$.getUTCDay()]}function ue($){return c[$.getUTCMonth()]}function Ae($){return l[$.getUTCMonth()]}function _e($){return s[+($.getUTCHours()>=12)]}function Ne($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var te=N($+="",w);return te.toString=function(){return $},te},parse:function($){var te=C($+="",!1);return te.toString=function(){return $},te},utcFormat:function($){var te=N($+="",_);return te.toString=function(){return $},te},utcParse:function($){var te=C($+="",!0);return te.toString=function(){return $},te}}}var DS={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,uG=/^%/,dG=/[\\^$*+?|[\]().{}]/g;function ke(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function hG(e){return e.replace(dG,"\\$&")}function Vl(e){return new RegExp("^(?:"+e.map(hG).join("|")+")","i")}function Gl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function fG(e,t,r){var n=Kt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function mG(e,t,r){var n=Kt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function pG(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function gG(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function vG(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function RS(e,t,r){var n=Kt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function MS(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function xG(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function yG(e,t,r){var n=Kt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function bG(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function LS(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function wG(e,t,r){var n=Kt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function $S(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function _G(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function jG(e,t,r){var n=Kt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function NG(e,t,r){var n=Kt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function SG(e,t,r){var n=Kt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function EG(e,t,r){var n=uG.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function CG(e,t,r){var n=Kt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function kG(e,t,r){var n=Kt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function FS(e,t){return ke(e.getDate(),t,2)}function AG(e,t){return ke(e.getHours(),t,2)}function PG(e,t){return ke(e.getHours()%12||12,t,2)}function OG(e,t){return ke(1+Wu.count(Ms(e),e),t,3)}function XI(e,t){return ke(e.getMilliseconds(),t,3)}function TG(e,t){return XI(e,t)+"000"}function IG(e,t){return ke(e.getMonth()+1,t,2)}function DG(e,t){return ke(e.getMinutes(),t,2)}function RG(e,t){return ke(e.getSeconds(),t,2)}function MG(e){var t=e.getDay();return t===0?7:t}function LG(e,t){return ke(sp.count(Ms(e)-1,e),t,2)}function QI(e){var t=e.getDay();return t>=4||t===0?rl(e):rl.ceil(e)}function $G(e,t){return e=QI(e),ke(rl.count(Ms(e),e)+(Ms(e).getDay()===4),t,2)}function FG(e){return e.getDay()}function UG(e,t){return ke(Lf.count(Ms(e)-1,e),t,2)}function BG(e,t){return ke(e.getFullYear()%100,t,2)}function zG(e,t){return e=QI(e),ke(e.getFullYear()%100,t,2)}function WG(e,t){return ke(e.getFullYear()%1e4,t,4)}function HG(e,t){var r=e.getDay();return e=r>=4||r===0?rl(e):rl.ceil(e),ke(e.getFullYear()%1e4,t,4)}function qG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ke(t/60|0,"0",2)+ke(t%60,"0",2)}function US(e,t){return ke(e.getUTCDate(),t,2)}function VG(e,t){return ke(e.getUTCHours(),t,2)}function GG(e,t){return ke(e.getUTCHours()%12||12,t,2)}function KG(e,t){return ke(1+np.count(Ls(e),e),t,3)}function JI(e,t){return ke(e.getUTCMilliseconds(),t,3)}function YG(e,t){return JI(e,t)+"000"}function XG(e,t){return ke(e.getUTCMonth()+1,t,2)}function QG(e,t){return ke(e.getUTCMinutes(),t,2)}function JG(e,t){return ke(e.getUTCSeconds(),t,2)}function ZG(e){var t=e.getUTCDay();return t===0?7:t}function eK(e,t){return ke(ip.count(Ls(e)-1,e),t,2)}function ZI(e){var t=e.getUTCDay();return t>=4||t===0?nl(e):nl.ceil(e)}function tK(e,t){return e=ZI(e),ke(nl.count(Ls(e),e)+(Ls(e).getUTCDay()===4),t,2)}function rK(e){return e.getUTCDay()}function nK(e,t){return ke($f.count(Ls(e)-1,e),t,2)}function sK(e,t){return ke(e.getUTCFullYear()%100,t,2)}function iK(e,t){return e=ZI(e),ke(e.getUTCFullYear()%100,t,2)}function aK(e,t){return ke(e.getUTCFullYear()%1e4,t,4)}function oK(e,t){var r=e.getUTCDay();return e=r>=4||r===0?nl(e):nl.ceil(e),ke(e.getUTCFullYear()%1e4,t,4)}function lK(){return"+0000"}function BS(){return"%"}function zS(e){return+e}function WS(e){return Math.floor(+e/1e3)}var eo,e4,t4;cK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cK(e){return eo=cG(e),e4=eo.format,eo.parse,t4=eo.utcFormat,eo.utcParse,eo}function uK(e){return new Date(e)}function dK(e){return e instanceof Date?+e:+new Date(+e)}function lw(e,t,r,n,s,i,o,l,c,u){var d=Kb(),h=d.invert,f=d.domain,m=u(".%L"),p=u(":%S"),x=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?m:l(N)<N?p:o(N)<N?x:i(N)<N?g:n(N)<N?s(N)<N?v:b:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(h(N))},d.domain=function(N){return arguments.length?f(Array.from(N,dK)):f().map(uK)},d.ticks=function(N){var C=f();return e(C[0],C[C.length-1],N??10)},d.tickFormat=function(N,C){return C==null?j:u(C)},d.nice=function(N){var C=f();return(!N||typeof N.range!="function")&&(N=t(C[0],C[C.length-1],N??10)),N?f(BI(C,N)):d},d.copy=function(){return zu(d,lw(e,t,r,n,s,i,o,l,c,u))},d}function hK(){return Nn.apply(lw(oG,lG,Ms,aw,sp,Wu,sw,rw,la,e4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fK(){return Nn.apply(lw(iG,aG,Ls,ow,ip,np,iw,nw,la,t4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ap(){var e=0,t=1,r,n,s,i,o=br,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,p;return arguments.length?([m,p]=f,o=h(m,p),u):[o(0),o(1)]}}return u.range=d(bl),u.rangeRound=d(Gb),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),u}}function $i(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function r4(){var e=Li(ap()(br));return e.copy=function(){return $i(e,r4())},qs.apply(e,arguments)}function n4(){var e=Qb(ap()).domain([1,10]);return e.copy=function(){return $i(e,n4()).base(e.base())},qs.apply(e,arguments)}function s4(){var e=Jb(ap());return e.copy=function(){return $i(e,s4()).constant(e.constant())},qs.apply(e,arguments)}function cw(){var e=Zb(ap());return e.copy=function(){return $i(e,cw()).exponent(e.exponent())},qs.apply(e,arguments)}function mK(){return cw.apply(null,arguments).exponent(.5)}function i4(){var e=[],t=br;function r(n){if(n!=null&&!isNaN(n=+n))return t((Uu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ei),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Zq(e,i/n))},r.copy=function(){return i4(t).domain(e)},qs.apply(r,arguments)}function op(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=br,d,h=!1,f;function m(x){return isNaN(x=+x)?f:(x=.5+((x=+d(x))-i)*(n*x<n*i?l:c),u(h?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(h=!!x,m):h},m.interpolator=function(x){return arguments.length?(u=x,m):u};function p(x){return function(g){var v,b,w;return arguments.length?([v,b,w]=g,u=EV(x,[v,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=p(bl),m.rangeRound=p(Gb),m.unknown=function(x){return arguments.length?(f=x,m):f},function(x){return d=x,s=x(e),i=x(t),o=x(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m}}function a4(){var e=Li(op()(br));return e.copy=function(){return $i(e,a4())},qs.apply(e,arguments)}function o4(){var e=Qb(op()).domain([.1,1,10]);return e.copy=function(){return $i(e,o4()).base(e.base())},qs.apply(e,arguments)}function l4(){var e=Jb(op());return e.copy=function(){return $i(e,l4()).constant(e.constant())},qs.apply(e,arguments)}function uw(){var e=Zb(op());return e.copy=function(){return $i(e,uw()).exponent(e.exponent())},qs.apply(e,arguments)}function pK(){return uw.apply(null,arguments).exponent(.5)}const tc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Hb,scaleDiverging:a4,scaleDivergingLog:o4,scaleDivergingPow:uw,scaleDivergingSqrt:pK,scaleDivergingSymlog:l4,scaleIdentity:UI,scaleImplicit:tx,scaleLinear:FI,scaleLog:zI,scaleOrdinal:Wb,scalePoint:rV,scalePow:ew,scaleQuantile:qI,scaleQuantize:VI,scaleRadial:HI,scaleSequential:r4,scaleSequentialLog:n4,scaleSequentialPow:cw,scaleSequentialQuantile:i4,scaleSequentialSqrt:mK,scaleSequentialSymlog:s4,scaleSqrt:YV,scaleSymlog:WI,scaleThreshold:GI,scaleTime:hK,scaleUtc:fK,tickFormat:$I},Symbol.toStringTag,{value:"Module"}));var Vs=e=>e.chartData,c4=F([Vs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),u4=(e,t,r,n)=>n?c4(e):Vs(e),gK=(e,t,r)=>r?c4(e):Vs(e);function Ti(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(ct(t)&&ct(r))return!0}return!1}function HS(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function d4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(ct(r))s=r;else if(typeof r=="function")return;if(ct(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(Ti(o))return o}}function vK(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ti(n))return HS(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(ne(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&dN.test(s)){var c=dN.exec(s);if(c==null||c[1]==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(ne(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&hN.test(i)){var d=hN.exec(i);if(d==null||d[1]==null||t==null)l=void 0;else{var h=+d[1];l=t[1]+h}}else l=t==null?void 0:t[1];var f=[o,l];if(Ti(f))return t==null?f:HS(f,t,r)}}}var wl=1e9,xK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hw,nt=!0,jn="[DecimalError] ",ma=jn+"Invalid argument: ",dw=jn+"Exponent out of range: ",_l=Math.floor,Xi=Math.pow,yK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yr,Ut=1e7,Ke=7,h4=9007199254740991,Ff=_l(h4/Ke),ee={};ee.absoluteValue=ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ee.comparedTo=ee.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};ee.decimalPlaces=ee.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ke;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ee.dividedBy=ee.div=function(e){return js(this,new this.constructor(e))};ee.dividedToIntegerBy=ee.idiv=function(e){var t=this,r=t.constructor;return Le(js(t,new r(e),0,1),r.precision)};ee.equals=ee.eq=function(e){return!this.cmp(e)};ee.exponent=function(){return Et(this)};ee.greaterThan=ee.gt=function(e){return this.cmp(e)>0};ee.greaterThanOrEqualTo=ee.gte=function(e){return this.cmp(e)>=0};ee.isInteger=ee.isint=function(){return this.e>this.d.length-2};ee.isNegative=ee.isneg=function(){return this.s<0};ee.isPositive=ee.ispos=function(){return this.s>0};ee.isZero=function(){return this.s===0};ee.lessThan=ee.lt=function(e){return this.cmp(e)<0};ee.lessThanOrEqualTo=ee.lte=function(e){return this.cmp(e)<1};ee.logarithm=ee.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Yr))throw Error(jn+"NaN");if(r.s<1)throw Error(jn+(r.s?"NaN":"-Infinity"));return r.eq(Yr)?new n(0):(nt=!1,t=js(hu(r,i),hu(e,i),i),nt=!0,Le(t,s))};ee.minus=ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?p4(t,e):f4(t,(e.s=-e.s,e))};ee.modulo=ee.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(jn+"NaN");return r.s?(nt=!1,t=js(r,e,0,1).times(e),nt=!0,r.minus(t)):Le(new n(r),s)};ee.naturalExponential=ee.exp=function(){return m4(this)};ee.naturalLogarithm=ee.ln=function(){return hu(this)};ee.negated=ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ee.plus=ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?f4(t,e):p4(t,(e.s=-e.s,e))};ee.precision=ee.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ma+e);if(t=Et(s)+1,n=s.d.length-1,r=n*Ke+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ee.squareRoot=ee.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(jn+"NaN")}for(e=Et(l),nt=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Zn(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=_l((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(js(l,i,o+2)).times(.5),Zn(i.d).slice(0,o)===(t=Zn(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Le(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return nt=!0,Le(n,r)};ee.times=ee.mul=function(e){var t,r,n,s,i,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,c=f.length,u=m.length,c<u&&(i=f,f=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+m[n]*f[s-n-1]+t,i[s--]=l%Ut|0,t=l/Ut|0;i[s]=(i[s]+t)%Ut|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,nt?Le(e,h.precision):e};ee.toDecimalPlaces=ee.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(as(e,0,wl),t===void 0?t=n.rounding:as(t,0,8),Le(r,e+Et(r)+1,t))};ee.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Ca(n,!0):(as(e,0,wl),t===void 0?t=s.rounding:as(t,0,8),n=Le(new s(n),e+1,t),r=Ca(n,!0,e+1)),r};ee.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Ca(s):(as(e,0,wl),t===void 0?t=i.rounding:as(t,0,8),n=Le(new i(s),e+Et(s)+1,t),r=Ca(n.abs(),!1,e+Et(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};ee.toInteger=ee.toint=function(){var e=this,t=e.constructor;return Le(new t(e),Et(e)+1,t.rounding)};ee.toNumber=function(){return+this};ee.toPower=ee.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Yr);if(l=new c(l),!l.s){if(e.s<1)throw Error(jn+"Infinity");return l}if(l.eq(Yr))return l;if(n=c.precision,e.eq(Yr))return Le(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=h4){for(s=new c(Yr),t=Math.ceil(n/Ke+4),nt=!1;r%2&&(s=s.times(l),VS(s.d,t)),r=_l(r/2),r!==0;)l=l.times(l),VS(l.d,t);return nt=!0,e.s<0?new c(Yr).div(s):Le(s,n)}}else if(i<0)throw Error(jn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,nt=!1,s=e.times(hu(l,n+u)),nt=!0,s=m4(s),s.s=i,s};ee.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Et(s),n=Ca(s,r<=i.toExpNeg||r>=i.toExpPos)):(as(e,1,wl),t===void 0?t=i.rounding:as(t,0,8),s=Le(new i(s),e,t),r=Et(s),n=Ca(s,e<=r||r<=i.toExpNeg,e)),n};ee.toSignificantDigits=ee.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(as(e,1,wl),t===void 0?t=n.rounding:as(t,0,8)),Le(new n(r),e,t)};ee.toString=ee.valueOf=ee.val=ee.toJSON=ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Et(e),r=e.constructor;return Ca(e,t<=r.toExpNeg||t>=r.toExpPos)};function f4(e,t){var r,n,s,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),nt?Le(t,h):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(h/Ke),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Ut|0,c[i]%=Ut;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,nt?Le(t,h):t}function as(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ma+e)}function Zn(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Ke-n.length,r&&(i+=si(r)),i+=n;o=e[t],n=o+"",r=Ke-n.length,r&&(i+=si(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var js=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Ut|0,o=i/Ut|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Ut+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,h,f,m,p,x,g,v,b,w,_,j,N,C,I,E=n.constructor,D=n.s==s.s?1:-1,O=n.d,k=s.d;if(!n.s)return new E(n);if(!s.s)throw Error(jn+"Division by zero");for(c=n.e-s.e,C=k.length,j=O.length,m=new E(D),p=m.d=[],u=0;k[u]==(O[u]||0);)++u;if(k[u]>(O[u]||0)&&--c,i==null?b=i=E.precision:o?b=i+(Et(n)-Et(s))+1:b=i,b<0)return new E(0);if(b=b/Ke+2|0,u=0,C==1)for(d=0,k=k[0],b++;(u<j||d)&&b--;u++)w=d*Ut+(O[u]||0),p[u]=w/k|0,d=w%k|0;else{for(d=Ut/(k[0]+1)|0,d>1&&(k=e(k,d),O=e(O,d),C=k.length,j=O.length),_=C,x=O.slice(0,C),g=x.length;g<C;)x[g++]=0;I=k.slice(),I.unshift(0),N=k[0],k[1]>=Ut/2&&++N;do d=0,l=t(k,x,C,g),l<0?(v=x[0],C!=g&&(v=v*Ut+(x[1]||0)),d=v/N|0,d>1?(d>=Ut&&(d=Ut-1),h=e(k,d),f=h.length,g=x.length,l=t(h,x,f,g),l==1&&(d--,r(h,C<f?I:k,f))):(d==0&&(l=d=1),h=k.slice()),f=h.length,f<g&&h.unshift(0),r(x,h,g),l==-1&&(g=x.length,l=t(k,x,C,g),l<1&&(d++,r(x,C<g?I:k,g))),g=x.length):l===0&&(d++,x=[0]),p[u++]=d,l&&x[0]?x[g++]=O[_]||0:(x=[O[_]],g=1);while((_++<j||x[0]!==void 0)&&b--)}return p[0]||p.shift(),m.e=c,Le(m,o?i+Et(m)+1:i)}}();function m4(e,t){var r,n,s,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(Et(e)>16)throw Error(dw+Et(e));if(!e.s)return new d(Yr);for(nt=!1,l=h,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Xi(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Yr),d.precision=l;;){if(s=Le(s.times(e),l),r=r.times(++c),o=i.plus(js(s,r,l)),Zn(o.d).slice(0,l)===Zn(i.d).slice(0,l)){for(;u--;)i=Le(i.times(i),l);return d.precision=h,t==null?(nt=!0,Le(i,h)):i}i=o}}function Et(e){for(var t=e.e*Ke,r=e.d[0];r>=10;r/=10)t++;return t}function Bg(e,t,r){if(t>e.LN10.sd())throw nt=!0,r&&(e.precision=r),Error(jn+"LN10 precision limit exceeded");return Le(new e(e.LN10),t)}function si(e){for(var t="";e--;)t+="0";return t}function hu(e,t){var r,n,s,i,o,l,c,u,d,h=1,f=10,m=e,p=m.d,x=m.constructor,g=x.precision;if(m.s<1)throw Error(jn+(m.s?"NaN":"-Infinity"));if(m.eq(Yr))return new x(0);if(t==null?(nt=!1,u=g):u=t,m.eq(10))return t==null&&(nt=!0),Bg(x,u);if(u+=f,x.precision=u,r=Zn(p),n=r.charAt(0),i=Et(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Zn(m.d),n=r.charAt(0),h++;i=Et(m),n>1?(m=new x("0."+r),i++):m=new x(n+"."+r.slice(1))}else return c=Bg(x,u+2,g).times(i+""),m=hu(new x(n+"."+r.slice(1)),u-f).plus(c),x.precision=g,t==null?(nt=!0,Le(m,g)):m;for(l=o=m=js(m.minus(Yr),m.plus(Yr),u),d=Le(m.times(m),u),s=3;;){if(o=Le(o.times(d),u),c=l.plus(js(o,new x(s),u)),Zn(c.d).slice(0,u)===Zn(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Bg(x,u+2,g).times(i+""))),l=js(l,new x(h),u),x.precision=g,t==null?(nt=!0,Le(l,g)):l;l=c,s+=2}}function qS(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=_l(r/Ke),e.d=[],n=(r+1)%Ke,r<0&&(n+=Ke),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Ke;n<s;)e.d.push(+t.slice(n,n+=Ke));t=t.slice(n),n=Ke-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),nt&&(e.e>Ff||e.e<-Ff))throw Error(dw+r)}else e.s=0,e.e=0,e.d=[0];return e}function Le(e,t,r){var n,s,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ke,s=t,u=h[d=0];else{if(d=Math.ceil((n+1)/Ke),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;n%=Ke,s=n-Ke+o}if(r!==void 0&&(i=Xi(10,o-s-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/Xi(10,o-s):0:h[d-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=Et(e),h.length=1,t=t-i-1,h[0]=Xi(10,(Ke-t%Ke)%Ke),e.e=_l(-t/Ke)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=d,i=1,d--):(h.length=d+1,i=Xi(10,Ke-n),h[d]=s>0?(u/Xi(10,o-s)%Xi(10,s)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==Ut&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=Ut)break;h[d--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(nt&&(e.e>Ff||e.e<-Ff))throw Error(dw+Et(e));return e}function p4(e,t){var r,n,s,i,o,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),nt?Le(t,m):t;if(c=e.d,h=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),s=Math.max(Math.ceil(m/Ke),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=Ut-1;--c[i],c[s]+=Ut}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,nt?Le(t,m):t):new f(0)}function Ca(e,t,r){var n,s=Et(e),i=Zn(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+si(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+si(-s-1)+i,r&&(n=r-o)>0&&(i+=si(n))):s>=o?(i+=si(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+si(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=si(n))),e.s<0?"-"+i:i}function VS(e,t){if(e.length>t)return e.length=t,!0}function g4(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ma+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return qS(o,i.toString())}else if(typeof i!="string")throw Error(ma+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,yK.test(i))qS(o,i);else throw Error(ma+i)}if(s.prototype=ee,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=g4,s.config=s.set=bK,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function bK(e){if(!e||typeof e!="object")throw Error(jn+"Object expected");var t,r,n,s=["precision",1,wl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(_l(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(ma+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ma+r+": "+n);return this}var hw=g4(xK);Yr=new hw(1);const Oe=hw;var wK=e=>e,v4={},x4=e=>e===v4,GS=e=>function t(){return arguments.length===0||arguments.length===1&&x4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},y4=(e,t)=>e===1?t:GS(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==v4).length;return i>=e?t(...n):y4(e-i,GS(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>x4(d)?l.shift():d);return t(...u,...l)}))}),_K=e=>y4(e.length,e),ix=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},jK=_K((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),NK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return wK;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function b4(e){var t;return e===0?t=1:t=Math.floor(new Oe(e).abs().log(10).toNumber())+1,t}function w4(e,t,r){for(var n=new Oe(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var _4=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},j4=(e,t,r)=>{if(e.lte(0))return new Oe(0);var n=b4(e.toNumber()),s=new Oe(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Oe(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new Oe(c.toNumber()):new Oe(Math.ceil(c.toNumber()))},SK=(e,t,r)=>{var n=new Oe(1),s=new Oe(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Oe(10).pow(b4(e)-1),s=new Oe(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Oe(Math.floor(e)))}else e===0?s=new Oe(Math.floor((t-1)/2)):r||(s=new Oe(Math.floor(e)));var o=Math.floor((t-1)/2),l=NK(jK(c=>s.add(new Oe(c-o).mul(n)).toNumber()),ix);return l(0,t)},N4=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Oe(0),tickMin:new Oe(0),tickMax:new Oe(0)};var o=j4(new Oe(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new Oe(0):(l=new Oe(t).add(r).div(2),l=l.sub(new Oe(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new Oe(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?N4(t,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Oe(c).mul(o)),tickMax:l.add(new Oe(u).mul(o))})},EK=function(t){var[r,n]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),[l,c]=_4([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...ix(0,s-1).map(()=>1/0)]:[...ix(0,s-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return SK(l,s,i);var{step:d,tickMin:h,tickMax:f}=N4(l,c,o,i,0),m=w4(h,f.add(new Oe(.1).mul(d)),d);return r>n?m.reverse():m},CK=function(t,r){var[n,s]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=_4([n,s]);if(o===-1/0||l===1/0)return[n,s];if(o===l)return[o];var c=Math.max(r,2),u=j4(new Oe(l).sub(o).div(c-1),i,0),d=[...w4(new Oe(o),new Oe(l),u),l];return i===!1&&(d=d.map(h=>Math.round(h))),n>s?d.reverse():d},S4=e=>e.rootProps.maxBarSize,kK=e=>e.rootProps.barGap,E4=e=>e.rootProps.barCategoryGap,AK=e=>e.rootProps.barSize,lp=e=>e.rootProps.stackOffset,C4=e=>e.rootProps.reverseStackOrder,fw=e=>e.options.chartName,mw=e=>e.rootProps.syncId,k4=e=>e.rootProps.syncMethod,pw=e=>e.options.eventEmitter,wr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ms={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Vr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},cp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},PK={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ms.angleAxisId,includeHidden:!1,name:void 0,reversed:ms.reversed,scale:ms.scale,tick:ms.tick,tickCount:void 0,ticks:void 0,type:ms.type,unit:void 0},OK={allowDataOverflow:Vr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Vr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vr.scale,tick:Vr.tick,tickCount:Vr.tickCount,ticks:void 0,type:Vr.type,unit:void 0},TK={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ms.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ms.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ms.scale,tick:ms.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},IK={allowDataOverflow:Vr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Vr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vr.scale,tick:Vr.tick,tickCount:Vr.tickCount,ticks:void 0,type:"category",unit:void 0},gw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?TK:PK,vw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?IK:OK,up=e=>e.polarOptions,xw=F([Ws,Hs,Gt],Oq),A4=F([up,xw],(e,t)=>{if(e!=null)return qn(e.innerRadius,t,0)}),P4=F([up,xw],(e,t)=>{if(e!=null)return qn(e.outerRadius,t,t*.8)}),DK=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},O4=F([up],DK);F([gw,O4],cp);var T4=F([xw,A4,P4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});F([vw,T4],cp);var I4=F([Ie,up,A4,P4,Ws,Hs],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:qn(o,s,s/2),cy:qn(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Dt=(e,t)=>t,dp=(e,t,r)=>r;function yw(e){return e==null?void 0:e.id}function D4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,o=new Map;return e.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=yw(l);u.forEach((h,f)=>{var m=i==null||s?f:String(sr(h,i,null)),p=sr(h,l.dataKey,0),x;o.has(m)?x=o.get(m):x={},Object.assign(x,{[d]:p}),o.set(m,x)})}}),Array.from(o.values())}function hp(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var fp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function mp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function RK(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Rt=e=>{var t=Ie(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},jl=e=>e.tooltip.settings.axisId;function KS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KS(Object(r),!0).forEach(function(n){MK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MK(e,t,r){return(t=LK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LK(e){var t=$K(e,"string");return typeof t=="symbol"?t:t+""}function $K(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ax=[0,"auto"],Lt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},R4=(e,t)=>e.cartesianAxis.xAxis[t],Gs=(e,t)=>{var r=R4(e,t);return r??Lt},$t={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ax,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Lu},M4=(e,t)=>e.cartesianAxis.yAxis[t],Ks=(e,t)=>{var r=M4(e,t);return r??$t},FK={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??FK},Ar=(e,t,r)=>{switch(t){case"xAxis":return Gs(e,r);case"yAxis":return Ks(e,r);case"zAxis":return bw(e,r);case"angleAxis":return gw(e,r);case"radiusAxis":return vw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},UK=(e,t,r)=>{switch(t){case"xAxis":return Gs(e,r);case"yAxis":return Ks(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Hu=(e,t,r)=>{switch(t){case"xAxis":return Gs(e,r);case"yAxis":return Ks(e,r);case"angleAxis":return gw(e,r);case"radiusAxis":return vw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},L4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function $4(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var ww=e=>e.graphicalItems.cartesianItems,BK=F([Dt,dp],$4),F4=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),qu=F([ww,Ar,BK],F4,{memoizeOptions:{resultEqualityCheck:mp}}),U4=F([qu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(hp)),B4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),zK=F([qu],B4),z4=e=>e.map(t=>t.data).filter(Boolean).flat(1),WK=F([qu],z4,{memoizeOptions:{resultEqualityCheck:mp}}),W4=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},_w=F([WK,u4],W4),H4=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:sr(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:sr(s,n)}))):e.map(n=>({value:n})),pp=F([_w,Ar,qu],H4);function q4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ch(e){if(ss(e)||e instanceof Date){var t=Number(e);if(ct(t))return t}}function YS(e){if(Array.isArray(e)){var t=[ch(e[0]),ch(e[1])];return Ti(t)?t:void 0}var r=ch(e);if(r!=null)return[r,r]}function $s(e){return e.map(ch).filter(g9)}function HK(e,t,r){return!r||typeof t!="number"||Hn(t)?[]:r.length?$s(r.flatMap(n=>{var s=sr(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!ct(i)||!ct(o)))return[t-i,t+o]})):[]}var Mt=e=>{var t=Rt(e),r=jl(e);return Hu(e,t,r)},Vu=F([Mt],e=>e==null?void 0:e.dataKey),qK=F([U4,u4,Mt],D4),V4=(e,t,r,n)=>{var s={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},s);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(yw);return[l,{stackedData:EW(e,d,r),graphicalItems:u}]}))},ox=F([qK,U4,lp,C4],V4),G4=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=OW(e,s,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},VK=F([Ar],e=>e.allowDataOverflow),jw=e=>{var t;if(e==null||!("domain"in e))return ax;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=$s(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ax},K4=F([Ar],jw),Y4=F([K4,VK],d4),GK=F([ox,Vs,Dt,Y4],G4,{memoizeOptions:{resultEqualityCheck:fp}}),Nw=e=>e.errorBars,KK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>q4(r,n)),Bf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},X4=(e,t,r,n,s)=>{var i,o;if(r.length>0&&e.forEach(l=>{r.forEach(c=>{var u,d,h=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>q4(s,v)),f=sr(l,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),m=HK(l,f,h);if(m.length>=2){var p=Math.min(...m),x=Math.max(...m);(i==null||p<i)&&(i=p),(o==null||x>o)&&(o=x)}var g=YS(f);g!=null&&(i=i==null?g[0]:Math.min(i,g[0]),o=o==null?g[1]:Math.max(o,g[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=YS(sr(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),ct(i)&&ct(o))return[i,o]},YK=F([_w,Ar,zK,Nw,Dt],X4,{memoizeOptions:{resultEqualityCheck:fp}});function XK(e){var{value:t}=e;if(ss(t)||t instanceof Date)return t}var QK=(e,t,r)=>{var n=e.map(XK).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&FO(n))?kI(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Q4=e=>e.referenceElements.dots,Nl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),JK=F([Q4,Dt,dp],Nl),J4=e=>e.referenceElements.areas,ZK=F([J4,Dt,dp],Nl),Z4=e=>e.referenceElements.lines,eY=F([Z4,Dt,dp],Nl),eD=(e,t)=>{if(e!=null){var r=$s(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},tY=F(JK,Dt,eD),tD=(e,t)=>{if(e!=null){var r=$s(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},rY=F([ZK,Dt],tD);function nY(e){var t;if(e.x!=null)return $s([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:$s(r)}function sY(e){var t;if(e.y!=null)return $s([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:$s(r)}var rD=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?nY(n):sY(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},iY=F([eY,Dt],rD),aY=F(tY,iY,rY,(e,t,r)=>Bf(e,r,t)),nD=(e,t,r,n,s,i,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?Bf(n,i,s):Bf(i,s);return vK(t,u,e.allowDataOverflow)},oY=F([Ar,K4,Y4,GK,YK,aY,Ie,Dt],nD,{memoizeOptions:{resultEqualityCheck:fp}}),lY=[0,1],sD=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=Ma(t,i);if(u&&l==null){var d;return kI(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?QK(n,e,u):s==="expand"?lY:o}},Sw=F([Ar,Ie,_w,pp,lp,Dt,oY],sD),iD=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Tu(i));return l in tc?l:"point"}}},Gu=F([Ar,Ie,L4,fw,Dt],iD);function cY(e){if(e!=null){if(e in tc)return tc[e]();var t="scale".concat(Tu(e));if(t in tc)return tc[t]()}}function Ew(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=cY(t);if(s!=null){var i=s.domain(r).range(n);return wW(i),i}}}var aD=(e,t,r)=>{var n=jw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ti(e))return EK(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ti(e))return CK(e,t.tickCount,t.allowDecimals)}},Cw=F([Sw,Hu,Gu],aD),oD=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ti(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},uY=F([Ar,Sw,Cw,Dt],oD),dY=F(pp,Ar,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from($s(e.map(h=>h.value))).sort((h,f)=>h-f),s=n[0],i=n[n.length-1];if(s==null||i==null)return 1/0;var o=i-s;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),lD=F(dY,Ie,E4,Gt,(e,t,r,n,s)=>s,(e,t,r,n,s)=>{if(!ct(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=qn(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),hY=(e,t,r)=>{var n=Gs(e,t);return n==null||typeof n.padding!="string"?0:lD(e,"xAxis",t,r,n.padding)},fY=(e,t,r)=>{var n=Ks(e,t);return n==null||typeof n.padding!="string"?0:lD(e,"yAxis",t,r,n.padding)},mY=F(Gs,hY,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),pY=F(Ks,fY,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),gY=F([Gt,mY,Ym,Km,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),vY=F([Gt,Ie,pY,Ym,Km,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ku=(e,t,r,n)=>{var s;switch(t){case"xAxis":return gY(e,r,n);case"yAxis":return vY(e,r,n);case"zAxis":return(s=bw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return O4(e);case"radiusAxis":return T4(e,r);default:return}},cD=F([Ar,Ku],cp),gp=F([Ar,Gu,uY,cD],Ew);F([qu,Nw,Dt],KK);function uD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var vp=(e,t)=>t,xp=(e,t,r)=>r,xY=F(Vm,vp,xp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(uD)),yY=F(Gm,vp,xp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(uD)),dD=(e,t)=>({width:e.width,height:t.height}),bY=(e,t)=>{var r=typeof t.width=="number"?t.width:Lu;return{width:r,height:e.height}},hD=F(Gt,Gs,dD),wY=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},_Y=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},jY=F(Hs,Gt,xY,vp,xp,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=dD(t,l);o==null&&(o=wY(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),NY=F(Ws,Gt,yY,vp,xp,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=bY(t,l);o==null&&(o=_Y(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),SY=(e,t)=>{var r=Gs(e,t);if(r!=null)return jY(e,r.orientation,r.mirror)},EY=F([Gt,Gs,SY,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),CY=(e,t)=>{var r=Ks(e,t);if(r!=null)return NY(e,r.orientation,r.mirror)},kY=F([Gt,Ks,CY,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),fD=F(Gt,Ks,(e,t)=>{var r=typeof t.width=="number"?t.width:Lu;return{width:r,height:e.height}}),XS=(e,t,r)=>{switch(t){case"xAxis":return hD(e,r).width;case"yAxis":return fD(e,r).height;default:return}},mD=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=Ma(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&FO(c))return c}},kw=F([Ie,pp,Ar,Dt],mD),pD=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=Ma(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},Aw=F([Ie,pp,Hu,Dt],pD),QS=F([Ie,UK,Gu,gp,kw,Aw,Ku,Cw,Dt],(e,t,r,n,s,i,o,l,c)=>{if(t!=null){var u=Ma(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}}),AY=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var u=Ma(e,c),{type:d,ticks:h,tickCount:f}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/m:0;p=c==="angleAxis"&&i!=null&&i.length>=2?Dr(i[0]-i[1])*2*p:p;var x=h||s;if(x){var g=x.map((v,b)=>{var w=o?o.indexOf(v):v;return{index:b,coordinate:n(w)+p,value:v,offset:p}});return g.filter(v=>ct(v.coordinate))}return u&&l?l.map((v,b)=>({coordinate:n(v)+p,value:v,index:b,offset:p})).filter(v=>ct(v.coordinate)):n.ticks?n.ticks(f).map(v=>({coordinate:n(v)+p,value:v,offset:p})):n.domain().map((v,b)=>({coordinate:n(v)+p,value:o?o[v]:v,index:b,offset:p}))}},gD=F([Ie,Hu,Gu,gp,Cw,Ku,kw,Aw,Dt],AY),PY=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Ma(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Dr(n[0]-n[1])*2*u:u,l&&i?i.map((d,h)=>({coordinate:r(d)+u,value:d,index:h,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,h)=>({coordinate:r(d)+u,value:s?s[d]:d,index:h,offset:u}))}},sl=F([Ie,Hu,gp,Ku,kw,Aw,Dt],PY),il=F(Ar,gp,(e,t)=>{if(!(e==null||t==null))return Uf(Uf({},e),{},{scale:t})}),OY=F([Ar,Gu,Sw,cD],Ew);F((e,t,r)=>bw(e,r),OY,(e,t)=>{if(!(e==null||t==null))return Uf(Uf({},e),{},{scale:t})});var TY=F([Ie,Vm,Gm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),vD=e=>e.options.defaultTooltipEventType,xD=e=>e.options.validateTooltipEventTypes;function yD(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Pw(e,t){var r=vD(e),n=xD(e);return yD(t,r,n)}function IY(e){return ie(t=>Pw(t,e))}var bD=(e,t)=>{var r,n=Number(t);if(!(Hn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},DY=e=>e.tooltip.settings,ci={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},RY={itemInteraction:{click:ci,hover:ci},axisInteraction:{click:ci,hover:ci},keyboardInteraction:ci,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},wD=Ur({name:"tooltip",initialState:RY,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:tt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,s=zn(e).tooltipItemPayloads.indexOf(r);s>-1&&(e.tooltipItemPayloads[s]=n)},prepare:tt()},removeTooltipEntrySettings:{reducer(e,t){var r=zn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:tt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:MY,replaceTooltipEntrySettings:LY,removeTooltipEntrySettings:$Y,setTooltipSettingsState:FY,setActiveMouseOverItemIndex:_D,mouseLeaveItem:UY,mouseLeaveChart:jD,setActiveClickItemIndex:BY,setMouseOverAxisIndex:ND,setMouseClickAxisIndex:zY,setSyncInteraction:lx,setKeyboardInteraction:cx}=wD.actions,WY=wD.reducer;function JS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JS(Object(r),!0).forEach(function(n){HY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HY(e,t,r){return(t=qY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GY(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function KY(e){return e.index!=null}var SD=(e,t,r,n)=>{if(t==null)return ci;var s=GY(e,t,r);if(s==null)return ci;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(KY(s)){if(i)return Bd(Bd({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Bd(Bd({},ci),{},{coordinate:s.coordinate})};function YY(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function XY(e,t){var r=YY(e),n=t[0],s=t[1];if(r===void 0)return!1;var i=Math.min(n,s),o=Math.max(n,s);return r>=i&&r<=o}function QY(e,t,r){if(r==null||t==null)return!0;var n=sr(e,t);return n==null||!Ti(r)?!0:XY(n,r)}var Ow=(e,t,r,n)=>{var s=e==null?void 0:e.index;if(s==null)return null;var i=Number(s);if(!ct(i))return s;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),u=t[c];return u==null||QY(u,r,n)?String(c):null},ED=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},CD=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;if(r==="hover"?s=e.itemInteraction.hover.graphicalItemId:s=e.itemInteraction.click.graphicalItemId,s==null&&n!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===s})},Yu=e=>e.options.tooltipPayloadSearcher,Sl=e=>e.tooltip;function ZS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function eE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(r),!0).forEach(function(n){JY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JY(e,t,r){return(t=ZY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZY(e){var t=eX(e,"string");return typeof t=="symbol"?t:t+""}function eX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tX(e,t){return e??t}var kD=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,h=[];return e.reduce((f,m)=>{var p,{dataDefinedOnItem:x,settings:g}=m,v=tX(x,l),b=Array.isArray(v)?VT(v,u,d):v,w=(p=g==null?void 0:g.dataKey)!==null&&p!==void 0?p:n,_=g==null?void 0:g.nameKey,j;if(n&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?j=p9(b,n,s):j=i(b,t,c,_),Array.isArray(j))j.forEach(C=>{var I=eE(eE({},g),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});f.push(fN({tooltipEntrySettings:I,dataKey:C.dataKey,payload:C.payload,value:sr(C.payload,C.dataKey),name:C.name}))});else{var N;f.push(fN({tooltipEntrySettings:g,dataKey:w,payload:j,value:sr(j,w),name:(N=sr(j,_))!==null&&N!==void 0?N:g==null?void 0:g.name}))}return f},h)}},Tw=F([Mt,Ie,L4,fw,Rt],iD),rX=F([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),nX=F([Rt,jl],$4),El=F([rX,Mt,nX],F4,{memoizeOptions:{resultEqualityCheck:mp}}),sX=F([El],e=>e.filter(hp)),iX=F([El],z4,{memoizeOptions:{resultEqualityCheck:mp}}),Cl=F([iX,Vs],W4),aX=F([sX,Vs,Mt],D4),Iw=F([Cl,Mt,El],H4),AD=F([Mt],jw),oX=F([Mt],e=>e.allowDataOverflow),PD=F([AD,oX],d4),lX=F([El],e=>e.filter(hp)),cX=F([aX,lX,lp,C4],V4),uX=F([cX,Vs,Rt,PD],G4),dX=F([El],B4),hX=F([Cl,Mt,dX,Nw,Rt],X4,{memoizeOptions:{resultEqualityCheck:fp}}),fX=F([Q4,Rt,jl],Nl),mX=F([fX,Rt],eD),pX=F([J4,Rt,jl],Nl),gX=F([pX,Rt],tD),vX=F([Z4,Rt,jl],Nl),xX=F([vX,Rt],rD),yX=F([mX,xX,gX],Bf),bX=F([Mt,AD,PD,uX,hX,yX,Ie,Rt],nD),Xu=F([Mt,Ie,Cl,Iw,lp,Rt,bX],sD),wX=F([Xu,Mt,Tw],aD),_X=F([Mt,Xu,wX,Rt],oD),OD=e=>{var t=Rt(e),r=jl(e),n=!1;return Ku(e,t,r,n)},TD=F([Mt,OD],cp),ID=F([Mt,Tw,_X,TD],Ew),jX=F([Ie,Iw,Mt,Rt],mD),NX=F([Ie,Iw,Mt,Rt],pD),SX=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,u=Ma(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return h=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Dr(s[0]-s[1])*2*h:h,u&&o?o.map((f,m)=>({coordinate:n(f)+h,value:f,index:m,offset:h})):n.domain().map((f,m)=>({coordinate:n(f)+h,value:i?i[f]:f,index:m,offset:h}))}}},Ys=F([Ie,Mt,Tw,ID,OD,jX,NX,Rt],SX),Dw=F([vD,xD,DY],(e,t,r)=>yD(r.shared,e,t)),DD=e=>e.tooltip.settings.trigger,Rw=e=>e.tooltip.settings.defaultIndex,Qu=F([Sl,Dw,DD,Rw],SD),al=F([Qu,Cl,Vu,Xu],Ow),RD=F([Ys,al],bD),MD=F([Qu],e=>{if(e)return e.dataKey});F([Qu],e=>{if(e)return e.graphicalItemId});var LD=F([Sl,Dw,DD,Rw],CD),EX=F([Ws,Hs,Ie,Gt,Ys,Rw,LD,Yu],ED),CX=F([Qu,EX],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),kX=F([Qu],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),AX=F([LD,al,Vs,Vu,RD,Yu,Dw],kD);F([AX],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function tE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tE(Object(r),!0).forEach(function(n){PX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PX(e,t,r){return(t=OX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OX(e){var t=TX(e,"string");return typeof t=="symbol"?t:t+""}function TX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IX=()=>ie(Mt),DX=()=>{var e=IX(),t=ie(Ys),r=ie(ID);return bf(!e||!r?void 0:rE(rE({},e),{},{scale:r}),t)};function nE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nE(Object(r),!0).forEach(function(n){RX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RX(e,t,r){return(t=MX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MX(e){var t=LX(e,"string");return typeof t=="symbol"?t:t+""}function LX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $X=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},FX=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:o}=n;return to(to(to({},n),tr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return to(to(to({},n),tr(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function UX(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var $D=(e,t,r,n,s)=>{var i,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,h,f,m=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,p=(d=r[l])===null||d===void 0?void 0:d.coordinate,x=l>=o-1?(h=r[0])===null||h===void 0?void 0:h.coordinate:(f=r[l+1])===null||f===void 0?void 0:f.coordinate,g=void 0;if(!(m==null||p==null||x==null))if(Dr(p-m)!==Dr(x-p)){var v=[];if(Dr(x-p)===Dr(s[1]-s[0])){g=x;var b=p+s[1]-s[0];v[0]=Math.min(b,(b+m)/2),v[1]=Math.max(b,(b+m)/2)}else{g=m;var w=x+s[1]-s[0];v[0]=Math.min(p,(w+p)/2),v[1]=Math.max(p,(w+p)/2)}var _=[Math.min(p,(g+p)/2),Math.max(p,(g+p)/2)];if(e>_[0]&&e<=_[1]||e>=v[0]&&e<=v[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var N=Math.min(m,x),C=Math.max(m,x);if(e>(N+p)/2&&e<=(C+p)/2){var I;return(I=r[l])===null||I===void 0?void 0:I.index}}}else if(t)for(var E=0;E<o;E++){var D=t[E];if(D!=null){var O=t[E+1],k=t[E-1];if(E===0&&O!=null&&e<=(D.coordinate+O.coordinate)/2||E===o-1&&k!=null&&e>(D.coordinate+k.coordinate)/2||E>0&&E<o-1&&k!=null&&O!=null&&e>(D.coordinate+k.coordinate)/2&&e<=(D.coordinate+O.coordinate)/2)return D.index}}return-1},BX=()=>ie(fw),Mw=(e,t)=>t,FD=(e,t,r)=>r,Lw=(e,t,r,n)=>n,zX=F(Ys,e=>Lm(e,t=>t.coordinate)),$w=F([Sl,Mw,FD,Lw],SD),Fw=F([$w,Cl,Vu,Xu],Ow),WX=(e,t,r)=>{if(t!=null){var n=Sl(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},UD=F([Sl,Mw,FD,Lw],CD),zf=F([Ws,Hs,Ie,Gt,Ys,Lw,UD,Yu],ED),HX=F([$w,zf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),BD=F([Ys,Fw],bD),qX=F([UD,Fw,Vs,Vu,BD,Yu,Mw],kD),VX=F([$w,Fw],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),GX=(e,t,r,n,s,i,o)=>{if(!(!e||!r||!n||!s)&&UX(e,o)){var l=TW(e,t),c=$D(l,i,s,r,n),u=$X(t,s,c,e);return{activeIndex:String(c),activeCoordinate:u}}},KX=(e,t,r,n,s,i,o)=>{if(!(!e||!n||!s||!i||!r)){var l=Mq(e,r);if(l){var c=IW(l,t),u=$D(c,o,i,n,s),d=FX(t,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},YX=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?GX(e,t,n,s,i,o,l):KX(e,t,r,n,s,i,o)},XX=F(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),QX=F(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(wr)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:RK}});function sE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(r),!0).forEach(function(n){JX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JX(e,t,r){return(t=ZX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZX(e){var t=eQ(e,"string");return typeof t=="symbol"?t:t+""}function eQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tQ={},rQ={zIndexMap:Object.values(wr).reduce((e,t)=>iE(iE({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),tQ)},nQ=new Set(Object.values(wr));function sQ(e){return nQ.has(e)}var zD=Ur({name:"zIndex",initialState:rQ,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:tt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!sQ(r)&&delete e.zIndexMap[r])},prepare:tt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:s?void 0:n,panoramaElement:s?n:void 0}},prepare:tt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:tt()}}}),{registerZIndexPortal:iQ,unregisterZIndexPortal:aQ,registerZIndexPortalElement:oQ,unregisterZIndexPortalElement:lQ}=zD.actions,cQ=zD.reducer;function Xs(e){var{zIndex:t,children:r}=e,n=oH(),s=n&&t!==void 0&&t!==0,i=Br(),o=wt();y.useLayoutEffect(()=>s?(o(iQ({zIndex:t})),()=>{o(aQ({zIndex:t}))}):Iu,[o,t,s]);var l=ie(c=>XX(c,t,i));return s?l?py.createPortal(r,l):null:r}function ux(){return ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ux.apply(null,arguments)}function aE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(r),!0).forEach(function(n){uQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uQ(e,t,r){return(t=dQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dQ(e){var t=hQ(e,"string");return typeof t=="symbol"?t:t+""}function hQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fQ(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function mQ(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,h=r,f=n,m=s;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var p,x,g;if(d==="ScatterChart")p=h,x=YH,g=wr.cursorLine;else if(d==="BarChart")p=XH(l,h,i,o),x=wI,g=wr.cursorRectangle;else if(l==="radial"&&zO(h)){var{cx:v,cy:b,radius:w,startAngle:_,endAngle:j}=_I(h);p={cx:v,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},x=NI,g=wr.cursorLine}else p={points:Uq(l,h,i)},x=gI,g=wr.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,C=zd(zd(zd(zd({stroke:"#ccc",pointerEvents:"none"},i),p),ub(c)),{},{payload:f,payloadIndex:m,className:Xe("recharts-tooltip-cursor",N)});return y.createElement(Xs,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:g},y.createElement(fQ,{cursor:c,cursorComp:x,cursorProps:C}))}function pQ(e){var t=DX(),r=iI(),n=$u(),s=BX();return t==null||r==null||n==null||s==null?null:y.createElement(mQ,ux({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var WD=y.createContext(null),gQ=()=>y.useContext(WD),HD={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],m]:c._events[p].push(m):(c._events[p]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,p=new Array(m);f<m;f++)p[f]=h[f].fn;return p},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,p){var x=r?r+u:u;if(!this._events[x])return!1;var g=this._events[x],v=arguments.length,b,w;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,h),!0;case 4:return g.fn.call(g.context,d,h,f),!0;case 5:return g.fn.call(g.context,d,h,f,m),!0;case 6:return g.fn.call(g.context,d,h,f,m,p),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];g.fn.apply(g.context,b)}else{var _=g.length,j;for(w=0;w<_;w++)switch(g[w].once&&this.removeListener(u,g[w].fn,void 0,!0),v){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,d);break;case 3:g[w].fn.call(g[w].context,d,h);break;case 4:g[w].fn.call(g[w].context,d,h,f);break;default:if(!b)for(j=1,b=new Array(v-1);j<v;j++)b[j-1]=arguments[j];g[w].fn.apply(g[w].context,b)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var p=this._events[m];if(p.fn)p.fn===d&&(!f||p.once)&&(!h||p.context===h)&&o(this,m);else{for(var x=0,g=[],v=p.length;x<v;x++)(p[x].fn!==d||f&&!p[x].once||h&&p[x].context!==h)&&g.push(p[x]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(HD);var vQ=HD.exports;const xQ=Us(vQ);var fu=new xQ,dx="recharts.syncEvent.tooltip",oE="recharts.syncEvent.brush";function yQ(e,t){if(t){var r=Number.parseInt(t,10);if(!Hn(r))return e==null?void 0:e[r]}}var bQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},qD=Ur({name:"options",initialState:bQ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),wQ=qD.reducer,{createEventEmitter:_Q}=qD.actions;function jQ(e){return e.tooltip.syncInteraction}var NQ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},VD=Ur({name:"chartData",initialState:NQ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:lE,setDataStartEndIndexes:SQ,setComputedData:Bse}=VD.actions,EQ=VD.reducer,CQ=["x","y"];function cE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cE(Object(r),!0).forEach(function(n){kQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kQ(e,t,r){return(t=AQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AQ(e){var t=PQ(e,"string");return typeof t=="symbol"?t:t+""}function PQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OQ(e,t){if(e==null)return{};var r,n,s=TQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function TQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IQ(){var e=ie(mw),t=ie(pw),r=wt(),n=ie(k4),s=ie(Ys),i=$u(),o=Xm(),l=ie(c=>c.rootProps.className);y.useEffect(()=>{if(e==null)return Iu;var c=(u,d,h)=>{if(t!==h&&e===u){if(n==="index"){var f;if(o&&d!==null&&d!==void 0&&(f=d.payload)!==null&&f!==void 0&&f.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:p,y:x}=m,g=OQ(m,CQ),{x:v,y:b,width:w,height:_}=d.payload.sourceViewBox,j=ro(ro({},g),{},{x:o.x+(w?(p-v)/w:0)*o.width,y:o.y+(_?(x-b)/_:0)*o.height});r(ro(ro({},d),{},{payload:ro(ro({},d.payload),{},{coordinate:j})}))}else r(d);return}if(s!=null){var N;if(typeof n=="function"){var C={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},I=n(s,C);N=s[I]}else n==="value"&&(N=s.find(M=>String(M.value)===d.payload.label));var{coordinate:E}=d.payload;if(N==null||d.payload.active===!1||E==null||o==null){r(lx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:D,y:O}=E,k=Math.min(D,o.x+o.width),S=Math.min(O,o.y+o.height),T={x:i==="horizontal"?N.coordinate:k,y:i==="horizontal"?S:N.coordinate},R=lx({active:d.payload.active,coordinate:T,dataKey:d.payload.dataKey,index:String(N.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(R)}}};return fu.on(dx,c),()=>{fu.off(dx,c)}},[l,r,t,e,n,s,i,o])}function DQ(){var e=ie(mw),t=ie(pw),r=wt();y.useEffect(()=>{if(e==null)return Iu;var n=(s,i,o)=>{t!==o&&e===s&&r(SQ(i))};return fu.on(oE,n),()=>{fu.off(oE,n)}},[r,t,e])}function RQ(){var e=wt();y.useEffect(()=>{e(_Q())},[e]),IQ(),DQ()}function MQ(e,t,r,n,s,i){var o=ie(m=>WX(m,e,t)),l=ie(pw),c=ie(mw),u=ie(k4),d=ie(jQ),h=d==null?void 0:d.active,f=Xm();y.useEffect(()=>{if(!h&&c!=null&&l!=null){var m=lx({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:f,graphicalItemId:void 0});fu.emit(dx,c,m,l)}},[h,r,o,s,n,l,c,u,i,f])}function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(r),!0).forEach(function(n){LQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LQ(e,t,r){return(t=$Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Q(e){var t=FQ(e,"string");return typeof t=="symbol"?t:t+""}function FQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UQ(e){return e.dataKey}function BQ(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(kH,t)}var hE=[],zQ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function GD(e){var t,r,n=sn(e,zQ),{active:s,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:f,position:m,reverseDirection:p,useTranslate3d:x,wrapperStyle:g,cursor:v,shared:b,trigger:w,defaultIndex:_,portal:j,axisId:N}=n,C=wt(),I=typeof _=="number"?String(_):_;y.useEffect(()=>{C(FY({shared:b,trigger:w,axisId:N,active:s,defaultIndex:I}))},[C,b,w,N,s,I]);var E=Xm(),D=pI(),O=IY(b),{activeIndex:k,isActive:S}=(t=ie(_e=>VX(_e,O,w,I)))!==null&&t!==void 0?t:{},T=ie(_e=>qX(_e,O,w,I)),R=ie(_e=>BD(_e,O,w,I)),M=ie(_e=>HX(_e,O,w,I)),P=T,A=gQ(),L=(r=s??S)!==null&&r!==void 0?r:!1,[U,H]=gz([P,L]),X=O==="axis"?R:void 0;MQ(O,w,M,X,k,L);var fe=j??A;if(fe==null||E==null||O==null)return null;var ae=P??hE;L||(ae=hE),u&&ae.length&&(ae=D9(ae.filter(_e=>_e.value!=null&&(_e.hide!==!0||n.includeHidden)),f,UQ));var ue=ae.length>0,Ae=y.createElement(RH,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:d,active:L,coordinate:M,hasPayload:ue,offset:h,position:m,reverseDirection:p,useTranslate3d:x,viewBox:E,wrapperStyle:g,lastBoundingBox:U,innerRef:H,hasPortalFromProps:!!j},BQ(c,dE(dE({},n),{},{payload:ae,label:X,active:L,activeIndex:k,coordinate:M,accessibilityLayer:D})));return y.createElement(y.Fragment,null,py.createPortal(Ae,fe),L&&y.createElement(pQ,{cursor:v,tooltipEventType:O,coordinate:M,payload:ae,index:k}))}var yp=e=>null;yp.displayName="Cell";function WQ(e,t,r){return(t=HQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HQ(e){var t=qQ(e,"string");return typeof t=="symbol"?t:t+""}function qQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VQ{constructor(t){WQ(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function fE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(r),!0).forEach(function(n){KQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KQ(e,t,r){return(t=YQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YQ(e){var t=XQ(e,"string");return typeof t=="symbol"?t:t+""}function XQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QQ={cacheSize:2e3,enableCache:!0},KD=GQ({},QQ),mE=new VQ(KD.cacheSize),JQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},pE="recharts_measurement_span";function ZQ(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(l)}var gE=(e,t)=>{try{var r=document.getElementById(pE);r||(r=document.createElement("span"),r.setAttribute("id",pE),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,JQ,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||tp.isSsr)return{width:0,height:0};if(!KD.enableCache)return gE(t,r);var n=ZQ(t,r),s=mE.get(n);if(s)return s;var i=gE(t,r);return mE.set(n,i),i},YD;function eJ(e,t,r){return(t=tJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tJ(e){var t=rJ(e,"string");return typeof t=="symbol"?t:t+""}function rJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nJ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,iJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aJ=["cm","mm","pt","pc","in","Q","px"];function oJ(e){return aJ.includes(e)}var wo="NaN";function lJ(e,t){return e*iJ[t]}class Jt{static parse(t){var r,[,n,s]=(r=sJ.exec(t))!==null&&r!==void 0?r:[];return n==null?Jt.NaN:new Jt(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Hn(t)&&(this.unit=""),r!==""&&!nJ.test(r)&&(this.num=NaN,this.unit=""),oJ(r)&&(this.num=lJ(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Hn(this.num)}}YD=Jt;eJ(Jt,"NaN",new YD(NaN,""));function XD(e){if(e==null||e.includes(wo))return wo;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=vE.exec(t))!==null&&r!==void 0?r:[],o=Jt.parse(n??""),l=Jt.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return wo;t=t.replace(vE,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,h,f]=(u=xE.exec(t))!==null&&u!==void 0?u:[],m=Jt.parse(d??""),p=Jt.parse(f??""),x=h==="+"?m.add(p):m.subtract(p);if(x.isNaN())return wo;t=t.replace(xE,x.toString())}return t}var yE=/\(([^()]*)\)/;function cJ(e){for(var t=e,r;(r=yE.exec(t))!=null;){var[,n]=r;t=t.replace(yE,XD(n))}return t}function uJ(e){var t=e.replace(/\s+/g,"");return t=cJ(t),t=XD(t),t}function dJ(e){try{return uJ(e)}catch{return wo}}function zg(e){var t=dJ(e.slice(5,-1));return t===wo?"":t}var hJ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],fJ=["dx","dy","angle","className","breakAll"];function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hx.apply(null,arguments)}function bE(e,t){if(e==null)return{};var r,n,s=mJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QD=/[ \f\n\r\t\v\u2028\u2029]+/,JD=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Vt(t)||(r?s=t.toString().split(""):s=t.toString().split(QD));var i=s.map(l=>({word:l,width:bc(l,n).width})),o=r?0:bc("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function pJ(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var ZD=(e,t,r,n)=>e.reduce((s,i)=>{var{word:o,width:l}=i,c=s[s.length-1];if(c&&l!=null&&(t==null||n||c.width+l+r<Number(t)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};s.push(u)}return s},[]),eR=e=>e.reduce((t,r)=>t.width>r.width?t:r),gJ="",wE=(e,t,r,n,s,i,o,l)=>{var c=e.slice(0,t),u=JD({breakAll:r,style:n,children:c+gJ});if(!u)return[!1,[]];var d=ZD(u.wordsWithComputedWidth,i,o,l),h=d.length>s||eR(d).width>Number(i);return[h,d]},vJ=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=ne(i),d=String(o),h=ZD(t,n,r,s);if(!u||s)return h;var f=h.length>i||eR(h).width>Number(n);if(!f)return h;for(var m=0,p=d.length-1,x=0,g;m<=p&&x<=d.length-1;){var v=Math.floor((m+p)/2),b=v-1,[w,_]=wE(d,b,c,l,i,n,r,s),[j]=wE(d,v,c,l,i,n,r,s);if(!w&&!j&&(m=v+1),w&&j&&(p=v-1),!w&&j){g=_;break}x++}return g||h},_E=e=>{var t=Vt(e)?[]:e.toString().split(QD);return[{words:t,width:void 0}]},xJ=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!tp.isSsr){var l,c,u=JD({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return _E(n);return vJ({breakAll:i,children:n,maxLines:o,style:s},l,c,t,!!r)}return _E(n)},tR="#808080",yJ={angle:0,breakAll:!1,capHeight:"0.71em",fill:tR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Uw=y.forwardRef((e,t)=>{var r=sn(e,yJ),{x:n,y:s,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,h=bE(r,hJ),f=y.useMemo(()=>xJ({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:m,dy:p,angle:x,className:g,breakAll:v}=h,b=bE(h,fJ);if(!ss(n)||!ss(s)||f.length===0)return null;var w=Number(n)+(ne(m)?m:0),_=Number(s)+(ne(p)?p:0);if(!ct(w)||!ct(_))return null;var j;switch(d){case"start":j=zg("calc(".concat(o,")"));break;case"middle":j=zg("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:j=zg("calc(".concat(f.length-1," * -").concat(i,")"));break}var N=[];if(c){var C=f[0].width,{width:I}=h;N.push("scale(".concat(ne(I)&&ne(C)?I/C:1,")"))}return x&&N.push("rotate(".concat(x,", ").concat(w,", ").concat(_,")")),N.length&&(b.transform=N.join(" ")),y.createElement("text",hx({},wn(b),{ref:t,x:w,y:_,className:Xe("recharts-text",g),textAnchor:u,fill:l.includes("url")?tR:l}),f.map((E,D)=>{var O=E.words.join(v?"":" ");return y.createElement("tspan",{x:w,dy:D===0?j:i,key:"".concat(O,"-").concat(D)},O)}))});Uw.displayName="Text";var bJ=["labelRef"],wJ=["content"];function jE(e,t){if(e==null)return{};var r,n,s=_J(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _J(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function NE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(r),!0).forEach(function(n){jJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jJ(e,t,r){return(t=NJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NJ(e){var t=SJ(e,"string");return typeof t=="symbol"?t:t+""}function SJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ps(){return ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ps.apply(null,arguments)}var rR=y.createContext(null),EJ=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:o,children:l}=e,c=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:o}),[t,r,n,s,i,o]);return y.createElement(rR.Provider,{value:c},l)},nR=()=>{var e=y.useContext(rR),t=Xm();return e||sI(t)},CJ=y.createContext(null),kJ=()=>{var e=y.useContext(CJ),t=ie(I4);return e||t},AJ=e=>{var{value:t,formatter:r}=e,n=Vt(e.children)?t:e.children;return typeof r=="function"?r(n):n},Bw=e=>e!=null&&typeof e=="function",PJ=(e,t)=>{var r=Dr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},OJ=(e,t,r,n,s)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:f,clockWise:m}=s,p=(u+d)/2,x=PJ(h,f),g=x>=0?1:-1,v,b;switch(t){case"insideStart":v=h+g*i,b=m;break;case"insideEnd":v=f-g*i,b=!m;break;case"end":v=f+g*i,b=m;break;default:throw new Error("Unsupported position ".concat(t))}b=x<=0?b:!b;var w=tr(l,c,p,v),_=tr(l,c,p,v+(b?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(b?0:1,`,
    `).concat(_.x,",").concat(_.y),N=Vt(e.id)?eu("recharts-radial-line-"):e.id;return y.createElement("text",ps({},n,{dominantBaseline:"central",className:Xe("recharts-radial-bar-label",o)}),y.createElement("defs",null,y.createElement("path",{id:N,d:j})),y.createElement("textPath",{xlinkHref:"#".concat(N)},r))},TJ=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:h}=tr(n,s,o+t,u);return{x:d,y:h,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:m,y:p}=tr(n,s,f,u);return{x:m,y:p,textAnchor:"middle",verticalAnchor:"middle"}},fx=e=>"cx"in e&&ne(e.cx),IJ=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!fx(r)&&(i=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=t,h=o,f=o+(c-u)/2,m=(h+f)/2,p=(c+u)/2,x=h+c/2,g=d>=0?1:-1,v=g*n,b=g>0?"end":"start",w=g>0?"start":"end",_=c>=0?1:-1,j=_*n,N=_>0?"end":"start",C=_>0?"start":"end";if(s==="top"){var I={x:h+c/2,y:l-v,textAnchor:"middle",verticalAnchor:b};return xt(xt({},I),i?{height:Math.max(l-i.y,0),width:c}:{})}if(s==="bottom"){var E={x:f+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:w};return xt(xt({},E),i?{height:Math.max(i.y+i.height-(l+d),0),width:u}:{})}if(s==="left"){var D={x:m-j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"};return xt(xt({},D),i?{width:Math.max(D.x-i.x,0),height:d}:{})}if(s==="right"){var O={x:m+p+j,y:l+d/2,textAnchor:C,verticalAnchor:"middle"};return xt(xt({},O),i?{width:Math.max(i.x+i.width-O.x,0),height:d}:{})}var k=i?{width:p,height:d}:{};return s==="insideLeft"?xt({x:m+j,y:l+d/2,textAnchor:C,verticalAnchor:"middle"},k):s==="insideRight"?xt({x:m+p-j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"},k):s==="insideTop"?xt({x:h+c/2,y:l+v,textAnchor:"middle",verticalAnchor:w},k):s==="insideBottom"?xt({x:f+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:b},k):s==="insideTopLeft"?xt({x:h+j,y:l+v,textAnchor:C,verticalAnchor:w},k):s==="insideTopRight"?xt({x:h+c-j,y:l+v,textAnchor:N,verticalAnchor:w},k):s==="insideBottomLeft"?xt({x:f+j,y:l+d-v,textAnchor:C,verticalAnchor:b},k):s==="insideBottomRight"?xt({x:f+u-j,y:l+d-v,textAnchor:N,verticalAnchor:b},k):s&&typeof s=="object"&&(ne(s.x)||Is(s.x))&&(ne(s.y)||Is(s.y))?xt({x:o+qn(s.x,p),y:l+qn(s.y,d),textAnchor:"end",verticalAnchor:"end"},k):xt({x,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},k)},DJ={angle:0,offset:5,zIndex:wr.label,position:"middle",textBreakAll:!1};function ii(e){var t=sn(e,DJ),{viewBox:r,position:n,value:s,children:i,content:o,className:l="",textBreakAll:c,labelRef:u}=t,d=kJ(),h=nR(),f=n==="center"?h:d??h,m,p,x;if(r==null?m=f:fx(r)?m=r:m=sI(r),!m||Vt(s)&&Vt(i)&&!y.isValidElement(o)&&typeof o!="function")return null;var g=xt(xt({},t),{},{viewBox:m});if(y.isValidElement(o)){var{labelRef:v}=g,b=jE(g,bJ);return y.cloneElement(o,b)}if(typeof o=="function"){var{content:w}=g,_=jE(g,wJ);if(p=y.createElement(o,_),y.isValidElement(p))return p}else p=AJ(t);var j=wn(t);if(fx(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return OJ(t,n,p,j,m);x=TJ(m,t.offset,t.position)}else x=IJ(t,m);return y.createElement(Xs,{zIndex:t.zIndex},y.createElement(Uw,ps({ref:u,className:Xe("recharts-label",l)},j,x,{textAnchor:pJ(j.textAnchor)?j.textAnchor:x.textAnchor,breakAll:c}),p))}ii.displayName="Label";var RJ=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(ii,ps({key:"label-implicit"},n)):ss(e)?y.createElement(ii,ps({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===ii?y.cloneElement(e,xt({key:"label-implicit"},n)):y.createElement(ii,ps({key:"label-implicit",content:e},n)):Bw(e)?y.createElement(ii,ps({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(ii,ps({},e,{key:"label-implicit"},n)):null};function MJ(e){var{label:t,labelRef:r}=e,n=nR();return RJ(t,n,r)||null}var sR={},iR={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(iR);var aR={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(aR);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iR,r=aR,n=Rm;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(sR);var LJ=sR.last;const $J=Us(LJ);var FJ=["valueAccessor"],UJ=["dataKey","clockWise","id","textBreakAll","zIndex"];function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wf.apply(null,arguments)}function SE(e,t){if(e==null)return{};var r,n,s=BJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zJ=e=>Array.isArray(e.value)?$J(e.value):e.value,oR=y.createContext(void 0),WJ=oR.Provider,lR=y.createContext(void 0);lR.Provider;function HJ(){return y.useContext(oR)}function qJ(){return y.useContext(lR)}function uh(e){var{valueAccessor:t=zJ}=e,r=SE(e,FJ),{dataKey:n,clockWise:s,id:i,textBreakAll:o,zIndex:l}=r,c=SE(r,UJ),u=HJ(),d=qJ(),h=u||d;return!h||!h.length?null:y.createElement(Xs,{zIndex:l??wr.label},y.createElement(Ts,{className:"recharts-label-list"},h.map((f,m)=>{var p,x=Vt(n)?t(f,m):sr(f&&f.payload,n),g=Vt(i)?{}:{id:"".concat(i,"-").concat(m)};return y.createElement(ii,Wf({key:"label-".concat(m)},wn(f),c,g,{fill:(p=r.fill)!==null&&p!==void 0?p:f.fill,parentViewBox:f.parentViewBox,value:x,textBreakAll:o,viewBox:f.viewBox,index:m,zIndex:0}))})))}uh.displayName="LabelList";function VJ(e){var{label:t}=e;return t?t===!0?y.createElement(uh,{key:"labelList-implicit"}):y.isValidElement(t)||Bw(t)?y.createElement(uh,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(uh,Wf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var GJ={radiusAxis:{},angleAxis:{}},cR=Ur({name:"polarAxis",initialState:GJ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:zse,removeRadiusAxis:Wse,addAngleAxis:Hse,removeAngleAxis:qse}=cR.actions,KJ=cR.reducer,uR={exports:{}},$e={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw=Symbol.for("react.transitional.element"),Ww=Symbol.for("react.portal"),bp=Symbol.for("react.fragment"),wp=Symbol.for("react.strict_mode"),_p=Symbol.for("react.profiler"),jp=Symbol.for("react.consumer"),Np=Symbol.for("react.context"),Sp=Symbol.for("react.forward_ref"),Ep=Symbol.for("react.suspense"),Cp=Symbol.for("react.suspense_list"),kp=Symbol.for("react.memo"),Ap=Symbol.for("react.lazy"),YJ=Symbol.for("react.view_transition"),XJ=Symbol.for("react.client.reference");function Sn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zw:switch(e=e.type,e){case bp:case _p:case wp:case Ep:case Cp:case YJ:return e;default:switch(e=e&&e.$$typeof,e){case Np:case Sp:case Ap:case kp:return e;case jp:return e;default:return t}}case Ww:return t}}}$e.ContextConsumer=jp;$e.ContextProvider=Np;$e.Element=zw;$e.ForwardRef=Sp;$e.Fragment=bp;$e.Lazy=Ap;$e.Memo=kp;$e.Portal=Ww;$e.Profiler=_p;$e.StrictMode=wp;$e.Suspense=Ep;$e.SuspenseList=Cp;$e.isContextConsumer=function(e){return Sn(e)===jp};$e.isContextProvider=function(e){return Sn(e)===Np};$e.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zw};$e.isForwardRef=function(e){return Sn(e)===Sp};$e.isFragment=function(e){return Sn(e)===bp};$e.isLazy=function(e){return Sn(e)===Ap};$e.isMemo=function(e){return Sn(e)===kp};$e.isPortal=function(e){return Sn(e)===Ww};$e.isProfiler=function(e){return Sn(e)===_p};$e.isStrictMode=function(e){return Sn(e)===wp};$e.isSuspense=function(e){return Sn(e)===Ep};$e.isSuspenseList=function(e){return Sn(e)===Cp};$e.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===bp||e===_p||e===wp||e===Ep||e===Cp||typeof e=="object"&&e!==null&&(e.$$typeof===Ap||e.$$typeof===kp||e.$$typeof===Np||e.$$typeof===jp||e.$$typeof===Sp||e.$$typeof===XJ||e.getModuleId!==void 0)};$e.typeOf=Sn;uR.exports=$e;var QJ=uR.exports,EE=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",CE=null,Wg=null,dR=e=>{if(e===CE&&Array.isArray(Wg))return Wg;var t=[];return y.Children.forEach(e,r=>{Vt(r)||(QJ.isFragment(r)?t=t.concat(dR(r.props.children)):t.push(r))}),Wg=t,CE=e,t};function JJ(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>EE(s)):n=[EE(t)],dR(e).forEach(s=>{var i=Xo(s,"type.displayName")||Xo(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var hR={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(hR);var ZJ=hR.isPlainObject;const eZ=Us(ZJ);var kE,AE,PE,OE,TE;function IE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(r),!0).forEach(function(n){tZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tZ(e,t,r){return(t=rZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rZ(e){var t=nZ(e,"string");return typeof t=="symbol"?t:t+""}function nZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hf.apply(null,arguments)}function Kl(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var RE=(e,t,r,n,s)=>{var i=r-n,o;return o=ht(kE||(kE=Kl(["M ",",",""])),e,t),o+=ht(AE||(AE=Kl(["L ",",",""])),e+r,t),o+=ht(PE||(PE=Kl(["L ",",",""])),e+r-i/2,t+s),o+=ht(OE||(OE=Kl(["L ",",",""])),e+r-i/2-n,t+s),o+=ht(TE||(TE=Kl(["L ",","," Z"])),e,t),o},sZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},iZ=e=>{var t=sn(e,sZ),{x:r,y:n,upperWidth:s,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=t,f=y.useRef(null),[m,p]=y.useState(-1),x=y.useRef(s),g=y.useRef(i),v=y.useRef(o),b=y.useRef(r),w=y.useRef(n),_=Bb(e,"trapezoid-");if(y.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var T=f.current.getTotalLength();T&&p(T)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||o!==+o||s===0&&i===0||o===0)return null;var j=Xe("recharts-trapezoid",l);if(!h)return y.createElement("g",null,y.createElement("path",Hf({},wn(t),{className:j,d:RE(r,n,s,i,o)})));var N=x.current,C=g.current,I=v.current,E=b.current,D=w.current,O="0px ".concat(m===-1?1:m,"px"),k="".concat(m,"px 0px"),S=vI(["strokeDasharray"],u,c);return y.createElement(Ub,{animationId:_,key:_,canBegin:m>0,duration:u,easing:c,isActive:h,begin:d},T=>{var R=Zt(N,s,T),M=Zt(C,i,T),P=Zt(I,o,T),A=Zt(E,r,T),L=Zt(D,n,T);f.current&&(x.current=R,g.current=M,v.current=P,b.current=A,w.current=L);var U=T>0?{transition:S,strokeDasharray:k}:{strokeDasharray:O};return y.createElement("path",Hf({},wn(t),{className:j,d:RE(A,L,R,M,P),ref:f,style:DE(DE({},U),t.style)}))})},aZ=["option","shapeType","activeClassName"];function oZ(e,t){if(e==null)return{};var r,n,s=lZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ME(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(r),!0).forEach(function(n){cZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ME(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cZ(e,t,r){return(t=uZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uZ(e){var t=dZ(e,"string");return typeof t=="symbol"?t:t+""}function dZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hZ(e,t){return qf(qf({},t),e)}function fZ(e,t){return e==="symbols"}function LE(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(wI,r);case"trapezoid":return y.createElement(iZ,r);case"sector":return y.createElement(NI,r);case"symbols":if(fZ(t))return y.createElement(BO,r);break;case"curve":return y.createElement(gI,r);default:return null}}function mZ(e){return y.isValidElement(e)?e.props:e}function pZ(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,s=oZ(e,aZ),i;if(y.isValidElement(t))i=y.cloneElement(t,qf(qf({},s),mZ(t)));else if(typeof t=="function")i=t(s,s.index);else if(eZ(t)&&typeof t!="boolean"){var o=hZ(t,s);i=y.createElement(LE,{shapeType:r,elementProps:o})}else{var l=s;i=y.createElement(LE,{shapeType:r,elementProps:l})}return s.isActive?y.createElement(Ts,{className:n},i):i}var fR=(e,t,r)=>{var n=wt();return(s,i)=>o=>{e==null||e(s,i,o),n(_D({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}},mR=e=>{var t=wt();return(r,n)=>s=>{e==null||e(r,n,s),t(UY())}},pR=(e,t,r)=>{var n=wt();return(s,i)=>o=>{e==null||e(s,i,o),n(BY({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}};function gZ(e){var{tooltipEntrySettings:t}=e,r=wt(),n=Br(),s=y.useRef(null);return y.useLayoutEffect(()=>{n||(s.current===null?r(MY(t)):s.current!==t&&r(LY({prev:s.current,next:t})),s.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{s.current&&(r($Y(s.current)),s.current=null)},[r]),null}function vZ(e){var{legendPayload:t}=e,r=wt(),n=Br(),s=y.useRef(null);return y.useLayoutEffect(()=>{n||(s.current===null?r(bH(t)):s.current!==t&&r(wH({prev:s.current,next:t})),s.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{s.current&&(r(_H(s.current)),s.current=null)},[r]),null}var Hg,xZ=()=>{var[e]=y.useState(()=>eu("uid-"));return e},yZ=(Hg=d3.useId)!==null&&Hg!==void 0?Hg:xZ;function bZ(e,t){var r=yZ();return t||(e?"".concat(e,"-").concat(r):r)}var wZ=y.createContext(void 0),_Z=e=>{var{id:t,type:r,children:n}=e,s=bZ("recharts-".concat(r),t);return y.createElement(wZ.Provider,{value:s},n(s))},jZ={cartesianItems:[],polarItems:[]},gR=Ur({name:"graphicalItems",initialState:jZ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:tt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=zn(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:tt()},removeCartesianGraphicalItem:{reducer(e,t){var r=zn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:tt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:tt()},removePolarGraphicalItem:{reducer(e,t){var r=zn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:tt()}}}),{addCartesianGraphicalItem:NZ,replaceCartesianGraphicalItem:SZ,removeCartesianGraphicalItem:EZ,addPolarGraphicalItem:Vse,removePolarGraphicalItem:Gse}=gR.actions,CZ=gR.reducer,kZ=e=>{var t=wt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(NZ(e)):r.current!==e&&t(SZ({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(EZ(r.current)),r.current=null)},[t]),null},AZ=y.memo(kZ);function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(n){PZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PZ(e,t,r){return(t=OZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OZ(e){var t=TZ(e,"string");return typeof t=="symbol"?t:t+""}function TZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vR=0,IZ={xAxis:{},yAxis:{},zAxis:{}},xR=Ur({name:"cartesianAxis",initialState:IZ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:tt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:tt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:tt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:tt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:tt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:tt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:tt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:tt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:tt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var o=[...i,n].slice(-3);e.yAxis[r]=FE(FE({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:DZ,replaceXAxis:RZ,removeXAxis:MZ,addYAxis:LZ,replaceYAxis:$Z,removeYAxis:FZ,addZAxis:Kse,replaceZAxis:Yse,removeZAxis:Xse,updateYAxisWidth:UZ}=xR.actions,BZ=xR.reducer,zZ=F([Gt],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),WZ=F([zZ,Ws,Hs],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),yR=()=>ie(WZ),UE=(e,t,r)=>{var n=r??e;if(!Vt(n))return qn(n,t,0)},HZ=(e,t,r)=>{var n={},s=e.filter(hp),i=e.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,h]=u,f=h.map(p=>p.dataKey),m=UE(t,r,h[0].barSize);return{stackId:d,dataKeys:f,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(f=>f!=null),h=UE(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...l,...c]};function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){qZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qZ(e,t,r){return(t=VZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VZ(e){var t=GZ(e,"string");return typeof t=="symbol"?t:t+""}function GZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KZ(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=qn(e,r,0,!0),l,c=[];if(ct(n[0].barSize)){var u=!1,d=r/i,h=n.reduce((v,b)=>v+(b.barSize||0),0);h+=(i-1)*o,h>=r&&(h-=(i-1)*o,o=0),h>=r&&d>0&&(u=!0,d*=.9,h=i*d);var f=(r-h)/2>>0,m={offset:f-o,size:0};l=n.reduce((v,b)=>{var w,_={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(w=b.barSize)!==null&&w!==void 0?w:0}},j=[...v,_];return m=j[j.length-1].position,j},c)}else{var p=qn(t,r,0,!0);r-2*p-(i-1)*o<=0&&(o=0);var x=(r-2*p-(i-1)*o)/i;x>1&&(x>>=0);var g=ct(s)?Math.min(x,s):x;l=n.reduce((v,b,w)=>[...v,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:p+(x+o)*w+(x-g)/2,size:g}}],c)}return l}}var YZ=(e,t,r,n,s,i,o)=>{var l=Vt(o)?t:o,c=KZ(r,n,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>Wd(Wd({},u),{},{position:Wd(Wd({},u.position),{},{offset:u.position.offset-s/2})}))),c},XZ=(e,t)=>{var r=yw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(o=>o.key===r)}}}};function QZ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ct(e.zIndex)?e.zIndex:t}var JZ=e=>{var{chartData:t}=e,r=wt(),n=Br();return y.useEffect(()=>n?()=>{}:(r(lE(t)),()=>{r(lE(void 0))}),[t,r,n]),null},zE={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},bR=Ur({name:"brush",initialState:zE,reducers:{setBrushSettings(e,t){return t.payload==null?zE:t.payload}}}),{setBrushSettings:Qse}=bR.actions,ZZ=bR.reducer;function eee(e,t,r){return(t=tee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tee(e){var t=ree(e,"string");return typeof t=="symbol"?t:t+""}function ree(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Hw{static create(t){return new Hw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}eee(Hw,"EPS",1e-4);function nee(e){return(e%180+180)%180}var see=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=nee(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},iee={dots:[],areas:[],lines:[]},wR=Ur({name:"referenceElements",initialState:iee,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=zn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=zn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=zn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Jse,removeDot:Zse,addArea:eie,removeArea:tie,addLine:rie,removeLine:nie}=wR.actions,aee=wR.reducer,oee=y.createContext(void 0),lee=e=>{var{children:t}=e,[r]=y.useState("".concat(eu("recharts"),"-clip")),n=yR();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return y.createElement(oee.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function _R(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var s=e[n];s!==void 0&&r.push(s)}return r}function cee(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return see(n,r)}function uee(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function mu(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function dee(e,t){return _R(e,t+1)}function hee(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var p=n==null?void 0:n[c];if(p===void 0)return{v:_R(n,u)};var x=c,g,v=()=>(g===void 0&&(g=r(p,x)),g),b=p.coordinate,w=c===0||mu(e,b,v,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(v()/2+s),c+=u)},f;u<=i.length;)if(f=h(),f)return f.v;return[]}function fee(e,t,r,n,s){var i=(n||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,u=1;u<=o;u++){for(var d=(o-1)%u,h=l,f=!0,m=function(){var b=n[p],w=p,_,j=()=>(_===void 0&&(_=r(b,w)),_),N=b.coordinate,C=p===d||mu(e,N,j,h,c);if(!C)return f=!1,1;C&&(h=N+e*(j()/2+s))},p=d;p<o&&!m();p+=u);if(f){for(var x=[],g=d;g<o;g+=u)x.push(n[g]);return x}}return[]}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(n){mee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mee(e,t,r){return(t=pee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pee(e){var t=gee(e,"string");return typeof t=="symbol"?t:t+""}function gee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vee(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(f){var m=i[f],p,x=()=>(p===void 0&&(p=r(m,f)),p);if(f===o-1){var g=e*(m.coordinate+e*x()/2-c);i[f]=m=ur(ur({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate})}else i[f]=m=ur(ur({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var v=mu(e,m.tickCoord,x,l,c);v&&(c=m.tickCoord-e*(x()/2+s),i[f]=ur(ur({},m),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return i}function xee(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],h=r(d,l-1),f=e*(d.coordinate+e*h/2-u);if(o[l-1]=d=ur(ur({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate}),d.tickCoord!=null){var m=mu(e,d.tickCoord,()=>h,c,u);m&&(u=d.tickCoord-e*(h/2+s),o[l-1]=ur(ur({},d),{},{isShow:!0}))}}for(var p=i?l-1:l,x=function(b){var w=o[b],_,j=()=>(_===void 0&&(_=r(w,b)),_);if(b===0){var N=e*(w.coordinate-e*j()/2-c);o[b]=w=ur(ur({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[b]=w=ur(ur({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var C=mu(e,w.tickCoord,j,c,u);C&&(c=w.tickCoord+e*(j()/2+s),o[b]=ur(ur({},w),{},{isShow:!0}))}},g=0;g<p;g++)x(g);return o}function qw(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!s||!s.length||!n)return[];if(ne(c)||tp.isSsr){var f;return(f=dee(s,ne(c)?c:0))!==null&&f!==void 0?f:[]}var m=[],p=l==="top"||l==="bottom"?"width":"height",x=d&&p==="width"?bc(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(w,_)=>{var j=typeof u=="function"?u(w.value,_):w.value;return p==="width"?cee(bc(j,{fontSize:t,letterSpacing:r}),x,h):bc(j,{fontSize:t,letterSpacing:r})[p]},v=s.length>=2?Dr(s[1].coordinate-s[0].coordinate):1,b=uee(i,v,p);return c==="equidistantPreserveStart"?hee(v,b,g,s,o):c==="equidistantPreserveEnd"?fee(v,b,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=xee(v,b,g,s,o,c==="preserveStartEnd"):m=vee(v,b,g,s,o),m.filter(w=>w.isShow))}var yee=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},bee=["axisLine","width","height","className","hide","ticks","axisType"];function wee(e,t){if(e==null)return{};var r,n,s=_ee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _ee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ka.apply(null,arguments)}function HE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(r),!0).forEach(function(n){jee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jee(e,t,r){return(t=Nee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nee(e){var t=See(e,"string");return typeof t=="symbol"?t:t+""}function See(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ns={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:wr.axis};function Eee(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=jt(jt(jt({},c),Os(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);u=jt(jt({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var h=+(i==="left"&&!o||i==="right"&&o);u=jt(jt({},u),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+s})}return y.createElement("line",ka({},u,{className:Xe("recharts-cartesian-axis-line",Xo(l,"className"))}))}function Cee(e,t,r,n,s,i,o,l,c){var u,d,h,f,m,p,x=l?-1:1,g=e.tickSize||o,v=ne(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,f=r+ +!l*s,h=f-x*g,p=h-x*c,m=v;break;case"left":h=f=e.coordinate,d=t+ +!l*n,u=d-x*g,m=u-x*c,p=v;break;case"right":h=f=e.coordinate,d=t+ +l*n,u=d+x*g,m=u+x*c,p=v;break;default:u=d=e.coordinate,f=r+ +l*s,h=f+x*g,p=h+x*c,m=v;break}return{line:{x1:u,y1:h,x2:d,y2:f},tick:{x:m,y:p}}}function kee(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Aee(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Pee(e){var{option:t,tickProps:r,value:n}=e,s,i=Xe(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))s=y.cloneElement(t,jt(jt({},r),{},{className:i}));else if(typeof t=="function")s=t(jt(jt({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Xe(o,t==null?void 0:t.className)),s=y.createElement(Uw,ka({},r,{className:o}),n)}return s}var Oee=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:f,y:m,width:p,height:x,tickSize:g,tickMargin:v,fontSize:b,letterSpacing:w,getTicksConfig:_,events:j,axisType:N}=e,C=qw(jt(jt({},_),{},{ticks:r}),b,w),I=kee(d,h),E=Aee(d,h),D=Os(_),O=ub(n),k={};typeof s=="object"&&(k=s);var S=jt(jt({},D),{},{fill:"none"},k),T=C.map(P=>jt({entry:P},Cee(P,f,m,p,x,d,g,h,v))),R=T.map(P=>{var{entry:A,line:L}=P;return y.createElement(Ts,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},s&&y.createElement("line",ka({},S,L,{className:Xe("recharts-cartesian-axis-tick-line",Xo(s,"className"))})))}),M=T.map((P,A)=>{var{entry:L,tick:U}=P,H=jt(jt(jt(jt({textAnchor:I,verticalAnchor:E},D),{},{stroke:"none",fill:i},O),U),{},{index:A,payload:L,visibleTicksCount:C.length,tickFormatter:o,padding:c},u);return y.createElement(Ts,ka({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},pb(j,L,A)),n&&y.createElement(Pee,{option:n,tickProps:H,value:"".concat(typeof o=="function"?o(L.value,A):L.value).concat(l||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},M.length>0&&y.createElement(Xs,{zIndex:wr.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},M)),R.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},R))}),Tee=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:o,ticks:l,axisType:c}=e,u=wee(e,bee),[d,h]=y.useState(""),[f,m]=y.useState(""),p=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var g;return yee({ticks:p.current,label:(g=e.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=y.useCallback(g=>{if(g){var v=g.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=v;var b=v[0];if(b){var w=window.getComputedStyle(b),_=w.fontSize,j=w.letterSpacing;(_!==d||j!==f)&&(h(_),m(j))}}},[d,f]);return o||n!=null&&n<=0||s!=null&&s<=0?null:y.createElement(Xs,{zIndex:e.zIndex},y.createElement(Ts,{className:Xe("recharts-cartesian-axis",i)},y.createElement(Eee,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Os(e)}),y.createElement(Oee,{ref:x,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:f,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(EJ,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(MJ,{label:e.label,labelRef:e.labelRef}),e.children)))}),Vw=y.forwardRef((e,t)=>{var r=sn(e,Ns);return y.createElement(Tee,ka({},r,{ref:t}))});Vw.displayName="CartesianAxis";var Iee=["x1","y1","x2","y2","key"],Dee=["offset"],Ree=["xAxisId","yAxisId"],Mee=["xAxisId","yAxisId"];function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(n){Lee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lee(e,t,r){return(t=$ee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ee(e){var t=Fee(e,"string");return typeof t=="symbol"?t:t+""}function Fee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ca(){return ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ca.apply(null,arguments)}function Vf(e,t){if(e==null)return{};var r,n,s=Uee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Uee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Bee=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return y.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function jR(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var s,{x1:i,y1:o,x2:l,y2:c,key:u}=r,d=Vf(r,Iee),h=(s=Os(d))!==null&&s!==void 0?s:{},{offset:f}=h,m=Vf(h,Dee);n=y.createElement("line",ca({},m,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:u}))}return n}function zee(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Vf(e,Ree),c=s.map((u,d)=>{var h=hr(hr({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return y.createElement(jR,{key:"line-".concat(d),option:n,lineItemProps:h})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Wee(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Vf(e,Mee),c=s.map((u,d)=>{var h=hr(hr({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return y.createElement(jR,{option:n,lineItemProps:h,key:"line-".concat(d)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Hee(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var u=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],p=m?s+o-h:u[f+1]-h;if(p<=0)return null;var x=f%t.length;return y.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:p,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function qee(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],p=m?s+o-h:u[f+1]-h;if(p<=0)return null;var x=f%r.length;return y.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:p,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Vee=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return GT(qw(hr(hr(hr({},Ns),r),{},{ticks:KT(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},Gee=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return GT(qw(hr(hr(hr({},Ns),r),{},{ticks:KT(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},Kee={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:wr.grid};function Gw(e){var t=aI(),r=oI(),n=iI(),s=hr(hr({},sn(e,Kee)),{},{x:ne(e.x)?e.x:n.left,y:ne(e.y)?e.y:n.top,width:ne(e.width)?e.width:n.width,height:ne(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:f,verticalValues:m}=s,p=Br(),x=ie(E=>QS(E,"xAxis",i,p)),g=ie(E=>QS(E,"yAxis",o,p));if(!is(u)||!is(d)||!ne(l)||!ne(c))return null;var v=s.verticalCoordinatesGenerator||Vee,b=s.horizontalCoordinatesGenerator||Gee,{horizontalPoints:w,verticalPoints:_}=s;if((!w||!w.length)&&typeof b=="function"){var j=f&&f.length,N=b({yAxis:g?hr(hr({},g),{},{ticks:j?f:g.ticks}):void 0,width:t??u,height:r??d,offset:n},j?!0:h);wf(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!_||!_.length)&&typeof v=="function"){var C=m&&m.length,I=v({xAxis:x?hr(hr({},x),{},{ticks:C?m:x.ticks}):void 0,width:t??u,height:r??d,offset:n},C?!0:h);wf(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(_=I)}return y.createElement(Xs,{zIndex:s.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(Bee,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),y.createElement(Hee,ca({},s,{horizontalPoints:w})),y.createElement(qee,ca({},s,{verticalPoints:_})),y.createElement(zee,ca({},s,{offset:n,horizontalPoints:w,xAxis:x,yAxis:g})),y.createElement(Wee,ca({},s,{offset:n,verticalPoints:_,xAxis:x,yAxis:g}))))}Gw.displayName="CartesianGrid";var Yee={},NR=Ur({name:"errorBars",initialState:Yee,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:sie,replaceErrorBar:iie,removeErrorBar:aie}=NR.actions,Xee=NR.reducer,Qee=["children"];function Jee(e,t){if(e==null)return{};var r,n,s=Zee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Zee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ete={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},tte=y.createContext(ete);function rte(e){var{children:t}=e,r=Jee(e,Qee);return y.createElement(tte.Provider,{value:r},t)}function SR(e,t){var r,n,s=ie(u=>Gs(u,e)),i=ie(u=>Ks(u,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Lt.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:$t.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function nte(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=yR(),{needClipX:i,needClipY:o,needClip:l}=SR(t,r);if(!l||!s)return null;var{x:c,y:u,width:d,height:h}=s;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:i?c:c-d/2,y:o?u:u-h/2,width:i?d:d*2,height:o?h:h*2}))}var ste={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=y;function ite(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ate=typeof Object.is=="function"?Object.is:ite,ote=Ju.useSyncExternalStore,lte=Ju.useRef,cte=Ju.useEffect,ute=Ju.useMemo,dte=Ju.useDebugValue;ste.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=lte(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=ute(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var p=o.value;if(s(p,m))return h=p}return h=m}if(p=h,ate(d,m))return p;var x=n(m);return s!==void 0&&s(p,x)?(d=m,p):(d=m,h=x)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=ote(e,i[0],i[1]);return cte(function(){o.hasValue=!0,o.value=l},[l]),dte(l),l};function hte(e){e()}function fte(){let e=null,t=null;return{clear(){e=null,t=null},notify(){hte(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var VE={notify(){},get:()=>[]};function mte(e,t){let r,n=VE,s=0,i=!1;function o(x){d();const g=n.subscribe(x);let v=!1;return()=>{v||(v=!0,g(),h())}}function l(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){s++,r||(r=e.subscribe(c),n=fte())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=VE)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>n};return p}var pte=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gte=pte(),vte=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xte=vte(),yte=()=>gte||xte?y.useLayoutEffect:y.useEffect,bte=yte();function GE(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function wte(e,t){if(GE(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!GE(e[r[s]],t[r[s]]))return!1;return!0}var qg=Symbol.for("react-redux-context"),Vg=typeof globalThis<"u"?globalThis:{};function _te(){if(!y.createContext)return{};const e=Vg[qg]??(Vg[qg]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var jte=_te();function Nte(e){const{children:t,context:r,serverState:n,store:s}=e,i=y.useMemo(()=>{const c=mte(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=y.useMemo(()=>s.getState(),[s]);bte(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||jte;return y.createElement(l.Provider,{value:i},t)}var Ste=Nte,Ete=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Cte(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Kw(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(Ete.has(n)){if(e[n]==null&&t[n]==null)continue;if(!wte(e[n],t[n]))return!1}else if(!Cte(e[n],t[n]))return!1;return!0}function Fa(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:vR}function Ua(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:vR}var kte="Invariant failed";function Ate(e,t){throw new Error(kte)}function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mx.apply(null,arguments)}function Gf(e){return y.createElement(pZ,mx({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Pte=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(ne(t))return t;var i=ne(n)||Vt(n);return i?t(n,s):(i||Ate(),r)}},Ote=(e,t,r)=>r,Tte=(e,t)=>t,Zu=F([ww,Tte],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Ite=F([Zu],e=>e==null?void 0:e.maxBarSize),Dte=(e,t,r,n)=>n,Rte=F([Ie,ww,Fa,Ua,Ote],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Mte=(e,t,r)=>{var n=Ie(e),s=Fa(e,t),i=Ua(e,t);if(!(s==null||i==null))return n==="horizontal"?ox(e,"yAxis",i,r):ox(e,"xAxis",s,r)},Lte=(e,t)=>{var r=Ie(e),n=Fa(e,t),s=Ua(e,t);if(!(n==null||s==null))return r==="horizontal"?XS(e,"xAxis",n):XS(e,"yAxis",s)},$te=F([Rte,AK,Lte],HZ),Fte=(e,t,r)=>{var n,s,i=Zu(e,t);if(i!=null){var o=Fa(e,t),l=Ua(e,t);if(!(o==null||l==null)){var c=Ie(e),u=S4(e),{maxBarSize:d}=i,h=Vt(d)?u:d,f,m;return c==="horizontal"?(f=il(e,"xAxis",o,r),m=sl(e,"xAxis",o,r)):(f=il(e,"yAxis",l,r),m=sl(e,"yAxis",l,r)),(n=(s=bf(f,m,!0))!==null&&s!==void 0?s:h)!==null&&n!==void 0?n:0}}},ER=(e,t,r)=>{var n=Ie(e),s=Fa(e,t),i=Ua(e,t);if(!(s==null||i==null)){var o,l;return n==="horizontal"?(o=il(e,"xAxis",s,r),l=sl(e,"xAxis",s,r)):(o=il(e,"yAxis",i,r),l=sl(e,"yAxis",i,r)),bf(o,l)}},Ute=F([$te,S4,kK,E4,Fte,ER,Ite],YZ),Bte=(e,t,r)=>{var n=Fa(e,t);if(n!=null)return il(e,"xAxis",n,r)},zte=(e,t,r)=>{var n=Ua(e,t);if(n!=null)return il(e,"yAxis",n,r)},Wte=(e,t,r)=>{var n=Fa(e,t);if(n!=null)return sl(e,"xAxis",n,r)},Hte=(e,t,r)=>{var n=Ua(e,t);if(n!=null)return sl(e,"yAxis",n,r)},qte=F([Ute,Zu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Vte=F([Mte,Zu],XZ),Gte=F([Gt,Mb,Bte,zte,Wte,Hte,qte,Ie,gK,ER,Vte,Zu,Dte],(e,t,r,n,s,i,o,l,c,u,d,h,f)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:x}=c;if(!(h==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||s==null||i==null||u==null)){var{data:g}=h,v;if(g!=null&&g.length>0?v=g:v=m==null?void 0:m.slice(p,x+1),v!=null)return _re({layout:l,barSettings:h,pos:o,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:d,displayedData:v,offset:e,cells:f,dataStartIndex:p})}}),Kte=["index"];function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},px.apply(null,arguments)}function Yte(e,t){if(e==null)return{};var r,n,s=Xte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Xte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CR=y.createContext(void 0),Qte=e=>{var t=y.useContext(CR);if(t!=null)return t.stackId;if(e!=null)return CW(e)},Jte=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Zte=e=>{var t=y.useContext(CR);if(t!=null){var{stackId:r}=t;return"url(#".concat(Jte(r,e),")")}},ere=e=>{var{index:t}=e,r=Yte(e,Kte),n=Zte(t);return y.createElement(Ts,px({className:"recharts-bar-stack-layer",clipPath:n},r))},tre=["onMouseEnter","onMouseLeave","onClick"],rre=["value","background","tooltipPosition"],nre=["id"],sre=["onMouseEnter","onClick","onMouseLeave"];function Fs(){return Fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fs.apply(null,arguments)}function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(r),!0).forEach(function(n){ire(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ire(e,t,r){return(t=are(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function are(e){var t=ore(e,"string");return typeof t=="symbol"?t:t+""}function ore(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kf(e,t){if(e==null)return{};var r,n,s=lre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cre=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:YT(r,t),payload:e}]},ure=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:YT(i,t),hide:o,type:c,color:s,unit:l,graphicalItemId:u}};return y.createElement(gZ,{tooltipEntrySettings:d})});function dre(e){var t=ie(al),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=Kf(i,tre),d=fR(o,n,i.id),h=mR(l),f=pR(c,n,i.id);if(!s||r==null)return null;var m=ub(s);return y.createElement(Xs,{zIndex:QZ(s,wr.barBackground)},r.map((p,x)=>{var{value:g,background:v,tooltipPosition:b}=p,w=Kf(p,rre);if(!v)return null;var _=d(p,x),j=h(p,x),N=f(p,x),C=xr(xr(xr(xr(xr({option:s,isActive:String(x)===t},w),{},{fill:"#eee"},v),m),pb(u,p,x)),{},{onMouseEnter:_,onMouseLeave:j,onClick:N,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return y.createElement(Gf,Fs({key:"background-bar-".concat(x)},C))}))}function hre(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return xr(xr({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return y.createElement(WJ,{value:t?s:void 0},r)}function fre(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:o}=e,l=ie(al),c=ie(MD),u=r&&String(i)===l&&(c==null||o===c),d=u?r:t;return u?y.createElement(Xs,{zIndex:wr.activeBar},y.createElement(Gf,Fs({},n,{name:String(n.name)},s,{isActive:u,option:d,index:i,dataKey:o}))):y.createElement(Gf,Fs({},n,{name:String(n.name)},s,{isActive:u,option:d,index:i,dataKey:o}))}function mre(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return y.createElement(Gf,Fs({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function pre(e){var t,{data:r,props:n}=e,s=(t=Os(n))!==null&&t!==void 0?t:{},{id:i}=s,o=Kf(s,nre),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:h,onMouseLeave:f}=n,m=Kf(n,sre),p=fR(d,c,i),x=mR(f),g=pR(h,c,i);return r?y.createElement(y.Fragment,null,r.map((v,b)=>y.createElement(ere,Fs({index:b,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(b),className:"recharts-bar-rectangle"},pb(m,v,b),{onMouseEnter:p(v,b),onMouseLeave:x(v,b),onClick:g(v,b)}),u?y.createElement(fre,{shape:l,activeBar:u,baseProps:o,entry:v,index:b,dataKey:c}):y.createElement(mre,{shape:l,baseProps:o,entry:v,index:b,dataKey:c})))):null}function gre(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=r.current,f=Bb(t,"recharts-bar-"),[m,p]=y.useState(!1),x=!m,g=y.useCallback(()=>{typeof u=="function"&&u(),p(!1)},[u]),v=y.useCallback(()=>{typeof d=="function"&&d(),p(!0)},[d]);return y.createElement(hre,{showLabels:x,rects:n},y.createElement(Ub,{animationId:f,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:g,onAnimationStart:v,key:f},b=>{var w=b===1?n:n==null?void 0:n.map((_,j)=>{var N=h&&h[j];if(N)return xr(xr({},_),{},{x:Zt(N.x,_.x,b),y:Zt(N.y,_.y,b),width:Zt(N.width,_.width,b),height:Zt(N.height,_.height,b)});if(s==="horizontal"){var C=Zt(0,_.height,b),I=Zt(_.stackedBarStart,_.y,b);return xr(xr({},_),{},{y:I,height:C})}var E=Zt(0,_.width,b),D=Zt(_.stackedBarStart,_.x,b);return xr(xr({},_),{},{width:E,x:D})});return b>0&&(r.current=w??null),w==null?null:y.createElement(Ts,null,y.createElement(pre,{props:t,data:w}))}),y.createElement(VJ,{label:t.label}),t.children)}function vre(e){var t=y.useRef(null);return y.createElement(gre,{previousRectanglesRef:t,props:e})}var kR=0,xre=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:sr(e,t)}};class yre extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t||r==null)return null;var d=Xe("recharts-bar",s),h=u;return y.createElement(Ts,{className:d,id:u},l&&y.createElement("defs",null,y.createElement(nte,{clipPathId:h,xAxisId:i,yAxisId:o})),y.createElement(Ts,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},y.createElement(dre,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),y.createElement(vre,this.props)))}}var bre={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:kR,xAxisId:0,yAxisId:0,zIndex:wr.bar};function wre(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:h}=SR(t,r),f=$u(),m=Br(),p=JJ(e.children,yp),x=ie(b=>Gte(b,e.id,m,p));if(f!=="vertical"&&f!=="horizontal")return null;var g,v=x==null?void 0:x[0];return v==null||v.height==null||v.width==null?g=0:g=f==="vertical"?v.height/2:v.width/2,y.createElement(rte,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:xre,errorBarOffset:g},y.createElement(yre,Fs({},e,{layout:f,needClip:h,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function _re(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:f,cells:m,parentViewBox:p,dataStartIndex:x}=e,g=t==="horizontal"?l:o,v=d?g.scale.domain():null,b=kW({numericAxis:g}),w=g.scale(b);return h.map((_,j)=>{var N,C,I,E,D,O;if(d){var k=d[j+x];if(k==null)return null;N=_W(k,v)}else N=sr(_,r),Array.isArray(N)||(N=[b,N]);var S=Pte(n,kR)(N[1],j);if(t==="horizontal"){var T,[R,M]=[l.scale(N[0]),l.scale(N[1])];C=uN({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:_,index:j}),I=(T=M??R)!==null&&T!==void 0?T:void 0,E=s.size;var P=R-M;if(D=Hn(P)?0:P,O={x:C,y:f.top,width:E,height:f.height},Math.abs(S)>0&&Math.abs(D)<Math.abs(S)){var A=Dr(D||S)*(Math.abs(S)-Math.abs(D));I-=A,D+=A}}else{var[L,U]=[o.scale(N[0]),o.scale(N[1])];if(C=L,I=uN({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:_,index:j}),E=U-L,D=s.size,O={x:f.left,y:I,width:f.width,height:D},Math.abs(S)>0&&Math.abs(E)<Math.abs(S)){var H=Dr(E||S)*(Math.abs(S)-Math.abs(E));E+=H}}if(C==null||I==null||E==null||D==null)return null;var X=xr(xr({},_),{},{stackedBarStart:w,x:C,y:I,width:E,height:D,value:d?N:N[1],payload:_,background:O,tooltipPosition:{x:C+E/2,y:I+D/2},parentViewBox:p},m&&m[j]&&m[j].props);return X}).filter(Boolean)}function jre(e){var t=sn(e,bre),r=Qte(t.stackId),n=Br();return y.createElement(_Z,{id:t.id,type:"bar"},s=>y.createElement(y.Fragment,null,y.createElement(vZ,{legendPayload:cre(t)}),y.createElement(ure,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),y.createElement(AZ,{type:"bar",id:s,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(Xs,{zIndex:t.zIndex},y.createElement(wre,Fs({},t,{id:s})))))}var Yw=y.memo(jre,Kw);Yw.displayName="Bar";var Nre=["domain","range"],Sre=["domain","range"];function YE(e,t){if(e==null)return{};var r,n,s=Ere(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ere(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XE(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function AR(e,t){if(e===t)return!0;var{domain:r,range:n}=e,s=YE(e,Nre),{domain:i,range:o}=t,l=YE(t,Sre);return!XE(r,i)||!XE(n,o)?!1:Kw(s,l)}var Cre=["dangerouslySetInnerHTML","ticks","scale"],kre=["id","scale"];function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gx.apply(null,arguments)}function QE(e,t){if(e==null)return{};var r,n,s=Are(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Are(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pre(e){var t=wt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(DZ(e)):r.current!==e&&t(RZ({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(MZ(r.current)),r.current=null)},[t]),null}var Ore=e=>{var{xAxisId:t,className:r}=e,n=ie(Mb),s=Br(),i="xAxis",o=ie(v=>gD(v,i,t,s)),l=ie(v=>hD(v,t)),c=ie(v=>EY(v,t)),u=ie(v=>R4(v,t));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:f}=e,m=QE(e,Cre),{id:p,scale:x}=u,g=QE(u,kre);return y.createElement(Vw,gx({},m,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:Xe("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o,axisType:i}))},Tre={allowDataOverflow:Lt.allowDataOverflow,allowDecimals:Lt.allowDecimals,allowDuplicatedCategory:Lt.allowDuplicatedCategory,angle:Lt.angle,axisLine:Ns.axisLine,height:Lt.height,hide:!1,includeHidden:Lt.includeHidden,interval:Lt.interval,minTickGap:Lt.minTickGap,mirror:Lt.mirror,orientation:Lt.orientation,padding:Lt.padding,reversed:Lt.reversed,scale:Lt.scale,tick:Lt.tick,tickCount:Lt.tickCount,tickLine:Ns.tickLine,tickSize:Ns.tickSize,type:Lt.type,xAxisId:0},Ire=e=>{var t=sn(e,Tre);return y.createElement(y.Fragment,null,y.createElement(Pre,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(Ore,t))},Xw=y.memo(Ire,AR);Xw.displayName="XAxis";var Dre=["dangerouslySetInnerHTML","ticks","scale"],Rre=["id","scale"];function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vx.apply(null,arguments)}function JE(e,t){if(e==null)return{};var r,n,s=Mre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Mre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lre(e){var t=wt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(LZ(e)):r.current!==e&&t($Z({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(FZ(r.current)),r.current=null)},[t]),null}var $re=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=y.useRef(null),o=y.useRef(null),l=ie(Mb),c=Br(),u=wt(),d="yAxis",h=ie(N=>fD(N,t)),f=ie(N=>kY(N,t)),m=ie(N=>gD(N,d,t,c)),p=ie(N=>M4(N,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!h||Bw(s)||y.isValidElement(s)||p==null)){var N=i.current;if(N){var C=N.getCalculatedWidth();Math.round(h.width)!==Math.round(C)&&u(UZ({id:t,width:C}))}}},[m,h,u,s,t,n,p]),h==null||f==null||p==null)return null;var{dangerouslySetInnerHTML:x,ticks:g,scale:v}=e,b=JE(e,Dre),{id:w,scale:_}=p,j=JE(p,Rre);return y.createElement(Vw,vx({},b,j,{ref:i,labelRef:o,x:f.x,y:f.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Xe("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:m,axisType:d}))},Fre={allowDataOverflow:$t.allowDataOverflow,allowDecimals:$t.allowDecimals,allowDuplicatedCategory:$t.allowDuplicatedCategory,angle:$t.angle,axisLine:Ns.axisLine,hide:!1,includeHidden:$t.includeHidden,interval:$t.interval,minTickGap:$t.minTickGap,mirror:$t.mirror,orientation:$t.orientation,padding:$t.padding,reversed:$t.reversed,scale:$t.scale,tick:$t.tick,tickCount:$t.tickCount,tickLine:Ns.tickLine,tickSize:Ns.tickSize,type:$t.type,width:$t.width,yAxisId:0},Ure=e=>{var t=sn(e,Fre);return y.createElement(y.Fragment,null,y.createElement(Lre,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement($re,t))},Qw=y.memo(Ure,AR);Qw.displayName="YAxis";var Bre=(e,t)=>t,Jw=F([Bre,Ie,I4,Rt,TD,Ys,zX,Gt],YX),Zw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},PR=_n("mouseClick"),OR=Mu();OR.startListening({actionCreator:PR,effect:(e,t)=>{var r=e.payload,n=Jw(t.getState(),Zw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(zY({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var xx=_n("mouseMove"),TR=Mu(),Hd=null;TR.startListening({actionCreator:xx,effect:(e,t)=>{var r=e.payload;Hd!==null&&cancelAnimationFrame(Hd);var n=Zw(r);Hd=requestAnimationFrame(()=>{var s=t.getState(),i=Pw(s,s.tooltip.settings.shared);if(i==="axis"){var o=Jw(s,n);(o==null?void 0:o.activeIndex)!=null?t.dispatch(ND({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(jD())}Hd=null})}});function zre(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var ZE={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},IR=Ur({name:"rootProps",initialState:ZE,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:ZE.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Wre=IR.reducer,{updateOptions:Hre}=IR.actions,DR=Ur({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:oie}=DR.actions,qre=DR.reducer,RR=_n("keyDown"),MR=_n("focus"),e_=Mu();e_.startListening({actionCreator:RR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Ow(s,Cl(r),Vu(r),Xu(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=Ys(r);if(i==="Enter"){var u=zf(r,"axis","hover",String(s.index));t.dispatch(cx({active:!s.active,activeIndex:s.index,activeCoordinate:u}));return}var d=TY(r),h=d==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=l+f*h;if(!(c==null||m>=c.length||m<0)){var p=zf(r,"axis","hover",String(m));t.dispatch(cx({active:!0,activeIndex:m.toString(),activeCoordinate:p}))}}}}}});e_.startListening({actionCreator:MR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=zf(r,"axis","hover",String(i));t.dispatch(cx({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var cn=_n("externalEvent"),LR=Mu(),Gg=new Map;LR.startListening({actionCreator:cn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var s=n.type,i=Gg.get(s);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:CX(l),activeDataKey:MD(l),activeIndex:al(l),activeLabel:RD(l),activeTooltipIndex:al(l),isTooltipActive:kX(l)};r(c,n)}finally{Gg.delete(s)}});Gg.set(s,o)}}});var Vre=F([Sl],e=>e.tooltipItemPayloads),Gre=F([Vre,Yu,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.graphicalItemId===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),$R=_n("touchMove"),FR=Mu();FR.startListening({actionCreator:$R,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=Pw(n,n.tooltip.settings.shared);if(s==="axis"){var i=r.touches[0];if(i==null)return;var o=Jw(n,Zw({clientX:i.clientX,clientY:i.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(ND({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(s==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(RW),h=(l=u.getAttribute(MW))!==null&&l!==void 0?l:void 0,f=El(n).find(x=>x.id===h);if(d==null||f==null||h==null)return;var{dataKey:m}=f,p=Gre(n,d,h);t.dispatch(_D({activeDataKey:m,activeIndex:d,activeCoordinate:p,activeGraphicalItemId:h}))}}}});var Kre=xT({brush:ZZ,cartesianAxis:BZ,chartData:EQ,errorBars:Xee,graphicalItems:CZ,layout:gW,legend:jH,options:wQ,polarAxis:KJ,polarOptions:qre,referenceElements:aee,rootProps:Wre,tooltip:WY,zIndex:cQ}),Yre=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Bz({reducer:Kre,preloadedState:t,middleware:n=>{var s;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([OR.middleware,TR.middleware,e_.middleware,LR.middleware,FR.middleware])},enhancers:n=>{var s=n;return typeof n=="function"&&(s=n()),s.concat(IT({type:"raf"}))},devTools:{serialize:{replacer:zre},name:"recharts-".concat(r)}})};function Xre(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Br(),i=y.useRef(null);if(s)return r;i.current==null&&(i.current=Yre(t,n));var o=Sb;return y.createElement(Ste,{context:o,store:i.current},r)}function Qre(e){var{layout:t,margin:r}=e,n=wt(),s=Br();return y.useEffect(()=>{s||(n(fW(t)),n(hW(r)))},[n,s,t,r]),null}var Jre=y.memo(Qre,Kw);function Zre(e){var t=wt();return y.useEffect(()=>{t(Hre(e))},[t,e]),null}function e2(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),s=wt();return y.useLayoutEffect(()=>(n.current&&s(oQ({zIndex:t,element:n.current,isPanorama:r})),()=>{s(lQ({zIndex:t,isPanorama:r}))}),[s,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function t2(e){var{children:t,isPanorama:r}=e,n=ie(QX);if(!n||n.length===0)return t;var s=n.filter(o=>o<0),i=n.filter(o=>o>0);return y.createElement(y.Fragment,null,s.map(o=>y.createElement(e2,{key:o,zIndex:o,isPanorama:r})),t,i.map(o=>y.createElement(e2,{key:o,zIndex:o,isPanorama:r})))}var ene=["children"];function tne(e,t){if(e==null)return{};var r,n,s=rne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Yf(){return Yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yf.apply(null,arguments)}var nne={width:"100%",height:"100%",display:"block"},sne=y.forwardRef((e,t)=>{var r=aI(),n=oI(),s=pI();if(!is(r)||!is(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0),y.createElement(bO,Yf({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:nne,ref:t}),i)}),ine=e=>{var{children:t}=e,r=ie(Ym);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return y.createElement(bO,{width:n,height:s,x:o,y:i},t)},r2=y.forwardRef((e,t)=>{var{children:r}=e,n=tne(e,ene),s=Br();return s?y.createElement(ine,null,y.createElement(t2,{isPanorama:!0},r)):y.createElement(sne,Yf({ref:t},n),y.createElement(t2,{isPanorama:!1},r))});function ane(){var e=wt(),[t,r]=y.useState(null),n=ie(DW);return y.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;ct(i)&&i!==n&&e(pW(i))}},[t,e,n]),r}function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function one(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(n){lne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lne(e,t,r){return(t=cne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cne(e){var t=une(e,"string");return typeof t=="symbol"?t:t+""}function une(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aa.apply(null,arguments)}var dne=()=>(RQ(),null);function Xf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var hne=y.forwardRef((e,t)=>{var r,n,s=y.useRef(null),[i,o]=y.useState({containerWidth:Xf((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Xf((n=e.style)===null||n===void 0?void 0:n.height)}),l=y.useCallback((u,d)=>{o(h=>{var f=Math.round(u),m=Math.round(d);return h.containerWidth===f&&h.containerHeight===m?h:{containerWidth:f,containerHeight:m}})},[]),c=y.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=u.getBoundingClientRect();l(d,h);var f=p=>{var{width:x,height:g}=p[0].contentRect;l(x,g)},m=new ResizeObserver(f);m.observe(u),s.current=m}},[t,l]);return y.useEffect(()=>()=>{var u=s.current;u!=null&&u.disconnect()},[l]),y.createElement(y.Fragment,null,y.createElement(Qm,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",Aa({ref:c},e)))}),fne=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=y.useState({containerWidth:Xf(r),containerHeight:Xf(n)}),o=y.useCallback((c,u)=>{i(d=>{var h=Math.round(c),f=Math.round(u);return d.containerWidth===h&&d.containerHeight===f?d:{containerWidth:h,containerHeight:f}})},[]),l=y.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[t,o]);return y.createElement(y.Fragment,null,y.createElement(Qm,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Aa({ref:l},e)))}),mne=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(Qm,{width:r,height:n}),y.createElement("div",Aa({ref:t},e)))}),pne=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return Is(r)||Is(n)?y.createElement(fne,Aa({},e,{ref:t})):y.createElement(mne,Aa({},e,{ref:t}))});function gne(e){return e===!0?hne:pne}var vne=y.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:p,onTouchStart:x,style:g,width:v,responsive:b,dispatchTouchEvents:w=!0}=e,_=y.useRef(null),j=wt(),[N,C]=y.useState(null),[I,E]=y.useState(null),D=ane(),O=Lb(),k=(O==null?void 0:O.width)>0?O.width:v,S=(O==null?void 0:O.height)>0?O.height:s,T=y.useCallback($=>{D($),typeof t=="function"&&t($),C($),E($),$!=null&&(_.current=$)},[D,t,C,E]),R=y.useCallback($=>{j(PR($)),j(cn({handler:i,reactEvent:$}))},[j,i]),M=y.useCallback($=>{j(xx($)),j(cn({handler:u,reactEvent:$}))},[j,u]),P=y.useCallback($=>{j(jD()),j(cn({handler:d,reactEvent:$}))},[j,d]),A=y.useCallback($=>{j(xx($)),j(cn({handler:h,reactEvent:$}))},[j,h]),L=y.useCallback(()=>{j(MR())},[j]),U=y.useCallback($=>{j(RR($.key))},[j]),H=y.useCallback($=>{j(cn({handler:o,reactEvent:$}))},[j,o]),X=y.useCallback($=>{j(cn({handler:l,reactEvent:$}))},[j,l]),fe=y.useCallback($=>{j(cn({handler:c,reactEvent:$}))},[j,c]),ae=y.useCallback($=>{j(cn({handler:f,reactEvent:$}))},[j,f]),ue=y.useCallback($=>{j(cn({handler:x,reactEvent:$}))},[j,x]),Ae=y.useCallback($=>{w&&j($R($)),j(cn({handler:p,reactEvent:$}))},[j,w,p]),_e=y.useCallback($=>{j(cn({handler:m,reactEvent:$}))},[j,m]),Ne=gne(b);return y.createElement(WD.Provider,{value:N},y.createElement(T7.Provider,{value:I},y.createElement(Ne,{width:k??(g==null?void 0:g.width),height:S??(g==null?void 0:g.height),className:Xe("recharts-wrapper",n),style:one({position:"relative",cursor:"default",width:k,height:S},g),onClick:R,onContextMenu:H,onDoubleClick:X,onFocus:L,onKeyDown:U,onMouseDown:fe,onMouseEnter:M,onMouseLeave:P,onMouseMove:A,onMouseUp:ae,onTouchEnd:_e,onTouchMove:Ae,onTouchStart:ue,ref:T},y.createElement(dne,null),r)))}),xne=["width","height","responsive","children","className","style","compact","title","desc"];function yne(e,t){if(e==null)return{};var r,n,s=bne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wne=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:o,style:l,compact:c,title:u,desc:d}=e,h=yne(e,xne),f=Os(h);return c?y.createElement(y.Fragment,null,y.createElement(Qm,{width:r,height:n}),y.createElement(r2,{otherAttributes:f,title:u,desc:d},i)):y.createElement(vne,{className:o,style:l,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(r2,{otherAttributes:f,title:u,desc:d,ref:t},y.createElement(lee,null,i)))});function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(null,arguments)}var _ne={top:5,right:5,bottom:5,left:5},jne={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:_ne,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Nne=y.forwardRef(function(t,r){var n,s=sn(t.categoricalChartProps,jne),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return y.createElement(Xre,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},y.createElement(JZ,{chartData:u.data}),y.createElement(Jre,{layout:s.layout,margin:s.margin}),y.createElement(Zre,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),y.createElement(wne,yx({},s,{ref:r})))}),Sne=["axis","item"],UR=y.forwardRef((e,t)=>y.createElement(Nne,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Sne,tooltipPayloadSearcher:yQ,categoricalChartProps:e,ref:t}));const Ene=async e=>{try{console.log("=== FETCHING COUNSELOR ACADEMIC DATA (FIREBASE) ==="),console.log("Counselor Name:",e);const t=`University Data/Caseloads/${e}`;console.log("Firebase Path for Caseload:",t);const r=G(V,t),n=await me(r);if(console.log("1. Caseload Query Result:"),console.log("   - Exists:",n.exists()),console.log("   - Raw Data:",n.val()),!n.exists())return console.log(" No caseload found for counselor:",e),{totalStudents:0,averageGrade:0,students:[]};const s=n.val(),i=Object.keys(s);console.log("2. Student Names in Caseload:",i),console.log("   - Count:",i.length);const o=[];for(const u of i){console.log(`
--- Processing Student: ${u} ---`);const d=`University Data/Student Academics/${u}`;console.log("   Firebase Path:",d);const h=G(V,d),f=await me(h);if(console.log("   Snapshot Exists:",f.exists()),console.log("   Raw Data:",f.val()),f.exists()){const m=f.val(),p=m["Overall Average"]||0;console.log("   Overall Average:",p);const x=[];if(m["Subject Averages"]){const b=m["Subject Averages"];console.log("   Subject Averages Data:",b);for(const w in b)x.push({subject:w,grade:b[w]});console.log("   Parsed Subject Averages:",x)}else console.log("    No Subject Averages found for",u);const g=[];if(m["Previous averages"]){const b=m["Previous averages"];for(const w in b){const _=b[w],j=[];let N=0;for(const C in _)C==="Overall Average"?N=_[C]:j.push({subject:C,grade:_[C]});g.push({year:w,overallAverage:N,subjects:j})}}const v={studentName:u,overallAverage:p,numCourses:x.length,subjectAverages:x,previousAverages:g};console.log("    Added Student Record:",v),o.push(v)}else console.log(`    No academic data found for: ${u}`)}const l=o.length,c=l>0?o.reduce((u,d)=>u+d.overallAverage,0)/l:0;return console.log(`
=== FINAL SUMMARY ===`),console.log("Total Students:",l),console.log("Average Grade:",Math.round(c*10)/10),console.log("Students Array:",o),console.log(`=== END FETCH ===
`),{totalStudents:l,averageGrade:Math.round(c*10)/10,students:o}}catch(t){throw console.error(" ERROR in getCounselorAcademicData:",t),t}},Cne=async e=>{try{const t=G(V,`University Data/Student Academics/${e}`),r=await me(t);if(!r.exists())return null;const n=r.val(),s=n["Overall Average"]||0,i=[];if(n["Subject Averages"]){const l=n["Subject Averages"];for(const c in l)i.push({subject:c,grade:l[c]})}const o=[];if(n["Previous averages"]){const l=n["Previous averages"];for(const c in l){const u=l[c],d=[];let h=0;for(const f in u)f==="Overall Average"?h=u[f]:d.push({subject:f,grade:u[f]});o.push({year:c,overallAverage:h,subjects:d})}}return{studentName:e,overallAverage:s,numCourses:i.length,subjectAverages:i,previousAverages:o}}catch(t){throw console.error("Error fetching student academic details:",t),t}},BR=async e=>{try{console.log(` Fetching profile data for: ${e}`);const t=G(V,`University Data/Student Academics/${e}`),r=G(V,`University Data/Student Profiles/${e}`),n=G(V,`University Data/Essays/${e}`),[s,i,o]=await Promise.all([me(t),me(r),me(n)]),l={};if(s.exists()){const c=s.val();l.sat=c.SAT,l.act=c.ACT}if(i.exists()){const c=i.val();l.dob=c.DOB,l.nationality=c.Nationality,l.budget=c.Budget,l.specialCircumstances=c["Special Circumstances"],c["Career interests"]&&(l.careerInterests=Object.keys(c["Career interests"]))}if(o.exists()){const c=o.val(),u=[],d=[];let h=null;for(const f in c){const m=c[f],p=m.essayType;p==="personal_statement"?u.push({title:f,text:m.essayText||"",createdAt:m.createdAt||"",reviewed:!!m.reviewData,type:"personal_statement"}):p==="supplement"?d.push({title:f,text:m.essayText||"",createdAt:m.createdAt||"",reviewed:!!m.reviewData,universityName:m.universityName,type:"supplement"}):m.activities&&(!h||m.createdAt>h.createdAt)&&(h={createdAt:m.createdAt,activities:m.activities})}if(u.length>0&&(u.sort((f,m)=>m.createdAt.localeCompare(f.createdAt)),l.personalStatement=u[0]),l.supplementaryEssays=d,h){const f=[],m=h.activities;for(const p in m){const x=m[p];x&&x.id&&f.push({id:x.id,name:x.name||"",description:x.description||""})}l.activitiesList=f}}return l}catch(t){return console.error("Error fetching student profile data:",t),{}}},s2=({counselorName:e,onClose:t})=>{const[r,n]=y.useState([]),[s,i]=y.useState(!0),[o,l]=y.useState(!1),[c,u]=y.useState(""),[d,h]=y.useState(""),[f,m]=y.useState(null),[p,x]=y.useState(""),[g,v]=y.useState(""),[b,w]=y.useState(!1),[_,j]=y.useState("");y.useEffect(()=>{N()},[e]);const N=async()=>{try{i(!0);const S=G(V,`University Data/${e}/grading_rubric`);Pr(S,T=>{if(T.exists()){const R=T.val(),M=Object.keys(R).map(P=>({id:P,name:R[P].name,description:R[P].description}));n(M)}else n([]);i(!1)},{onlyOnce:!0})}catch(S){console.error("Error loading rubric items:",S),i(!1)}},C=S=>{j(S),w(!0),setTimeout(()=>{w(!1)},3e3)},I=()=>{if(!c.trim()||!d.trim()){j("Please enter both a name and description"),w(!0),setTimeout(()=>w(!1),3e3);return}const S={id:Date.now().toString(),name:c.trim(),description:d.trim()};n([...r,S]),u(""),h("")},E=S=>{m(S.id),x(S.name),v(S.description)},D=S=>{if(!p.trim()||!g.trim()){j("Please enter both a name and description"),w(!0),setTimeout(()=>w(!1),3e3);return}n(r.map(T=>T.id===S?{...T,name:p.trim(),description:g.trim()}:T)),m(null),x(""),v("")},O=S=>{n(r.filter(T=>T.id!==S))},k=async()=>{try{l(!0);const S=G(V,`University Data/${e}/grading_rubric`),T={};r.forEach(R=>{T[R.id]={name:R.name,description:R.description}}),await gt(S,T),C("Rubric saved successfully!"),setTimeout(()=>{t()},1500)}catch(S){console.error("Error saving rubric:",S),j("Failed to save rubric. Please try again."),w(!0),setTimeout(()=>w(!1),3e3)}finally{l(!1)}};return s?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE] mx-auto"})})}):a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[b&&a.jsx("div",{className:"fixed top-4 right-4 z-[60] animate-slide-in",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-slate-200 p-4 flex items-center gap-3 min-w-[300px]",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(fr,{className:"w-5 h-5 text-emerald-500"})}),a.jsx("p",{className:"text-sm font-medium text-slate-900",children:_})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Essay Grading Rubric"}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-2 transition-colors",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Define the criteria you'll use to evaluate essays. Each criterion will be rated on a scale of 1-5 during the review process."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Add New Criterion"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:'Criterion Name (e.g., "Clarity", "Structure", "Grammar")'}),a.jsx("input",{type:"text",value:c,onChange:S=>u(S.target.value),placeholder:"Enter criterion name",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Description (What you're looking for in this criterion)"}),a.jsx("textarea",{value:d,onChange:S=>h(S.target.value),placeholder:"Describe what this criterion evaluates...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]}),a.jsxs("button",{onClick:I,disabled:!c.trim()||!d.trim(),className:"w-full flex items-center justify-center gap-2 bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Nr,{className:"w-4 h-4"}),"Add Criterion"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:["Current Rubric (",r.length," ",r.length===1?"criterion":"criteria",")"]}),r.length===0?a.jsx("div",{className:"text-center py-12 bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:a.jsx("p",{className:"text-slate-500 text-sm",children:"No rubric criteria yet. Add your first criterion above."})}):r.map((S,T)=>a.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:f===S.id?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Criterion Name"}),a.jsx("input",{type:"text",value:p,onChange:R=>x(R.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Description"}),a.jsx("textarea",{value:g,onChange:R=>v(R.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>D(S.id),className:"flex-1 flex items-center justify-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Ou,{className:"w-4 h-4"}),"Save Changes"]}),a.jsx("button",{onClick:()=>{m(null),x(""),v("")},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Cancel"})]})]}):a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(i7,{className:"w-5 h-5 text-slate-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-[#04ADEE] text-white text-xs font-bold rounded-full",children:T+1}),a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:S.name})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>E(S),className:"px-3 py-1 text-xs font-medium text-slate-600 hover:text-[#04ADEE] hover:bg-slate-50 rounded transition-colors",children:"Edit"}),a.jsx("button",{onClick:()=>O(S.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:a.jsx(bn,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:S.description}),a.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Rating Scale:"}),a.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(R=>a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-600 text-xs font-semibold rounded border border-slate-200",children:R},R))})]})]})]})},S.id))]})]}),a.jsx("div",{className:"border-t border-slate-200 px-6 py-4 bg-slate-50",children:a.jsx("button",{onClick:k,disabled:o,className:"w-full px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":"Done"})})]})]})},Pp=({comeFromStudentProfile:e=!1,studentName:t,essayTitle:r,onBackToStudentProfile:n})=>{var n_;const[s,i]=y.useState([]),[o,l]=y.useState(!0),[c,u]=y.useState(null),[d,h]=y.useState([]),[f,m]=y.useState([]),[p,x]=y.useState(null),[g,v]=y.useState(""),[b,w]=y.useState(""),[_,j]=y.useState("all"),[N,C]=y.useState(""),[I,E]=y.useState("all"),[D,O]=y.useState(""),[k,S]=y.useState(""),[T,R]=y.useState(!1),[M,P]=y.useState(!1),[A,L]=y.useState(null),[U,H]=y.useState(!1),[X,fe]=y.useState(!1),[ae,ue]=y.useState(!1),[Ae,_e]=y.useState([]),[Ne,$]=y.useState({}),[te,J]=y.useState(!1),[z,vt]=y.useState(!1),je=y.useRef(null),ut=at.getStoredUser(),Fe=(ut==null?void 0:ut.name)||"University Counselor";ut!=null&&ut.id;const zr=K=>{const Y=document.createElement("div");return Y.innerHTML=K,Y.querySelectorAll("*").forEach(Se=>{Array.from(Se.attributes).forEach(he=>{he.name.startsWith("data-")&&Se.removeAttribute(he.name)})}),Y.innerHTML};y.useEffect(()=>{c&&je.current&&d.length>0&&setTimeout(()=>B(),50)},[c,d]);const B=()=>{if(!je.current||!c)return;const K=je.current,Y=zr(c.essay_content);K.innerHTML=Y;const pe=K.textContent||"";console.log("Applying highlights. Total text length:",pe.length),console.log("Comments to apply:",d.length),[...d].sort((he,be)=>be.start_position-he.start_position).forEach(he=>{var s_,i_;console.log("Applying comment:",{id:he.id,start:he.start_position,end:he.end_position,text:he.highlighted_text,actualText:pe.substring(he.start_position,he.end_position)});const be=document.createTreeWalker(K,NodeFilter.SHOW_TEXT,null);let ce=0,we=null,Ue=0,Me=null,an=0,Wa=!1;for(;be.nextNode();){const Ui=be.currentNode,cs=Ui.length;if(!Wa&&ce+cs>he.start_position&&(we=Ui,Ue=he.start_position-ce,Wa=!0),Wa&&ce+cs>=he.end_position){Me=Ui,an=he.end_position-ce;break}ce+=cs}if(we&&Me){console.log("Found nodes for highlight:",{startNode:(s_=we.textContent)==null?void 0:s_.substring(0,20),endNode:(i_=Me.textContent)==null?void 0:i_.substring(0,20),startOffset:Ue,endOffset:an});const Ui=document.createRange();Ui.setStart(we,Ue),Ui.setEnd(Me,an);const cs=document.createElement("mark");cs.className="bg-yellow-200 cursor-pointer hover:bg-yellow-300 transition-colors relative group",cs.setAttribute("data-comment-id",he.id),cs.title=he.comment_text;try{Ui.surroundContents(cs);const kl=document.createElement("span");kl.className="invisible group-hover:visible absolute bottom-full left-0 mb-2 w-64 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-10 pointer-events-none",kl.innerHTML=`<div class="font-semibold mb-1">${he.counselor_name}</div><div>${he.comment_text}</div>`,cs.appendChild(kl),console.log("Successfully applied highlight")}catch(kl){console.warn("Could not apply highlight",kl)}}else console.warn("Could not find start/end nodes for comment:",he)})},de=K=>{const Y=new Date(K),pe=Y.getDate(),Se=["th","st","nd","rd"][pe%10>3||Math.floor(pe/10)===1?0:pe%10],be=["January","February","March","April","May","June","July","August","September","October","November","December"][Y.getMonth()],ce=Y.getFullYear(),we=Y.getHours(),Ue=Y.getMinutes().toString().padStart(2,"0"),Me=we>=12?"PM":"AM",an=we%12||12;return`${pe}${Se} ${be} ${ce} at ${an}:${Ue} ${Me}`};y.useEffect(()=>{(async()=>{{const Y=G(V,`University Data/${Fe}/grading_rubric`),pe=await me(Y);fe(pe.exists())}})()},[Fe]),y.useEffect(()=>{const K=G(V,"University Data/Essays"),Y=Pr(K,pe=>{if(!pe.exists()){i([]),l(!1);return}const Se=[],he=pe.val();if(Object.keys(he).forEach(be=>{const ce=he[be];Object.keys(ce).forEach(we=>{var Me,an,Wa;const Ue=ce[we];(Ue.status==="submitted"||Ue.status==="reviewed")&&Se.push({id:`${be}___${we}`,student_name:be,essay_type:Ue.essayType||"personal_statement",essay_title:we,essay_content:Ue.essayText||"",university_name:Ue.universityName||null,submission_date:Ue.submittedAt||Ue.lastModified||new Date().toISOString().split("T")[0],status:Ue.status||"submitted",total_points:((Me=Ue.reviewData)==null?void 0:Me.totalPoints)||null,score:((an=Ue.reviewData)==null?void 0:an.score)||null,font_family:Ue.fontFamily||"Arial",font_size:Ue.fontSize||14,reviewed_at:((Wa=Ue.reviewData)==null?void 0:Wa.reviewedAt)||void 0})})}),Se.sort((be,ce)=>new Date(ce.submission_date).getTime()-new Date(be.submission_date).getTime()),e&&t){const be=Se.filter(ce=>ce.student_name===t);i(be)}else i(Se);l(!1)});return()=>Y()},[e,t,r]),y.useEffect(()=>{if(c&&c.status==="reviewed"){const[K,Y]=c.id.split("___"),pe=G(V,`University Data/Essays/${K}/${Y}`);Pr(pe,Se=>{if(Se.exists()){const he=Se.val();he.reviewData&&(h(he.reviewData.inlineComments||[]),m(he.reviewData.generalComments||[]))}})}},[c==null?void 0:c.id,c==null?void 0:c.status]);const Qe=async K=>{const Y=s.find(pe=>pe.id===K);if(Y){const[pe,Se]=K.split("___"),he=G(V,`University Data/Essays/${pe}/${Se}`);Pr(he,be=>{if(be.exists()){const ce=be.val(),we={...Y,reviewData:ce.reviewData||void 0};u(we),ce.reviewData?(h(ce.reviewData.inlineComments||[]),m(ce.reviewData.generalComments||[])):(h([]),m([]))}});{const be=G(V,`University Data/${Fe}/grading_rubric`),ce=await me(be);fe(ce.exists())}}},Je=async()=>{const K=G(V,`University Data/${Fe}/grading_rubric`);Pr(K,Y=>{if(Y.exists()){const pe=Y.val(),Se=Object.keys(pe).map(be=>({id:be,name:pe[be].name,description:pe[be].description}));_e(Se);const he={};Se.forEach(be=>{he[be.id]={rating:0,whatsMissing:"",howToImprove:""}}),$(he)}},{onlyOnce:!0})},Re=async()=>{if(c){if(!X){ue(!0);return}await Je(),J(!0)}},Ze=(K,Y,pe)=>{$(Se=>({...Se,[K]:{...Se[K],[Y]:pe}}))},et=async()=>{if(!c)return;const K=Ae.length*5,Y=Object.values(Ne).reduce((Me,an)=>Me+an.rating,0),pe=Y/K*100,Se=Ae.map(Me=>({criterionName:Me.name,criterionDescription:Me.description,rating:Ne[Me.id].rating,whatsMissing:Ne[Me.id].rating===5?"":Ne[Me.id].whatsMissing,howToImprove:Ne[Me.id].rating===5?"":Ne[Me.id].howToImprove})),[he,be]=c.id.split("___"),ce=G(V,`University Data/Essays/${he}/${be}`),we=await new Promise(Me=>{Pr(ce,an=>Me(an),{onlyOnce:!0})});if(we.exists()){const Me=we.val();await gt(ce,{...Me,status:"reviewed",reviewData:{reviewedBy:Fe,reviewedAt:new Date().toISOString(),percentageGrade:pe,rubricFeedback:Se}})}const Ue=s.map(Me=>Me.id===c.id?{...Me,status:"reviewed",total_points:K,score:Y}:Me);i(Ue),u({...c,status:"reviewed",total_points:K,score:Y}),J(!1),$({})},Qs=async()=>{if(!c)return;const K=parseInt(D),Y=parseFloat(k);if(isNaN(K)||K<=0){alert("Please enter a valid total points greater than 0");return}if(isNaN(Y)||Y<0){alert("Please enter a valid score greater than or equal to 0");return}if(Y>K){alert("Score cannot exceed total points");return}const[pe,Se]=c.id.split("___"),he=G(V,`University Data/Essays/${pe}/${Se}`),be=await new Promise(we=>{Pr(he,Ue=>we(Ue),{onlyOnce:!0})});if(be.exists()){const we=be.val();await gt(he,{...we,status:"reviewed",reviewData:{...we.reviewData,reviewedBy:Fe,reviewedAt:new Date().toISOString(),totalPoints:K,score:Y,inlineComments:d||[],generalComments:f||[]}})}const ce=s.map(we=>we.id===c.id?{...we,status:"reviewed",total_points:K,score:Y}:we);i(ce),u({...c,status:"reviewed",total_points:K,score:Y}),R(!1),O(""),S("")},Ba=()=>{if(s.length===0)return 0;const K=s.filter(Y=>Y.status==="reviewed");return Math.round(K.length/s.length*100)};y.useEffect(()=>{if(e&&!c&&t&&r){const K=`${t}___${r}`,Y=G(V,`University Data/Essays/${t}/${r}`);Pr(Y,pe=>{var Se,he,be;if(pe.exists()){const ce=pe.val(),we={id:K,student_name:t,essay_type:ce.essayType||"supplement",essay_title:r,essay_content:ce.essayText||"",university_name:ce.universityName||null,submission_date:ce.submittedAt||ce.lastModified||new Date().toISOString().split("T")[0],status:ce.status||"submitted",total_points:((Se=ce.reviewData)==null?void 0:Se.totalPoints)||null,score:((he=ce.reviewData)==null?void 0:he.score)||null,font_family:ce.fontFamily||"Arial",font_size:ce.fontSize||14,reviewed_at:((be=ce.reviewData)==null?void 0:be.reviewedAt)||void 0,reviewData:ce.reviewData||void 0};u(we),ce.reviewData?(h(ce.reviewData.inlineComments||[]),m(ce.reviewData.generalComments||[])):(h([]),m([]))}},{onlyOnce:!0})}},[e,t,r]),y.useEffect(()=>{if(c&&je.current){const K=zr(c.essay_content);je.current.innerHTML=K,d.length>0&&setTimeout(()=>B(),50)}},[c==null?void 0:c.id]);const Js=K=>{switch(K){case"submitted":return a.jsxs("div",{className:"flex items-center gap-1.5 bg-amber-100 text-amber-800 px-3 py-1 rounded-full",children:[a.jsx(Fr,{className:"w-3.5 h-3.5"}),a.jsx("span",{className:"text-xs font-semibold",children:"To be Reviewed"})]});case"reviewed":return a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full",children:[a.jsx(yc,{className:"w-3.5 h-3.5"}),a.jsx("span",{className:"text-xs font-semibold",children:"Reviewed"})]});default:return null}},Fi=s.filter(K=>{const Y=_==="all"?!0:_==="pending"?K.status==="submitted":K.status===_,pe=N.trim()===""||K.student_name.toLowerCase().includes(N.toLowerCase()),Se=I==="all"||K.essay_type===I;return Y&&pe&&Se}),za=s.filter(K=>K.status==="submitted").length,Kn=s.filter(K=>K.status==="reviewed").length,En=Ba();if(o)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})});const Zs=async()=>{H(!1);{const K=G(V,`University Data/${Fe}/grading_rubric`),Y=await me(K);fe(Y.exists())}};if(c){const K=()=>{e&&n?n():u(null)};return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-4",children:[a.jsxs("button",{onClick:K,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[a.jsx(ls,{className:"w-4 h-4"}),e?"Back to Student Profile":"Back to Essays"]}),a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-1",children:c.essay_title}),a.jsxs("p",{className:"text-sm text-slate-600",children:[c.student_name,"  ",c.essay_type==="personal_statement"?"Personal Statement":c.essay_type==="supplement"?"Supplemental Essay":"Activity List",c.university_name&&`  ${c.university_name}`]}),c.status==="reviewed"&&c.total_points&&c.score!==null&&a.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-emerald-50 px-3 py-1.5 rounded-lg border border-emerald-200",children:[a.jsx(Wt,{className:"w-4 h-4 text-emerald-600"}),a.jsxs("span",{className:"text-sm font-semibold text-emerald-900",children:["Grade: ",c.score,"/",c.total_points," (",(c.score/c.total_points*100).toFixed(1),"%)"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[Js(c.status),c.status==="reviewed"&&a.jsxs("button",{onClick:()=>vt(!z),className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Wt,{className:"w-4 h-4"}),z?"Hide":"View"," Feedback"]}),c.status!=="reviewed"&&a.jsxs("button",{onClick:Re,className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Wt,{className:"w-4 h-4"}),"Give Feedback"]})]})]})]}),te?a.jsx("div",{className:"px-8 py-6",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg p-6 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Essay Content"}),a.jsx("button",{onClick:()=>J(!1),className:"text-sm text-[#04ADEE] hover:text-[#0396d5] font-medium",children:"View Full Essay"})]}),a.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 max-h-[70vh] overflow-y-auto",style:{fontFamily:c.font_family,fontSize:`${c.font_size}pt`,lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:c.essay_content}})]}),a.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg p-4 border border-emerald-200 sticky top-0 z-10",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Grade Essay with Rubric"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Rate each criterion and provide detailed feedback"})]}),Ae.map((Y,pe)=>{var Se,he,be,ce;return a.jsxs("div",{className:"bg-white rounded-lg p-5 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-7 h-7 bg-[#04ADEE] text-white text-sm font-bold rounded-full flex-shrink-0",children:pe+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-base font-bold text-slate-900 mb-1",children:Y.name}),a.jsx("p",{className:"text-sm text-slate-600",children:Y.description})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rating (1-5)"}),a.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(we=>{var Ue;return a.jsx("button",{onClick:()=>Ze(Y.id,"rating",we),className:`flex-1 px-4 py-3 rounded-lg font-bold text-sm transition-all ${((Ue=Ne[Y.id])==null?void 0:Ue.rating)===we?"bg-[#04ADEE] text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:we},we)})})]}),((Se=Ne[Y.id])==null?void 0:Se.rating)===5?a.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-emerald-800",children:"Perfect Score!"}),a.jsx("p",{className:"text-sm text-emerald-700 leading-relaxed",children:"This criterion has been excellently fulfilled."})]}):((he=Ne[Y.id])==null?void 0:he.rating)>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"What's missing? (Why didn't they get a 5?)"}),a.jsx("textarea",{value:((be=Ne[Y.id])==null?void 0:be.whatsMissing)||"",onChange:we=>Ze(Y.id,"whatsMissing",we.target.value),placeholder:"Explain what elements are missing or could be improved...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"How to improve to a 5?"}),a.jsx("textarea",{value:((ce=Ne[Y.id])==null?void 0:ce.howToImprove)||"",onChange:we=>Ze(Y.id,"howToImprove",we.target.value),placeholder:"Provide specific suggestions on how to reach a perfect score...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]})]}):null]},Y.id)}),a.jsx("div",{className:"sticky bottom-0 bg-white border-t border-slate-200 pt-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{J(!1),$({})},className:"flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Cancel"}),a.jsxs("button",{onClick:et,disabled:!Object.values(Ne).every(Y=>Y.rating>0&&(Y.rating===5||Y.whatsMissing.trim()&&Y.howToImprove.trim())),className:`flex-1 px-4 py-3 rounded-lg transition-colors font-medium text-sm flex items-center justify-center gap-2 ${Object.values(Ne).every(Y=>Y.rating>0&&(Y.rating===5||Y.whatsMissing.trim()&&Y.howToImprove.trim()))?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:[a.jsx(yc,{className:"w-4 h-4"}),"Submit Grade"]})]})})]})]})}):a.jsxs("div",{className:"px-8 py-6",children:[Ae.length>0&&c.status!=="reviewed"&&a.jsx("div",{className:"mb-4 flex justify-center",children:a.jsxs("button",{onClick:()=>J(!0),className:"flex items-center gap-2 bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm shadow-md",children:[a.jsx(Wt,{className:"w-4 h-4"}),"Back to Grading"]})}),a.jsxs("div",{className:z?"grid grid-cols-[60%_40%] gap-6 max-w-7xl mx-auto items-start":"max-w-5xl mx-auto",children:[a.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] sticky top-6",children:a.jsx("div",{className:"overflow-y-auto flex-1 p-8",children:a.jsx("div",{ref:je,contentEditable:!1,className:"prose prose-lg max-w-none text-slate-700",style:{fontFamily:c.font_family,fontSize:`${c.font_size}pt`,lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:c.essay_content}})})}),c.status==="reviewed"&&z&&((n_=c.reviewData)==null?void 0:n_.rubricFeedback)&&a.jsxs("div",{className:"sticky top-6 bg-gradient-to-br from-emerald-50 to-blue-50 rounded-lg border border-emerald-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] self-start",children:[a.jsx("div",{className:"p-5 border-b border-emerald-200 bg-gradient-to-br from-emerald-50 to-blue-50 flex-shrink-0",children:a.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Wt,{className:"w-5 h-5 text-emerald-600"}),"Rubric Feedback"]})}),a.jsx("div",{className:"overflow-y-auto flex-1 p-5 min-h-0",children:a.jsx("div",{className:"space-y-3",children:c.reviewData.rubricFeedback.map((Y,pe)=>a.jsxs("div",{className:"bg-white border border-emerald-200 rounded-lg p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start gap-2.5 mb-2.5",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-[#04ADEE] text-white text-xs font-bold rounded-full flex-shrink-0",children:pe+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:Y.criterionName}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:Y.criterionDescription})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-emerald-100 px-1.5 py-0.5 rounded flex-shrink-0",children:[a.jsx(Wt,{className:"w-3.5 h-3.5 text-emerald-700 fill-emerald-700"}),a.jsxs("span",{className:"text-xs font-bold text-emerald-700",children:[Y.rating,"/5"]})]})]}),Y.rating===5?a.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-800",children:"Perfect Score!"}),a.jsx("p",{className:"text-xs text-emerald-700 leading-relaxed",children:"This criterion has been excellently fulfilled."})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-red-800 mb-0.5",children:"What's Missing:"}),a.jsx("p",{className:"text-xs text-red-700 leading-relaxed",children:Y.whatsMissing})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-800 mb-0.5",children:"How to Improve:"}),a.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:Y.howToImprove})]})]})]},pe))})})]})]})]}),T&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Grade Essay"}),a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Enter the grading based on your rubric"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Total Points (Maximum possible)"}),a.jsx("input",{type:"number",min:"1",value:D,onChange:Y=>O(Y.target.value),placeholder:"e.g., 100, 50, 20",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Score (Points earned)"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:k,onChange:Y=>S(Y.target.value),placeholder:"e.g., 85, 42.5, 18",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),D&&k&&a.jsx("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-slate-600",children:["Final Grade: ",a.jsxs("span",{className:"font-bold text-slate-900",children:[k,"/",D," (",(parseFloat(k)/parseFloat(D)*100).toFixed(1),"%)"]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{R(!1),O(""),S("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium",children:"Cancel"}),a.jsx("button",{onClick:Qs,className:"flex-1 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium",children:"Save Grade"})]})]})}),ae&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ns,{className:"w-6 h-6 text-amber-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Set Up Rubric First"}),a.jsx("p",{className:"text-sm text-slate-600",children:"You need to set up a grading rubric before you can give feedback on essays. This ensures consistent and fair evaluations."})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>ue(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Close"}),a.jsx("button",{onClick:()=>{ue(!1),H(!0)},className:"flex-1 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm",children:"Set Up Rubric"})]})]})}),U&&a.jsx(s2,{counselorName:Fe,onClose:Zs})]})}return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pe,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Essay Review"})]}),a.jsxs("button",{onClick:()=>H(!0),className:"flex items-center gap-2 bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:[a.jsx(r7,{className:"w-4 h-4"}),X?"Edit Rubric":"Set Rubric"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Pending Review"}),a.jsx(Fr,{className:"w-4 h-4 text-amber-500"})]}),a.jsx("p",{className:"text-2xl font-bold text-slate-900",children:za})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Reviewed"}),a.jsx(yc,{className:"w-4 h-4 text-emerald-500"})]}),a.jsx("p",{className:"text-2xl font-bold text-slate-900",children:Kn})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Review Progress"}),a.jsx(Wt,{className:"w-4 h-4 text-amber-500"})]}),a.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[En,"%"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Sr,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by student name...",value:N,onChange:K=>C(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm"})]}),a.jsxs("select",{value:I,onChange:K=>E(K.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm font-medium text-slate-700 bg-white hover:bg-slate-50",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"personal_statement",children:"Personal Statements"}),a.jsx("option",{value:"supplement",children:"Supplementary Essays"}),a.jsx("option",{value:"activity_list",children:"Activity Lists"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>j("all"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${_==="all"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["All (",s.length,")"]}),a.jsxs("button",{onClick:()=>j("pending"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${_==="pending"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["Pending Review (",za,")"]}),a.jsxs("button",{onClick:()=>j("reviewed"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${_==="reviewed"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["Reviewed (",Kn,")"]})]})]})]}),a.jsx("div",{className:"px-8 py-6",children:a.jsx("div",{className:"grid gap-4",children:Fi.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Pe,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500 text-lg",children:"No essays found"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your filter"})]}):Fi.map(K=>a.jsxs("div",{onClick:()=>Qe(K.id),className:"bg-white rounded-lg shadow-sm p-5 hover:shadow-md transition-all cursor-pointer border border-slate-200 hover:border-[#04ADEE]",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-1",children:K.essay_title}),a.jsxs("p",{className:"text-sm text-slate-600",children:[K.student_name,"  ",K.essay_type==="personal_statement"?"Personal Statement":K.essay_type==="supplement"?"Supplemental Essay":"Activity List",K.university_name&&`  ${K.university_name}`]})]}),Js(K.status)]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[K.status==="reviewed"&&K.reviewed_at?a.jsxs("span",{children:["Reviewed on: ",de(K.reviewed_at)]}):a.jsxs("span",{children:["Submitted on: ",de(K.submission_date)]}),K.status==="reviewed"&&K.total_points&&K.score!==null?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-700 font-semibold",children:[a.jsx(Wt,{className:"w-3.5 h-3.5"}),K.score,"/",K.total_points," (",(K.score/K.total_points*100).toFixed(1),"%)"]}):a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Pu,{className:"w-3.5 h-3.5"}),"Click to review"]})]})]},K.id))})}),U&&a.jsx(s2,{counselorName:Fe,onClose:Zs}),ae&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ns,{className:"w-6 h-6 text-amber-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Set Up Rubric First"}),a.jsx("p",{className:"text-sm text-slate-600",children:"You need to set up a grading rubric before you can give feedback on essays. This ensures consistent and fair evaluations."})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>ue(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Close"}),a.jsx("button",{onClick:()=>{ue(!1),H(!0)},className:"flex-1 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm",children:"Set Up Rubric"})]})]})})]})},i2=["#04adee","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"],a2=({user:e})=>{var m;const[t,r]=y.useState(null),[n,s]=y.useState(null),[i,o]=y.useState(!0),[l,c]=y.useState(null),u=(e==null?void 0:e.name)||((m=at.getStoredUser())==null?void 0:m.name)||"Student";y.useEffect(()=>{(async()=>{try{o(!0),console.log(" Fetching data for student:",u);const[x,g]=await Promise.all([Cne(u),BR(u)]);r(x),s(g)}catch(x){console.error("Error fetching student data:",x)}finally{o(!1)}})()},[u]);const d=p=>{const x=new Date(p),g=new Date;let v=g.getFullYear()-x.getFullYear();const b=g.getMonth()-x.getMonth();return(b<0||b===0&&g.getDate()<x.getDate())&&v--,v},h=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),f=p=>{c(p)};return l?a.jsx(Pp,{comeFromStudentProfile:!0,studentName:u,essayTitle:l.title,onBackToStudentProfile:()=>c(null)}):i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your profile..."})]})}):a.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:a.jsxs("div",{className:"flex items-start space-x-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-3xl",children:u.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:u}),t||n?a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[(n==null?void 0:n.dob)&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Age"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[d(n.dob)," years"]}),a.jsxs("p",{className:"text-xs text-gray-400",children:["DOB: ",h(n.dob)]})]})]}),(n==null?void 0:n.nationality)&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lb,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nationality"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:n.nationality})]})]}),(n==null?void 0:n.budget)&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Da,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Budget"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",parseInt(n.budget).toLocaleString()]})]})]}),(t==null?void 0:t.overallAverage)&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($n,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Overall Average"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[t.overallAverage,"%"]})]})]})]}):null]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(mr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Academic Performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-[#04adee] bg-opacity-10 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-[#04adee]",children:[t.overallAverage,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Overall Average"})]}),a.jsxs("div",{className:"bg-green-100 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.numCourses}),a.jsx("div",{className:"text-sm text-gray-600",children:"Courses"})]})]}),t.subjectAverages&&t.subjectAverages.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Subject Grades"}),a.jsx(nI,{width:"100%",height:300,children:a.jsxs(UR,{data:t.subjectAverages,children:[a.jsx(Gw,{strokeDasharray:"3 3"}),a.jsx(Xw,{dataKey:"subject",angle:-45,textAnchor:"end",height:100}),a.jsx(Qw,{}),a.jsx(GD,{}),a.jsx(Yw,{dataKey:"grade",fill:"#04adee",children:t.subjectAverages.map((p,x)=>a.jsx(yp,{fill:i2[x%i2.length]},`cell-${x}`))})]})})]}),t.previousAverages&&t.previousAverages.length>0&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Academic History"}),a.jsx("div",{className:"space-y-4",children:t.previousAverages.map(p=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"font-semibold text-gray-900 mb-3",children:p.year}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Overall Average"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[p.overallAverage,"%"]})]}),p.subjects.map(x=>a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:x.subject}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[x.grade,"%"]})]},x.subject))]})]},p.year))})]})]}),n&&(n.sat||n.act)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(or,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Test Scores"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.sat&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"SAT"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.sat})]}),n.act&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"ACT"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.act})]})]})]}),(n==null?void 0:n.personalStatement)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Pe,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:n.personalStatement.text}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Last modified: ",h(n.personalStatement.createdAt)]})]}),(n==null?void 0:n.supplementaryEssays)&&n.supplementaryEssays.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Pe,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Supplementary Essays"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[n.supplementaryEssays.length," ",n.supplementaryEssays.length===1?"essay":"essays"]})]}),a.jsx("div",{className:"space-y-3",children:n.supplementaryEssays.map((p,x)=>a.jsx("button",{onClick:()=>f(p),className:"w-full text-left border border-slate-200 rounded-lg p-4 hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:p.title}),p.universityName&&a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.universityName}),a.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(bt,{className:"w-3.5 h-3.5"}),h(p.createdAt)]})})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:p.reviewed&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:[a.jsx(fr,{className:"w-3.5 h-3.5"}),"Reviewed"]})})]})},x))})]})]}),a.jsxs("div",{className:"space-y-6",children:[(n==null?void 0:n.activitiesList)&&n.activitiesList.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(or,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Extracurricular Activities"})]}),a.jsx("ul",{className:"space-y-3",children:n.activitiesList.map(p=>a.jsxs("li",{className:"flex gap-3",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-sm font-semibold",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:p.name}),p.description&&a.jsx("p",{className:"text-sm text-gray-600",children:p.description})]})]},p.id))})]}),(n==null?void 0:n.careerInterests)&&n.careerInterests.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(iO,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Career Interests"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.careerInterests.map((p,x)=>a.jsx("span",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full text-sm font-medium",children:p},x))})]}),(n==null?void 0:n.specialCircumstances)&&a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(ns,{className:"w-5 h-5 text-amber-600"}),a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Special Circumstances"})]}),a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap text-sm",children:n.specialCircumstances})]})]})]})]})},kne="Soofia International School",Ane="Admission Stories",t_=async()=>{try{const e=G(V,`Schoolss/${kne}/${Ane}`),t=await me(e);if(!t.exists())return console.log("No admission stories found"),[];const r=t.val(),n=[];return Object.keys(r).forEach(s=>{const i=r[s],o=[];i["Extra Curricular Activities"]&&Object.keys(i["Extra Curricular Activities"]).forEach(c=>{i["Extra Curricular Activities"][c]&&o.push(c)});const l={id:s.replace(/\s+/g,"-").toLowerCase(),name:i.Name||s,country:i.Country||"",profile_image_url:i["Profile Picture"]||"",current_university:i["Accepted to"]||"",university_location:i["Uni Location"]||"",application_round:i["Application round"]||"",graduation_year:i["Graduation Class"]||"",extracurricular_activities:o,personal_statement:i["Personal Statement"]||"",university_experience:i["Uni Experience"]||"",financial_aid_received:i["Financial Aid"]||"N/A",first_generation:i["First gen"]==="Yes",linkedin_handle:i.Linkedin!=="N/A"?i.Linkedin:void 0,instagram_handle:i.Instagram!=="N/A"?i.Instagram:void 0,current_major:i.Major||"",overall_percentage:i["Overall Average"]?parseFloat(i["Overall Average"].replace("%","")):void 0,sat_score:i["SAT score"]||void 0,act_score:i["ACT score"]||void 0,university_image_url:i["background picture"]||void 0,high_school_gpa_history:i["Highschool History"]||{},subject_grades:i["Latest Transcripts Submitted"]||{}};n.push(l)}),n}catch(e){throw console.error("Error fetching Firebase admission stories:",e),e}},zR=async e=>{try{return(await t_()).find(r=>r.id===e)||null}catch(t){throw console.error("Error fetching Firebase admit profile by ID:",t),t}},Op=e=>`https://flagcdn.com/w40/${({Lesotho:"LS","South Africa":"ZA",Botswana:"BW",Zimbabwe:"ZW",Namibia:"NA",Zambia:"ZM",Malawi:"MW",Kenya:"KE",Nigeria:"NG",Ghana:"GH",Tanzania:"TZ",Uganda:"UG",Rwanda:"RW",Ethiopia:"ET",Mozambique:"MZ",Eswatini:"SZ",Swaziland:"SZ","United States":"US","United Kingdom":"GB",Canada:"CA",Australia:"AU",India:"IN",China:"CN",Japan:"JP",Germany:"DE",France:"FR",Brazil:"BR",Mexico:"MX",Argentina:"AR"}[e]||"UN").toLowerCase()}.png`;function Pne({onViewProfile:e}){const[t,r]=y.useState([]),[n,s]=y.useState([]),[i,o]=y.useState(!0),[l,c]=y.useState(""),[u,d]=y.useState(""),[h,f]=y.useState("");y.useEffect(()=>{m()},[]),y.useEffect(()=>{p()},[l,u,h,t]);const m=async()=>{try{o(!0);const v=await t_();r(v),s(v)}catch(v){console.error("Error loading admit profiles:",v)}finally{o(!1)}},p=()=>{let v=t;l&&(v=v.filter(b=>b.name.toLowerCase().includes(l.toLowerCase())||b.current_university.toLowerCase().includes(l.toLowerCase())||b.country.toLowerCase().includes(l.toLowerCase())||b.current_major.toLowerCase().includes(l.toLowerCase()))),u&&(v=v.filter(b=>b.country===u)),h&&(v=v.filter(b=>b.current_major===h)),s(v)},x=Array.from(new Set(t.map(v=>v.country))).sort(),g=Array.from(new Set(t.map(v=>v.current_major))).sort();return i?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admit Profiles"}),a.jsx("p",{className:"text-gray-600",children:"Explore profiles of students who were successfully admitted to top universities"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name, university, country...",value:l,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Countries"}),x.map(v=>a.jsx("option",{value:v,children:v},v))]}),a.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Majors"}),g.map(v=>a.jsx("option",{value:v,children:v},v))]})]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:n.map(v=>a.jsxs("div",{onClick:()=>e(v.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all cursor-pointer group",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:v.profile_image_url,alt:v.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-gray-900 text-sm mb-2 line-clamp-1",children:v.name}),a.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[a.jsx("img",{src:Op(v.country),alt:v.country,className:"w-5 h-3 mr-1.5 flex-shrink-0 object-cover rounded-sm"}),a.jsx("span",{className:"line-clamp-1",children:v.country})]}),a.jsxs("div",{className:"flex items-start text-xs text-gray-700 mb-2",children:[a.jsx(nr,{className:"w-3 h-3 mr-1 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"line-clamp-2 font-medium",children:v.current_university})]}),a.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:["Accepted ",v.application_round]})]})]},v.id))}),n.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No admit profiles found matching your search."})})]})})}function dt({end:e,duration:t=2e3,decimals:r=0,suffix:n="",className:s=""}){const[i,o]=y.useState(0),l=y.useRef(0),[c,u]=y.useState(!1),d=y.useRef(null);return y.useEffect(()=>{const h=new IntersectionObserver(([f])=>{f.isIntersecting&&u(!0)},{threshold:.1});return d.current&&h.observe(d.current),()=>{d.current&&h.unobserve(d.current)}},[]),y.useEffect(()=>{if(!c)return;const h=Date.now(),f=0,m=()=>{const g=Date.now()-h,v=Math.min(g/t,1),b=1-Math.pow(1-v,4),w=f+(e-f)*b;l.current=w,o(w),v<1?requestAnimationFrame(m):o(e)},p=requestAnimationFrame(m);return()=>{cancelAnimationFrame(p)}},[e,t,c]),a.jsxs("span",{ref:d,className:s,children:[i.toFixed(r),n]})}function One({profileId:e,onBack:t}){const[r,n]=y.useState(null),[s,i]=y.useState(!0),[o,l]=y.useState(null),[c,u]=y.useState(!1);y.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0);const h=await zR(e);n(h),l(null)}catch(h){l("Failed to load admit profile"),console.error(h)}finally{i(!1)}};return s?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o||!r?a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800",children:o||"Profile not found"}),a.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Go Back"})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-6 group",children:[a.jsx(ls,{className:"w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform"}),a.jsx("span",{className:"font-medium",children:"Back to Admit Profiles"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-r from-green-500 to-blue-600",children:[r.university_image_url&&a.jsx("img",{src:r.university_image_url,alt:`${r.current_university} campus`,className:"absolute inset-0 w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-black/20"}),a.jsx("div",{className:"absolute -bottom-16 left-8 z-10",children:a.jsx("img",{src:r.profile_image_url,alt:r.name,className:"w-32 h-32 rounded-2xl border-4 border-white object-cover shadow-xl"})})]}),a.jsxs("div",{className:"pt-20 px-8 pb-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"flex items-center gap-3 mb-2",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name})}),a.jsx("p",{className:"text-lg text-gray-600 mb-3",children:r.current_major}),a.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:Op(r.country),alt:`${r.country} flag`,className:"w-5 h-4 object-cover rounded-sm"}),a.jsx("span",{children:r.country})]})})]}),(r.linkedin_handle||r.instagram_handle)&&a.jsxs("div",{className:"flex gap-3 mb-8",children:[r.linkedin_handle&&a.jsxs("a",{href:r.linkedin_handle,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-all text-sm font-medium",children:[a.jsx(dO,{className:"w-4 h-4"}),"LinkedIn"]}),r.instagram_handle&&a.jsxs("a",{href:`https://instagram.com/${r.instagram_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-pink-50 text-pink-600 rounded-lg hover:bg-pink-100 transition-all text-sm font-medium",children:[a.jsx(uO,{className:"w-4 h-4"}),"Instagram"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-6 mb-4 border-2 border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(nr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Accepted To:"})]}),a.jsx("p",{className:"text-2xl font-bold text-blue-600 mb-1",children:r.current_university}),a.jsx("p",{className:"text-gray-600",children:r.university_location}),r.graduation_year&&a.jsxs("p",{className:"text-sm text-gray-600 mt-2 font-medium",children:["Class of ",r.graduation_year]})]}),a.jsx("div",{className:"mb-8",children:a.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Application submitted to ",r.current_university]})}),a.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Ra,{className:"w-4 h-4 text-blue-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Overall Average"})]}),a.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.overall_percentage?a.jsxs(a.Fragment,{children:[a.jsx(dt,{end:r.overall_percentage,decimals:1}),a.jsx("span",{children:"%"})]}):"N/A"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Aggregate Percentage"})]}),r.sat_score&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(or,{className:"w-4 h-4 text-purple-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"SAT Score"})]}),a.jsx("p",{className:"text-3xl font-bold text-purple-600",children:a.jsx(dt,{end:r.sat_score})})]}),r.act_score&&a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-5 border border-orange-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(or,{className:"w-4 h-4 text-orange-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"ACT Score"})]}),a.jsx("p",{className:"text-3xl font-bold text-orange-600",children:a.jsx(dt,{end:r.act_score})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(nr,{className:"w-4 h-4 text-green-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Application Round"})]}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.application_round})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-yellow-50 rounded-xl p-5 border border-yellow-100",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Wt,{className:"w-4 h-4 text-yellow-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"First Generation Student"})]}),a.jsx("p",{className:"text-gray-700 text-sm",children:r.first_generation?"Yes":"No"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Da,{className:"w-4 h-4 text-green-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Financial Aid Received"})]}),a.jsx("p",{className:"text-gray-700 text-sm",children:r.financial_aid_received})]})]}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Pe,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-sm line-clamp-4",children:r.personal_statement}),a.jsx("button",{onClick:()=>u(!0),className:"mt-3 text-blue-600 hover:text-blue-700 font-medium text-sm underline",children:"Read Full Statement"})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:()=>u(!1),children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pe,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100",children:""})]}),a.jsx("div",{className:"px-6 py-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:r.personal_statement})})]})}),r.subject_grades&&Object.keys(r.subject_grades).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(nr,{className:"w-5 h-5 text-purple-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Latest Transcript Submitted"})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:Object.entries(r.subject_grades).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:h})}),a.jsx("span",{className:"text-2xl font-bold text-purple-600",children:f})]})},m))})]}),r.high_school_gpa_history&&Object.keys(r.high_school_gpa_history).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx($n,{className:"w-5 h-5 text-green-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"High School Performance History"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 italic",children:"Overall grade percentages by year"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:Object.entries(r.high_school_gpa_history).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:h}),a.jsx("span",{className:"text-xl font-bold text-blue-600",children:f})]})},m))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(ja,{className:"w-5 h-5 text-orange-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Extracurricular Activities"})]}),a.jsx("ul",{className:"space-y-2",children:r.extracurricular_activities.map((h,f)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1.5 mr-3 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 text-sm",children:h})]},f))})]}),r.university_experience&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-6 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Wt,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Their Journey: University Experience"})]}),a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-sm italic",children:r.university_experience})]})]})]})]})]})})}class Tne{constructor(){Ha(this,"SCHOOL_NAME","Soofia International School")}async fetchScholarshipsFromFirebase(){try{console.log("=== FETCHING SCHOLARSHIPS FROM FIREBASE ===");const t=G(V,`Schoolss/${this.SCHOOL_NAME}/Scholarships`),r=await me(t);if(!r.exists())return console.log("No Scholarships node found for",this.SCHOOL_NAME),[];const n=r.val();console.log("Found scholarships data:",n);const s=[];return Object.entries(n).forEach(([i,o])=>{if(o&&typeof o=="object"){const l=o,c=[];l["Eligibility Criteria"]&&Object.values(l["Eligibility Criteria"]).forEach(d=>{d&&c.push(d)});const u=[];l.Requirements&&Object.values(l.Requirements).forEach(d=>{d&&u.push(d)}),s.push({id:i.replace(/\s+/g,"-").toLowerCase(),name:i,amount:l["Award amount"]||"",deadline:l.Deadline||"",description:l.Description||"",link:l.Link||"",iconUrl:l["Icon link"],eligibility:c,requirements:u}),console.log(`Extracted scholarship: ${i}`,{amount:l["Award amount"],deadline:l.Deadline,iconUrl:l["Icon link"],eligibilityCriteria:c.length,requirements:u.length})}}),console.log(` Successfully fetched ${s.length} scholarships`),s}catch(t){return console.error(" Error fetching scholarships from Firebase:",t),[]}}}const Ine=new Tne,Dne=()=>{const[e,t]=y.useState(""),[r,n]=y.useState([]),[s,i]=y.useState(!0);y.useEffect(()=>{(async()=>{i(!0);const c=await Ine.fetchScholarshipsFromFirebase();n(c),i(!1)})()},[]);const o=r.filter(l=>l.name.toLowerCase().includes(e.toLowerCase())||l.description.toLowerCase().includes(e.toLowerCase()));return s?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(c7,{className:"w-12 h-12 text-[#04adee] animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading scholarships..."})]})})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Scholarship Opportunities"}),a.jsx("p",{className:"text-gray-600",children:"Discover scholarships that match your profile and financial needs"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search scholarships...",value:e,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o.map(l=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-300",children:[a.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.iconUrl&&a.jsx("img",{src:l.iconUrl,alt:`${l.name} logo`,className:"w-16 h-16 object-contain rounded-lg flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l.name}),a.jsx("p",{className:"text-gray-700 text-sm",children:l.description})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-[#04adee] bg-opacity-10 rounded-lg",children:[a.jsx(Da,{className:"w-6 h-6 text-[#04adee] mx-auto mb-1"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.amount}),a.jsx("div",{className:"text-sm text-gray-600",children:"Award Amount"})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx(bt,{className:"w-6 h-6 text-gray-600 mx-auto mb-1"}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:l.deadline}),a.jsx("div",{className:"text-sm text-gray-600",children:"Deadline"})]})]}),l.eligibility.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Eligibility Criteria:"}),a.jsx("ul",{className:"space-y-1",children:l.eligibility.map((c,u)=>a.jsxs("li",{className:"flex items-center text-sm text-gray-700",children:[a.jsx("div",{className:"w-2 h-2 bg-[#04adee] rounded-full mr-2"}),c]},u))})]}),l.requirements.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Requirements:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.requirements.map((c,u)=>a.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:c},u))})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium w-full",children:["Learn More & Apply",a.jsx(xl,{className:"w-4 h-4 ml-2"})]})})]},l.id))}),o.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(or,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scholarships found"}),a.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})]})},WR=[".","#","$","/","[","]"],Rne=e=>WR.filter(t=>e.includes(t)),Mne=e=>{if(!e||typeof e!="string")return"";let t=e.trim();return WR.forEach(r=>{t=t.replace(new RegExp(`\\${r}`,"g"),"_")}),t=t.replace(/_+/g,"_"),t=t.replace(/^_+|_+$/g,""),t||"requirement"},bx=e=>{if(!e||e.trim()==="")return"Requirement name cannot be empty";const t=Rne(e);return t.length>0?`Cannot contain these characters: ${t.join(", ")}`:null};class Lne{async calculateStudentProgress(t,r){try{console.log(`=== CALCULATING PROGRESS FOR ${r} IN ${t} ===`);const n=G(V,`Schoolss/${t}/Applications/${r}`),s=await me(n);if(!s.exists())return console.log("No applications found for student"),0;const i=s.val();console.log("Applications data:",i);let o=0,l=0;Object.entries(i).forEach(([u,d])=>{console.log(`Processing university: ${u}`),d&&typeof d=="object"&&Object.entries(d).forEach(([h,f])=>{o++,f&&l++,console.log(`  Requirement: ${h} = ${f}`)})});const c=o>0?Math.round(l/o*100):0;return console.log(`Total requirements: ${o}, Completed: ${l}`),console.log(`Calculated completion percentage: ${c}%`),c}catch(n){return console.error("Error calculating student progress:",n),0}}async updateStudentProgress(t,r){try{console.log(`=== UPDATING APPLICATION PROGRESS FOR ${r} ===`);const n=await this.calculateStudentProgress(t,r),s=G(V,`Schoolss/${t}/Application Progress/${r}`);await gt(s,n),console.log(` Updated Application Progress for ${r}: ${n}%`)}catch(n){throw console.error(" Error updating student progress:",n),n}}async updateCurrentUserProgress(){try{const t=at.getCurrentUser();if(!t||!t.name||!t.school){console.log("No user data found, cannot update progress");return}await this.updateStudentProgress(t.school,t.name)}catch(t){throw console.error("Error updating current user progress:",t),t}}async getStudentProgress(t,r){try{const n=G(V,`Schoolss/${t}/Application Progress/${r}`),s=await me(n);if(s.exists())return s.val();const i=await this.calculateStudentProgress(t,r);return await this.updateStudentProgress(t,r),i}catch(n){return console.error("Error getting student progress:",n),0}}async getCurrentUserProgress(){try{const t=at.getCurrentUser();return!t||!t.name||!t.school?(console.log("No user data found, cannot get progress"),0):await this.getStudentProgress(t.school,t.name)}catch(t){return console.error("Error getting current user progress:",t),0}}}const Qf=new Lne,$ne=()=>{const[e,t]=y.useState([]),[r,n]=y.useState({}),[s,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,h]=y.useState(""),[f,m]=y.useState(""),[p,x]=y.useState({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]});y.useEffect(()=>{g()},[]);const g=async()=>{try{console.log("=== LOADING APPLICATIONS FROM FIREBASE (Desktop) ===");const O=at.getCurrentUser();if(!O||!O.name||!O.school){console.log("No user data found, cannot load applications:",O);return}console.log("Loading applications for user:",O.name,"in school:",O.school);const k=G(V,`Schoolss/${O.school}/Applications/${O.name}`);console.log("Firebase path:",`Schoolss/${O.school}/Applications/${O.name}`);const S=await me(k);if(S.exists()){const T=S.val();console.log("Found applications data:",T);const R=[];Object.entries(T).forEach(([M,P],A)=>{if(console.log(`Processing university: ${M}`,P),P&&typeof P=="object"){const L=[];Object.entries(P).forEach(([X,fe],ae)=>{console.log(`  Requirement: ${X} = ${fe}`),L.push({id:Date.now()+A*100+ae,name:X,completed:fe})});const U=L.filter(X=>X.completed).length,H=Math.round(U/L.length*100);console.log(`  University: ${M}, Completion: ${H}%`),R.push({id:Date.now()+A,universityName:M,program:"Program Name",deadline:"2025-05-01",priority:"Medium",status:H===100?"Submitted":"In Progress",completionPercentage:H,requirements:L,notes:""})}}),console.log("Loaded applications:",R),t(R)}else console.log("No applications found in Firebase"),t([])}catch(O){console.error("Error loading applications from Firebase:",O),t([])}},v=async O=>{try{const k=O.split("@")[0].toLowerCase();console.log("Looking for username:",k);const S=G(V,"Schoolss"),T=await me(S);if(!T.exists())return console.log("No Schoolss node found"),null;const R=T.val();console.log("Found schools:",Object.keys(R));for(const[M,P]of Object.entries(R))if(console.log(`Checking school: ${M}`),P&&typeof P=="object"&&"users"in P){const A=P.users;if(A&&k in A)return console.log(`Found user ${k} in school: ${M}`),M}return console.log("User not found in any school"),null}catch(k){return console.error("Error finding user school:",k),null}},b=(O,k)=>{t(S=>S.map(T=>{if(T.id===O){const R=T.requirements.map(L=>L.id===k?{...L,completed:!L.completed}:L),M=R.filter(L=>L.completed).length,P=Math.round(M/R.length*100),A=T.requirements.find(L=>L.id===k);return A&&w(T.universityName,A.name,!A.completed),{...T,requirements:R,completionPercentage:P}}return T}))},w=async(O,k,S)=>{try{const T=at.getCurrentUser();if(T&&T.name&&T.school){const R=G(V,`Schoolss/${T.school}/Applications/${T.name}/${O}/${k}`);await gt(R,S),console.log(`Updated requirement ${k} to ${S} for ${O}`),await Qf.updateCurrentUserProgress(),console.log("Application Progress updated after requirement change")}}catch(T){console.error("Error updating requirement in Firebase:",T)}},_=async O=>{try{console.log("=== STARTING FIREBASE SAVE (Desktop) ==="),console.log("Application data:",O);const k=at.getCurrentUser();if(console.log("Current stored user:",k),!k)throw new Error("No user data found in storage. Please log in again.");const S=`${k.username}@gmail.com`;console.log("Reconstructed email:",S);const T=await v(S);if(console.log("Found school:",T),!T)throw new Error("Could not find your school in the database. Please contact support.");const R=G(V,`Schoolss/${T}/users/${k.username}`),M=await me(R);if(!M.exists())throw new Error("User data not found in school database.");const P=M.val(),A=P.Name||P.name||k.name;console.log("Using user name for Applications:",A);const L=`Schoolss/${T}/Applications/${A}/${O.universityName}`;console.log("Firebase application path:",L);const U={};if(O.requirements.forEach(X=>{X.trim()&&(U[X.trim()]=!1)}),console.log("Requirements data to save:",U),Object.keys(U).length===0)throw new Error("No valid requirements to save");console.log("Attempting to save to Firebase...");const H=G(V,L);return await gt(H,U),console.log(" Application saved successfully to Firebase!"),!0}catch(k){throw console.error(" Error saving application to Firebase:",k),k instanceof Error&&console.error("Error message:",k.message),new Error(`Failed to save application: ${k instanceof Error?k.message:"Unknown error"}`)}},j=async()=>{if(p.universityName&&p.program&&p.requirements.length>0){u(!0);try{await _(p);const O=p.requirements.map((S,T)=>({id:Date.now()+T,name:S,completed:!1})),k={id:Date.now(),universityName:p.universityName,program:p.program,deadline:"2025-05-01",priority:"Medium",status:"In Progress",completionPercentage:0,notes:"",requirements:O};t(S=>[...S,k]),x({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]}),l(!1),h("Application has been added to tracker successfully!"),setTimeout(()=>h(""),3e3),await Qf.updateCurrentUserProgress(),console.log("Application Progress updated after adding new application"),await g()}catch(O){console.error("Error adding application:",O),m(`Error adding application: ${O instanceof Error?O.message:"Please try again."}`),setTimeout(()=>m(""),5e3)}finally{u(!1)}}},N=()=>{p.requirements.length<15&&x(O=>({...O,requirements:[...O.requirements,""]}))},C=O=>{x(k=>({...k,requirements:k.requirements.filter((S,T)=>T!==O)}))},I=(O,k)=>{const S=bx(k);n(T=>{const R={...T};return S?R[O]=S:delete R[O],R}),x(T=>({...T,requirements:T.requirements.map((R,M)=>M===O?k:R)}))},E=O=>{switch(O){case"Submitted":return"text-green-600 bg-green-100";case"Under Review":return"text-blue-600 bg-blue-100";case"Decision Pending":return"text-purple-600 bg-purple-100";default:return"text-yellow-600 bg-yellow-100"}},D={avgCompletion:Math.round(e.reduce((O,k)=>O+k.completionPercentage,0)/e.length)||0,total:e.length,inProgress:e.filter(O=>O.status==="In Progress").length,submitted:e.filter(O=>O.status==="Submitted").length};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[d&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(fr,{className:"w-5 h-5 mr-2"}),d]})}),f&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(St,{className:"w-5 h-5 mr-2"}),f]})}),a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Application Tracker"}),a.jsx("p",{className:"text-gray-600",children:"Monitor your university application progress and deadlines"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[a.jsx(Nr,{className:"w-5 h-5 mr-2"}),"Add Application"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx($n,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[D.avgCompletion,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Completion"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:a.jsx(Pe,{className:"w-6 h-6 text-[#04adee]"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Applications"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(Fr,{className:"w-6 h-6 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.inProgress}),a.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(fr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.submitted}),a.jsx("div",{className:"text-sm text-gray-600",children:"Submitted"})]})]})})]}),a.jsx("div",{className:"space-y-6",children:e.map(O=>{const k=O.requirements.filter(T=>T.completed).length,S=Math.ceil((new Date(O.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:O.universityName}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(O.status)}`,children:O.status})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:O.program}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(bt,{className:"w-4 h-4 mr-1"}),"Deadline: ",new Date(O.deadline).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fr,{className:"w-4 h-4 mr-1"}),S>0?`${S} days left`:"Overdue"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("div",{className:"text-2xl font-bold text-[#04adee]",children:[O.completionPercentage,"%"]}),a.jsx(Ra,{className:"w-5 h-5 text-[#04adee]"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[k," of ",O.requirements.length," completed"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${O.completionPercentage}%`}})})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements Checklist:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.requirements.map(T=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>b(O.id,T.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${T.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:T.completed&&a.jsx(fr,{className:"w-3 h-3"})}),a.jsx("span",{className:`flex-1 ${T.completed?"line-through text-gray-500":"text-gray-700"}`,children:T.name}),T.dueDate&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(T.dueDate).toLocaleDateString()]})]},T.id))})]}),O.notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-gray-700 text-sm",children:O.notes})]})]},O.id)})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Add New Application"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:p.universityName,onChange:O=>x(k=>({...k,universityName:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Stanford University"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program"}),a.jsx("input",{type:"text",value:p.program,onChange:O=>x(k=>({...k,program:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:p.requirements.map((O,k)=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:O,onChange:S=>I(k,S.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${r[k]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),a.jsx("button",{onClick:()=>C(k),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(bn,{className:"w-4 h-4"})})]}),r[k]&&a.jsx("p",{className:"text-red-600 text-xs ml-3",children:r[k]})]},k))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:j,disabled:c||!p.universityName||!p.program||Object.keys(r).length>0,className:"flex-1 bg-[#04adee] text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),a.jsx("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:"Cancel"})]})]})}),e.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Pe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your university applications to stay organized."}),a.jsx("button",{onClick:()=>l(!0),className:"bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Add Your First Application"})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Application"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:p.universityName,onChange:O=>x(k=>({...k,universityName:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., University of Chicago"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),a.jsx("input",{type:"text",value:p.program,onChange:O=>x(k=>({...k,program:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:p.requirements.map((O,k)=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:O,onChange:S=>I(k,S.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${r[k]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),a.jsx("button",{onClick:()=>C(k),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(bn,{className:"w-4 h-4"})})]}),r[k]&&a.jsx("p",{className:"text-red-600 text-xs ml-3",children:r[k]})]},k))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:j,disabled:c||!p.universityName.trim()||!p.program.trim()||Object.keys(r).length>0,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),a.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})})]})};class Fne{constructor(){Ha(this,"SCHOOL_NAME","Soofia International School")}async fetchResourcesFromFirebase(){try{console.log("=== FETCHING RESOURCES FROM FIREBASE ===");const t=G(V,`Schoolss/${this.SCHOOL_NAME}/Resources`),r=await me(t);if(!r.exists())return console.log("No Resources node found for",this.SCHOOL_NAME),[];const n=r.val();console.log("Found resources data:",n);const s=[];return Object.entries(n).forEach(([i,o])=>{if(o&&typeof o=="object"){const l=o,c=[];l["Key Words"]&&Object.keys(l["Key Words"]).forEach(u=>{l["Key Words"][u]&&c.push(u)}),s.push({id:i.replace(/\s+/g,"-").toLowerCase(),title:i,type:l["Resource Type"]||"Article",author:l.Owner||"Unknown",description:l.Description||"",url:l.Link||"",category:l["Helps with"]||"General",duration:l.Duration,keywords:c}),console.log(`Extracted resource: ${i}`,{type:l["Resource Type"],author:l.Owner,category:l["Helps with"],keywords:c})}}),console.log(` Successfully fetched ${s.length} resources`),s}catch(t){return console.error(" Error fetching resources from Firebase:",t),[]}}}const Une=new Fne,Bne=()=>{const[e,t]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(""),[o,l]=y.useState([]),[c,u]=y.useState(!0);y.useEffect(()=>{d()},[]);const d=async()=>{u(!0);try{const g=await Une.fetchResourcesFromFirebase();l(g)}catch(g){console.error("Error loading resources:",g)}finally{u(!1)}},h=["Essays","Applications","Financial Aid","University Selection","Test Prep","General"],f=["Article","Video","Guide","Template","Webinar"],m=o.filter(g=>{const v=g.title.toLowerCase().includes(e.toLowerCase())||g.description.toLowerCase().includes(e.toLowerCase())||g.author.toLowerCase().includes(e.toLowerCase())||g.keywords.some(_=>_.toLowerCase().includes(e.toLowerCase())),b=r===""||g.category===r,w=s===""||g.type===s;return v&&b&&w}),p=g=>{switch(g){case"Video":return yl;case"Article":return Pe;case"Guide":return mr;case"Template":return ob;case"Webinar":return ja;default:return Pe}},x=g=>({Article:"bg-blue-100 text-blue-800",Video:"bg-red-100 text-red-800",Guide:"bg-green-100 text-green-800",Template:"bg-purple-100 text-purple-800",Webinar:"bg-orange-100 text-orange-800"})[g]||"bg-gray-100 text-gray-800";return c?a.jsx("div",{className:"p-6 max-w-7xl mx-auto flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading resources..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Resources & Guides"}),a.jsx("p",{className:"text-gray-600",children:"Comprehensive resources to help you succeed in your university applications"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search resources, authors, or topics...",value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(s7,{className:"w-5 h-5 text-gray-500 mr-2"}),a.jsxs("select",{value:r,onChange:g=>n(g.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Categories"}),h.map(g=>a.jsx("option",{value:g,children:g},g))]})]}),a.jsx("div",{children:a.jsxs("select",{value:s,onChange:g=>i(g.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Types"}),f.map(g=>a.jsx("option",{value:g,children:g},g))]})})]})]})}),a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wt,{className:"w-6 h-6 text-[#04adee] mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[#04adee]",children:"Curated Resources"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Hand-picked resources from successful students and admissions experts."})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:m.map(g=>{const v=p(g.type);return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:a.jsx(v,{className:"w-5 h-5 text-[#04adee]"})}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(g.type)}`,children:g.type})]}),a.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 px-3 py-1 rounded-full font-medium",children:g.category})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:g.title}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",g.author]}),a.jsx("p",{className:"text-gray-700 mb-3",children:g.description}),g.keywords.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Key Topics:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:g.keywords.map(b=>a.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-3 py-1 rounded-full font-medium border border-[#04adee] border-opacity-20",children:b},b))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:g.duration&&a.jsx("span",{children:g.duration})}),a.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:["Access Resource",a.jsx(xl,{className:"w-4 h-4 ml-2"})]})]})]},g.id)})}),m.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(mr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No resources found"}),a.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})]})},r_=({counselorEmail:e,counselorName:t,counselorUniversity:r,counselorImage:n,onBack:s})=>{const[i,o]=y.useState([]),[l,c]=y.useState(null),[u,d]=y.useState(""),[h,f]=y.useState(!0),[m,p]=y.useState(!1),[x,g]=y.useState(null),[v,b]=y.useState(!1);y.useEffect(()=>{w()},[t]);const w=async()=>{try{f(!0),g(null);const C=`University Data/Timeslots/${t}`,I=G(V,C),E=await me(I);if(E.exists()){const D=E.val(),O=[];Object.entries(D).forEach(([k,S])=>{const[T,R]=k.split("_");O.push({id:k,date:T,timeRange:R,isAvailable:S===!1,rawKey:k})}),O.sort((k,S)=>{const T=k.date.localeCompare(S.date);return T!==0?T:k.timeRange.localeCompare(S.timeRange)}),o(O)}else o([]),g("No timeslots available for this counselor")}catch(C){console.error("Error loading timeslots:",C),g(`Failed to load timeslots: ${C instanceof Error?C.message:"Unknown error"}`),o([])}finally{f(!1)}},_=async()=>{if(!l||!u.trim()){g("Please select a time slot and provide an agenda");return}try{p(!0),g(null);const C=at.getStoredUser();if(!C||!C.name){g("Unable to identify logged-in student"),p(!1);return}const I=C.name,E=new Date().toISOString(),O=`https://meet.jit.si/educare-meeting-${`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}`,k=`University Data/Timeslots/${t}/${l.rawKey}`,S=G(V,k);await gt(S,!0);const T=`Upcoming meetings/${t}/${I}/${l.rawKey}`,R=G(V,T);await gt(R,{agenda:u.trim(),requestedAt:E,meetingLink:O,studentEmail:C.email||"",counselorName:t}),p(!1),b(!0),setTimeout(()=>{s()},2500)}catch(C){console.error("Error creating meeting request:",C),g("Failed to submit meeting request"),p(!1)}},j=C=>new Date(C).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=()=>{const C={};return i.forEach(I=>{C[I.date]||(C[I.date]=[]),C[I.date].push(I)}),C};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 text-white shadow-lg",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-6",children:[a.jsxs("button",{onClick:s,className:"flex items-center text-white hover:bg-white hover:bg-opacity-20 rounded-lg px-4 py-2 transition-colors mb-4",children:[a.jsx(ls,{className:"w-5 h-5 mr-2"}),"Back to Counselors"]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:n,alt:t,className:"w-20 h-20 rounded-full object-cover mr-5 border-4 border-white shadow-lg",onError:C=>{C.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Book a Meeting"}),a.jsx("p",{className:"text-xl text-blue-100",children:t}),a.jsx("p",{className:"text-blue-100",children:r})]})]})]})}),a.jsx("div",{className:"max-w-5xl mx-auto px-6 py-6",children:v?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"bg-green-50 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:a.jsx(fr,{className:"w-10 h-10 text-green-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Meeting Request Sent!"}),a.jsx("p",{className:"text-gray-600 text-base mb-2",children:"Your counselor will review your request and respond soon."}),a.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-4 inline-block",children:a.jsx("p",{className:"text-[#04adee] font-medium text-sm",children:"Check your meetings page for updates"})})]}):h?a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:a.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(sf,{className:"w-12 h-12 animate-spin text-[#04adee] mb-3"}),a.jsx("span",{className:"text-lg text-gray-600 font-medium",children:"Loading available time slots..."}),a.jsx("span",{className:"text-sm text-gray-500 mt-1",children:"Please wait a moment"})]})}):i.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:a.jsx(bt,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Available Slots"}),a.jsx("p",{className:"text-gray-600 mb-1 text-sm",children:"This counselor has no available time slots at the moment."}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Please check back later or contact them via email."}),a.jsx("button",{onClick:s,className:"mt-6 px-6 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors text-sm",children:"Go Back"})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 rounded-full p-2 mr-3",children:a.jsx(bt,{className:"w-5 h-5 text-[#04adee]"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Choose Your Time"})]}),a.jsx("div",{className:"space-y-6",children:Object.entries(N()).map(([C,I])=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[a.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx("div",{className:"w-1 h-6 bg-[#04adee] rounded mr-3"}),j(C)]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:I.map(E=>a.jsx("button",{onClick:()=>E.isAvailable&&c(E),disabled:!E.isAvailable,className:`px-3 py-3 rounded-lg border-2 transition-all ${E.isAvailable?(l==null?void 0:l.id)===E.id?"border-[#04adee] bg-[#04adee] text-white shadow-lg scale-105":"border-gray-300 bg-white hover:border-[#04adee] hover:shadow-md transform hover:scale-105":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Fr,{className:`w-4 h-4 mb-1.5 ${E.isAvailable?(l==null?void 0:l.id)===E.id?"text-white":"text-[#04adee]":"text-gray-400"}`}),a.jsx("span",{className:"text-sm font-bold",children:E.timeRange}),!E.isAvailable&&a.jsx("span",{className:"text-xs mt-1 text-gray-500",children:"Booked"})]})},E.id))})]},C))})]}),a.jsxs("div",{className:"mb-6 bg-gray-50 rounded-xl p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 rounded-full p-2 mr-3",children:a.jsx(ns,{className:"w-5 h-5 text-[#04adee]"})}),a.jsx("label",{className:"text-base font-bold text-gray-900",children:"Meeting Agenda"})]}),a.jsx("textarea",{value:u,onChange:C=>d(C.target.value),placeholder:"What would you like to discuss? (e.g., college application strategy, essay review, major selection...)",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-[#04adee] resize-none bg-white transition-all text-sm"}),a.jsxs("p",{className:"text-xs text-gray-600 mt-3 flex items-start",children:[a.jsx("span",{className:"text-[#04adee] mr-2",children:""}),"A clear agenda helps your counselor prepare and makes the meeting more productive"]})]}),x&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[a.jsx(ns,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-red-800",children:"Error"}),a.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:x})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{onClick:_,disabled:!l||!u.trim()||m,className:"flex-1 bg-gradient-to-r from-[#04adee] to-blue-600 text-white px-6 py-3 rounded-lg font-semibold text-base hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transform hover:scale-105 disabled:hover:scale-100",children:m?a.jsxs(a.Fragment,{children:[a.jsx(sf,{className:"w-5 h-5 animate-spin mr-2"}),"Sending Request..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fr,{className:"w-5 h-5 mr-2"}),"Request Meeting"]})}),a.jsx("button",{onClick:s,disabled:m,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold text-base hover:bg-gray-50 transition-all disabled:opacity-50 text-gray-700 hover:border-gray-400",children:"Cancel"})]})]})})]})},zne=({onBookMeeting:e})=>{const[t,r]=y.useState("counselors"),[n,s]=y.useState([]),[i,o]=y.useState([]),[l,c]=y.useState(!0),[u,d]=y.useState(null),[h,f]=y.useState(!1),[m,p]=y.useState(null);y.useEffect(()=>{x(),g()},[]);const x=async()=>{try{c(!0),d(null);const w=at.getStoredUser();if(!w||!w.name){d("Unable to identify logged-in student"),s([]),c(!1);return}const _=w.name,N=G(V,"University Data/Caseloads"),C=await me(N),I=new Set;if(C.exists()){const k=C.val();Object.entries(k).forEach(([S,T])=>{T&&typeof T=="object"&&T[_]===!0&&I.add(S)})}const D=G(V,"University Data/University Counsellors /"),O=await me(D);if(O.exists()){const k=O.val(),S=[];Object.entries(k).forEach(([T,R])=>{if(R&&typeof R=="object"){const M=R,P=M.Name||T;if(I.has(P)){const A=[];M.Languages&&typeof M.Languages=="object"&&Object.entries(M.Languages).forEach(([H,X])=>{X===!0&&A.push(H)});const L=[];M.Specialties&&typeof M.Specialties=="object"&&Object.entries(M.Specialties).forEach(([H,X])=>{X===!0&&L.push(H)});const U={id:T,name:P,email:M.Email||M.email||"",university:M.University||"",year:M.Year||"",location:M.Location||"",profilePicture:M["Profile Picture"]||"https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150",bookingLink:M["Booking Link"]||M["booking link"]||"",languages:A,specialties:L,bio:`Expert counselor specializing in ${L.join(", ")}. Passionate about helping students achieve their academic dreams and navigate the university application process.`,experience:"3+ years guiding students",availability:"Mon-Fri: 9AM-5PM"};S.push(U)}}}),s(S)}else s([])}catch(w){console.error("Error loading counselors:",w),d(`Failed to load counselors: ${w instanceof Error?w.message:"Unknown error"}`),s([])}finally{c(!1)}},g=async()=>{try{const w=at.getStoredUser();if(!w||!w.name){o([]);return}const _=w.name,N=G(V,"Upcoming meetings"),C=await me(N);if(!C.exists()){o([]);return}const I=C.val(),E=[];Object.entries(I).forEach(([D,O])=>{if(O&&typeof O=="object"&&O[_]){const k=O[_];Object.entries(k).forEach(([S,T])=>{const[R,M]=S.split("_"),[P]=M.split("-"),[A,L,U]=R.split("-").map(Number),[H,X]=P.split(":").map(Number),fe=new Date(A,L-1,U,H,X),ae=fe.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),Ae=new Date(T.requestedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),_e=G(V,`University Data/University Counsellors /${D}`);me(_e).then(Ne=>{let $="";Ne.exists()&&($=Ne.val().university||""),E.push({id:`${D}-${S}`,counselorName:D,counselorUniversity:$,counselorImage:"",date:ae,time:M.replace("-"," - "),agenda:T.agenda||"",status:"accepted",requestedDate:Ae,meetingDateTime:fe,meetingLink:T.meetingLink||void 0}),E.sort((te,J)=>te.meetingDateTime.getTime()-J.meetingDateTime.getTime()),o([...E])})})}}),E.length===0&&o([])}catch(w){console.error("Error loading upcoming meetings:",w),o([])}},v=w=>{p(w),f(!0)},b=w=>{if(w.email){const _=encodeURIComponent("University Guidance Consultation Request"),j=encodeURIComponent(`Dear ${w.name},

I would like to schedule a consultation regarding university guidance.

Best regards`);window.open(`mailto:${w.email}?subject=${_}&body=${j}`,"_self")}else alert("Email address not available for this counselor.")};return l?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(sf,{className:"w-8 h-8 animate-spin text-[#04adee] mr-3"}),a.jsx("span",{className:"text-lg text-gray-600",children:"Loading counselors..."})]})}):u?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[a.jsx("p",{className:"text-red-600 mb-4",children:u}),a.jsx("button",{onClick:x,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):h&&m?a.jsx(r_,{counselorName:m.name,counselorUniversity:m.university,counselorImage:m.profilePicture,counselorEmail:m.email,onBack:()=>{f(!1),p(null),g()}}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"University Counselors"}),a.jsx("p",{className:"text-gray-600",children:"Connect with expert counselors and manage your meetings"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>r("counselors"),className:`flex-1 px-6 py-4 font-medium transition-colors ${t==="counselors"?"text-[#04adee] border-b-2 border-[#04adee]":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Yo,{className:"w-5 h-5 mr-2"}),"Counselors"]})}),a.jsx("button",{onClick:()=>r("meetings"),className:`flex-1 px-6 py-4 font-medium transition-colors ${t==="meetings"?"text-[#04adee] border-b-2 border-[#04adee]":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(bt,{className:"w-5 h-5 mr-2"}),"Upcoming Meetings"]})})]})}),t==="counselors"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(w=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:a.jsxs("div",{className:"px-6 pt-6 pb-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("img",{src:w.profilePicture,alt:w.name,className:"w-20 h-20 rounded-full object-cover shadow-md",onError:_=>{_.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),a.jsx("div",{className:"ml-4 mt-1",children:a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:w.name})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(nr,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),a.jsx("span",{className:"truncate",children:w.university})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(or,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),a.jsxs("span",{children:[w.year," Student"]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(fO,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),a.jsx("span",{className:"truncate",children:w.location})]})]}),w.specialties.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Specialties"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.specialties.map(_=>a.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-3 py-1 rounded-full",children:_},_))})]}),w.languages.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Languages"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.languages.map(_=>a.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:_},_))})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsxs("button",{onClick:()=>v(w),className:"flex-1 flex items-center justify-center bg-[#04adee] text-white px-4 py-2.5 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:[a.jsx(bt,{className:"w-4 h-4 mr-2"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>b(w),className:"flex-1 flex items-center justify-center bg-gray-600 text-white px-4 py-2.5 rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:[a.jsx(Au,{className:"w-4 h-4 mr-2"}),"Email"]})]})]})},w.id))}),n.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors available"}),a.jsx("p",{className:"text-gray-600",children:"Counselors data is not available at the moment."})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:i.filter(w=>w.meetingDateTime>new Date).map(w=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border-2 border-green-200 transition-all hover:shadow-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:w.counselorName}),a.jsx("p",{className:"text-sm text-gray-600",children:w.counselorUniversity})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(bt,{className:"w-4 h-4 mr-2 text-[#04adee]"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Meeting Date:"}),a.jsx("p",{className:"text-gray-600",children:w.date})]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Fr,{className:"w-4 h-4 mr-2 text-[#04adee]"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Time Slot:"}),a.jsx("p",{className:"text-gray-600",children:w.time})]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Yo,{className:"w-4 h-4 mr-2 text-[#04adee]"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Requested On:"}),a.jsx("p",{className:"text-gray-600",children:w.requestedDate})]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Pu,{className:"w-4 h-4 mr-2 text-gray-500 mt-1 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Meeting Agenda"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:w.agenda})]})]})}),a.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex items-start flex-1",children:[a.jsx(fr,{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-900 mb-1",children:"Meeting Confirmed!"}),a.jsx("p",{className:"text-sm text-green-800",children:"Your meeting has been confirmed. Click the button below to join the video call at the scheduled time."})]})]})})}),w.meetingLink&&a.jsxs("button",{onClick:()=>window.open(w.meetingLink,"_blank"),className:"w-full bg-gradient-to-r from-[#04adee] to-[#0396d5] text-white px-6 py-3 rounded-lg font-semibold hover:from-[#0396d5] hover:to-[#027fb8] transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 mt-4",children:[a.jsx(yl,{className:"w-5 h-5"}),"Join Video Meeting"]}),!w.meetingLink&&a.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-4 mt-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ns,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Meeting Link Not Available"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"The video meeting link will be available shortly. Please check back closer to the meeting time."})]})]})})]})},w.id))}),i.filter(w=>w.meetingDateTime>new Date).length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[a.jsx(bt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No upcoming meetings"}),a.jsx("p",{className:"text-gray-600",children:"You have no confirmed meetings scheduled at this time."})]})]})]})},HR=({userRole:e="student"})=>{const t=[{id:"1",name:"Dr. Sarah Johnson",avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",role:"counselor",lastMessage:"I reviewed your essay draft. Let's discuss the revisions.",lastMessageTime:new Date(Date.now()-3e5),unreadCount:2,online:!0,typing:!1},{id:"2",name:"Michael Chen",avatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=100",role:"counselor",lastMessage:"Great progress on your Stanford application!",lastMessageTime:new Date(Date.now()-72e5),unreadCount:0,online:!1},{id:"3",name:"Emma Williams",avatar:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=100",role:"counselor",lastMessage:"Don't forget the scholarship deadline tomorrow",lastMessageTime:new Date(Date.now()-864e5),unreadCount:1,online:!0}],r=[{id:"s1",name:"Emma Wilson",avatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"Thank you for the feedback on my essay!",lastMessageTime:new Date(Date.now()-10*6e4),unreadCount:1,online:!0,typing:!1},{id:"s2",name:"Sophie Chen",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"When can we discuss my MIT application?",lastMessageTime:new Date(Date.now()-45*6e4),unreadCount:2,online:!0,typing:!1},{id:"s3",name:"Alex Johnson",avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"I submitted my Stanford application!",lastMessageTime:new Date(Date.now()-3*36e5),unreadCount:0,online:!1},{id:"s4",name:"Maria Garcia",avatar:"https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"Could you review my personal statement?",lastMessageTime:new Date(Date.now()-5*36e5),unreadCount:0,online:!1},{id:"s5",name:"James Kim",avatar:"https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"Thanks for helping with the scholarship application",lastMessageTime:new Date(Date.now()-24*36e5),unreadCount:0,online:!0}],[n]=y.useState(e==="counselor"?r:t),[s,i]=y.useState(n[0]),o=[{id:"1",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Hi! I hope you're doing well. I wanted to touch base about your college essays.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:"2",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Hi Dr. Johnson! Yes, I've been working on them. I finished my personal statement draft.",timestamp:new Date(Date.now()-35e5),type:"text",status:"read"},{id:"3",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Personal Statement - Draft 1",timestamp:new Date(Date.now()-34e5),type:"document",mediaUrl:"#",fileName:"Personal_Statement_Draft1.pdf",fileSize:"245 KB",status:"read"},{id:"4",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Excellent! I'll review it this evening and provide detailed feedback.",timestamp:new Date(Date.now()-32e5),type:"text",status:"read"},{id:"5",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"I've reviewed your essay. Here are my detailed notes and suggestions.",timestamp:new Date(Date.now()-18e5),type:"text",status:"read"},{id:"6",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Essay Feedback - Detailed Comments",timestamp:new Date(Date.now()-17e5),type:"document",mediaUrl:"#",fileName:"Essay_Feedback_Comments.pdf",fileSize:"892 KB",status:"read"},{id:"7",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Thank you so much! I really appreciate the detailed feedback. I'll work on the revisions this weekend.",timestamp:new Date(Date.now()-3e5),type:"text",status:"delivered"},{id:"8",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Perfect! Feel free to reach out if you have any questions while you're working on it.",timestamp:new Date(Date.now()-6e4),type:"text",status:"read"}],l=[{id:"1",senderId:"s1",senderName:"Emma Wilson",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Hi Dr. Johnson! I just finished my Stanford supplemental essay. Would you mind taking a look?",timestamp:new Date(Date.now()-72e5),type:"text",status:"read"},{id:"2",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",content:"Of course! Please share it with me and I'll review it today.",timestamp:new Date(Date.now()-7e6),type:"text",status:"read"},{id:"3",senderId:"s1",senderName:"Emma Wilson",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Stanford Supplemental Essay - Draft",timestamp:new Date(Date.now()-68e5),type:"document",mediaUrl:"#",fileName:"Stanford_Supplemental_Essay.pdf",fileSize:"178 KB",status:"read"},{id:"4",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",content:"I've reviewed your essay! Overall, it's a strong piece. I've added some comments for areas that could use more depth.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:"5",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",content:"Stanford Essay - Feedback and Comments",timestamp:new Date(Date.now()-35e5),type:"document",mediaUrl:"#",fileName:"Stanford_Essay_Feedback.pdf",fileSize:"421 KB",status:"read"},{id:"6",senderId:"s1",senderName:"Emma Wilson",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Thank you for the feedback on my essay! This is really helpful. I'll work on incorporating your suggestions.",timestamp:new Date(Date.now()-6e5),type:"text",status:"delivered"}],[c,u]=y.useState(e==="counselor"?l:o),[d,h]=y.useState(""),[f,m]=y.useState(!1),[p,x]=y.useState(""),[g,v]=y.useState(!1),[b,w]=y.useState(!0),_=y.useRef(null),j=y.useRef(null),N=()=>{var S;(S=_.current)==null||S.scrollIntoView({behavior:"smooth"})};y.useEffect(()=>{N()},[c]);const C=()=>{if(!d.trim())return;const S={id:Date.now().toString(),senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:d,timestamp:new Date,type:"text",status:"sending"};u([...c,S]),h(""),setTimeout(()=>{u(T=>T.map(R=>R.id===S.id?{...R,status:"sent"}:R))},500),setTimeout(()=>{u(T=>T.map(R=>R.id===S.id?{...R,status:"delivered"}:R))},1e3)},I=S=>{var T;v(!1),(T=j.current)==null||T.click()},E=S=>{const R=new Date().getTime()-S.getTime(),M=Math.floor(R/6e4),P=Math.floor(R/36e5),A=Math.floor(R/864e5);return M<1?"Just now":M<60?`${M}m ago`:P<24?`${P}h ago`:A<7?`${A}d ago`:S.toLocaleDateString()},D=S=>S.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),O=S=>{switch(S){case"sent":return a.jsx(yc,{className:"w-4 h-4 text-gray-400"});case"delivered":return a.jsx(R1,{className:"w-4 h-4 text-gray-400"});case"read":return a.jsx(R1,{className:"w-4 h-4 text-blue-500"});default:return a.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse"})}},k=S=>{const T=S.senderId==="me";return a.jsx("div",{className:`flex ${T?"justify-end":"justify-start"} mb-4`,children:a.jsxs("div",{className:`flex ${T?"flex-row-reverse":"flex-row"} items-end max-w-[70%]`,children:[!T&&a.jsx("img",{src:S.senderAvatar,alt:S.senderName,className:"w-8 h-8 rounded-full mr-2"}),a.jsxs("div",{children:[S.type==="text"&&a.jsx("div",{className:`px-4 py-2 rounded-2xl ${T?"bg-blue-600 text-white rounded-br-sm":"bg-gray-100 text-gray-900 rounded-bl-sm"}`,children:a.jsx("p",{className:"text-sm",children:S.content})}),S.type==="document"&&a.jsx("div",{className:`px-4 py-3 rounded-2xl border ${T?"bg-blue-50 border-blue-200 rounded-br-sm":"bg-gray-50 border-gray-200 rounded-bl-sm"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Pe,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:S.fileName}),a.jsx("p",{className:"text-xs text-gray-500",children:S.fileSize})]}),a.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:a.jsx(ob,{className:"w-4 h-4 text-gray-600"})})]})}),S.type==="image"&&a.jsx("div",{className:"rounded-2xl overflow-hidden",children:a.jsx("img",{src:S.mediaUrl,alt:"Shared image",className:"max-w-full h-auto"})}),a.jsxs("div",{className:`flex items-center space-x-1 mt-1 ${T?"justify-end":"justify-start"}`,children:[a.jsx("span",{className:"text-xs text-gray-500",children:D(S.timestamp)}),T&&O(S.status)]})]})]})},S.id)};return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsxs("div",{className:`${b?"block":"hidden"} lg:block w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Messages"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search conversations...",value:p,onChange:S=>x(S.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 border-none rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:n.map(S=>a.jsxs("button",{onClick:()=>{i(S),w(!1)},className:`w-full p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors border-b border-gray-100 ${(s==null?void 0:s.id)===S.id?"bg-blue-50":""}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:S.avatar,alt:S.name,className:"w-12 h-12 rounded-full object-cover"}),S.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),a.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:S.name}),a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:E(S.lastMessageTime)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm text-gray-600 truncate",children:S.typing?a.jsx("span",{className:"text-blue-600 italic",children:"typing..."}):S.lastMessage}),S.unreadCount>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:S.unreadCount})]}),a.jsx("span",{className:"text-xs text-gray-500 capitalize",children:S.role})]})]},S.id))})]}),s?a.jsxs("div",{className:`${b?"hidden":"flex"} lg:flex flex-1 flex-col`,children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>w(!0),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(ls,{className:"w-5 h-5"})}),a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-full object-cover"}),s.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),a.jsx("p",{className:"text-xs text-gray-500",children:s.online?f?a.jsx("span",{className:"text-blue-600",children:"typing..."}):"Online":"Offline"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(f7,{className:"w-5 h-5 text-gray-600"})}),a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(yl,{className:"w-5 h-5 text-gray-600"})}),a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(u7,{className:"w-5 h-5 text-gray-600"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[c.map(k),f&&a.jsxs("div",{className:"flex items-end space-x-2",children:[a.jsx("img",{src:s.avatar,alt:s.name,className:"w-8 h-8 rounded-full"}),a.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-bl-sm px-4 py-3",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),a.jsx("div",{ref:_})]}),a.jsxs("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:[a.jsxs("div",{className:"flex items-end space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>v(!g),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(d7,{className:"w-5 h-5 text-gray-600"})}),g&&a.jsxs("div",{className:"absolute bottom-full mb-2 left-0 bg-white rounded-lg shadow-lg border border-gray-200 py-2 w-48",children:[a.jsxs("button",{onClick:()=>I(),className:"w-full px-4 py-2 flex items-center space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(a7,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Upload Image"})]}),a.jsxs("button",{onClick:()=>I(),className:"w-full px-4 py-2 flex items-center space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(Pe,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Upload Document"})]})]})]}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),onKeyPress:S=>S.key==="Enter"&&C(),placeholder:"Type a message...",className:"w-full px-4 py-3 bg-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10"}),a.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 rounded transition-colors",children:a.jsx(g7,{className:"w-5 h-5 text-gray-600"})})]}),a.jsx("button",{onClick:C,disabled:!d.trim(),className:"p-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed rounded-full transition-colors",children:a.jsx(af,{className:"w-5 h-5 text-white"})})]}),a.jsx("input",{ref:j,type:"file",className:"hidden",accept:"image/*,.pdf,.doc,.docx"})]})]}):a.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(af,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select a conversation"}),a.jsx("p",{className:"text-gray-500",children:"Choose a conversation from the list to start messaging"})]})})]})},Wne=()=>{var Fe,zr;const[e,t]=y.useState([]),[r,n]=y.useState(!1),[s,i]=y.useState(null),[o,l]=y.useState(""),[c,u]=y.useState("personal_statement"),[d,h]=y.useState(""),[f,m]=y.useState(!0),[p,x]=y.useState(!1),[g,v]=y.useState(""),[b,w]=y.useState(!1),[_,j]=y.useState("draft"),[N,C]=y.useState("list"),[I,E]=y.useState(0),D=y.useRef(null);y.useRef(null);const O=y.useRef(null),k=at.getStoredUser(),S=(k==null?void 0:k.name)||"Unknown Student",T=["Arial","Times New Roman","Georgia","Calibri","Verdana","Helvetica","Courier New","Palatino"],R=[12,14,16,18,20,22,24],M=B=>{switch(B){case"personal_statement":return"Personal Statement";case"supplement":return"Supplemental Essay";case"activity_list":return"Activity List";default:return B}},P=B=>{switch(B){case"personal_statement":return"bg-purple-100 text-purple-700";case"supplement":return"bg-blue-100 text-blue-700";case"activity_list":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},A=B=>{const de=new Date(B),Qe=de.getDate(),Je=["th","st","nd","rd"][Qe%10>3||Math.floor(Qe/10)===1?0:Qe%10],Ze=["January","February","March","April","May","June","July","August","September","October","November","December"][de.getMonth()],et=de.getFullYear(),Qs=de.getHours(),Ba=de.getMinutes().toString().padStart(2,"0"),Js=Qs>=12?"PM":"AM",Fi=Qs%12||12;return`${Qe}${Je} ${Ze} ${et} at ${Fi}:${Ba} ${Js}`},L=()=>{const B=e.length,de=e.filter(Je=>Je.status==="reviewed").length,Qe=e.filter(Je=>Je.status==="submitted").length;return{total:B,reviewed:de,submitted:Qe}},U=()=>e.filter(B=>B.status===_),H=B=>new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),X=B=>{i(B),C("editor")},fe=()=>{C("list"),i(null)},ae=B=>{const de=document.createElement("div");return de.innerHTML=B,de.querySelectorAll("*").forEach(Je=>{Array.from(Je.attributes).forEach(Re=>{Re.name.startsWith("data-")&&Je.removeAttribute(Re.name)})}),de.innerHTML},ue=B=>{if(!O.current||!s)return;const de=O.current,Qe=ae(s.content);if(de.innerHTML=Qe,B.length===0)return;[...B].sort((Re,Ze)=>Ze.start_position-Re.start_position).forEach(Re=>{const Ze=document.createTreeWalker(de,NodeFilter.SHOW_TEXT,null);let et=0,Qs=null,Ba=0,Js=null,Fi=0,za=!1;for(;Ze.nextNode();){const Kn=Ze.currentNode,En=Kn.length;if(!za&&et+En>Re.start_position&&(Qs=Kn,Ba=Re.start_position-et,za=!0),za&&et+En>=Re.end_position){Js=Kn,Fi=Re.end_position-et;break}et+=En}if(Qs&&Js){const Kn=document.createRange();Kn.setStart(Qs,Ba),Kn.setEnd(Js,Fi);const En=document.createElement("mark");En.className="bg-yellow-200 cursor-pointer hover:bg-yellow-300 transition-colors relative group",En.setAttribute("data-comment-id",Re.id),En.title=Re.comment_text;try{Kn.surroundContents(En);const Zs=document.createElement("span");Zs.className="invisible group-hover:visible absolute bottom-full left-0 mb-2 w-64 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-10 pointer-events-none",Zs.innerHTML=`<div class="font-semibold mb-1">${Re.counselor_name}</div><div>${Re.comment_text}</div>`,En.appendChild(Zs)}catch(Zs){console.warn("Could not apply highlight",Zs)}}})},Ae=B=>B.replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").trim().split(/\s+/).filter(Je=>Je.length>0).length,_e=B=>{document.execCommand(B,!1),D.current&&s&&Ne()},Ne=()=>{if(D.current&&s){const B=D.current.innerHTML,de=Ae(B);i({...s,content:B,wordCount:de})}};y.useEffect(()=>{const B=G(V,`University Data/Essays/${S}`),de=Pr(B,Qe=>{if(!Qe.exists()){t([]),m(!1);return}const Je=[],Re=Qe.val();Object.keys(Re).forEach(Ze=>{const et=Re[Ze];Je.push({id:Ze,title:Ze,type:et.essayType||"personal_statement",content:et.essayText||"",wordCount:et.wordCount||0,status:et.status||"draft",createdAt:et.createdAt||new Date().toISOString().split("T")[0],lastModified:et.lastModified||new Date().toISOString().split("T")[0],submittedAt:et.submittedAt||void 0,universityName:et.universityName||void 0,fontFamily:et.fontFamily||"Arial",fontSize:et.fontSize||14,reviewData:et.reviewData||void 0,activities:et.activities||void 0})}),Je.sort((Ze,et)=>new Date(et.createdAt).getTime()-new Date(Ze.createdAt).getTime()),t(Je),m(!1)});return()=>de()},[S]);const $=async B=>{const de=G(V,`University Data/Essays/${S}/${B.title}`);await gt(de,{essayTitle:B.title,essayText:B.content,essayType:B.type,status:B.status,wordCount:B.wordCount,createdAt:B.createdAt,lastModified:B.lastModified,submittedAt:B.submittedAt||null,universityName:B.universityName||null,fontFamily:B.fontFamily,fontSize:B.fontSize,reviewData:B.reviewData||null,activities:B.activities||null})},te=async()=>{if(!o.trim())return;if(c==="supplement"&&!d.trim()){alert("Please enter the university name for this supplementary essay");return}const B={id:o,title:o,type:c,content:"",wordCount:0,status:"draft",createdAt:new Date().toISOString().split("T")[0],lastModified:new Date().toISOString().split("T")[0],universityName:c==="supplement"?d:void 0,fontFamily:"Arial",fontSize:14,activities:c==="activity_list"?[]:void 0};await $(B),i(B),C("editor"),n(!1),l(""),u("personal_statement"),h("")},J=async B=>{if(!s)return;const de={...s,fontFamily:B};i(de),await $(de)},z=async B=>{if(!s)return;const de={...s,fontSize:B};i(de),await $(de)},vt=B=>{v(B),x(!0),setTimeout(()=>{x(!1)},3e3)},je=async()=>{if(!s||!D.current)return;const B={...s,lastModified:new Date().toISOString().split("T")[0],status:"draft"};await $(B),i(B),vt("Essay saved as draft!")},ut=async()=>{if(!s)return;const B={...s,status:"submitted",lastModified:new Date().toISOString().split("T")[0],submittedAt:new Date().toISOString()};await $(B),i(B),vt("Essay submitted for review!")};return y.useEffect(()=>{D.current&&s&&(D.current.innerHTML=s.content)},[s==null?void 0:s.id]),y.useEffect(()=>{if(s&&s.status==="reviewed"){const B=G(V,`University Data/Essays/${S}/${s.title}`);Pr(B,de=>{if(de.exists()){const Qe=de.val();E(Qe.wordCount||0)}},{onlyOnce:!0})}},[s==null?void 0:s.id,S]),y.useEffect(()=>{var B;if(s&&s.status==="reviewed"&&O.current){const de=ae(s.content);O.current.innerHTML=de,(B=s.reviewData)!=null&&B.inlineComments&&s.reviewData.inlineComments.length>0&&setTimeout(()=>{ue(s.reviewData.inlineComments)},50)}},[s==null?void 0:s.id]),f?a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})}):a.jsxs("div",{className:"p-4",children:[p&&a.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in fade-in slide-in-from-top-2 duration-300",children:a.jsxs("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3",children:[a.jsx(fr,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:g})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto",children:[N==="list"&&a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Essay Editor"}),a.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Write and manage your college application essays"})]}),a.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-1.5 bg-blue-600 text-white px-3 py-1.5 text-sm rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Nr,{className:"w-4 h-4"}),"New Essay"]})]}),r&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Create New Essay"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Essay Title"}),a.jsx("input",{type:"text",value:o,onChange:B=>l(B.target.value),placeholder:"e.g., Common App Personal Statement",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Essay Type"}),a.jsxs("select",{value:c,onChange:B=>u(B.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"personal_statement",children:"Personal Statement"}),a.jsx("option",{value:"supplement",children:"Supplemental Essay"}),a.jsx("option",{value:"activity_list",children:"Activity List"})]})]}),c==="supplement"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"University Name"}),a.jsx("input",{type:"text",value:d,onChange:B=>h(B.target.value),placeholder:"e.g., Harvard University",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:te,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Essay"}),a.jsx("button",{onClick:()=>{n(!1),l(""),u("personal_statement"),h("")},className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]}),e.length>0&&N==="list"&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-blue-600 mb-1",children:"Total Essays"}),a.jsx("p",{className:"text-2xl font-bold text-blue-900",children:L().total})]}),a.jsx("div",{className:"p-2 bg-blue-200 rounded-lg",children:a.jsx(Pe,{className:"w-5 h-5 text-blue-700"})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-green-600 mb-1",children:"Submitted"}),a.jsx("p",{className:"text-2xl font-bold text-green-900",children:L().submitted})]}),a.jsx("div",{className:"p-2 bg-green-200 rounded-lg",children:a.jsx(af,{className:"w-5 h-5 text-green-700"})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-purple-600 mb-1",children:"Reviewed"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:L().reviewed})]}),a.jsx("div",{className:"p-2 bg-purple-200 rounded-lg",children:a.jsx(fr,{className:"w-5 h-5 text-purple-700"})})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{onClick:()=>j("draft"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${_==="draft"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Drafts"}),a.jsx("button",{onClick:()=>j("submitted"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${_==="submitted"?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:"Submitted"}),a.jsx("button",{onClick:()=>j("reviewed"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${_==="reviewed"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:"Reviewed"})]}),a.jsx("div",{className:"space-y-3",children:U().length>0?U().map(B=>a.jsx("div",{onClick:()=>X(B),className:"bg-white border border-gray-200 rounded-xl p-5 cursor-pointer transition-all hover:border-blue-400 hover:shadow-md group",children:a.jsxs("div",{className:"flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:B.title}),a.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${P(B.type)}`,children:M(B.type)}),B.universityName&&a.jsxs("span",{className:"text-xs text-gray-600 italic",children:["for ",B.universityName]})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pe,{className:"w-4 h-4"}),a.jsxs("span",{children:[B.wordCount," words"]})]}),B.status==="reviewed"&&B.reviewData?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Reviewed by"}),a.jsx("span",{className:"font-medium text-gray-900",children:B.reviewData.reviewedBy})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"on"}),a.jsx("span",{className:"font-medium text-gray-900",children:A(B.reviewData.reviewedAt)})]})]}):B.status==="submitted"&&B.submittedAt?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Submitted on"}),a.jsx("span",{className:"font-medium text-gray-900",children:A(B.submittedAt)})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Last modified"}),a.jsx("span",{className:"font-medium text-gray-900",children:H(B.lastModified)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[B.status==="draft"&&a.jsxs("div",{className:"flex items-center gap-2 text-blue-600 bg-blue-50 px-4 py-2 rounded-lg",children:[a.jsx(n7,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Continue editing"})]}),B.status==="submitted"&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-4 py-2 rounded-lg",children:[a.jsx(fr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Awaiting review"})]}),B.status==="reviewed"&&a.jsxs("div",{className:"flex items-center gap-2 text-purple-600 bg-purple-50 px-4 py-2 rounded-lg",children:[a.jsx(Pu,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"View feedback"})]})]})]})},B.id)):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Pe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsxs("p",{className:"text-base text-gray-500",children:["No ",_," essays yet"]})]})})]})]}),N==="editor"&&s?s.status==="reviewed"?a.jsxs("div",{className:"-mx-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-4",children:[a.jsxs("button",{onClick:fe,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[a.jsx(ls,{className:"w-4 h-4"}),"Back to Essays"]}),a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-1",children:s.title}),a.jsxs("p",{className:"text-sm text-slate-600",children:[M(s.type),s.universityName&&`  ${s.universityName}`,I>0&&`  ${I} words`]})]}),((Fe=s.reviewData)==null?void 0:Fe.rubricFeedback)&&a.jsxs("button",{onClick:()=>w(!b),className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Wt,{className:"w-4 h-4"}),b?"Hide":"View"," Feedback"]})]})]}),a.jsx("div",{className:"px-8 py-6",children:a.jsxs("div",{className:b?"grid grid-cols-[60%_40%] gap-6 max-w-7xl mx-auto items-start":"max-w-5xl mx-auto",children:[a.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] sticky top-6",children:a.jsx("div",{className:"overflow-y-auto flex-1 p-8",children:a.jsx("div",{ref:O,contentEditable:!1,className:"prose prose-lg max-w-none text-slate-700",style:{fontFamily:s.fontFamily,fontSize:`${s.fontSize}pt`,lineHeight:"1.6"}})})}),b&&((zr=s.reviewData)==null?void 0:zr.rubricFeedback)&&a.jsxs("div",{className:"sticky top-6 bg-gradient-to-br from-emerald-50 to-blue-50 rounded-lg border border-emerald-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] self-start",children:[a.jsx("div",{className:"p-5 border-b border-emerald-200 bg-gradient-to-br from-emerald-50 to-blue-50 flex-shrink-0",children:a.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Wt,{className:"w-5 h-5 text-emerald-600"}),"Rubric Feedback"]})}),a.jsx("div",{className:"overflow-y-auto flex-1 p-5 min-h-0",children:a.jsx("div",{className:"space-y-3",children:s.reviewData.rubricFeedback.map((B,de)=>a.jsxs("div",{className:"bg-white border border-emerald-200 rounded-lg p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start gap-2.5 mb-2.5",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-[#04ADEE] text-white text-xs font-bold rounded-full flex-shrink-0",children:de+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:B.criterionName}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:B.criterionDescription})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-emerald-100 px-1.5 py-0.5 rounded flex-shrink-0",children:[a.jsx(Wt,{className:"w-3.5 h-3.5 text-emerald-700 fill-emerald-700"}),a.jsxs("span",{className:"text-xs font-bold text-emerald-700",children:[B.rating,"/5"]})]})]}),B.rating===5?a.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-800",children:"Perfect Score!"}),a.jsx("p",{className:"text-xs text-emerald-700 leading-relaxed",children:"This criterion has been excellently fulfilled."})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-red-800 mb-0.5",children:"What's Missing:"}),a.jsx("p",{className:"text-xs text-red-700 leading-relaxed",children:B.whatsMissing})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-800 mb-0.5",children:"How to Improve:"}),a.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:B.howToImprove})]})]})]},de))})})]})]})})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:s.title}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${P(s.type)}`,children:M(s.type)}),s.universityName&&a.jsxs("span",{className:"text-sm text-gray-600 italic",children:["for ",s.universityName]})]})]}),a.jsx("div",{className:"border-b border-gray-200 p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[s.type!=="activity_list"?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>_e("bold"),disabled:s.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Bold",children:a.jsx(e7,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:()=>_e("italic"),disabled:s.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Italic",children:a.jsx(l7,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:()=>_e("underline"),disabled:s.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Underline",children:a.jsx(b7,{className:"w-3.5 h-3.5"})})]}),a.jsx("div",{className:"border-l border-gray-300 h-5"}),a.jsx("select",{value:s.fontFamily,onChange:B=>J(B.target.value),disabled:s.status==="submitted",className:"px-2 py-1 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{fontFamily:s.fontFamily},children:T.map(B=>a.jsx("option",{value:B,style:{fontFamily:B},children:B},B))}),a.jsx("select",{value:s.fontSize,onChange:B=>z(Number(B.target.value)),disabled:s.status==="submitted",className:"px-2 py-1 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(B=>a.jsxs("option",{value:B,children:[B,"pt"]},B))}),a.jsx("div",{className:"border-l border-gray-300 h-5"}),a.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[s.wordCount," words"]})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M1,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Activity List"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:je,disabled:s.status==="submitted",className:"flex items-center gap-1.5 px-3 py-1.5 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Ou,{className:"w-3.5 h-3.5"}),"Save Draft"]}),a.jsxs("button",{onClick:ut,disabled:s.status==="submitted"||s.wordCount===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(af,{className:"w-3.5 h-3.5"}),"Submit for Review"]})]})]})}),a.jsxs("div",{children:[s.type==="activity_list"?a.jsx("div",{className:"essay-container p-6 min-h-[500px]",children:a.jsxs("div",{className:"space-y-4",children:[s.activities&&s.activities.length>0?s.activities.map((B,de)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700",children:["Activity ",de+1]}),s.status!=="submitted"&&a.jsx("button",{onClick:()=>{var Je;const Qe={...s,activities:(Je=s.activities)==null?void 0:Je.filter(Re=>Re.id!==B.id)};i(Qe),$(Qe)},className:"text-red-500 hover:text-red-700",children:a.jsx(bn,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Activity Name"}),a.jsx("input",{type:"text",value:B.name,onChange:Qe=>{var Re;const Je={...s,activities:(Re=s.activities)==null?void 0:Re.map(Ze=>Ze.id===B.id?{...Ze,name:Qe.target.value}:Ze)};i(Je)},onBlur:()=>$(s),disabled:s.status==="submitted",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"e.g., Varsity Basketball Team"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("textarea",{value:B.description,onChange:Qe=>{var Re;const Je={...s,activities:(Re=s.activities)==null?void 0:Re.map(Ze=>Ze.id===B.id?{...Ze,description:Qe.target.value}:Ze)};i(Je)},onBlur:()=>$(s),disabled:s.status==="submitted",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Describe your role, achievements, and what you learned...",rows:4})]})]})]},B.id)):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(M1,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:'No activities added yet. Click "Add Activity" to get started.'})]}),s.status!=="submitted"&&a.jsxs("button",{onClick:()=>{const B={id:Date.now().toString(),name:"",description:""},de={...s,activities:[...s.activities||[],B]};i(de),$(de)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 text-sm border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-gray-600 hover:text-blue-600",children:[a.jsx(Nr,{className:"w-4 h-4"}),"Add Activity"]})]})}):a.jsx("div",{ref:D,contentEditable:s.status!=="submitted",onInput:Ne,className:`essay-container p-6 min-h-[500px] focus:outline-none ${s.status==="submitted"?"bg-gray-50 cursor-not-allowed":""}`,style:{fontSize:`${s.fontSize}pt`,lineHeight:"1.6",fontFamily:s.fontFamily}}),s.status==="submitted"&&a.jsx("div",{className:"border-t border-gray-200 p-3 bg-green-50",children:a.jsxs("p",{className:"text-xs text-green-700 flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"This essay has been submitted for review and cannot be edited."]})})]})]}):null]})]})},Hne=({onLogout:e,user:t})=>{const[r,n]=y.useState("profile"),[s,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(null),[d,h]=y.useState(""),[f,m]=y.useState(""),p=()=>{switch(r){case"profile":return a.jsx(a2,{user:t});case"admit-profiles":return a.jsx(Pne,{onViewProfile:x=>{u(x),n("profile-details")}});case"scholarships":return a.jsx(Dne,{});case"applications":return a.jsx($ne,{});case"resources":return a.jsx(Bne,{});case"counselors":return a.jsx(zne,{onBookMeeting:(x,g)=>{h(x),m(g),n("meeting-booking")}});case"chat":return a.jsx(HR,{userRole:"student"});case"essay-editor":return a.jsx(Wne,{});case"profile-details":return c?a.jsx(One,{profileId:c,onBack:()=>n("admit-profiles")}):null;case"meeting-booking":return a.jsx(r_,{counselorEmail:d,counselorName:f,onBack:()=>n("counselors")});default:return a.jsx(a2,{user:t})}};return a.jsxs("div",{className:"flex h-screen bg-gray-50 relative overflow-hidden",children:[a.jsx("button",{onClick:()=>i(!s),className:"lg:hidden fixed top-4 left-4 z-50 bg-white p-2 rounded-lg shadow-lg border border-gray-200 touch-manipulation",children:s?a.jsx(St,{className:"w-6 h-6"}):a.jsx(mO,{className:"w-6 h-6"})}),s&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30 touch-manipulation",onClick:()=>i(!1)}),a.jsx(_7,{currentPage:r,setCurrentPage:n,onLogout:e,isOpen:s,onClose:()=>i(!1),isCollapsed:o,onToggleCollapse:()=>l(!o)}),a.jsx("main",{className:"flex-1 overflow-y-auto lg:ml-0 w-full min-w-0",children:p()})]})},qne=({onLogin:e,onCounselorLogin:t})=>{const[r,n]=y.useState(""),[s,i]=y.useState(""),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,h]=y.useState(""),[f,m]=y.useState(""),[p,x]=y.useState(""),g=async b=>{b.preventDefault(),h(""),m(""),x(""),u(!0);try{const w=await eP.authenticateUser({email:r,password:s});if(w.success&&w.user)if(console.log("Login successful:",w.user),(w.user.role==="pool_management"||w.user.role==="essay")&&t){console.log("Routing to counselor dashboard");const _={id:w.user.username,email:w.user.username,name:w.user.name,role:w.user.role};t(_)}else console.log("Routing to student dashboard"),e(w.user);else switch(w.error){case"USER_NOT_FOUND":h(w.message||"Email not found");break;case"WRONG_PASSWORD":m(w.message||"Incorrect password");break;case"NETWORK_ERROR":default:x(w.message||"Login failed. Please try again.");break}}catch(w){console.error("Login error:",w),x("Login failed. Please try again.")}finally{u(!1)}},v=()=>{n("kananelobutielliot@gmail.com"),i("12345"),h(""),m(""),x("")};return a.jsxs("div",{className:"min-h-screen bg-[#04adee] flex flex-col",children:[a.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center px-6 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx("img",{src:"/blue logo.png",alt:"EduCare Logo",className:"w-20 h-20 object-contain opacity-90"})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"EduCare"}),a.jsx("p",{className:"text-white text-lg font-medium mb-2",children:"University Guidance"}),a.jsx("p",{className:"text-white text-center text-sm opacity-90",children:"Your academic journey starts here"})]}),a.jsxs("div",{className:"bg-white rounded-t-3xl px-6 py-8 shadow-2xl",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to continue your journey"})]}),p&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:a.jsx("p",{className:"text-red-600 text-sm",children:p})}),a.jsxs("form",{onSubmit:g,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Au,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:r,onChange:b=>n(b.target.value),className:`w-full pl-12 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-base ${d?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your email",required:!0})]}),d&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(hO,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),a.jsx("input",{type:o?"text":"password",value:s,onChange:b=>i(b.target.value),className:`w-full pl-12 pr-12 py-4 border rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-base ${f?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your password",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-4 text-gray-400",children:o?a.jsx(lO,{className:"w-5 h-5"}):a.jsx(cO,{className:"w-5 h-5"})})]}),f&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#04adee] text-white py-4 rounded-xl font-semibold text-base disabled:opacity-50 shadow-lg",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"}),a.jsx("button",{type:"button",onClick:v,className:"w-full bg-gray-100 text-gray-700 py-3 rounded-xl font-medium text-sm",children:"Use Demo Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Demo: kananelobutielliot@gmail.com / 12345"})})]})]})},qd=(e,t=2e3)=>{const[r,n]=y.useState(0);return y.useEffect(()=>{let s,i;const o=l=>{s||(s=l);const c=Math.min((l-s)/t,1);n(Math.floor(c*e)),c<1&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>cancelAnimationFrame(i)},[e,t]),r},Vne=({percentage:e,className:t="bg-[#04adee]"})=>{const[r,n]=y.useState(0);return y.useEffect(()=>{const s=setTimeout(()=>n(e),100);return()=>clearTimeout(s)},[e]),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`${t} h-2 rounded-full transition-all duration-1000 ease-out`,style:{width:`${r}%`}})})},o2=({percentage:e,size:t=80,strokeWidth:r=6,color:n="#04adee"})=>{const[s,i]=y.useState(0);y.useEffect(()=>{const u=setTimeout(()=>i(e),100);return()=>clearTimeout(u)},[e]);const o=(t-r)/2,l=o*2*Math.PI,c=l-s/100*l;return a.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[a.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:"#e5e7eb",strokeWidth:r,fill:"transparent"}),a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:n,strokeWidth:r,fill:"transparent",strokeDasharray:l,strokeDashoffset:c,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(s),"%"]})})]})},l2=({user:e})=>{const[t,r]=y.useState(!1),[n,s]=y.useState(!1),i=()=>{if(e!=null&&e.name)return e.name;const S=at.getStoredUser();return S!=null&&S.name?(console.log("Using stored user name:",S.name),S.name):"Student"},o=()=>{if((e==null?void 0:e.averageGrade)!==void 0)return console.log("Using average grade from user prop:",e.averageGrade),e.averageGrade;const S=at.getStoredUser();return(S==null?void 0:S.averageGrade)!==void 0?(console.log("Using stored average grade:",S.averageGrade),S.averageGrade):(console.log("No average grade found, using default"),89)},l=()=>{if(e!=null&&e.subjectGrades)return console.log("Using subject grades from user prop:",e.subjectGrades),e.subjectGrades;const S=at.getStoredUser();return S!=null&&S.subjectGrades?(console.log("Using stored subject grades:",S.subjectGrades),S.subjectGrades):(console.log("No subject grades found, using defaults"),{Mathematics:88,English:92,Science:85,History:90,"Foreign Language":87})},[c,u]=y.useState({studentName:i(),currentGPA:o(),subjects:l(),classRank:15,totalStudents:320,satScore:1450,careerInterests:["Science","Technology","Engineering"],age:17,nationality:"United States",personalStatement:"Passionate about technology and innovation, I aim to pursue computer science to create solutions that impact society positively. My journey began when I first encountered programming in high school, and since then, I have been fascinated by the endless possibilities that technology offers to solve real-world problems.",activities:["Debate Club President","Varsity Soccer","Math Olympiad","Volunteer Tutor"],specialCircumstances:"First-generation college student, overcame family financial hardship",financialBudget:5e4}),[d,h]=y.useState(c),f=qd(c.currentGPA),m=qd(c.classRank),p=qd(c.totalStudents),x=qd(c.satScore),g=()=>{r(!0),h(c)},v=async()=>{s(!0);try{const S=at.getStoredUser(),T=(S==null?void 0:S.school)||(e==null?void 0:e.school),R=(S==null?void 0:S.username)||(e==null?void 0:e.username);if(!T||!R){console.error("Missing school or username information"),alert("Error: Missing user information. Please log in again."),s(!1);return}console.log("Saving profile data for:",R,"in school:",T);const M={Activities:{},Age:d.age.toString(),Nationality:d.nationality,SAT:d.satScore.toString(),"Career Interests":{},"Special Circumstances":d.specialCircumstances,"Personal Statement":d.personalStatement,Budget:d.financialBudget.toString()};d.activities.forEach((A,L)=>{A.trim()&&(M.Activities[A.trim()]="true")}),d.careerInterests.forEach((A,L)=>{A.trim()&&(M["Career Interests"][A.trim()]="true")});const P=G(V,`Schoolss/${T}/University Profiles/${R}`);await gt(P,M),console.log("Profile data saved successfully to Firebase!"),u(d),r(!1),alert("Profile saved successfully!")}catch(S){console.error("Error saving profile data:",S),alert("Error saving profile. Please try again.")}finally{s(!1)}},b=()=>{h(c),r(!1)},w=(S,T)=>{h(R=>({...R,[S]:T}))},_=()=>{d.activities.length<10&&h(S=>({...S,activities:[...S.activities,""]}))},j=S=>{h(T=>({...T,activities:T.activities.filter((R,M)=>M!==S)}))},N=(S,T)=>{h(R=>({...R,activities:R.activities.map((M,P)=>P===S?T:M)}))},C=()=>{d.careerInterests.length<10&&h(S=>({...S,careerInterests:[...S.careerInterests,""]}))},I=S=>{h(T=>({...T,careerInterests:T.careerInterests.filter((R,M)=>M!==S)}))},E=(S,T)=>{h(R=>({...R,careerInterests:R.careerInterests.map((M,P)=>P===S?T:M)}))},D=Object.entries(c.subjects);c.currentGPA;const O=D.reduce((S,T)=>S[1]>T[1]?S:T),k=D.reduce((S,T)=>S[1]<T[1]?S:T);return D.filter(([S,T])=>T<85),a.jsxs("div",{className:"min-h-screen bg-gray-100",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 px-4 py-6",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("h1",{className:"text-xl font-bold mb-1",children:"Academic Analytics"}),a.jsx("p",{className:"text-blue-100 text-sm",children:"Performance Overview"})]})}),a.jsxs("div",{className:"px-4 -mt-4 pb-6",children:[a.jsx("div",{className:"mb-4",children:t?a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:v,disabled:n,className:"flex-1 bg-green-500 text-white py-3 rounded-xl font-semibold text-sm active:scale-95 transition-transform",children:n?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ou,{className:"w-4 h-4 mr-2 inline"}),"Save Changes"]})}),a.jsxs("button",{onClick:b,className:"flex-1 bg-gray-500 text-white py-3 rounded-xl font-semibold text-sm active:scale-95 transition-transform",children:[a.jsx(St,{className:"w-4 h-4 mr-2 inline"}),"Cancel"]})]}):a.jsxs("button",{onClick:g,className:"w-full bg-white text-[#04adee] py-3 rounded-xl font-semibold text-sm border border-[#04adee] active:scale-95 transition-transform",children:[a.jsx(pO,{className:"w-4 h-4 mr-2 inline"}),"Edit Profile"]})}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(JB,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Performance Metrics"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(o2,{percentage:f,color:"#04adee"}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Overall Average"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(o2,{percentage:Math.round(m/p*100),color:"#10b981"}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Class Percentile"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-[#04adee]",children:[f,"%"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"GPA"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-green-600",children:["#",m]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Rank"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600",children:x}),a.jsx("div",{className:"text-xs text-gray-600",children:"SAT"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[a.jsx(m7,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Subject Analysis"]}),a.jsx("div",{className:"space-y-3 mb-4",children:Object.entries(c.subjects).map(([S,T])=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-medium text-sm text-gray-700",children:S}),a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[T,"%"]})]}),a.jsx(Vne,{percentage:T})]},S))}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Strongest Subject"}),a.jsx("div",{className:"text-sm font-bold text-green-800",children:O[0]}),a.jsxs("div",{className:"text-xs text-green-600",children:[O[1],"%"]})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-orange-700 font-medium",children:"Focus Area"}),a.jsx("div",{className:"text-sm font-bold text-orange-800",children:k[0]}),a.jsxs("div",{className:"text-xs text-orange-600",children:[k[1],"%"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[a.jsx(Ra,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Application Profile"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"SAT Score"}),t?a.jsx("input",{type:"number",value:d.satScore,onChange:S=>w("satScore",parseInt(S.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg text-center",children:a.jsx("div",{className:"text-sm font-bold text-[#04adee]",children:x})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Age"}),t?a.jsx("input",{type:"number",value:d.age,onChange:S=>w("age",parseInt(S.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg text-center",children:a.jsx("div",{className:"text-sm font-medium",children:c.age})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nationality"}),t?a.jsx("input",{type:"text",value:d.nationality,onChange:S=>w("nationality",S.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:a.jsx("div",{className:"text-sm font-medium",children:c.nationality})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Financial Budget"}),t?a.jsx("input",{type:"number",value:d.financialBudget,onChange:S=>w("financialBudget",parseInt(S.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:a.jsxs("div",{className:"text-sm font-medium",children:["$",c.financialBudget.toLocaleString()]})})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Career Interests"}),t?a.jsxs("div",{className:"space-y-2",children:[d.careerInterests.map((S,T)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:S,onChange:R=>E(T,R.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white",placeholder:"Enter career interest"}),a.jsx("button",{type:"button",onClick:()=>I(T),className:"p-2 text-red-600 bg-red-50 rounded-lg active:bg-red-100",children:a.jsx(bn,{className:"w-4 h-4"})})]},T)),d.careerInterests.length<10&&a.jsxs("button",{type:"button",onClick:C,className:"w-full flex items-center justify-center text-[#04adee] bg-gray-50 py-2 rounded-lg text-sm font-medium active:bg-gray-100",children:[a.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Add Career Interest"]})]}):a.jsx("div",{className:"flex flex-wrap gap-2",children:c.careerInterests.map((S,T)=>a.jsx("span",{className:"bg-gray-50 text-[#04adee] px-3 py-1 rounded-full text-sm font-medium border border-gray-200",children:S},T))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Personal Statement"}),t?a.jsxs("div",{children:[a.jsx("textarea",{value:d.personalStatement,onChange:S=>w("personalStatement",S.target.value),className:"w-full px-3 py-3 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none h-24 bg-white",maxLength:650}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[d.personalStatement.length,"/650 words"]})]}):a.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm leading-relaxed",children:c.personalStatement})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[a.jsx(QB,{className:"w-4 h-4 text-[#04adee] mr-2"}),"Activities"]}),t?a.jsxs("div",{className:"space-y-2",children:[d.activities.map((S,T)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:S,onChange:R=>N(T,R.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white",placeholder:"Enter activity"}),a.jsx("button",{type:"button",onClick:()=>j(T),className:"p-2 text-red-600 bg-red-50 rounded-lg active:bg-red-100",children:a.jsx(bn,{className:"w-4 h-4"})})]},T)),d.activities.length<10&&a.jsxs("button",{type:"button",onClick:_,className:"w-full flex items-center justify-center text-[#04adee] bg-gray-50 py-2 rounded-lg text-sm font-medium active:bg-gray-100",children:[a.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Add Activity (Max 10)"]})]}):a.jsx("div",{className:"space-y-2",children:c.activities.map((S,T)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-[#04adee] rounded-full mr-3"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:S})]},T))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-6 border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Special Circumstances"}),t?a.jsx("textarea",{value:d.specialCircumstances,onChange:S=>w("specialCircumstances",S.target.value),className:"w-full px-3 py-3 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none h-20 bg-white"}):a.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm leading-relaxed",children:c.specialCircumstances})]})]})]})};function Gne({onViewProfile:e}){const[t,r]=y.useState([]),[n,s]=y.useState([]),[i,o]=y.useState(!0),[l,c]=y.useState(""),[u,d]=y.useState(""),[h,f]=y.useState("");y.useEffect(()=>{m()},[]),y.useEffect(()=>{p()},[l,u,h,t]);const m=async()=>{try{o(!0);const v=await t_();r(v),s(v)}catch(v){console.error("Error loading admit profiles:",v)}finally{o(!1)}},p=()=>{let v=t;l&&(v=v.filter(b=>b.name.toLowerCase().includes(l.toLowerCase())||b.current_university.toLowerCase().includes(l.toLowerCase())||b.country.toLowerCase().includes(l.toLowerCase())||b.current_major.toLowerCase().includes(l.toLowerCase()))),u&&(v=v.filter(b=>b.country===u)),h&&(v=v.filter(b=>b.current_major===h)),s(v)},x=Array.from(new Set(t.map(v=>v.country))).sort(),g=Array.from(new Set(t.map(v=>v.current_major))).sort();return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):a.jsx("div",{className:"pb-20 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:a.jsxs("div",{className:"px-3 pt-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Admit Profiles"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Students admitted to top universities"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search...",value:l,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Countries"}),x.map(v=>a.jsx("option",{value:v,children:v},v))]}),a.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Majors"}),g.map(v=>a.jsx("option",{value:v,children:v},v))]})]})}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map(v=>a.jsxs("div",{onClick:()=>e(v.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden active:scale-95 transition-transform",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:v.profile_image_url,alt:v.name,className:"w-full h-40 object-cover"})}),a.jsxs("div",{className:"p-3",children:[a.jsx("h3",{className:"font-bold text-gray-900 text-xs mb-1.5 line-clamp-1",children:v.name}),a.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1.5",children:[a.jsx("img",{src:Op(v.country),alt:v.country,className:"w-4 h-3 mr-1.5 flex-shrink-0 object-cover rounded-sm"}),a.jsx("span",{className:"line-clamp-1",children:v.country})]}),a.jsxs("div",{className:"flex items-start text-xs text-gray-700 mb-1.5",children:[a.jsx(nr,{className:"w-3 h-3 mr-1 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"line-clamp-2 font-medium",children:v.current_university})]}),a.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:["Accepted ",v.application_round]})]})]},v.id))}),n.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"No profiles found."})})]})})}function Kne({profileId:e,onBack:t}){const[r,n]=y.useState(null),[s,i]=y.useState(!0),[o,l]=y.useState(null),[c,u]=y.useState(!1);y.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0);const h=await zR(e);n(h),l(null)}catch(h){l("Failed to load admit profile"),console.error(h)}finally{i(!1)}};return s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):o||!r?a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800 text-sm",children:o||"Profile not found"}),a.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Go Back"})]})}):a.jsxs("div",{className:"pb-20 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-0 z-10 shadow-sm",children:a.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 active:text-gray-900 group",children:[a.jsx(ls,{className:"w-4 h-4 mr-2 group-active:-translate-x-1 transition-transform"}),a.jsx("span",{className:"font-medium text-sm",children:"Back to Profiles"})]})}),a.jsxs("div",{className:"bg-white mx-3 mt-3 rounded-2xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-green-500 to-blue-600",children:[r.university_image_url&&a.jsx("img",{src:r.university_image_url,alt:`${r.current_university} campus`,className:"absolute inset-0 w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-black/20"}),a.jsx("div",{className:"absolute -bottom-12 left-4 z-10",children:a.jsx("img",{src:r.profile_image_url,alt:r.name,className:"w-24 h-24 rounded-xl border-4 border-white object-cover shadow-xl"})})]}),a.jsxs("div",{className:"pt-16 px-4 pb-5",children:[a.jsxs("div",{className:"mb-5",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:r.name}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r.current_major}),a.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-600 flex-wrap",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("img",{src:Op(r.country),alt:`${r.country} flag`,className:"w-4 h-3 object-cover rounded-sm"}),a.jsx("span",{children:r.country})]})})]}),(r.linkedin_handle||r.instagram_handle)&&a.jsxs("div",{className:"flex gap-2 mb-5",children:[r.linkedin_handle&&a.jsxs("a",{href:r.linkedin_handle,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg text-sm active:bg-blue-100",children:[a.jsx(dO,{className:"w-4 h-4"}),"LinkedIn"]}),r.instagram_handle&&a.jsxs("a",{href:`https://instagram.com/${r.instagram_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-pink-50 text-pink-600 rounded-lg text-sm active:bg-pink-100",children:[a.jsx(uO,{className:"w-4 h-4"}),"Instagram"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-4 mb-3 border-2 border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(nr,{className:"w-4 h-4 text-blue-600"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Accepted To:"})]}),a.jsx("p",{className:"text-lg font-bold text-blue-600 mb-0.5",children:r.current_university}),a.jsx("p",{className:"text-xs text-gray-600",children:r.university_location}),r.graduation_year&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1.5 font-medium",children:["Class of ",r.graduation_year]})]}),a.jsx("div",{className:"mb-5",children:a.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Application submitted to ",r.current_university]})})]})]}),a.jsxs("div",{className:"px-3 space-y-3 mt-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(Ra,{className:"w-3 h-3 text-blue-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Overall Avg"})]}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.overall_percentage?a.jsxs(a.Fragment,{children:[a.jsx(dt,{end:r.overall_percentage,decimals:1}),a.jsx("span",{children:"%"})]}):"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Aggregate %"})]}),r.sat_score&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-3 border border-purple-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(or,{className:"w-3 h-3 text-purple-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"SAT"})]}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.jsx(dt,{end:r.sat_score})})]}),r.act_score&&a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(or,{className:"w-3 h-3 text-orange-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"ACT"})]}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a.jsx(dt,{end:r.act_score})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-3 border border-green-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(nr,{className:"w-3 h-3 text-green-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Round"})]}),a.jsx("p",{className:"text-lg font-bold text-green-600",children:r.application_round})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-yellow-50 rounded-xl p-3 border border-yellow-100",children:[a.jsxs("div",{className:"flex items-center mb-1.5",children:[a.jsx(Wt,{className:"w-3 h-3 text-yellow-600 mr-1.5"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"First Gen"})]}),a.jsx("p",{className:"text-gray-700 text-xs",children:r.first_generation?"Yes":"No"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-1.5",children:[a.jsx(Da,{className:"w-3 h-3 text-green-600 mr-1.5"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Aid"})]}),a.jsx("p",{className:"text-gray-700 text-xs leading-tight",children:r.financial_aid_received})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Pe,{className:"w-4 h-4 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Personal Statement"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("p",{className:"text-gray-700 text-xs leading-relaxed whitespace-pre-line line-clamp-4",children:r.personal_statement}),a.jsx("button",{onClick:()=>u(!0),className:"mt-2 text-blue-600 active:text-blue-700 font-medium text-xs underline",children:"Read Full Statement"})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-end justify-center z-50",onClick:()=>u(!1),children:a.jsxs("div",{className:"bg-white rounded-t-3xl shadow-2xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pe,{className:"w-4 h-4 text-blue-600"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Personal Statement"})]}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 active:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-lg active:bg-gray-100",children:""})]}),a.jsx("div",{className:"px-4 py-4 overflow-y-auto max-h-[calc(90vh-60px)]",children:a.jsx("p",{className:"text-gray-700 text-sm leading-relaxed whitespace-pre-line",children:r.personal_statement})})]})}),r.subject_grades&&Object.keys(r.subject_grades).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(nr,{className:"w-4 h-4 text-purple-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Latest Transcript Submitted"})]}),a.jsx("div",{className:"space-y-2",children:Object.entries(r.subject_grades).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:h})}),a.jsx("span",{className:"text-xl font-bold text-purple-600 ml-2",children:f})]})},m))})]}),r.high_school_gpa_history&&Object.keys(r.high_school_gpa_history).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx($n,{className:"w-4 h-4 text-green-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"High School Performance History"})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-3 italic",children:"Overall grade percentages by year"}),a.jsx("div",{className:"space-y-2",children:Object.entries(r.high_school_gpa_history).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-3 border border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:h}),a.jsx("span",{className:"text-lg font-bold text-blue-600",children:f})]})},m))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(ja,{className:"w-4 h-4 text-orange-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Extracurriculars"})]}),a.jsx("ul",{className:"space-y-1.5",children:r.extracurricular_activities.map((h,f)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1.5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 text-xs",children:h})]},f))})]}),r.university_experience&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-4 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Wt,{className:"w-4 h-4 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Their Journey"})]}),a.jsx("p",{className:"text-gray-700 text-xs leading-relaxed whitespace-pre-line italic",children:r.university_experience})]})]})]})}const Yne=()=>{const[e,t]=y.useState(""),r=[{id:1,name:"National Merit Scholarship",provider:"National Merit Corp.",amount:25e3,deadline:"2025-03-15",matchScore:95,type:"Merit"},{id:2,name:"Gates Millennium Scholars",provider:"Gates Foundation",amount:5e4,deadline:"2025-01-15",matchScore:88,type:"Need-Based"},{id:3,name:"Google CS Scholarship",provider:"Google Inc.",amount:1e4,deadline:"2025-02-28",matchScore:92,type:"Field-Specific"}],n=s=>s>=90?"text-green-600 bg-green-100":s>=80?"text-blue-600 bg-blue-100":"text-yellow-600 bg-yellow-100";return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search scholarships...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-2xl p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(or,{className:"w-5 h-5 text-[#04adee] mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[#04adee] text-sm",children:"Personalized Matching"}),a.jsx("p",{className:"text-xs text-gray-700",children:"Scholarships ranked by your eligibility"})]})]})}),a.jsx("div",{className:"space-y-4",children:r.map(s=>a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.provider})]}),a.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${n(s.matchScore)}`,children:[s.matchScore,"% Match"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-[#04adee] bg-opacity-10 rounded-xl p-3 text-center",children:[a.jsx(Da,{className:"w-5 h-5 text-[#04adee] mx-auto mb-1"}),a.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",(s.amount/1e3).toFixed(0),"k"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Award"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-center",children:[a.jsx(bt,{className:"w-5 h-5 text-gray-600 mx-auto mb-1"}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:new Date(s.deadline).toLocaleDateString()}),a.jsx("div",{className:"text-xs text-gray-600",children:"Deadline"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:s.type}),a.jsxs("button",{className:"flex items-center bg-[#04adee] text-white px-3 py-2 rounded-lg text-sm font-medium",children:["Apply",a.jsx(xl,{className:"w-3 h-3 ml-1"})]})]})]},s.id))})]})},Xne=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(null),[s,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,h]=y.useState({}),[f,m]=y.useState(""),[p,x]=y.useState(""),[g,v]=y.useState({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]});useEffect(()=>{b()},[]);const b=async()=>{try{console.log("=== LOADING APPLICATIONS FROM FIREBASE ===");const P=at.getCurrentUser();if(!P||!P.name||!P.school){console.log("No user data found, cannot load applications:",P);return}console.log("Loading applications for user:",P.name,"in school:",P.school);const A=G(V,`Schoolss/${P.school}/Applications/${P.name}`);console.log("Firebase path:",`Schoolss/${P.school}/Applications/${P.name}`);const L=await me(A);if(L.exists()){const U=L.val();console.log("Found applications data:",U);const H=[];Object.entries(U).forEach(([X,fe],ae)=>{if(console.log(`Processing university: ${X}`,fe),fe&&typeof fe=="object"){const ue=[];Object.entries(fe).forEach(([Ne,$],te)=>{console.log(`  Requirement: ${Ne} = ${$}`),ue.push({id:Date.now()+ae*100+te,name:Ne,completed:$})});const Ae=ue.filter(Ne=>Ne.completed).length,_e=Math.round(Ae/ue.length*100);console.log(`  University: ${X}, Completion: ${_e}%`),H.push({id:Date.now()+ae,universityName:X,program:"Program Name",deadline:"2025-05-01",priority:"Medium",status:_e===100?"Submitted":"In Progress",completionPercentage:_e,requirements:ue,notes:""})}}),console.log("Loaded applications:",H),t(H)}else console.log("No applications found in Firebase"),t([])}catch(P){console.error("Error loading applications from Firebase:",P),t([])}},w=async P=>{try{const A=P.split("@")[0].toLowerCase();console.log("Looking for username:",A);const L=G(V,"Schoolss"),U=await me(L);if(!U.exists())return console.log("No Schoolss node found"),null;const H=U.val();console.log("Found schools:",Object.keys(H));for(const[X,fe]of Object.entries(H))if(console.log(`Checking school: ${X}`),fe&&typeof fe=="object"&&"users"in fe){const ae=fe.users;if(ae&&A in ae)return console.log(`Found user ${A} in school: ${X}`),X}return console.log("User not found in any school"),null}catch(A){return console.error("Error finding user school:",A),null}},_=async(P,A,L)=>{try{const U=at.getCurrentUser();if(U&&U.name&&U.school){const H=G(V,`Schoolss/${U.school}/Applications/${U.name}/${P}/${A}`);await gt(H,L),console.log(`Updated requirement ${A} to ${L} for ${P}`),await Qf.updateCurrentUserProgress(),console.log("Application Progress updated after requirement change")}}catch(U){console.error("Error updating requirement in Firebase:",U)}},j=(P,A)=>{t(L=>L.map(U=>{if(U.id===P){const H=U.requirements.map(ue=>ue.id===A?{...ue,completed:!ue.completed}:ue),X=H.filter(ue=>ue.completed).length,fe=Math.round(X/H.length*100),ae=U.requirements.find(ue=>ue.id===A);return ae&&_(U.universityName,ae.name,!ae.completed),{...U,requirements:H,completionPercentage:fe}}return U}))},N=()=>{setNewApplication(P=>({...P,requirements:[...P.requirements,""]}))},C=(P,A)=>{setNewApplication(L=>({...L,requirements:L.requirements.map((U,H)=>H===P?A:U)}))},I=P=>{setNewApplication(A=>({...A,requirements:A.requirements.filter((L,U)=>U!==P)}))},E=async P=>{try{console.log("=== STARTING FIREBASE SAVE (MOBILE) ==="),console.log("Application data:",P);const A=at.getCurrentUser();if(console.log("Current stored user:",A),!A)throw new Error("No user data found in storage. Please log in again.");const L=`${A.username}@gmail.com`;console.log("Reconstructed email:",L);const U=await w(L);if(console.log("Found school:",U),!U)throw new Error("Could not find your school in the database. Please contact support.");const H=G(V,`Schoolss/${U}/users/${A.username}`),X=await me(H);if(!X.exists())throw new Error("User data not found in school database.");const fe=X.val(),ae=fe.Name||fe.name||A.name;console.log("Using user name for Applications:",ae);const ue=`Schoolss/${U}/Applications/${ae}/${P.universityName}`;console.log("Firebase application path:",ue);const Ae={};if(P.requirements.forEach(Ne=>{if(Ne.trim()){const $=Mne(Ne.trim());$&&(Ae[$]=!1)}}),console.log("Requirements data to save:",Ae),Object.keys(Ae).length===0)throw new Error("No valid requirements to save");console.log("Attempting to save to Firebase...");const _e=G(V,ue);return await gt(_e,Ae),console.log(" Application saved successfully to Firebase!"),!0}catch(A){throw console.error(" Error saving application to Firebase:",A),A instanceof Error&&console.error("Error message:",A.message),new Error(`Failed to save application: ${A instanceof Error?A.message:"Unknown error"}`)}},D=async()=>{const P={};let A=!1;if(g.requirements.forEach((L,U)=>{if(L.trim()){const H=bx(L.trim());H&&(P[U]=H,A=!0)}}),h(P),A){alert("Please fix the requirement name errors before saving.");return}if(g.universityName&&g.program&&g.requirements.length>0){u(!0);try{await E(g);const L=g.requirements.map((H,X)=>({id:Date.now()+X,name:H,completed:!1})),U={id:Date.now(),universityName:g.universityName,program:g.program,deadline:"2025-05-01",priority:"Medium",status:"In Progress",completionPercentage:0,notes:"",requirements:L};t(H=>[...H,U]),v({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]}),l(!1),m("Application has been added to tracker successfully!"),setTimeout(()=>m(""),3e3),await Qf.updateCurrentUserProgress(),console.log("Application Progress updated after adding new application"),await b()}catch(L){console.error("Error adding application:",L),x(`Error adding application: ${L instanceof Error?L.message:"Please try again."}`),setTimeout(()=>x(""),5e3)}finally{u(!1)}}},O=()=>{g.requirements.length<15&&v(P=>({...P,requirements:[...P.requirements,""]}))},k=P=>{v(A=>({...A,requirements:A.requirements.filter((L,U)=>U!==P)}))},S=(P,A)=>{const L=bx(A);h(U=>{const H={...U};return L?H[P]=L:delete H[P],H}),v(U=>({...U,requirements:U.requirements.map((H,X)=>X===P?A:H)}))},T=P=>{switch(P){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},R=P=>{switch(P){case"Submitted":return"text-green-600 bg-green-100";case"Under Review":return"text-blue-600 bg-blue-100";case"Decision Pending":return"text-purple-600 bg-purple-100";default:return"text-yellow-600 bg-yellow-100"}},M={avgCompletion:Math.round(e.reduce((P,A)=>P+A.completionPercentage,0)/e.length)||0,total:e.length,inProgress:e.filter(P=>P.status==="In Progress").length,submitted:e.filter(P=>P.status==="Submitted").length};return r?a.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:()=>n(null),className:"mr-4 p-2 hover:bg-gray-200 rounded-lg",children:a.jsx(ls,{className:"w-5 h-5"})}),a.jsx("h1",{className:"text-2xl font-bold",children:r.universityName})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Program"}),a.jsx("p",{className:"text-gray-900",children:r.program})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Deadline"}),a.jsx("p",{className:"text-gray-900",children:new Date(r.deadline).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Priority"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(r.priority)}`,children:r.priority})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Status"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(r.status)}`,children:r.status})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Progress"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:a.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${r.completionPercentage}%`}})}),a.jsxs("p",{className:"text-sm text-gray-600",children:[r.completionPercentage,"% Complete"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Requirements"}),a.jsx("div",{className:"space-y-3",children:r.requirements.map(P=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("button",{onClick:()=>j(r.id,P.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${P.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:P.completed&&a.jsx(fr,{className:"w-3 h-3"})}),P.dueDate&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(P.dueDate).toLocaleDateString()]})]},P.id))})]})]})]})}):s?a.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Add New Application"}),a.jsx("button",{onClick:()=>i(!0),className:"bg-[#04adee] text-white p-3 rounded-xl",children:a.jsx(Nr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:newApplication.universityName,onChange:P=>setNewApplication(A=>({...A,universityName:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Stanford University"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program"}),a.jsx("input",{type:"text",value:newApplication.program,onChange:P=>setNewApplication(A=>({...A,program:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Deadline"}),a.jsx("input",{type:"date",value:newApplication.deadline,onChange:P=>setNewApplication(A=>({...A,deadline:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),a.jsxs("select",{value:newApplication.priority,onChange:P=>setNewApplication(A=>({...A,priority:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[a.jsx("option",{value:"Low",children:"Low Priority"}),a.jsx("option",{value:"Medium",children:"Medium Priority"}),a.jsx("option",{value:"High",children:"High Priority"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2",children:newApplication.requirements.map((P,A)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:P,onChange:L=>C(A,L.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-sm",placeholder:"Enter requirement"}),a.jsx("button",{onClick:()=>I(A),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(bn,{className:"w-4 h-4"})})]},A))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-8",children:[a.jsx("button",{onClick:addApplication,disabled:c,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Create Application"}),a.jsx("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(fr,{className:"w-5 h-5 mr-2"}),f]})}),p&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(St,{className:"w-5 h-5 mr-2"}),p]})}),a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Application Tracker"}),a.jsx("p",{className:"text-gray-600",children:"Monitor your university application progress and deadlines"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[a.jsx(Nr,{className:"w-5 h-5 mr-2"}),"Add Application"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx($n,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[M.avgCompletion,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Completion"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:a.jsx(Pe,{className:"w-6 h-6 text-[#04adee]"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Applications"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(Fr,{className:"w-6 h-6 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M.inProgress}),a.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(fr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M.submitted}),a.jsx("div",{className:"text-sm text-gray-600",children:"Submitted"})]})]})})]}),a.jsx("div",{className:"space-y-6",children:e.map(P=>{const A=P.requirements.filter(U=>U.completed).length,L=Math.ceil((new Date(P.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:P.universityName}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(P.priority)}`,children:[P.priority," Priority"]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(P.status)}`,children:P.status})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:P.program}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(bt,{className:"w-4 h-4 mr-1"}),"Deadline: ",new Date(P.deadline).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fr,{className:"w-4 h-4 mr-1"}),L>0?`${L} days left`:"Overdue"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("div",{className:"text-2xl font-bold text-[#04adee]",children:[P.completionPercentage,"%"]}),a.jsx(Ra,{className:"w-5 h-5 text-[#04adee]"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[A," of ",P.requirements.length," completed"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${P.completionPercentage}%`}})})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements Checklist:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:P.requirements.map(U=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>j(P.id,U.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${U.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:U.completed&&a.jsx(fr,{className:"w-3 h-3"})}),a.jsx("span",{className:`flex-1 ${U.completed?"line-through text-gray-500":"text-gray-700"}`,children:U.name}),U.dueDate&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(U.dueDate).toLocaleDateString()]})]},U.id))})]}),P.notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-gray-700 text-sm",children:P.notes})]})]},P.id)})}),e.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Pe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your university applications to stay organized."}),a.jsx("button",{onClick:()=>l(!0),className:"bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Add Your First Application"})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Application"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:g.universityName,onChange:P=>v(A=>({...A,universityName:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., University of Chicago"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),a.jsx("input",{type:"text",value:g.program,onChange:P=>v(A=>({...A,program:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:O,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.requirements.map((P,A)=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:P,onChange:L=>S(A,L.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${d[A]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),a.jsx("button",{onClick:()=>k(A),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(bn,{className:"w-4 h-4"})})]}),d[A]&&a.jsx("p",{className:"text-red-600 text-xs ml-3",children:d[A]})]},A))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:D,disabled:c||!g.universityName.trim()||!g.program.trim()||Object.keys(d).length>0,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),a.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})})]})]})},Qne=()=>{const[e,t]=y.useState(""),[r,n]=y.useState(""),s=[{id:1,title:"How to Write a Compelling Personal Statement",type:"Article",author:"Dr. Sarah Johnson",rating:4.8,readTime:15,category:"Essays"},{id:2,title:"College Essay Bootcamp",type:"Video",author:"College Prep Academy",rating:4.9,category:"Essays"},{id:3,title:"FAFSA Complete Guide",type:"Guide",author:"Financial Aid Team",rating:4.7,readTime:25,category:"Financial Aid"}],i=l=>{switch(l){case"Video":return yl;case"Article":return Pe;case"Guide":return mr;case"Template":return ob;default:return Pe}},o=l=>({Article:"bg-blue-100 text-blue-800",Video:"bg-red-100 text-red-800",Guide:"bg-green-100 text-green-800",Template:"bg-purple-100 text-purple-800"})[l]||"bg-gray-100 text-gray-800";return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search resources...",value:e,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-2xl p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wt,{className:"w-5 h-5 text-[#04adee] mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[#04adee] text-sm",children:"Curated Resources"}),a.jsx("p",{className:"text-xs text-gray-700",children:"Hand-picked by successful students"})]})]})}),a.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:["All","Essays","Applications","Financial Aid","Test Prep"].map(l=>a.jsx("button",{onClick:()=>n(l==="All"?"":l),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${r===l||l==="All"&&r===""?"bg-[#04adee] text-white":"bg-gray-100 text-gray-700"}`,children:l},l))}),a.jsx("div",{className:"space-y-4",children:s.map(l=>{const c=i(l.type);return a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-[#04adee] bg-opacity-10 rounded-xl flex items-center justify-center mr-3",children:a.jsx(c,{className:"w-5 h-5 text-[#04adee]"})}),a.jsxs("div",{children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o(l.type)}`,children:l.type}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:l.category})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wt,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.rating})]})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:l.title}),a.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["by ",l.author]}),a.jsxs("div",{className:"flex items-center justify-between",children:[l.readTime&&a.jsxs("span",{className:"text-xs text-gray-500",children:[l.readTime," min read"]}),a.jsxs("button",{className:"flex items-center bg-[#04adee] text-white px-3 py-2 rounded-lg text-sm font-medium",children:["Access",a.jsx(xl,{className:"w-3 h-3 ml-1"})]})]})]},l.id)})})]})},Jne=()=>{const[e,t]=y.useState(""),[r,n]=y.useState([]),[s,i]=y.useState(!0),[o,l]=y.useState(null),[c,u]=y.useState(!1),[d,h]=y.useState(null);y.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0),l(null);const g=at.getStoredUser();if(!g||!g.name){l("Unable to identify logged-in student"),n([]),i(!1);return}const v=g.name,w=G(V,"University Data/Caseloads"),_=await me(w),j=new Set;if(_.exists()){const E=_.val();Object.entries(E).forEach(([D,O])=>{O&&typeof O=="object"&&O[v]===!0&&j.add(D)})}const C=G(V,"University Data/University Counsellors /"),I=await me(C);if(I.exists()){const E=I.val(),D=[];Object.entries(E).forEach(([O,k])=>{if(k&&typeof k=="object"){const S=k,T=S.Name||O;if(j.has(T)){const R=[];S.Languages&&typeof S.Languages=="object"&&Object.entries(S.Languages).forEach(([A,L])=>{L===!0&&R.push(A)});const M=[];S.Specialties&&typeof S.Specialties=="object"&&Object.entries(S.Specialties).forEach(([A,L])=>{L===!0&&M.push(A)});const P={id:O,name:T,email:S.Email||S.email||"",university:S.University||"",year:S.Year||"",location:S.Location||"",profilePicture:S["Profile Picture"]||"https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150",bookingLink:S["Booking Link"]||S["booking link"]||"",languages:R,specialties:M};D.push(P)}}}),n(D)}else n([])}catch(g){console.error("Error loading counselors from Firebase:",g),l(`Failed to load counselors: ${g instanceof Error?g.message:"Unknown error"}`),n([])}finally{i(!1)}},m=r.filter(g=>g.name.toLowerCase().includes(e.toLowerCase())||g.university.toLowerCase().includes(e.toLowerCase())||g.specialties.some(v=>v.toLowerCase().includes(e.toLowerCase()))||g.location.toLowerCase().includes(e.toLowerCase())),p=g=>{h(g),u(!0)},x=g=>{if(g.email){const v=encodeURIComponent("University Guidance Consultation Request"),b=encodeURIComponent(`Dear ${g.name},

I would like to schedule a consultation regarding university guidance.

Best regards`);window.open(`mailto:${g.email}?subject=${v}&body=${b}`,"_self")}else alert("Email address not available for this counselor.")};return s?a.jsxs("div",{className:"p-4 flex items-center justify-center py-12",children:[a.jsx(sf,{className:"w-8 h-8 animate-spin text-[#04adee] mr-3"}),a.jsx("span",{className:"text-lg text-gray-600",children:"Loading counselors..."})]}):o?a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-red-600 mb-4",children:o}),a.jsx("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded-xl hover:bg-red-700 transition-colors",children:"Try Again"})]})}):c&&d?a.jsx(r_,{counselorName:d.name,counselorUniversity:d.university,counselorImage:d.profilePicture,counselorEmail:d.email,onBack:()=>{u(!1),h(null)}}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search counselors...",value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"space-y-4",children:m.map(g=>a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("img",{src:g.profilePicture,alt:g.name,className:"w-16 h-16 rounded-2xl object-cover mr-4",onError:v=>{v.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:g.name}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[g.year," Student"]}),a.jsx("p",{className:"text-sm text-[#04adee] mb-2",children:g.university}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(fO,{className:"w-4 h-4 mr-1"}),g.location]})]})]}),g.specialties.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Specialties:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:g.specialties.map(v=>a.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-2 py-1 rounded-full",children:v},v))})]}),g.languages.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Languages:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:g.languages.map(v=>a.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:v},v))})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:()=>p(g),className:"flex-1 flex items-center justify-center bg-[#04adee] text-white px-4 py-2 rounded-xl font-medium",children:[a.jsx(bt,{className:"w-4 h-4 mr-2"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>x(g),className:"flex-1 flex items-center justify-center bg-gray-600 text-white px-4 py-2 rounded-xl font-medium",children:[a.jsx(Au,{className:"w-4 h-4 mr-2"}),"Email"]})]})]},g.id))}),m.length===0&&!s&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors found"}),a.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria."})]}),r.length===0&&!s&&!o&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors available"}),a.jsx("p",{className:"text-gray-600",children:"Counselors data is not available at the moment."})]})]})},Zne=({onLogout:e,user:t})=>{var f;const[r,n]=y.useState("profile"),[s,i]=y.useState(!1),[o,l]=y.useState(null),c=[{id:"profile",label:"My Profile",icon:Yo,color:"bg-blue-500"},{id:"admit-profiles",label:"Admission Stories",icon:nr,color:"bg-purple-500"},{id:"scholarships",label:"Scholarships",icon:or,color:"bg-green-500"},{id:"applications",label:"Applications",icon:Pe,color:"bg-orange-500"},{id:"resources",label:"Resources",icon:mr,color:"bg-red-500"},{id:"counselors",label:"Counselors",icon:Zc,color:"bg-indigo-500"}],u=()=>{const m=c.find(p=>p.id===r);return(m==null?void 0:m.label)||"EduCare"},d=m=>{n(m),i(!1)},h=()=>{switch(r){case"profile":return a.jsx(l2,{user:t});case"admit-profiles":return a.jsx(Gne,{onViewProfile:m=>{l(m),n("profile-details")}});case"scholarships":return a.jsx(Yne,{});case"applications":return a.jsx(Xne,{});case"resources":return a.jsx(Qne,{});case"counselors":return a.jsx(Jne,{});case"profile-details":return o?a.jsx(Kne,{profileId:o,onBack:()=>n("admit-profiles")}):null;default:return a.jsx(l2,{user:t})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-40",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-area-top",children:[a.jsx("button",{onClick:()=>i(!0),className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors",children:a.jsx(mO,{className:"w-6 h-6 text-gray-700"})}),a.jsx("div",{className:"flex-1 text-center",children:a.jsx("h1",{className:"text-lg font-bold text-gray-900",children:u()})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors",children:a.jsx(Sr,{className:"w-5 h-5 text-gray-700"})}),a.jsxs("button",{className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors relative",children:[a.jsx(ZB,{className:"w-5 h-5 text-gray-700"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-white font-bold",children:"3"})})]})]})]})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>i(!1)}),a.jsx("div",{className:`
        fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-out
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 px-6 py-8 safe-area-top",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/blue logo.png",alt:"EduCare Logo",className:"w-10 h-10 object-contain"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"EduCare"}),a.jsx("p",{className:"text-blue-100 text-sm",children:"University Guidance"})]})]}),a.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-full bg-white bg-opacity-20 active:bg-opacity-30 transition-colors",children:a.jsx(St,{className:"w-6 h-6 text-white"})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:((f=t==null?void 0:t.name)==null?void 0:f.charAt(0))||"S"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-white font-semibold",children:(t==null?void 0:t.name)||"Student"}),a.jsx("p",{className:"text-blue-100 text-sm",children:(t==null?void 0:t.grade)||"Grade 12"})]})]})]}),a.jsx("div",{className:"flex-1 py-4",children:c.map(m=>a.jsxs("button",{onClick:()=>d(m.id),className:`w-full flex items-center px-6 py-4 text-left transition-all duration-200 ${r===m.id?"bg-blue-50 border-r-4 border-[#04adee]":"hover:bg-gray-50 active:bg-gray-100"}`,children:[a.jsx("div",{className:`w-10 h-10 ${m.color} rounded-full flex items-center justify-center mr-4`,children:a.jsx(m.icon,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:`font-medium text-lg ${r===m.id?"text-[#04adee]":"text-gray-700"}`,children:m.label})]},m.id))}),a.jsx("div",{className:"p-4 border-t border-gray-200 safe-area-bottom",children:a.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center px-6 py-4 bg-red-50 text-red-600 rounded-2xl font-semibold text-lg active:bg-red-100 transition-colors",children:[a.jsx(St,{className:"w-5 h-5 mr-3"}),"Logout"]})})]})}),a.jsx("main",{className:"min-h-screen",children:h()})]})},Vd={getAll:async e=>{const{data:t,error:r}=await Ht.from("counselor_scholarships").select("*").eq("counselor_id",e).order("deadline",{ascending:!0});if(r)throw r;return(t||[]).map(s=>({...s,eligibility_criteria:typeof s.eligibility_criteria=="string"?JSON.parse(s.eligibility_criteria):s.eligibility_criteria,requirements:typeof s.requirements=="string"?JSON.parse(s.requirements):s.requirements}))},create:async e=>{const{data:t,error:r}=await Ht.from("counselor_scholarships").insert(e).select().single();if(r)throw r;try{const n=Array.isArray(e.eligibility_criteria)?e.eligibility_criteria:[e.eligibility_criteria],s=Array.isArray(e.requirements)?e.requirements:[e.requirements],i={};n.forEach((c,u)=>{i[String(u+1)]=c});const o={};s.forEach((c,u)=>{o[String(u+1)]=c});const l=G(V,`University Data/Scholarships/${e.name}`);await gt(l,{"Award amount":e.award_amount,Deadline:e.deadline,Description:e.description,"Icon link":e.logo_url||"",Link:e.application_link,"Eligibility Criteria":i,Requirements:o}),console.log("Scholarship saved to Firebase successfully")}catch(n){console.error("Error saving to Firebase:",n),console.log("Scholarship saved to Supabase, but Firebase sync failed")}return{...t,eligibility_criteria:typeof t.eligibility_criteria=="string"?JSON.parse(t.eligibility_criteria):t.eligibility_criteria,requirements:typeof t.requirements=="string"?JSON.parse(t.requirements):t.requirements}},update:async(e,t)=>{const{data:r,error:n}=await Ht.from("counselor_scholarships").select("*").eq("id",e).single();if(n)throw n;const{data:s,error:i}=await Ht.from("counselor_scholarships").update(t).eq("id",e).select().single();if(i)throw i;try{const o=r.name,l=t.name||o;if(o!==l){const m=G(V,`University Data/Scholarships/${o}`);await Yc(m)}const c=Array.isArray(t.eligibility_criteria)?t.eligibility_criteria:t.eligibility_criteria?[t.eligibility_criteria]:Array.isArray(r.eligibility_criteria)?r.eligibility_criteria:[r.eligibility_criteria],u=Array.isArray(t.requirements)?t.requirements:t.requirements?[t.requirements]:Array.isArray(r.requirements)?r.requirements:[r.requirements],d={};c.forEach((m,p)=>{d[String(p+1)]=m});const h={};u.forEach((m,p)=>{h[String(p+1)]=m});const f=G(V,`University Data/Scholarships/${l}`);await gt(f,{"Award amount":t.award_amount||r.award_amount,Deadline:t.deadline||r.deadline,Description:t.description||r.description,"Icon link":t.logo_url!==void 0?t.logo_url:r.logo_url||"",Link:t.application_link||r.application_link,"Eligibility Criteria":d,Requirements:h}),console.log("Scholarship updated in Firebase successfully")}catch(o){console.error("Error updating Firebase:",o),console.log("Scholarship updated in Supabase, but Firebase sync failed")}return{...s,eligibility_criteria:typeof s.eligibility_criteria=="string"?JSON.parse(s.eligibility_criteria):s.eligibility_criteria,requirements:typeof s.requirements=="string"?JSON.parse(s.requirements):s.requirements}},delete:async e=>{const{data:t,error:r}=await Ht.from("counselor_scholarships").select("name").eq("id",e).single();if(r)throw r;const{error:n}=await Ht.from("counselor_scholarships").delete().eq("id",e);if(n)throw n;if(t)try{const s=G(V,`University Data/Scholarships/${t.name}`);await Yc(s),console.log("Scholarship removed from Firebase successfully")}catch(s){console.error("Error removing from Firebase:",s),console.log("Scholarship deleted from Supabase, but Firebase sync failed")}}};function ese({onBack:e,onLogout:t}){const[r,n]=y.useState([]),[s,i]=y.useState(!0),[o,l]=y.useState(null),[c,u]=y.useState(!1),[d,h]=y.useState(null),[f,m]=y.useState(!1),[p,x]=y.useState(null),[g,v]=y.useState({name:"",logo_url:"",description:"",award_amount:"",deadline:"",eligibility_criteria:[],requirements:[],application_link:""}),[b,w]=y.useState(""),[_,j]=y.useState("");y.useEffect(()=>{N()},[]);const N=async()=>{i(!0),l(null);try{const R=await Vd.getAll("203c556b-d13d-48f6-81dc-49a162b5527d");n(R),l(null)}catch(R){console.error("Error loading scholarships:",R),l("Failed to load scholarships. Please try again."),n([])}finally{i(!1)}},C=async R=>{if(R.preventDefault(),g.eligibility_criteria.length===0){l("Please add at least one eligibility criteria");return}if(g.requirements.length===0){l("Please add at least one requirement");return}m(!0),l(null),x(null);try{if(console.log("Submitting scholarship data:",g),d)await Vd.update(d,g),x("Scholarship updated successfully!"),console.log("Scholarship updated successfully");else{const M=await Vd.create({...g,counselor_id:"203c556b-d13d-48f6-81dc-49a162b5527d"});x("Scholarship created successfully!"),console.log("Scholarship created successfully:",M)}D(),await N()}catch(M){console.error("Error saving scholarship:",M),l(`Failed to save scholarship: ${M instanceof Error?M.message:"Unknown error"}`)}finally{m(!1)}},I=R=>{v({name:R.name,logo_url:R.logo_url||"",description:R.description,award_amount:R.award_amount,deadline:R.deadline,eligibility_criteria:Array.isArray(R.eligibility_criteria)?R.eligibility_criteria:R.eligibility_criteria.split(`
`).filter(M=>M.trim()),requirements:Array.isArray(R.requirements)?R.requirements:R.requirements.split(`
`).filter(M=>M.trim()),application_link:R.application_link}),h(R.id),u(!0)},E=async R=>{if(confirm("Are you sure you want to delete this scholarship?"))try{await Vd.delete(R),alert("Scholarship deleted successfully!"),N()}catch(M){console.error("Error deleting scholarship:",M),alert("Failed to delete scholarship. Please try again.")}},D=()=>{v({name:"",logo_url:"",description:"",award_amount:"",deadline:"",eligibility_criteria:[],requirements:[],application_link:""}),w(""),j(""),h(null),u(!1),l(null),x(null)},O=()=>{b.trim()&&(v({...g,eligibility_criteria:[...g.eligibility_criteria,b.trim()]}),w(""))},k=R=>{v({...g,eligibility_criteria:g.eligibility_criteria.filter((M,P)=>P!==R)})},S=()=>{_.trim()&&(v({...g,requirements:[...g.requirements,_.trim()]}),j(""))},T=R=>{v({...g,requirements:g.requirements.filter((M,P)=>P!==R)})};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Scholarship Management"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Add and manage scholarship opportunities"})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[a.jsx(Nr,{className:"w-4 h-4"}),c?"Cancel":"Add Scholarship"]})}),o&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(St,{className:"w-5 h-5 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700",children:o})]})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-600 hover:text-red-700",children:a.jsx(St,{className:"w-5 h-5"})})]}),p&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(or,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-900",children:"Success"}),a.jsx("p",{className:"text-sm text-green-700",children:p})]})]}),a.jsx("button",{onClick:()=>x(null),className:"text-green-600 hover:text-green-700",children:a.jsx(St,{className:"w-5 h-5"})})]}),c&&a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:d?"Edit Scholarship":"New Scholarship"}),a.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Scholarship Name *"}),a.jsx("input",{type:"text",value:g.name,onChange:R=>v({...g,name:R.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo URL"}),a.jsx("input",{type:"url",value:g.logo_url,onChange:R=>v({...g,logo_url:R.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),a.jsx("textarea",{value:g.description,onChange:R=>v({...g,description:R.target.value}),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Award Amount *"}),a.jsx("input",{type:"text",value:g.award_amount,onChange:R=>v({...g,award_amount:R.target.value}),required:!0,placeholder:"e.g., $5,000",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Deadline *"}),a.jsx("input",{type:"date",value:g.deadline,onChange:R=>v({...g,deadline:R.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Eligibility Criteria *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:b,onChange:R=>w(R.target.value),onKeyPress:R=>{R.key==="Enter"&&(R.preventDefault(),O())},placeholder:"Add eligibility criteria...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors",children:a.jsx(Nr,{className:"w-4 h-4"})})]}),g.eligibility_criteria.length>0&&a.jsx("ul",{className:"space-y-2 mt-2",children:g.eligibility_criteria.map((R,M)=>a.jsxs("li",{className:"flex items-center justify-between bg-slate-50 px-4 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-slate-700",children:R}),a.jsx("button",{type:"button",onClick:()=>k(M),className:"text-red-600 hover:text-red-700 transition-colors",children:a.jsx(St,{className:"w-4 h-4"})})]},M))}),g.eligibility_criteria.length===0&&a.jsx("p",{className:"text-sm text-slate-500 italic",children:"No eligibility criteria added yet"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Requirements *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:_,onChange:R=>j(R.target.value),onKeyPress:R=>{R.key==="Enter"&&(R.preventDefault(),S())},placeholder:"Add requirement...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors",children:a.jsx(Nr,{className:"w-4 h-4"})})]}),g.requirements.length>0&&a.jsx("ul",{className:"space-y-2 mt-2",children:g.requirements.map((R,M)=>a.jsxs("li",{className:"flex items-center justify-between bg-slate-50 px-4 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-slate-700",children:R}),a.jsx("button",{type:"button",onClick:()=>T(M),className:"text-red-600 hover:text-red-700 transition-colors",children:a.jsx(St,{className:"w-4 h-4"})})]},M))}),g.requirements.length===0&&a.jsx("p",{className:"text-sm text-slate-500 italic",children:"No requirements added yet"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Link *"}),a.jsx("input",{type:"url",value:g.application_link,onChange:R=>v({...g,application_link:R.target.value}),required:!0,placeholder:"https://...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),d?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[d?"Update":"Create"," Scholarship"]})}),a.jsx("button",{type:"button",onClick:D,disabled:f,className:"px-6 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"mt-4 text-slate-600",children:"Loading scholarships..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[a.jsx(or,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 text-lg",children:"No scholarships yet"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Create your first scholarship to get started"})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(R=>a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow duration-300 relative",children:[a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[a.jsx("button",{onClick:()=>I(R),className:"p-2 hover:bg-[#04ADEE]/10 text-[#04ADEE] rounded-lg transition-colors",title:"Edit scholarship",children:a.jsx(gO,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>E(R.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",title:"Delete scholarship",children:a.jsx(bn,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-start gap-4 mb-4 pr-20",children:[R.logo_url&&a.jsx("img",{src:R.logo_url,alt:R.name,className:"w-16 h-16 object-contain rounded-lg flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:R.name}),a.jsx("p",{className:"text-slate-700 text-sm",children:R.description})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-[#04ADEE] bg-opacity-10 rounded-lg",children:[a.jsx(Da,{className:"w-6 h-6 text-[#04ADEE] mx-auto mb-1"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:R.award_amount}),a.jsx("div",{className:"text-sm text-slate-600",children:"Award Amount"})]}),a.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[a.jsx(bt,{className:"w-6 h-6 text-slate-600 mx-auto mb-1"}),a.jsx("div",{className:"text-sm font-bold text-slate-900",children:new Date(R.deadline).toLocaleDateString()}),a.jsx("div",{className:"text-sm text-slate-600",children:"Deadline"})]})]}),Array.isArray(R.eligibility_criteria)&&R.eligibility_criteria.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Eligibility Criteria:"}),a.jsx("ul",{className:"space-y-1",children:R.eligibility_criteria.map((M,P)=>a.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[a.jsx("div",{className:"w-2 h-2 bg-[#04ADEE] rounded-full mr-2 flex-shrink-0"}),M]},P))})]}),Array.isArray(R.requirements)&&R.requirements.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Requirements:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:R.requirements.map((M,P)=>a.jsx("span",{className:"bg-slate-100 text-slate-700 text-xs px-3 py-1 rounded-full",children:M},P))})]}),a.jsx("div",{className:"pt-4 border-t border-slate-200",children:a.jsxs("a",{href:R.application_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors text-sm font-medium w-full",children:["Learn More & Apply",a.jsx(xl,{className:"w-4 h-4 ml-2"})]})})]},R.id))})]})}const c2=e=>e.charAt(0).toUpperCase()+e.slice(1),u2=e=>e==="financial_aid"?"Financial Aid":e.charAt(0).toUpperCase()+e.slice(1),_o={getAll:async e=>{try{const t=G(V,"University Data/Resources"),r=await me(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.entries(n).forEach(([i,o])=>{var u;const l=[];o["Key Words"]&&Object.keys(o["Key Words"]).forEach(d=>{l.push(d)});const c={Essays:"essays","Financial Aid":"financial_aid",Applications:"applications",Interviews:"interviews",General:"general"};s.push({id:i,counselor_id:e,resource_type:((u=o["Resource Type"])==null?void 0:u.toLowerCase())||"other",title:o.name||i,creator:o.Owner||"",description:o.Description||"",key_topics:l,time_estimate:o.Duration||"",link:o.Link||"",category:c[o["Helps with"]]||"general",created_at:new Date().toISOString()})}),s}catch(t){throw console.error("Error loading resources from Firebase:",t),t}},getByCategory:async(e,t)=>(await _o.getAll(e)).filter(n=>n.category===t),create:async e=>{console.log("counselorResourcesService.create called with:",e);try{if(!V)throw new Error("Firebase database is not initialized");const t={};e.key_topics.forEach(o=>{t[o]=!0}),console.log("Key words object:",t);const r=`University Data/Resources/${e.title}`;console.log("Writing to Firebase path:",r);const n=G(V,r),s={name:e.title,"Resource Type":c2(e.resource_type),Owner:e.creator,Description:e.description,"Key Words":t,Duration:e.time_estimate,Link:e.link,"Helps with":u2(e.category)};console.log("Data to write:",s),await gt(n,s),console.log("Resource saved to Firebase successfully at path:",r);const i={id:e.title,...e,created_at:new Date().toISOString()};return console.log("Returning result:",i),i}catch(t){throw console.error("Error saving to Firebase:",t),console.error("Error details:",t instanceof Error?t.message:t),t}},update:async(e,t)=>{var r;try{const n=e,s=t.title||n;if(n!==s){const h=G(V,`University Data/Resources/${n}`);await Yc(h)}const i=G(V,`University Data/Resources/${n}`),o=await me(i),l=o.exists()?o.val():{},c=t.key_topics||[],u={};c.forEach(h=>{u[h]=!0});const d=G(V,`University Data/Resources/${s}`);return await gt(d,{name:s,"Resource Type":c2(t.resource_type||((r=l["Resource Type"])==null?void 0:r.toLowerCase())||"other"),Owner:t.creator||l.Owner||"",Description:t.description||l.Description||"","Key Words":Object.keys(u).length>0?u:l["Key Words"]||{},Duration:t.time_estimate||l.Duration||"",Link:t.link||l.Link||"","Helps with":u2(t.category||"general")}),console.log("Resource updated in Firebase successfully"),{id:s,counselor_id:"",resource_type:t.resource_type||"other",title:s,creator:t.creator||"",description:t.description||"",key_topics:t.key_topics||[],time_estimate:t.time_estimate||"",link:t.link||"",category:t.category||"general",created_at:new Date().toISOString()}}catch(n){throw console.error("Error updating Firebase:",n),n}},delete:async e=>{try{const t=G(V,`University Data/Resources/${e}`);await Yc(t),console.log("Resource removed from Firebase successfully")}catch(t){throw console.error("Error removing from Firebase:",t),t}},search:async(e,t)=>{const r=await _o.getAll(e),n=t.toLowerCase();return r.filter(s=>s.title.toLowerCase().includes(n)||s.creator.toLowerCase().includes(n)||s.key_topics.some(i=>i.toLowerCase().includes(n)))}};function tse({onBack:e,onLogout:t}){const[r,n]=y.useState([]),[s,i]=y.useState([]),[o,l]=y.useState(!0),[c,u]=y.useState(!1),[d,h]=y.useState(null),[f,m]=y.useState(""),[p,x]=y.useState("all"),[g,v]=y.useState("all"),[b,w]=y.useState({resource_type:"article",title:"",creator:"",description:"",key_topics:"",time_estimate:"",link:"",category:"general"});y.useEffect(()=>{_()},[]),y.useEffect(()=>{j()},[r,f,p,g]);const _=async()=>{l(!0),console.log("Loading resources from Firebase...");try{const k=await _o.getAll("anonymous");console.log("Resources loaded:",k),n(k)}catch(k){console.error("Error loading resources:",k),n([])}finally{l(!1)}},j=()=>{let k=[...r];f&&(k=k.filter(S=>S.title.toLowerCase().includes(f.toLowerCase())||S.creator.toLowerCase().includes(f.toLowerCase())||S.key_topics.some(T=>T.toLowerCase().includes(f.toLowerCase())))),p!=="all"&&(k=k.filter(S=>S.category===p)),g!=="all"&&(k=k.filter(S=>S.resource_type===g)),i(k)},N=async k=>{k.preventDefault();const S=b.key_topics.split(",").map(T=>T.trim()).filter(T=>T);if(!b.title||!b.creator||!b.link){alert("Please fill in all required fields");return}console.log("Submitting resource:",{...b,key_topics:S});try{if(d)console.log("Updating resource with id:",d),await _o.update(d,{...b,key_topics:S}),alert("Resource updated successfully!");else{console.log("Creating new resource");const T=await _o.create({...b,key_topics:S,counselor_id:"anonymous"});console.log("Resource created:",T),alert("Resource created successfully!")}E(),await _()}catch(T){console.error("Error saving resource:",T),alert(`Error saving resource: ${T instanceof Error?T.message:"Unknown error"}`)}},C=k=>{w({resource_type:k.resource_type,title:k.title,creator:k.creator,description:k.description||"",key_topics:k.key_topics.join(", "),time_estimate:k.time_estimate,link:k.link,category:k.category}),h(k.id),u(!0)},I=async k=>{if(confirm("Are you sure you want to delete this resource?"))try{await _o.delete(k),_()}catch(S){console.error("Error deleting resource:",S)}},E=()=>{w({resource_type:"article",title:"",creator:"",description:"",key_topics:"",time_estimate:"",link:"",category:"general"}),h(null),u(!1)},D=k=>{switch(k){case"video":return a.jsx(yl,{className:"w-4 h-4"});case"article":return a.jsx(Pe,{className:"w-4 h-4"});case"guide":return a.jsx(mr,{className:"w-4 h-4"});default:return a.jsx(Pe,{className:"w-4 h-4"})}},O=k=>{switch(k){case"essays":return"bg-purple-100 text-purple-700 border-purple-200";case"financial_aid":return"bg-green-100 text-green-700 border-green-200";case"applications":return"bg-blue-100 text-blue-700 border-blue-200";case"interviews":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Resource Management"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Add and manage educational resources"})]}),a.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[a.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[a.jsx(Nr,{className:"w-4 h-4"}),c?"Cancel":"Add Resource"]}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Sr,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsx("input",{type:"text",value:f,onChange:k=>m(k.target.value),placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),f&&a.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsxs("select",{value:p,onChange:k=>x(k.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"all",children:"All Categories"}),a.jsx("option",{value:"essays",children:"Essays"}),a.jsx("option",{value:"financial_aid",children:"Financial Aid"}),a.jsx("option",{value:"applications",children:"Applications"}),a.jsx("option",{value:"interviews",children:"Interviews"}),a.jsx("option",{value:"general",children:"General"})]}),a.jsxs("select",{value:g,onChange:k=>v(k.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"video",children:"Videos"}),a.jsx("option",{value:"article",children:"Articles"}),a.jsx("option",{value:"guide",children:"Guides"}),a.jsx("option",{value:"other",children:"Other"})]})]}),c&&a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:d?"Edit Resource":"New Resource"}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resource Type *"}),a.jsxs("select",{value:b.resource_type,onChange:k=>w({...b,resource_type:k.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"video",children:"Video"}),a.jsx("option",{value:"article",children:"Article"}),a.jsx("option",{value:"guide",children:"Guide"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Category *"}),a.jsxs("select",{value:b.category,onChange:k=>w({...b,category:k.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"essays",children:"Essays"}),a.jsx("option",{value:"financial_aid",children:"Financial Aid"}),a.jsx("option",{value:"applications",children:"Applications"}),a.jsx("option",{value:"interviews",children:"Interviews"}),a.jsx("option",{value:"general",children:"General Strategy"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Title *"}),a.jsx("input",{type:"text",value:b.title,onChange:k=>w({...b,title:k.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),a.jsx("textarea",{value:b.description,onChange:k=>w({...b,description:k.target.value}),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Creator / Author *"}),a.jsx("input",{type:"text",value:b.creator,onChange:k=>w({...b,creator:k.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Time Estimate *"}),a.jsx("input",{type:"text",value:b.time_estimate,onChange:k=>w({...b,time_estimate:k.target.value}),required:!0,placeholder:"e.g., 10 minutes",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Key Topics * (comma-separated)"}),a.jsx("input",{type:"text",value:b.key_topics,onChange:k=>w({...b,key_topics:k.target.value}),required:!0,placeholder:"e.g., Common App, Personal Statement, Brainstorming",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resource Link *"}),a.jsx("input",{type:"url",value:b.link,onChange:k=>w({...b,link:k.target.value}),required:!0,placeholder:"https://...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"submit",className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[d?"Update":"Create"," Resource"]}),a.jsx("button",{type:"button",onClick:E,className:"px-6 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"})]})]})]}),o?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"mt-4 text-slate-600",children:"Loading resources..."})]}):s.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[a.jsx(mr,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 text-lg",children:"No resources found"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:f||p!=="all"||g!=="all"?"Try adjusting your search or filters":'Click "Add Resource" button above to create your first resource'})]}):a.jsx("div",{className:"grid gap-4",children:s.map(k=>a.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-[#04ADEE]/10 rounded-lg text-[#04ADEE]",children:D(k.resource_type)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:k.title}),a.jsxs("p",{className:"text-sm text-slate-600",children:["by ",k.creator]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${O(k.category)}`,children:k.category.replace("_"," ")})]}),k.description&&a.jsx("p",{className:"text-sm text-slate-700 mb-3",children:k.description}),a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(Fr,{className:"w-4 h-4"}),k.time_estimate]}),a.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:a.jsx("span",{className:"font-medium capitalize",children:k.resource_type})})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:k.key_topics.map((S,T)=>a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:S},T))}),a.jsxs("a",{href:k.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] text-sm font-medium",children:[a.jsx(xl,{className:"w-4 h-4"}),"View Resource"]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{onClick:()=>C(k),className:"p-2 hover:bg-[#04ADEE]/10 text-[#04ADEE] rounded-lg transition-colors",children:a.jsx(gO,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>I(k.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:a.jsx(bn,{className:"w-4 h-4"})})]})]})},k.id))})]})}const rse={getActiveStudents:async e=>{const{data:t,error:r}=await Ht.from("pool_students").select("*").eq("counselor_id",e).eq("status","active").order("composite_score",{ascending:!1});if(r)throw r;return t||[]},getAssignedStudents:async e=>{const{data:t,error:r}=await Ht.from("pool_students").select("*").eq("counselor_id",e).eq("status","assigned").order("updated_at",{ascending:!1});if(r)throw r;return t||[]},getStudentById:async e=>{const{data:t,error:r}=await Ht.from("pool_students").select("*").eq("id",e).maybeSingle();if(r)throw r;return t},assignUniversities:async(e,t)=>{try{console.log("=== ASSIGNING UNIVERSITIES (FIREBASE) ==="),console.log("Student Name:",e),console.log("Universities:",t);const r={};t.forEach(l=>{const c=l.tier.charAt(0).toUpperCase()+l.tier.slice(1);r[l.name]=c});const n=`University Data/Assigned Students/${e}/Universities`;console.log("Firebase Path for Assignments:",n),console.log("Data to save:",r);const s=G(V,n);await gt(s,r);const i=`University Data/Pool management/${e}`;console.log("Firebase Path for Pool Management:",i);const o=G(V,i);await fU(o,{Assigned:!0}),console.log(" Universities assigned successfully"),console.log(`=== END ASSIGNMENT ===
`)}catch(r){throw console.error(" ERROR in assignUniversities:",r),r}},getStudentAssignments:async e=>{const{data:t,error:r}=await Ht.from("university_assignments").select("*").eq("student_id",e).order("assigned_at",{ascending:!1});if(r)throw r;return t||[]},addStudent:async e=>{const{data:t,error:r}=await Ht.from("pool_students").insert(e).select().single();if(r)throw r;return t}},Kg={reach:["Harvard University","Stanford University","MIT","Yale University","Princeton University","Columbia University","Duke University","University of Pennsylvania","Cornell University","Brown University"],mid:["University of Michigan","Boston University","Northwestern University","University of Virginia","University of North Carolina","NYU","University of California Berkeley","UCLA","USC","Georgetown University"],safety:["Penn State University","Ohio State University","Michigan State University","University of Maryland","Rutgers University","Purdue University","University of Wisconsin Madison","University of Florida","Arizona State University"]};function nse({student:e,counselorId:t,onClose:r,onComplete:n}){const[s,i]=y.useState([]),[o,l]=y.useState(""),[c,u]=y.useState("mid"),[d,h]=y.useState(!1),[f,m]=y.useState(""),[p,x]=y.useState(!0),[g,v]=y.useState(5),[b,w]=y.useState(!1),_=()=>{if(!o.trim()){m("Please enter a university name");return}if(!b&&s.length>=g){m(`Maximum ${g} universities allowed`);return}if(s.some(E=>E.name.toLowerCase()===o.toLowerCase())){m("This university is already in the list");return}i([...s,{name:o.trim(),tier:c}]),l(""),m("")},j=E=>{i(s.filter((D,O)=>O!==E)),m("")},N=(E,D)=>{if(!b&&s.length>=g){m(`Maximum ${g} universities allowed`);return}if(s.some(O=>O.name.toLowerCase()===E.toLowerCase())){m("This university is already in the list");return}i([...s,{name:E,tier:D}]),m("")},C=async()=>{if(s.length===0){m("Please add at least one university");return}if(!b&&s.length!==g){m(`Please assign exactly ${g} universities`);return}h(!0),m("");try{await rse.assignUniversities(e.name,s),n()}catch(E){m(E instanceof Error?E.message:"Failed to assign universities"),h(!1)}},I=E=>{switch(E){case"reach":return"bg-purple-100 text-purple-700 border-purple-200";case"mid":return"bg-blue-100 text-blue-700 border-blue-200";case"safety":return"bg-green-100 text-green-700 border-green-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Assign Universities"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:e.name})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:[a.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Composite"}),a.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[e.composite_score.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Current Average"}),a.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[e.academic_performance.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[a.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Essays & Activities"}),a.jsxs("p",{className:"text-lg font-bold text-purple-700",children:[e.essay_activities_rating.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[a.jsx("p",{className:"text-xs text-amber-600 mb-1",children:"Previous Average"}),a.jsxs("p",{className:"text-lg font-bold text-amber-700",children:[((e.academic_performance||0)-(e.academic_trend||0)).toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"mb-6 p-4 bg-[#04ADEE]/10 rounded-lg border border-[#04ADEE]/30",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-[#04ADEE] mb-2",children:"University Limit"}),a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:g,onChange:E=>{const D=parseInt(E.target.value)||1;v(Math.max(1,Math.min(20,D)))},disabled:b,className:"w-24 px-3 py-2 border border-[#04ADEE]/30 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent disabled:opacity-50 disabled:bg-slate-100"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b,onChange:E=>w(E.target.checked),className:"w-4 h-4 text-[#04ADEE] border-[#04ADEE]/30 rounded focus:ring-[#04ADEE]"}),a.jsxs("span",{className:"text-sm text-[#04ADEE] font-medium flex items-center gap-1",children:[a.jsx(o7,{className:"w-4 h-4"}),"Unlimited"]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[#04ADEE] font-medium",children:b?"Add universities (no limit)":`Assign exactly ${g} universities`}),a.jsxs("p",{className:"text-xs text-[#04ADEE]/80 mt-1",children:["Progress: ",s.length,b?"":`/${g}`," universities added"]})]}),!b&&a.jsx("div",{className:"flex items-center gap-2 text-xs text-[#04ADEE]",children:a.jsx("div",{className:"w-12 h-2 bg-[#04ADEE]/20 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#04ADEE] transition-all",style:{width:`${s.length/g*100}%`}})})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Add University"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),onKeyPress:E=>E.key==="Enter"&&_(),placeholder:"University name",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",disabled:!b&&s.length>=g}),a.jsxs("select",{value:c,onChange:E=>u(E.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",disabled:!b&&s.length>=g,children:[a.jsx("option",{value:"reach",children:"Reach"}),a.jsx("option",{value:"mid",children:"Mid"}),a.jsx("option",{value:"safety",children:"Safety"})]}),a.jsxs("button",{onClick:_,disabled:!b&&s.length>=g,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(Nr,{className:"w-4 h-4"}),"Add"]})]})]}),f&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:f}),a.jsxs("div",{className:"space-y-2 mb-6",children:[a.jsxs("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:["Selected Universities (",s.length,b?"":`/${g}`,")"]}),s.length===0?a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[a.jsx("p",{className:"text-slate-500",children:"No universities added yet"}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Add universities above or choose from suggestions below"})]}):s.map((E,D)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200 hover:border-slate-300 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsxs("span",{className:"text-slate-500 font-medium",children:[D+1,"."]}),a.jsx("span",{className:"font-medium text-slate-900",children:E.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${I(E.tier)}`,children:E.tier.charAt(0).toUpperCase()+E.tier.slice(1)})]}),a.jsx("button",{onClick:()=>j(D),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:a.jsx(bn,{className:"w-4 h-4"})})]},D))]}),(b||s.length<g)&&p&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(v7,{className:"w-4 h-4 text-[#04ADEE]"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Quick Add Suggestions"})]}),a.jsx("button",{onClick:()=>x(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Hide"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-purple-700 mb-2",children:"Reach Schools"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Kg.reach.slice(0,5).map(E=>a.jsxs("button",{onClick:()=>N(E,"reach"),disabled:s.some(D=>D.name===E),className:"px-3 py-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 text-xs font-medium rounded-full border border-purple-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",E]},E))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-blue-700 mb-2",children:"Mid-Tier Schools"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Kg.mid.slice(0,5).map(E=>a.jsxs("button",{onClick:()=>N(E,"mid"),disabled:s.some(D=>D.name===E),className:"px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-medium rounded-full border border-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",E]},E))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-green-700 mb-2",children:"Safety Schools"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Kg.safety.slice(0,5).map(E=>a.jsxs("button",{onClick:()=>N(E,"safety"),disabled:s.some(D=>D.name===E),className:"px-3 py-1.5 bg-green-50 hover:bg-green-100 text-green-700 text-xs font-medium rounded-full border border-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",E]},E))})]})]})]}),!p&&(b||s.length<g)&&a.jsx("button",{onClick:()=>x(!0),className:"w-full py-2 text-sm text-[#04ADEE] hover:text-[#0396d5] font-medium",children:"Show Suggestions"})]}),a.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 flex items-center justify-between bg-slate-50",children:[a.jsx("button",{onClick:r,disabled:d,className:"px-6 py-2 text-slate-700 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:C,disabled:d||s.length===0||!b&&s.length!==g,className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Assigning..."]}):a.jsxs(a.Fragment,{children:[a.jsx(yc,{className:"w-4 h-4"}),"Complete Assignment"]})})]})]})})}const sse=async(e,t)=>{const{data:r,error:n}=await Ht.from("pool_students").select("*").eq("id",e).eq("counselor_id",t).maybeSingle();if(n||!r)return console.error("Error fetching student:",n),null;const{data:s,error:i}=await Ht.from("university_assignments").select("*").eq("student_id",e).eq("counselor_id",t).order("assigned_at",{ascending:!1});if(i)return console.error("Error fetching assignments:",i),null;const o=await Promise.all((s||[]).map(async l=>{const{data:c}=await Ht.from("application_progress").select("*").eq("assignment_id",l.id).maybeSingle();return{...l,progress:c||void 0}}));return{...r,universities:o}},ise=async(e,t,r)=>{const{error:n}=await Ht.from("application_progress").update({...t,updated_at:new Date().toISOString()}).eq("id",e).eq("counselor_id",r);return n?(console.error("Error updating progress:",n),!1):!0},ase=async(e,t,r,n)=>{const{data:s,error:i}=await Ht.from("application_progress").insert({assignment_id:e,student_id:t,counselor_id:r,...n}).select().single();return i?(console.error("Error creating progress:",i),null):s},ose=async(e,t)=>{const{error:r}=await Ht.from("university_assignments").delete().eq("id",e).eq("counselor_id",t);return r?(console.error("Error removing assignment:",r),!1):!0},lse=async e=>{try{console.log("=== FETCHING ASSIGNED STUDENTS (FIREBASE) ==="),console.log("Counselor Name:",e);const t=`University Data/Caseloads/${e}`;console.log("Firebase Path for Caseload:",t);const r=G(V,t),n=await me(r);if(console.log("Caseload Exists:",n.exists()),console.log("Raw Caseload Data:",n.val()),!n.exists())return console.log(" No caseload found for counselor:",e),[];const s=n.val(),i=Object.keys(s);console.log("Student Names in Caseload:",i),console.log("Count:",i.length);const o=[];for(const l of i){console.log(`
--- Checking Student: ${l} ---`);const c=`University Data/Assigned Students/${l}/Universities`;console.log("   Assigned Students Path:",c);const u=G(V,c),d=await me(u);if(console.log("   Assigned Snapshot Exists:",d.exists()),console.log("   Raw Universities Data:",d.val()),!d.exists()){console.log(`    No assigned universities for: ${l}`);continue}const h=d.val(),f=[];for(const[b,w]of Object.entries(h))f.push({name:b,tier:w});console.log("   Universities:",f);const m=`University Data/Pool Strength/${l}`;console.log("   Pool Strength Path:",m);const p=G(V,m),x=await me(p),g=x.exists()?x.val():0;console.log("   Composite Score:",g);const v={id:l.replace(/\s+/g,"-").toLowerCase(),name:l,email:`${l.replace(/\s+/g,".").toLowerCase()}@example.com`,universities:f,assignedCount:f.length,compositeScore:g};console.log("    Added Assigned Student:",v),o.push(v)}return console.log(`
=== ASSIGNED STUDENTS SUMMARY ===`),console.log("Total Assigned Students:",o.length),console.log("Students:",o),console.log(`=== END FETCH ===
`),o}catch(t){throw console.error(" ERROR in getAssignedStudentsFromFirebase:",t),t}};function cse({studentId:e,counselorId:t,onBack:r}){const[n,s]=y.useState(null),[i,o]=y.useState(!0),[l,c]=y.useState(null),[u,d]=y.useState(null),[h,f]=y.useState({});y.useEffect(()=>{m()},[e]);const m=async()=>{o(!0);const E=await sse(e,t);s(E),o(!1)},p=async(E,D)=>{D?await ise(D,h,t):await ase(E,e,t,h),d(null),f({}),m()},x=async E=>{confirm("Are you sure you want to remove this university assignment?")&&(await ose(E,t),m())},g=E=>{const D={not_started:"bg-gray-100 text-gray-700",in_progress:"bg-blue-100 text-blue-700",submitted:"bg-purple-100 text-purple-700",accepted:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",deferred:"bg-amber-100 text-amber-700",waitlisted:"bg-orange-100 text-orange-700"};return D[E]||D.not_started},v=E=>({reach:"bg-rose-100 text-rose-700 border-rose-300",mid:"bg-amber-100 text-amber-700 border-amber-300",safety:"bg-emerald-100 text-emerald-700 border-emerald-300"})[E],b=E=>{const D={not_started:"text-gray-400",draft:"text-blue-500",review:"text-amber-500",final:"text-emerald-500"};return D[E]||D.not_started};if(i)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})});if(!n)return a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("p",{className:"text-slate-600",children:"Student not found"}),a.jsx("button",{onClick:r,className:"mt-4 text-[#04ADEE] hover:text-[#0390cc] font-medium",children:"Go Back"})]});const w=n.universities.filter(E=>E.university_tier==="reach").length,_=n.universities.filter(E=>E.university_tier==="mid").length,j=n.universities.filter(E=>E.university_tier==="safety").length,N=n.universities.filter(E=>{var D;return((D=E.progress)==null?void 0:D.status)==="submitted"}).length,C=n.universities.filter(E=>{var D;return((D=E.progress)==null?void 0:D.status)==="accepted"}).length,I=n.universities.filter(E=>{var D;return((D=E.progress)==null?void 0:D.status)==="in_progress"}).length;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-[#04ADEE]/5",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-slate-600 hover:text-[#04ADEE] transition-colors mb-6",children:[a.jsx(ls,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#04ADEE] to-emerald-400 flex items-center justify-center text-white text-2xl font-bold",children:n.name.split(" ").map(E=>E[0]).join("")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:n.name}),a.jsxs("p",{className:"text-slate-600 flex items-center gap-2 mt-1",children:[a.jsx(Au,{className:"w-4 h-4"}),n.email]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-lg border border-emerald-200",children:[a.jsx(or,{className:"w-5 h-5"}),a.jsxs("span",{className:"font-semibold",children:["Composite: ",n.composite_score.toFixed(1)]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-xl p-4 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[a.jsx(mr,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Essays & Activities"})]}),a.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[n.essay_activities_rating.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100/50 rounded-xl p-4 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-2",children:[a.jsx(nr,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Academic Performance"})]}),a.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[n.academic_performance.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-xl p-4 border border-emerald-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 mb-2",children:[n.academic_trend>=0?a.jsx($n,{className:"w-5 h-5"}):a.jsx(x7,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Academic Trend"})]}),a.jsxs("p",{className:"text-2xl font-bold text-emerald-900",children:[n.academic_trend>=0?"+":"",n.academic_trend.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-6",children:[a.jsxs("div",{className:"col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Ra,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Universities"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Total Assigned"}),a.jsx("span",{className:"text-2xl font-bold text-slate-900",children:n.universities.length})]}),a.jsx("div",{className:"h-px bg-slate-200"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-rose-600 text-sm",children:"Reach"}),a.jsx("span",{className:"font-semibold text-rose-600",children:w})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-amber-600 text-sm",children:"Mid"}),a.jsx("span",{className:"font-semibold text-amber-600",children:_})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-emerald-600 text-sm",children:"Safety"}),a.jsx("span",{className:"font-semibold text-emerald-600",children:j})]})]})]}),a.jsxs("div",{className:"col-span-4 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(t7,{className:"w-6 h-6 text-emerald-500"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Application Progress"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("p",{className:"text-sm text-blue-700 font-medium mb-1",children:"In Progress"}),a.jsx("p",{className:"text-3xl font-bold text-blue-900",children:I})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-1",children:"Submitted"}),a.jsx("p",{className:"text-3xl font-bold text-purple-900",children:N})]}),a.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[a.jsx("p",{className:"text-sm text-emerald-700 font-medium mb-1",children:"Accepted"}),a.jsx("p",{className:"text-3xl font-bold text-emerald-900",children:C})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Assigned Universities"}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors",children:[a.jsx(Nr,{className:"w-4 h-4"}),"Add University"]})]}),a.jsxs("div",{className:"space-y-4",children:[n.universities.map(E=>{var D,O,k,S,T,R,M;return a.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"p-6 cursor-pointer bg-gradient-to-r from-slate-50 to-white",onClick:()=>c(l===E.id?null:E.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#04ADEE] to-emerald-400 flex items-center justify-center",children:a.jsx(nr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:E.university_name}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[a.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full border ${v(E.university_tier)}`,children:E.university_tier.charAt(0).toUpperCase()+E.university_tier.slice(1)}),E.progress&&a.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full ${g(E.progress.status)}`,children:E.progress.status.replace("_"," ").toUpperCase()})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[E.progress&&a.jsxs("div",{className:"flex items-center gap-4 mr-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Essay Status"}),a.jsx("p",{className:`text-sm font-semibold ${b(E.progress.essay_status)}`,children:E.progress.essay_status.charAt(0).toUpperCase()+E.progress.essay_status.slice(1)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Recommendations"}),a.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[E.progress.recommendation_letters,"/",E.progress.recommendation_letters_needed]})]})]}),a.jsx("button",{onClick:P=>{P.stopPropagation(),x(E.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(bn,{className:"w-4 h-4"})})]})]})}),l===E.id&&a.jsx("div",{className:"border-t border-slate-200 p-6 bg-white",children:u===E.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Status"}),a.jsxs("select",{value:h.status||((D=E.progress)==null?void 0:D.status)||"not_started",onChange:P=>f({...h,status:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[a.jsx("option",{value:"not_started",children:"Not Started"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"submitted",children:"Submitted"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"rejected",children:"Rejected"}),a.jsx("option",{value:"deferred",children:"Deferred"}),a.jsx("option",{value:"waitlisted",children:"Waitlisted"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Essay Status"}),a.jsxs("select",{value:h.essay_status||((O=E.progress)==null?void 0:O.essay_status)||"not_started",onChange:P=>f({...h,essay_status:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[a.jsx("option",{value:"not_started",children:"Not Started"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"review",children:"Under Review"}),a.jsx("option",{value:"final",children:"Final"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Deadline"}),a.jsx("input",{type:"date",value:h.application_deadline||((k=E.progress)==null?void 0:k.application_deadline)||"",onChange:P=>f({...h,application_deadline:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Decision Date"}),a.jsx("input",{type:"date",value:h.decision_date||((S=E.progress)==null?void 0:S.decision_date)||"",onChange:P=>f({...h,decision_date:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Recommendation Letters (Completed)"}),a.jsx("input",{type:"number",min:"0",value:h.recommendation_letters??((T=E.progress)==null?void 0:T.recommendation_letters)??0,onChange:P=>f({...h,recommendation_letters:parseInt(P.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Recommendation Letters (Required)"}),a.jsx("input",{type:"number",min:"0",value:h.recommendation_letters_needed??((R=E.progress)==null?void 0:R.recommendation_letters_needed)??2,onChange:P=>f({...h,recommendation_letters_needed:parseInt(P.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),a.jsx("textarea",{value:h.notes||((M=E.progress)==null?void 0:M.notes)||"",onChange:P=>f({...h,notes:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",placeholder:"Add notes about this application..."})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsxs("button",{onClick:()=>{d(null),f({})},className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4"}),"Cancel"]}),a.jsxs("button",{onClick:()=>{var P;return p(E.id,(P=E.progress)==null?void 0:P.id)},className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors flex items-center gap-2",children:[a.jsx(Ou,{className:"w-4 h-4"}),"Save Progress"]})]})]}):a.jsx("div",{children:E.progress?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(bt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Application Deadline"})]}),a.jsx("p",{className:"text-slate-900 font-semibold",children:E.progress.application_deadline?new Date(E.progress.application_deadline).toLocaleDateString():"Not set"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(Fr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Decision Date"})]}),a.jsx("p",{className:"text-slate-900 font-semibold",children:E.progress.decision_date?new Date(E.progress.decision_date).toLocaleDateString():"Not set"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(ja,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Recommendation Letters"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2",children:a.jsx("div",{className:"bg-[#04ADEE] h-2 rounded-full transition-all",style:{width:`${E.progress.recommendation_letters/E.progress.recommendation_letters_needed*100}%`}})}),a.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:[E.progress.recommendation_letters,"/",E.progress.recommendation_letters_needed]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(Pe,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Essay Progress"})]}),a.jsx("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-medium ${g(E.progress.essay_status)}`,children:E.progress.essay_status.charAt(0).toUpperCase()+E.progress.essay_status.slice(1)})]})]}),E.progress.notes&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(Pe,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Notes"})]}),a.jsx("p",{className:"text-slate-700 bg-slate-50 rounded-lg p-4",children:E.progress.notes})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsxs("button",{onClick:()=>{d(E.id),f(E.progress||{})},className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 hover:bg-slate-200 rounded-lg transition-colors",children:[a.jsx(pO,{className:"w-4 h-4"}),"Edit Progress"]})})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ns,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500 mb-4",children:"No progress tracking yet"}),a.jsx("button",{onClick:()=>{d(E.id),f({})},className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors",children:"Start Tracking"})]})})})]},E.id)}),n.universities.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-lg mb-2",children:"No universities assigned yet"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Start by adding universities to this student's list"})]})]})]})]})})}const use=({percentage:e,size:t=120,strokeWidth:r=8,color:n="#04ADEE",className:s="",children:i})=>{const o=(t-r)/2,l=o*2*Math.PI,c=l-e/100*l;return a.jsxs("div",{className:`relative inline-flex items-center justify-center ${s}`,children:[a.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:"#e2e8f0",strokeWidth:r,fill:"none"}),a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:n,strokeWidth:r,fill:"none",strokeDasharray:l,strokeDashoffset:c,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i})]})},dse=e=>{if(!e)return"N/A";try{const t=new Date(e),r=new Date;let n=r.getFullYear()-t.getFullYear(),s=r.getMonth()-t.getMonth();return s<0&&(n--,s+=12),r.getDate()<t.getDate()&&(s--,s<0&&(n--,s+=12)),`${n} yrs ${s} mont`}catch{return"N/A"}},hse=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(null),[s,i]=y.useState(null),[o,l]=y.useState(""),[c,u]=y.useState("desc"),[d,h]=y.useState(!0),[f,m]=y.useState(!1),[p,x]=y.useState(0),[g,v]=y.useState(0),[b,w]=y.useState({academicHistory:!1,personalStatement:!1,activities:!1,supplementaryEssays:!1,careerInterests:!1,specialCircumstances:!1}),[_,j]=y.useState(!1),[N,C]=y.useState(null);y.useEffect(()=>{(async()=>{try{console.log(" AcademicTracking: Starting data fetch from FIREBASE..."),h(!0);const P=localStorage.getItem("counselor_name")||"Mr Adoniyas Tesfaye";console.log(" Counselor from localStorage:",P);const A=await Ene(P);console.log(" Data received from Firebase service:"),console.log("  - Total Students:",A.totalStudents),console.log("  - Average Grade:",A.averageGrade),console.log("  - Students Array:",A.students),console.log("  - Number of Students in Array:",A.students.length),t(A.students),x(A.totalStudents),v(A.averageGrade),console.log(" State updated successfully"),console.log("  - filteredStudents will have:",A.students.length,"students")}catch(P){console.error(" Error in AcademicTracking component:",P)}finally{h(!1),console.log(" Loading complete")}})()},[]);const I=async M=>{console.log(" Clicking on student:",M);const P=e.find(A=>A.studentName===M);if(P){console.log(" Found student data:",P),n(P),m(!0);const A=await BR(M);i(A),m(!1),w({academicHistory:!1,personalStatement:!1,activities:!1,supplementaryEssays:!1,careerInterests:!1,specialCircumstances:!1})}else console.log(" Student not found in array")},E=()=>{n(null),i(null)},D=M=>{w(P=>({...P,[M]:!P[M]}))},O=M=>{C(M),j(!0)},k=()=>{C(null),j(!1)};console.log(" Current students array length:",e.length),console.log(" Current search term:",o);const S=e.filter(M=>{const P=M.studentName.toLowerCase().includes(o.toLowerCase());return!P&&o&&console.log(`Filtering OUT ${M.studentName} (doesn't match "${o}")`),P}).sort((M,P)=>c==="desc"?P.overallAverage-M.overallAverage:c==="asc"?M.overallAverage-P.overallAverage:M.studentName.localeCompare(P.studentName));console.log(" Filtered Students Count:",S.length,"out of",e.length),S.length>0&&console.log(" Filtered Students:",S.map(M=>M.studentName));const T=M=>M===1?a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-yellow-400 to-yellow-500 px-3 py-1.5 rounded-full",children:[a.jsx(y7,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm font-bold text-white",children:"1st"})]}):M===2?a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-slate-300 to-slate-400 px-3 py-1.5 rounded-full",children:[a.jsx(L1,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm font-bold text-white",children:"2nd"})]}):M===3?a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-amber-600 to-amber-700 px-3 py-1.5 rounded-full",children:[a.jsx(L1,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm font-bold text-white",children:"3rd"})]}):a.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-slate-100 border border-slate-300",children:a.jsxs("span",{className:"text-base font-bold text-slate-600",children:["#",M]})}),R=M=>M>=90?"#10b981":M>=80?"#04ADEE":M>=70?"#f59e0b":"#ef4444";if(d)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})});if(_&&N&&r)return a.jsx(Pp,{comeFromStudentProfile:!0,studentName:r.studentName,essayTitle:N.title,onBackToStudentProfile:k});if(r){const M=r.subjectAverages.map(P=>({name:P.subject.length>12?P.subject.substring(0,12)+"...":P.subject,grade:P.grade,fullName:P.subject}));return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-5",children:[a.jsxs("button",{onClick:E,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-4 transition-colors font-medium",children:[a.jsx(ls,{className:"w-4 h-4"}),"Back to Students"]}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3",children:r.studentName}),f?a.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm",children:"Loading profile data..."})]}):s&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Overall Average"}),a.jsxs("div",{className:"text-lg font-bold text-[#04ADEE]",children:[r.overallAverage,"%"]})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:s.sat?"SAT":"ACT"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s.sat||s.act||"N/A"})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Age"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:dse(s.dob||"")})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Nationality"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s.nationality||"N/A"})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Budget"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s.budget||"N/A"})]})]})]}),a.jsxs("div",{className:"px-8 py-6 space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Course Grades"}),a.jsx(nI,{width:"100%",height:240,children:a.jsxs(UR,{data:M,barSize:35,children:[a.jsx(Gw,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),a.jsx(Xw,{dataKey:"name",tick:{fontSize:12}}),a.jsx(Qw,{domain:[0,100],tick:{fontSize:12}}),a.jsx(GD,{content:({active:P,payload:A})=>P&&A&&A.length?a.jsxs("div",{className:"bg-white p-2 border border-slate-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:A[0].payload.fullName}),a.jsxs("p",{className:"text-base font-bold text-[#04ADEE]",children:["Grade: ",A[0].value,"%"]})]}):null}),a.jsx(Yw,{dataKey:"grade",radius:[6,6,0,0],children:M.map((P,A)=>{const L=["#04ADEE","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];return a.jsx(yp,{fill:L[A%L.length]},`cell-${A}`)})})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("academicHistory"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Academic History"})]}),b.academicHistory?a.jsx(Za,{className:"w-5 h-5 text-slate-600"}):a.jsx(Ja,{className:"w-5 h-5 text-slate-600"})]}),b.academicHistory&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:r.previousAverages.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(mr,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-slate-500",children:"No previous academic records available"})]}):a.jsx("div",{className:"space-y-3 mt-3",children:r.previousAverages.map((P,A)=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-800",children:P.year}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Overall Average:"}),a.jsxs("span",{className:"text-base font-bold text-[#04ADEE]",children:[P.overallAverage,"%"]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Subject Grades"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.subjects.map((L,U)=>a.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-slate-200",children:[a.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:L.subject}),a.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[L.grade,"%"]})]},U))})]})]},A))})})]}),(s==null?void 0:s.personalStatement)&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("personalStatement"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pe,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Personal Statement"}),s.personalStatement.reviewed&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold",children:"Reviewed"}),!s.personalStatement.reviewed&&a.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-semibold",children:"Unreviewed"})]}),b.personalStatement?a.jsx(Za,{className:"w-5 h-5 text-slate-600"}):a.jsx(Ja,{className:"w-5 h-5 text-slate-600"})]}),b.personalStatement&&a.jsxs("div",{className:"px-4 pb-4 border-t border-slate-200 mt-3",children:[a.jsx("button",{onClick:()=>O(s.personalStatement),className:"text-lg font-semibold text-slate-900 hover:text-slate-700 hover:underline mb-3 block text-left",children:s.personalStatement.title}),a.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:s.personalStatement.text}})]})]}),(s==null?void 0:s.activitiesList)&&s.activitiesList.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("activities"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(or,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Extra Curricular Activities"}),a.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-semibold",children:s.activitiesList.length})]}),b.activities?a.jsx(Za,{className:"w-5 h-5 text-slate-600"}):a.jsx(Ja,{className:"w-5 h-5 text-slate-600"})]}),b.activities&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"space-y-2 mt-3",children:s.activitiesList.map((P,A)=>a.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-[#04ADEE] text-white flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:A+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:P.name}),a.jsx("p",{className:"text-xs text-slate-600",children:P.description})]})]})},P.id))})})]}),(s==null?void 0:s.supplementaryEssays)&&s.supplementaryEssays.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("supplementaryEssays"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nr,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Supplementary Essays"}),a.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-semibold",children:s.supplementaryEssays.length})]}),b.supplementaryEssays?a.jsx(Za,{className:"w-5 h-5 text-slate-600"}):a.jsx(Ja,{className:"w-5 h-5 text-slate-600"})]}),b.supplementaryEssays&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"space-y-3 mt-3",children:s.supplementaryEssays.map((P,A)=>a.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("button",{onClick:()=>O(P),className:"text-sm font-bold text-slate-900 hover:text-slate-700 hover:underline mb-1 text-left",children:P.title}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[P.universityName&&a.jsx("span",{className:"text-xs text-slate-600 bg-white px-2 py-0.5 rounded border border-slate-200",children:P.universityName}),a.jsxs("span",{className:"text-xs text-slate-500",children:["Created: ",P.createdAt]})]})]}),P.reviewed?a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold flex-shrink-0",children:"Reviewed"}):a.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-semibold flex-shrink-0",children:"Unreviewed"})]})},A))})})]}),(s==null?void 0:s.careerInterests)&&s.careerInterests.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("careerInterests"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ra,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Career Interests"})]}),b.careerInterests?a.jsx(Za,{className:"w-5 h-5 text-slate-600"}):a.jsx(Ja,{className:"w-5 h-5 text-slate-600"})]}),b.careerInterests&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.careerInterests.map((P,A)=>a.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-[#04ADEE]/10 to-emerald-50 border border-[#04ADEE]/20 rounded-full text-sm font-medium text-slate-800",children:P},A))})})]}),(s==null?void 0:s.specialCircumstances)&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("specialCircumstances"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ns,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Special Circumstances"})]}),b.specialCircumstances?a.jsx(Za,{className:"w-5 h-5 text-slate-600"}):a.jsx(Ja,{className:"w-5 h-5 text-slate-600"})]}),b.specialCircumstances&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("p",{className:"text-sm text-slate-700 mt-3 bg-slate-50 p-3 rounded-lg border border-slate-200",children:s.specialCircumstances})})]})]})]})}return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20",children:a.jsxs("div",{className:"px-8 py-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(nr,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Student Profile Dashboard"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-emerald-500 px-3 py-1.5 rounded-full",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),a.jsx("span",{className:"text-xs font-semibold text-white",children:"Live Data"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ja,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Total Students"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-slate-900",children:a.jsx(dt,{end:p,duration:1500})}),a.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx($n,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Average Grade"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-[#04ADEE]",children:a.jsx(dt,{end:g,duration:1500,decimals:1})}),a.jsx("span",{className:"text-sm text-slate-600",children:"%"})]})]})]})]})}),a.jsxs("div",{className:"px-8 py-6",children:[a.jsxs("div",{className:"mb-6 space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search students by name...",value:o,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-slate-900 placeholder-slate-400"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Sort by:"}),a.jsxs("select",{value:c,onChange:M=>u(M.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-slate-900 bg-white cursor-pointer",children:[a.jsx("option",{value:"desc",children:"Descending Average"}),a.jsx("option",{value:"asc",children:"Ascending Average"}),a.jsx("option",{value:"alphabetical",children:"Alphabetical Order"})]})]})]}),S.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Sr,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500 text-lg",children:"No students found"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your search"})]}):a.jsx("div",{className:"grid gap-3",children:S.map((M,P)=>{const A=P+1;return a.jsx("div",{onClick:()=>I(M.studentName),className:"bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-all cursor-pointer border border-slate-200 hover:border-[#04ADEE]",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:T(A)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-2",children:M.studentName}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"w-3.5 h-3.5 text-slate-500"}),a.jsxs("span",{className:"text-sm text-slate-600",children:[M.numCourses," ",M.numCourses===1?"course":"courses"]})]})})]}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(use,{percentage:M.overallAverage,size:80,strokeWidth:6,color:R(M.overallAverage),children:a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-xl font-bold",style:{color:R(M.overallAverage)},children:[M.overallAverage,"%"]}),a.jsx("p",{className:"text-[10px] text-slate-500",children:"Avg"})]})})})]})},M.studentName)})})]})]})},Yg={async getCounselorAvailability(e){const t=G(V,`University Data/Timeslots/${e}`);try{const r=await me(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.keys(n).forEach(i=>{const o=n[i],[l,c]=i.split("_"),[u,d]=c.split("-");s.push({id:i,date:l,startTime:u,endTime:d,isBooked:o})}),s.sort((i,o)=>{const l=i.date.localeCompare(o.date);return l!==0?l:i.startTime.localeCompare(o.startTime)})}catch(r){return console.error("Error fetching availability:",r),[]}},async addAvailabilitySlot(e,t,r,n){const s=`${t}_${r}-${n}`,i=G(V,`University Data/Timeslots/${e}/${s}`);await gt(i,!1)},async deleteAvailabilitySlot(e,t){const r=G(V,`University Data/Timeslots/${e}/${t}`);await Yc(r)},async getMeetingRequests(e){const t=G(V,`University Data/MeetingRequests/${e}`);try{const r=await me(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.keys(n).forEach(i=>{s.push({id:i,...n[i]})}),s}catch(r){return console.error("Error fetching meeting requests:",r),[]}},listenToCounselorAvailability(e,t){const r=G(V,`University Data/Timeslots/${e}`);return Pr(r,s=>{if(!s.exists()){t([]);return}const i=s.val(),o=[];Object.keys(i).forEach(c=>{const u=i[c],[d,h]=c.split("_"),[f,m]=h.split("-");o.push({id:c,date:d,startTime:f,endTime:m,isBooked:u})});const l=o.sort((c,u)=>{const d=c.date.localeCompare(u.date);return d!==0?d:c.startTime.localeCompare(u.startTime)});t(l)})},listenToMeetingRequests(e,t){const r=G(V,`University Data/MeetingRequests/${e}`);return Pr(r,s=>{if(!s.exists()){t([]);return}const i=s.val(),o=[];Object.keys(i).forEach(l=>{o.push({id:l,...i[l]})}),t(o)})},generateMeetingLink(e){return`https://meet.jit.si/educare-meeting-${e}`},async updateMeetingLink(e,t,r){const n=G(V,`University Data/MeetingRequests/${e}/${t}`),s=await me(n);s.exists()&&await gt(n,{...s.val(),meetingLink:r})}};function fse({counselorName:e}){const[t,r]=y.useState([]),[n,s]=y.useState([]),[i,o]=y.useState(!0),[l,c]=y.useState("upcoming"),[u,d]=y.useState(!1),[h,f]=y.useState({date:"",startTime:"",endTime:""});y.useEffect(()=>{const v=Yg.listenToCounselorAvailability(e,_=>{s(_),o(!1)}),b=G(V,`Upcoming meetings/${e}`),w=Pr(b,_=>{if(!_.exists()){r([]);return}const j=[],N=_.val();Object.keys(N).forEach(C=>{const I=N[C];Object.keys(I).forEach(E=>{const D=I[E],[O,k]=E.split("_");j.push({id:E,studentName:C,studentEmail:D.studentEmail||"",date:O,time:k,agenda:D.agenda||"No agenda provided",meetingLink:D.meetingLink||"",requestedAt:D.requestedAt||""})})}),j.sort((C,I)=>C.date.localeCompare(I.date)),r(j)});return()=>{v(),w()}},[e]);const m=async()=>{if(!h.date||!h.startTime||!h.endTime){alert("Please fill in all fields");return}try{await Yg.addAvailabilitySlot(e,h.date,h.startTime,h.endTime),f({date:"",startTime:"",endTime:""}),d(!1)}catch(v){console.error("Error adding slot:",v),alert("Failed to add time slot. Please try again.")}},p=async v=>{if(confirm("Are you sure you want to delete this time slot?"))try{await Yg.deleteAvailabilitySlot(e,v)}catch(b){console.error("Error deleting slot:",b),alert("Failed to delete time slot. Please try again.")}},x=v=>new Date(v).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),g=v=>{const[b,w]=v.split(":"),_=parseInt(b),j=_>=12?"PM":"AM";return`${_%12||12}:${w} ${j}`};return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})}):a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Meeting Requests"}),a.jsx("p",{className:"text-gray-600",children:"Manage student meeting requests and your availability"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex",children:[a.jsx("button",{onClick:()=>c("upcoming"),className:`px-6 py-4 text-sm font-medium transition-colors ${l==="upcoming"?"text-[#04ADEE] border-b-2 border-[#04ADEE]":"text-gray-500 hover:text-gray-700"}`,children:"Upcoming Meetings"}),a.jsx("button",{onClick:()=>c("availability"),className:`px-6 py-4 text-sm font-medium transition-colors ${l==="availability"?"text-[#04ADEE] border-b-2 border-[#04ADEE]":"text-gray-500 hover:text-gray-700"}`,children:"My Availability"})]})}),l==="upcoming"?a.jsx("div",{className:"p-6",children:t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(bt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 text-lg",children:"No upcoming meetings"})]}):a.jsx("div",{className:"space-y-4",children:t.map(v=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow bg-green-50/50",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.studentName||"Unknown Student"}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Confirmed"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:v.studentEmail})]})}),a.jsxs("div",{className:"flex items-center gap-6 mb-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bt,{className:"w-4 h-4"}),x(v.date)]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4"}),v.time]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Meeting Agenda:"}),a.jsx("p",{className:"text-gray-600",children:v.agenda})]}),v.meetingLink&&a.jsxs("button",{onClick:()=>window.open(v.meetingLink,"_blank"),className:"w-full bg-gradient-to-r from-[#04adee] to-[#0396d5] text-white px-6 py-3 rounded-lg font-semibold hover:from-[#0396d5] hover:to-[#027fb8] transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[a.jsx(yl,{className:"w-5 h-5"}),"Join Video Meeting"]})]},v.id))})}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Available Time Slots"}),a.jsxs("button",{onClick:()=>d(!u),className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors flex items-center gap-2",children:[a.jsx(Nr,{className:"w-4 h-4"}),"Add Time Slot"]})]}),u&&a.jsxs("div",{className:"bg-[#04ADEE]/10 border border-[#04ADEE]/30 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Time Slot"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),a.jsx("input",{type:"date",value:h.date,onChange:v=>f({...h,date:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]",min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),a.jsx("input",{type:"time",value:h.startTime,onChange:v=>f({...h,startTime:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),a.jsx("input",{type:"time",value:h.endTime,onChange:v=>f({...h,endTime:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:m,className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors",children:"Add Slot"}),a.jsx("button",{onClick:()=>{d(!1),f({date:"",startTime:"",endTime:""})},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Fr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 text-lg",children:"No available time slots"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Add time slots for students to book meetings"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(v=>a.jsxs("div",{className:`border rounded-lg p-4 ${v.isBooked?"bg-gray-50 border-gray-300":"bg-white border-gray-200 hover:shadow-md transition-shadow"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bt,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("span",{className:"font-medium text-gray-900",children:x(v.date)})]}),!v.isBooked&&a.jsx("button",{onClick:()=>p(v.id),className:"text-red-600 hover:text-red-700 transition-colors",children:a.jsx(St,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Fr,{className:"w-4 h-4"}),a.jsxs("span",{children:[g(v.startTime)," - ",g(v.endTime)]})]}),v.isBooked&&a.jsx("div",{className:"mt-3 px-3 py-1 bg-gray-200 text-gray-700 text-xs font-medium rounded-full inline-block",children:"Booked"})]},v.id))})]})]})]})}const mse=[{id:"1",student_id:"s1",date_of_birth:"2006-03-15",nationality:"United States",career_interests:"Computer Science, Artificial Intelligence, Software Engineering",financial_budget:75e3,created_at:"2024-01-15",student:{id:"s1",name:"Emma Rodriguez",email:"emma.rodriguez@email.com",composite_score:88.5,academic_performance:90,essay_activities_rating:87,academic_trend:5}},{id:"2",student_id:"s2",date_of_birth:"2006-07-22",nationality:"India",career_interests:"Biomedical Engineering, Healthcare Innovation, Medical Research",financial_budget:45e3,created_at:"2024-01-20",student:{id:"s2",name:"Arjun Patel",email:"arjun.patel@email.com",composite_score:91.2,academic_performance:93,essay_activities_rating:89,academic_trend:7}},{id:"3",student_id:"s3",date_of_birth:"2006-11-08",nationality:"United Kingdom",career_interests:"Environmental Science, Climate Policy, Sustainability",financial_budget:6e4,created_at:"2024-01-25",student:{id:"s3",name:"Sophie Chen",email:"sophie.chen@email.com",composite_score:85.8,academic_performance:84,essay_activities_rating:88,academic_trend:4}},{id:"4",student_id:"s4",date_of_birth:"2006-05-12",nationality:"Canada",career_interests:"Business Administration, Entrepreneurship, Finance",financial_budget:55e3,created_at:"2024-02-01",student:{id:"s4",name:"Marcus Johnson",email:"marcus.johnson@email.com",composite_score:82.4,academic_performance:81,essay_activities_rating:84,academic_trend:3}},{id:"5",student_id:"s5",date_of_birth:"2006-09-30",nationality:"Brazil",career_interests:"Architecture, Urban Planning, Sustainable Design",financial_budget:38e3,created_at:"2024-02-05",student:{id:"s5",name:"Isabella Santos",email:"isabella.santos@email.com",composite_score:87.6,academic_performance:86,essay_activities_rating:90,academic_trend:6}},{id:"6",student_id:"s6",date_of_birth:"2006-01-18",nationality:"South Korea",career_interests:"Mechanical Engineering, Robotics, Automation",financial_budget:5e4,created_at:"2024-02-10",student:{id:"s6",name:"David Kim",email:"david.kim@email.com",composite_score:89.3,academic_performance:91,essay_activities_rating:87,academic_trend:5}},{id:"7",student_id:"s7",date_of_birth:"2006-04-25",nationality:"Nigeria",career_interests:"International Relations, Political Science, Diplomacy",financial_budget:42e3,created_at:"2024-02-15",student:{id:"s7",name:"Amara Okonkwo",email:"amara.okonkwo@email.com",composite_score:84.7,academic_performance:83,essay_activities_rating:86,academic_trend:4}},{id:"8",student_id:"s8",date_of_birth:"2006-08-14",nationality:"Australia",career_interests:"Marine Biology, Environmental Conservation, Research",financial_budget:58e3,created_at:"2024-02-20",student:{id:"s8",name:"Olivia Thompson",email:"olivia.thompson@email.com",composite_score:86.9,academic_performance:85,essay_activities_rating:89,academic_trend:5}}];function pse({onSelectStudent:e}){const[t]=y.useState(mse),[r,n]=y.useState(""),s=t.filter(o=>{var l;return((l=o.student)==null?void 0:l.name.toLowerCase().includes(r.toLowerCase()))||o.nationality.toLowerCase().includes(r.toLowerCase())}),i=o=>{const l=new Date(o),c=new Date;let u=c.getFullYear()-l.getFullYear();const d=c.getMonth()-l.getMonth();return(d<0||d===0&&c.getDate()<l.getDate())&&u--,u};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Student Profiles"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage student information"})]})}),a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name or nationality...",value:r,onChange:o=>n(o.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[a.jsx(Yo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No students found"})]}):a.jsx("div",{className:"grid gap-4",children:s.map(o=>{var l,c,u;return a.jsx("button",{onClick:()=>e(o.id),className:"bg-white rounded-lg border border-slate-200 p-6 hover:shadow-md hover:border-slate-300 transition-all text-left w-full",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:(l=o.student)==null?void 0:l.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(c=o.student)==null?void 0:c.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(u=o.student)==null?void 0:u.email}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Yo,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{className:"text-gray-600",children:["Age ",i(o.date_of_birth)]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(lb,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:o.nationality})]})]})]})]})})},o.id)})})]})}const Xg=[{id:"1",essay_title:"Why This Major?",university_name:"Stanford University",submission_date:"2024-11-15",status:"reviewed",score:92},{id:"2",essay_title:"Community Impact",university_name:"MIT",submission_date:"2024-11-20",status:"reviewed",score:88},{id:"3",essay_title:"Overcoming Challenges",university_name:"UC Berkeley",submission_date:"2024-12-01",status:"in_review",score:null},{id:"4",essay_title:"Leadership Experience",university_name:"Harvard University",submission_date:"2024-12-10",status:"pending",score:null}],gse={1:{id:"1",student_id:"s1",date_of_birth:"2006-03-15",nationality:"United States",career_interests:"Computer Science, Artificial Intelligence, Software Engineering",financial_budget:75e3,personal_statement:`From a young age, I've been fascinated by the power of technology to solve real-world problems. Growing up in a small town with limited resources, I witnessed firsthand how digital innovation could bridge gaps in education and healthcare. This inspired me to pursue computer science, with a particular focus on artificial intelligence and machine learning.

During my high school years, I've dedicated myself to learning programming languages and frameworks, participating in hackathons, and developing applications that serve my community. One of my proudest achievements was creating a mobile app that helps local farmers optimize their crop yields using predictive analytics.

I believe that technology should be accessible and beneficial to all, and I'm committed to using my skills to create solutions that make a positive impact on society. I'm particularly interested in exploring how AI can be used ethically and responsibly to address challenges in healthcare, education, and environmental sustainability.`,extracurricular_activities:` President of Computer Science Club (3 years) - Led workshops on web development and organized coding competitions
 Varsity Soccer Team Captain (2 years) - Balanced athletic commitment with academic excellence
 Volunteer Coding Instructor - Taught programming basics to middle school students every Saturday
 Winner of State Hackathon 2023 - Developed an AI-powered tutoring platform
 National Honor Society Member - Maintained 4.0 GPA while contributing to community service projects
 Founded Tech for Good Initiative - Created a team that develops free apps for local non-profits`,special_circumstances:null,created_at:"2024-01-15",student:{id:"s1",name:"Emma Rodriguez",email:"emma.rodriguez@email.com",composite_score:88.5,academic_performance:90,essay_activities_rating:87,academic_trend:5}},2:{id:"2",student_id:"s2",date_of_birth:"2006-07-22",nationality:"India",career_interests:"Biomedical Engineering, Healthcare Innovation, Medical Research",financial_budget:45e3,personal_statement:`The intersection of engineering and medicine has always captivated me. When my grandmother suffered from a debilitating illness that required constant monitoring, I realized how technology could transform patient care and improve quality of life. This experience ignited my passion for biomedical engineering and healthcare innovation.

I've spent countless hours researching medical devices, studying anatomy and physiology, and learning about the latest advances in biotechnology. My goal is to develop accessible, affordable medical solutions that can benefit patients in underserved communities around the world.

Through internships at local hospitals and research projects, I've gained hands-on experience in understanding the practical challenges healthcare professionals face. I'm particularly interested in developing low-cost diagnostic tools and remote monitoring systems that can bring quality healthcare to rural areas. I believe that innovation in healthcare should not be a luxury but a fundamental right for all.`,extracurricular_activities:` Founder of Biomedical Innovation Club - Organized workshops and guest lectures from medical professionals
 Hospital Volunteer (300+ hours) - Assisted in patient care and observed medical procedures
 Science Olympiad Team - Gold medalist in Anatomy and Physiology division
 Research Assistant at University Lab - Studied tissue engineering and regenerative medicine
 TEDx Speaker - Presented on 'The Future of Affordable Healthcare Technology'
 Cricket Team Vice-Captain - Demonstrated leadership and teamwork skills`,special_circumstances:"As an international student from India, I come from a middle-class family where education is highly valued. My parents have made significant sacrifices to support my educational aspirations. I am actively seeking scholarships and financial aid to pursue my dream of studying biomedical engineering in the United States.",created_at:"2024-01-20",student:{id:"s2",name:"Arjun Patel",email:"arjun.patel@email.com",composite_score:91.2,academic_performance:93,essay_activities_rating:89,academic_trend:7}},3:{id:"3",student_id:"s3",date_of_birth:"2006-11-08",nationality:"United Kingdom",career_interests:"Environmental Science, Climate Policy, Sustainability",financial_budget:6e4,personal_statement:`Climate change is the defining challenge of our generation, and I am committed to being part of the solution. Growing up in a coastal town in the UK, I've witnessed the tangible effects of rising sea levels and extreme weather events. These experiences have shaped my determination to pursue environmental science and contribute to creating a sustainable future.

My academic journey has been driven by a deep curiosity about ecological systems and a desire to understand the complex relationships between human activity and environmental health. I've conducted independent research on local biodiversity, participated in beach cleanups, and engaged with community leaders to promote sustainable practices.

I believe that addressing climate change requires both scientific innovation and policy change. I'm eager to study environmental science at a university where I can develop the technical skills and interdisciplinary knowledge needed to tackle this global crisis. My ultimate goal is to work on developing and implementing evidence-based climate policies that can make a real difference.`,extracurricular_activities:` Environmental Club President - Led campus-wide sustainability initiatives and reduced school waste by 40%
 Youth Climate Council Member - Advised local government on environmental policies
 Marine Conservation Volunteer - Participated in coral reef restoration projects
 Science Fair Winner - Research project on microplastics in local water systems
 Debate Team Captain - Competed nationally, specializing in environmental policy topics
 Outdoor Adventure Club - Organized eco-friendly hiking and camping trips`,special_circumstances:null,created_at:"2024-01-25",student:{id:"s3",name:"Sophie Chen",email:"sophie.chen@email.com",composite_score:85.8,academic_performance:84,essay_activities_rating:88,academic_trend:4}},4:{id:"4",student_id:"s4",date_of_birth:"2006-05-12",nationality:"Canada",career_interests:"Business Administration, Entrepreneurship, Finance",financial_budget:55e3,personal_statement:`Entrepreneurship isn't just about building businesses; it's about solving problems and creating value for communities. My journey into business began when I started a small lawn care service at age 14, which taught me invaluable lessons about customer service, financial management, and perseverance.

What started as a summer job evolved into a passion for understanding how businesses operate and grow. I became fascinated by the strategic decisions that successful entrepreneurs make and the economic principles that drive markets. Through various business competitions and internships, I've developed skills in financial analysis, marketing strategy, and leadership.

I'm particularly interested in social entrepreneurship and how businesses can be forces for positive change while remaining profitable. I believe that the next generation of business leaders must balance profit with purpose, and I'm committed to developing the skills and knowledge necessary to build sustainable, ethical enterprises that benefit both shareholders and society.`,extracurricular_activities:` DECA International Finalist - Placed top 10 in Entrepreneurship category
 Founded 'Green Clean' Business - Student-run eco-friendly cleaning service employing 12 peers
 Junior Achievement Company Program - Served as CEO of award-winning student company
 Business Club Treasurer - Managed $15,000 budget and organized networking events
 Volunteer Financial Literacy Instructor - Taught personal finance basics to underserved youth
 Varsity Basketball Team - Demonstrated teamwork and leadership as point guard`,special_circumstances:null,created_at:"2024-02-01",student:{id:"s4",name:"Marcus Johnson",email:"marcus.johnson@email.com",composite_score:82.4,academic_performance:81,essay_activities_rating:84,academic_trend:3}},5:{id:"5",student_id:"s5",date_of_birth:"2006-09-30",nationality:"Brazil",career_interests:"Architecture, Urban Planning, Sustainable Design",financial_budget:38e3,personal_statement:`Architecture has the power to shape not just buildings, but communities and lives. Growing up in So Paulo, one of the world's largest cities, I've experienced both the beauty of thoughtful urban design and the challenges of rapid, unplanned development. This duality has inspired my passion for architecture and sustainable urban planning.

I believe that great architecture goes beyond aestheticsit must be functional, sustainable, and accessible to all members of society. Through my studies and volunteer work in underserved neighborhoods, I've learned that good design can improve quality of life, foster community connections, and address environmental challenges.

My goal is to become an architect who creates spaces that honor cultural heritage while embracing innovation and sustainability. I'm particularly interested in designing affordable housing solutions and public spaces that bring communities together. I want to use architecture as a tool for social change, creating built environments that are beautiful, sustainable, and equitable.`,extracurricular_activities:` Architecture Summer Program at Local University - Top student recognition
 Volunteer with Habitat for Humanity - Helped build homes for low-income families
 Art Club Vice President - Organized exhibitions showcasing student work
 Model UN Delegate - Represented Brazil in sustainable development committees
 Community Design Workshop Leader - Taught basic architectural principles to children
 Photography Club Member - Documented urban landscapes and architectural heritage`,special_circumstances:"I come from a working-class family in Brazil where my parents work multiple jobs to support my education. The economic challenges in my country have limited my access to advanced resources, but they have also taught me resilience and creativity. I am seeking financial aid to pursue my architectural education and bring valuable perspectives from my background to contribute to campus diversity.",created_at:"2024-02-05",student:{id:"s5",name:"Isabella Santos",email:"isabella.santos@email.com",composite_score:87.6,academic_performance:86,essay_activities_rating:90,academic_trend:6}},6:{id:"6",student_id:"s6",date_of_birth:"2006-01-18",nationality:"South Korea",career_interests:"Mechanical Engineering, Robotics, Automation",financial_budget:5e4,personal_statement:`Robotics represents the future of how humans interact with technology and solve complex problems. My fascination with mechanical systems began in elementary school when I dismantled my first toy robot to understand how it worked. That curiosity has evolved into a serious pursuit of mechanical engineering and robotics.

Throughout high school, I've dedicated myself to learning the principles of mechanics, electronics, and programming. I've participated in numerous robotics competitions, where I've not only honed my technical skills but also learned the importance of teamwork, iterative design, and creative problem-solving.

I'm particularly interested in how robotics and automation can be used to improve manufacturing efficiency, assist in healthcare, and explore environments that are dangerous or inaccessible to humans. My dream is to contribute to developing robotic systems that can make meaningful improvements in people's lives, whether through assistive technologies for individuals with disabilities or robots that can perform critical tasks in extreme environments.`,extracurricular_activities:` Robotics Team Captain - Led team to national championships, won Innovation Award
 FIRST Robotics Competition Participant (4 years) - Served as lead mechanical designer
 Founded Maker Space Club - Created hands-on learning environment for engineering projects
 Volunteer Mentor for Junior Robotics Teams - Coached elementary and middle school teams
 Math Olympiad Competitor - Regional gold medalist
 Taekwondo Black Belt - Demonstrated discipline and perseverance`,special_circumstances:null,created_at:"2024-02-10",student:{id:"s6",name:"David Kim",email:"david.kim@email.com",composite_score:89.3,academic_performance:91,essay_activities_rating:87,academic_trend:5}},7:{id:"7",student_id:"s7",date_of_birth:"2006-04-25",nationality:"Nigeria",career_interests:"International Relations, Political Science, Diplomacy",financial_budget:42e3,personal_statement:`In an increasingly interconnected world, the ability to build bridges between cultures and nations is more important than ever. Coming from Nigeria, a country rich in diversity and complex in its challenges, I've developed a deep appreciation for the power of diplomacy and international cooperation.

My interest in international relations stems from witnessing how global events directly impact local communities. I've been fascinated by the intricate web of economic, political, and social factors that shape our world. Through Model UN conferences, research projects, and engagement with current affairs, I've developed a nuanced understanding of international dynamics.

I aspire to work in diplomacy or international development, where I can contribute to building more equitable relationships between nations and addressing global challenges such as poverty, conflict, and climate change. I believe that with empathy, cultural intelligence, and strong negotiation skills, we can create a more peaceful and prosperous world for all.`,extracurricular_activities:` Model United Nations Team Leader - Won Best Delegate awards at multiple conferences
 Student Government President - Represented 2,000+ students and implemented policy changes
 Youth Ambassador for African Leadership Initiative - Represented Nigeria at international youth summit
 Debate Team Member - National finalist in foreign policy debates
 Volunteer with Refugee Support Organization - Tutored and mentored displaced youth
 Editor of School Newspaper - Covered international affairs and social justice issues`,special_circumstances:"As a student from Nigeria, I have faced challenges including inconsistent electricity, limited internet access, and economic instability. Despite these obstacles, I have maintained academic excellence and pursued my passions. I am seeking financial assistance to achieve my educational goals and eventually give back to my community in Nigeria.",created_at:"2024-02-15",student:{id:"s7",name:"Amara Okonkwo",email:"amara.okonkwo@email.com",composite_score:84.7,academic_performance:83,essay_activities_rating:86,academic_trend:4}},8:{id:"8",student_id:"s8",date_of_birth:"2006-08-14",nationality:"Australia",career_interests:"Marine Biology, Environmental Conservation, Research",financial_budget:58e3,personal_statement:`The ocean has always been my greatest teacher. Growing up along Australia's coast, I spent countless hours exploring tide pools, snorkeling in coral reefs, and marveling at the incredible diversity of marine life. These experiences sparked a lifelong passion for marine biology and ocean conservation.

What began as childhood curiosity has evolved into a serious commitment to understanding and protecting our oceans. Through research projects, volunteer work, and field studies, I've learned about the critical threats facing marine ecosystemsfrom climate change and pollution to overfishing and habitat destruction.

I'm particularly interested in coral reef ecology and the development of innovative conservation strategies. My goal is to pursue research that can inform policy decisions and contribute to the preservation of marine biodiversity. I believe that through rigorous scientific study and effective communication of research findings, we can inspire action to protect our oceans for future generations.`,extracurricular_activities:` Marine Conservation Volunteer - 400+ hours with Great Barrier Reef Foundation
 Science Research Project - Published findings on coral bleaching in local scientific journal
 Environmental Youth Council Member - Advocated for marine protection policies
 Certified Scuba Diver - Advanced Open Water certification, underwater research training
 Science Olympiad Marine Biology Team Captain - State champions 2023
 Swimming Team Member - Competed at state level while maintaining academic excellence`,special_circumstances:null,created_at:"2024-02-20",student:{id:"s8",name:"Olivia Thompson",email:"olivia.thompson@email.com",composite_score:86.9,academic_performance:85,essay_activities_rating:89,academic_trend:5}}};function vse({studentId:e,onBack:t}){var m,p,x,g,v,b,w,_;const[r,n]=y.useState(null),[s,i]=y.useState(!1),[o,l]=y.useState(null);y.useEffect(()=>{const j=gse[e];n(j||null),i(!1)},[e]);const c=j=>{var C,I;const N={id:`${(C=r==null?void 0:r.student)==null?void 0:C.name}___${j.essay_title}`,student_name:((I=r==null?void 0:r.student)==null?void 0:I.name)||"",essay_title:j.essay_title,essay_type:"supplement",university_name:j.university_name};l(N)};if(o&&r)return a.jsx(Pp,{comeFromStudentProfile:!0,studentName:((m=r.student)==null?void 0:m.name)||"",essayTitle:o.essay_title,onBackToStudentProfile:()=>l(null)});const u=j=>{const N=new Date(j),C=new Date;let I=C.getFullYear()-N.getFullYear();const E=C.getMonth()-N.getMonth();return(E<0||E===0&&C.getDate()<N.getDate())&&I--,I},d=j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),h=j=>j.length<=300?j:j.substring(0,300)+"...",f=j=>j.split(`
`).filter(N=>N.trim()).map(N=>N.replace(/^\s*/,"").trim());return r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[a.jsx(ls,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Student Profiles"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:a.jsxs("div",{className:"flex items-start space-x-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-3xl",children:(p=r.student)==null?void 0:p.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:(x=r.student)==null?void 0:x.name}),a.jsx("p",{className:"text-gray-600 mt-1",children:(g=r.student)==null?void 0:g.email}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Age"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[u(r.date_of_birth)," years"]}),a.jsxs("p",{className:"text-xs text-gray-400",children:["DOB: ",d(r.date_of_birth)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lb,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nationality"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.nationality})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Da,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Budget"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",r.financial_budget.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mr,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Essays Score"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:((b=(v=r.student)==null?void 0:v.essay_activities_rating)==null?void 0:b.toFixed(1))||"N/A"})]})]})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pe,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),((w=r.student)==null?void 0:w.essay_activities_rating)&&a.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200",children:[a.jsx(mr,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Essay Score: ",r.student.essay_activities_rating.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"prose max-w-none",children:[a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s?r.personal_statement:h(r.personal_statement)}),r.personal_statement.length>300&&a.jsx("button",{onClick:()=>i(!s),className:"mt-3 text-blue-600 hover:text-blue-700 font-medium text-sm",children:s?"View less":"View more"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(or,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Extracurricular Activities"})]}),((_=r.student)==null?void 0:_.essay_activities_rating)&&a.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200",children:[a.jsx(mr,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Essay Score: ",r.student.essay_activities_rating.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"space-y-3",children:f(r.extracurricular_activities).map((j,N)=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-sm font-semibold",children:N+1}),a.jsx("p",{className:"text-gray-700 leading-relaxed flex-1",children:j})]},N))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Pe,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Supplementary Essays"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[Xg.length," ",Xg.length===1?"essay":"essays"]})]}),a.jsx("div",{className:"space-y-3",children:Xg.map(j=>a.jsx("button",{onClick:()=>c(j),className:"w-full text-left border border-slate-200 rounded-lg p-4 hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:j.essay_title}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:j.university_name}),a.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(bt,{className:"w-3.5 h-3.5"}),new Date(j.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${j.status==="reviewed"?"bg-green-100 text-green-700":j.status==="in_review"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:[j.status==="reviewed"?a.jsx(fr,{className:"w-3.5 h-3.5"}):a.jsx(Fr,{className:"w-3.5 h-3.5"}),j.status==="reviewed"?"Reviewed":j.status==="in_review"?"In Review":"Pending"]}),j.score&&a.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[j.score,"%"]})]})]})},j.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(iO,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Career Interests"})]}),a.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.career_interests})]}),r.special_circumstances&&a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(ns,{className:"w-5 h-5 text-amber-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Special Circumstances"})]}),a.jsx("div",{className:"prose max-w-none",children:a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:r.special_circumstances})})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-500",children:"Student profile not found"}),a.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Go Back"})]})}function xse(e,t){const[r,n]=y.useState({unreviewedEssays:2,pendingMeetings:0,unreadMessages:3}),[s,i]=y.useState(!1);return y.useEffect(()=>{const l=G(V,`University Data/Timeslots/${t}`),c=Pr(l,u=>{let d=0;if(u.exists()){const h=u.val();d=Object.values(h).filter(f=>f===!0).length}n({unreviewedEssays:2,pendingMeetings:d,unreadMessages:3}),i(!1)});return()=>c()},[t]),{counts:r,loading:s,refetch:()=>{i(!0)}}}const Wr={essayWeight:40,currentAverageWeight:50,pastAverageWeight:10,excellentMin:90,excellentMax:100,strongMin:80,strongMax:89,competitiveMin:70,competitiveMax:79,developingMin:0,developingMax:69},qR=async e=>{var t,r,n,s,i,o,l,c,u,d,h,f,m,p,x,g;try{console.log("=== FETCHING POOL WEIGHTINGS (FIREBASE) ==="),console.log("Counselor Name:",e);const v=`University Data/Pool Weightings/${e}`;console.log("Firebase Path:",v);const b=G(V,v),w=await me(b);if(console.log("Snapshot Exists:",w.exists()),console.log("Raw Data:",w.val()),!w.exists())return console.log("No weightings found, returning defaults"),Wr;const _=w.val(),j={essayWeight:_["Essays and Activities"]||Wr.essayWeight,currentAverageWeight:_["Current Average"]||Wr.currentAverageWeight,pastAverageWeight:_["Past Averages"]||Wr.pastAverageWeight,excellentMin:parseInt((r=(t=_.Competitiveness)==null?void 0:t.Excellent)==null?void 0:r.split("-")[0])||Wr.excellentMin,excellentMax:parseInt((s=(n=_.Competitiveness)==null?void 0:n.Excellent)==null?void 0:s.split("-")[1])||Wr.excellentMax,strongMin:parseInt((o=(i=_.Competitiveness)==null?void 0:i.Strong)==null?void 0:o.split("-")[0])||Wr.strongMin,strongMax:parseInt((c=(l=_.Competitiveness)==null?void 0:l.Strong)==null?void 0:c.split("-")[1])||Wr.strongMax,competitiveMin:parseInt((d=(u=_.Competitiveness)==null?void 0:u.Competitive)==null?void 0:d.split("-")[0])||Wr.competitiveMin,competitiveMax:parseInt((f=(h=_.Competitiveness)==null?void 0:h.Competitive)==null?void 0:f.split("-")[1])||Wr.competitiveMax,developingMin:parseInt((p=(m=_.Competitiveness)==null?void 0:m.Developing)==null?void 0:p.split("-")[0])||Wr.developingMin,developingMax:parseInt((g=(x=_.Competitiveness)==null?void 0:x.Developing)==null?void 0:g.split("-")[1])||Wr.developingMax};return console.log("Parsed Weightings:",j),console.log(`=== END FETCH ===
`),j}catch(v){return console.error(" ERROR in getPoolWeightings:",v),Wr}},yse=async(e,t)=>{try{console.log("=== SAVING POOL WEIGHTINGS (FIREBASE) ==="),console.log("Counselor Name:",e),console.log("Weightings:",t);const r=`University Data/Pool Weightings/${e}`;console.log("Firebase Path:",r);const n={"Essays and Activities":t.essayWeight,"Current Average":t.currentAverageWeight,"Past Averages":t.pastAverageWeight,Competitiveness:{Excellent:`${t.excellentMin}-${t.excellentMax}`,Strong:`${t.strongMin}-${t.strongMax}`,Competitive:`${t.competitiveMin}-${t.competitiveMax}`,Developing:`${t.developingMin}-${t.developingMax}`}};console.log("Data to save:",n);const s=G(V,r);await gt(s,n),console.log(" Weightings saved successfully"),console.log(`=== END SAVE ===
`)}catch(r){throw console.error(" ERROR in savePoolWeightings:",r),r}},bse=(e,t,r,n)=>{const s=n.essayWeight/100,i=n.currentAverageWeight/100,o=n.pastAverageWeight/100;return e*s+t*i+r*o},wse=(e,t)=>e>=t.excellentMin&&e<=t.excellentMax||e>=t.strongMin&&e<=t.strongMax?"Strong":e>=t.competitiveMin&&e<=t.competitiveMax?"Competitive":"Developing",_se=async e=>{try{console.log("=== FETCHING COUNSELOR POOL DATA (FIREBASE) ==="),console.log("Counselor Name:",e);const t=await qR(e);console.log("Loaded weightings:",t);const r=`University Data/Caseloads/${e}`;console.log("Firebase Path for Caseload:",r);const n=G(V,r),s=await me(n);if(console.log("1. Caseload Query Result:"),console.log("   - Exists:",s.exists()),console.log("   - Raw Data:",s.val()),!s.exists())return console.log(" No caseload found for counselor:",e),{activeStudents:[],totalActivePool:0,totalAssigned:0,totalCaseload:0,averageStrength:0,progress:0};const i=s.val(),o=Object.keys(i);console.log("2. Student Names in Caseload:",o),console.log("   - Count:",o.length);const l=[],c=[];let u=0;for(const m of o){console.log(`
--- Processing Student: ${m} ---`);const p=`University Data/Pool management/${m}`;console.log("   Pool Management Path:",p);const x=G(V,p),g=await me(x);if(console.log("   Pool Snapshot Exists:",g.exists()),console.log("   Pool Raw Data:",g.val()),!g.exists()){console.log(`    No pool management data for: ${m}`);continue}const v=g.val(),b=v.Description||"No description available",w=v["Essays Average"]||0;console.log("   Description:",b),console.log("   Essays Average:",w);const _=v["Career Interests"]||{},j=Object.keys(_).filter(L=>_[L]===!0);console.log("   Career Interests:",j);const N=`University Data/Student Academics/${m}`;console.log("   Academic Path:",N);const C=G(V,N),I=await me(C);if(console.log("   Academic Snapshot Exists:",I.exists()),console.log("   Academic Raw Data:",I.val()),!I.exists()){console.log(`    No academic data for: ${m}`);continue}const E=I.val(),D=E["Overall Average"]||0,O=E["Past Overall Average"]||0;console.log("   Overall Average:",D),console.log("   Past Overall Average:",O);const k=bse(w,D,O,t),S=wse(k,t),T=Math.round(k*10)/10;console.log("   Composite Strength:",T),c.push(T);const R=`University Data/Pool Strength/${m}`,M=G(V,R);await gt(M,T),console.log("    Saved to Pool Strength:",R,"=",T);const P=v.Assigned===!0;if(console.log("   Is Assigned:",P),P){console.log(`    Skipping ${m} for active pool - Already assigned universities`),u++;continue}const A={id:m.replace(/\s+/g,"-").toLowerCase(),name:m,email:`${m.replace(/\s+/g,".").toLowerCase()}@example.com`,description:b,careerInterests:j,essayActivities:w,academicPerformance:D,academicTrend:O,compositeStrength:T,strengthLabel:S,composite_score:T,academic_performance:D,essay_activities_rating:w,academic_trend:O};console.log("    Added to Active Pool:",A),l.push(A)}const d=l.length,h=o.length,f=c.length>0?c.reduce((m,p)=>m+p,0)/c.length:0;return console.log(`
=== FINAL POOL SUMMARY ===`),console.log("Total Caseload:",h),console.log("Total Active Pool:",d),console.log("Total Assigned:",u),console.log("All Composite Scores:",c),console.log("Average Strength (All Students):",Math.round(f*10)/10),console.log("Progress:",`${u}/${h}`),console.log(`=== END FETCH ===
`),{activeStudents:l,totalActivePool:d,totalAssigned:u,totalCaseload:h,averageStrength:Math.round(f*10)/10,progress:h>0?u/h*100:0}}catch(t){throw console.error(" ERROR in getCounselorPoolData:",t),t}};function jse({counselorName:e,onClose:t,onSave:r}){const[n,s]=y.useState(40),[i,o]=y.useState(50),[l,c]=y.useState(10),[u,d]=y.useState(90),[h,f]=y.useState(100),[m,p]=y.useState(80),[x,g]=y.useState(89),[v,b]=y.useState(70),[w,_]=y.useState(79),[j,N]=y.useState(0),[C,I]=y.useState(69),[E,D]=y.useState(!0),[O,k]=y.useState(!1),[S,T]=y.useState(null);y.useEffect(()=>{(async()=>{try{D(!0);const L=await qR(e);L&&(s(L.essayWeight),o(L.currentAverageWeight),c(L.pastAverageWeight),d(L.excellentMin),f(L.excellentMax),p(L.strongMin),g(L.strongMax),b(L.competitiveMin),_(L.competitiveMax),N(L.developingMin),I(L.developingMax))}catch(L){console.error("Error loading weightings:",L),T("Failed to load weightings")}finally{D(!1)}})()},[e]);const R=n+i+l,M=R===100,P=async()=>{if(!M){T("Weights must add up to 100%");return}k(!0),T(null);try{await yse(e,{essayWeight:n,currentAverageWeight:i,pastAverageWeight:l,excellentMin:u,excellentMax:h,strongMin:m,strongMax:x,competitiveMin:v,competitiveMax:w,developingMin:j,developingMax:C}),r(),t()}catch(A){console.error("Error saving weightings:",A),T("Failed to save weightings")}finally{k(!1)}};return E?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600",children:"Loading weightings..."})]})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Pool Weighting Settings"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Configure composite score calculation and ranges"})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(St,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[S&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(ns,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700",children:S})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Composite Score Weights"}),a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Set the weight for each component. Total must equal 100%."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Essays and Activities"}),a.jsxs("span",{className:"text-lg font-bold text-[#04ADEE]",children:[n,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:A=>s(parseInt(A.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#04ADEE]"})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Current Average"}),a.jsxs("span",{className:"text-lg font-bold text-[#04ADEE]",children:[i,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:i,onChange:A=>o(parseInt(A.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#04ADEE]"})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Past Overall Average"}),a.jsxs("span",{className:"text-lg font-bold text-[#04ADEE]",children:[l,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:l,onChange:A=>c(parseInt(A.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#04ADEE]"})]}),a.jsxs("div",{className:`mt-4 p-4 rounded-lg border-2 ${M?"bg-emerald-50 border-emerald-500":"bg-amber-50 border-amber-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Total Weight"}),a.jsxs("span",{className:`text-2xl font-bold ${M?"text-emerald-600":"text-amber-600"}`,children:[R,"%"]})]}),!M&&a.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Weights must add up to exactly 100%"})]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Competitiveness Ranges"}),a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Define the composite score ranges for each competitiveness level."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[a.jsx("label",{className:"text-sm font-semibold text-emerald-900 mb-3 block",children:"Excellent"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-emerald-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:u,onChange:A=>d(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-emerald-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-emerald-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:h,onChange:A=>f(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-emerald-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("label",{className:"text-sm font-semibold text-blue-900 mb-3 block",children:"Strong"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-blue-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:m,onChange:A=>p(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-blue-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:x,onChange:A=>g(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[a.jsx("label",{className:"text-sm font-semibold text-amber-900 mb-3 block",children:"Competitive"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-amber-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:v,onChange:A=>b(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-amber-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-amber-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:w,onChange:A=>_(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-amber-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900 mb-3 block",children:"Developing"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:j,onChange:A=>N(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:C,onChange:A=>I(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate-500"})]})]})]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-6 flex gap-3",children:[a.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg font-semibold hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:P,disabled:!M||O,className:"flex-1 px-4 py-3 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg font-semibold transition-all shadow-sm hover:shadow disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ou,{className:"w-4 h-4"}),"Save Settings"]})})]})]})]})})}const Nse=[{id:"1",name:"Maya Rodriguez",email:"maya.rodriguez@example.com",description:"Maya is a passionate advocate for environmental justice who combines her love for science with community organizing to create sustainable solutions.",careerInterests:["Environmental Science","Public Policy","Urban Planning"],essayActivities:92,academicPerformance:84,academicTrend:3,compositeStrength:86.3,strengthLabel:"Strong",composite_score:86.3,academic_performance:84,essay_activities_rating:92,academic_trend:3},{id:"2",name:"Ayaan Patel",email:"ayaan.patel@example.com",description:"Ayaan is an innovative problem-solver with a keen interest in artificial intelligence and its applications in healthcare to improve patient outcomes.",careerInterests:["Computer Science","Biomedical Engineering","Healthcare"],essayActivities:88,academicPerformance:91,academicTrend:6,compositeStrength:88.3,strengthLabel:"Strong",composite_score:88.3,academic_performance:91,essay_activities_rating:88,academic_trend:6},{id:"3",name:"Ethan Chen",email:"ethan.chen@example.com",description:"Ethan is a creative entrepreneur who founded a social enterprise connecting local artisans with global markets while preserving cultural heritage.",careerInterests:["Business Administration","International Relations","Social Entrepreneurship"],essayActivities:75,academicPerformance:89,academicTrend:8,compositeStrength:84,strengthLabel:"Competitive",composite_score:84,academic_performance:89,essay_activities_rating:75,academic_trend:8},{id:"4",name:"Zara Khan",email:"zara.khan@example.com",description:"Zara is a talented writer and aspiring filmmaker who uses storytelling to amplify marginalized voices and spark conversations about social change.",careerInterests:["Film & Media Studies","Creative Writing","Journalism"],essayActivities:81,academicPerformance:78,academicTrend:2,compositeStrength:80.3,strengthLabel:"Competitive",composite_score:80.3,academic_performance:78,essay_activities_rating:81,academic_trend:2},{id:"5",name:"Lucas Bennett",email:"lucas.bennett@example.com",description:"Lucas is a dedicated student athlete who balances competitive swimming with a passion for physical therapy to help others achieve their athletic goals.",careerInterests:["Kinesiology","Physical Therapy","Sports Medicine"],essayActivities:68,academicPerformance:73,academicTrend:1,compositeStrength:70.3,strengthLabel:"Developing",composite_score:70.3,academic_performance:73,essay_activities_rating:68,academic_trend:1}],Sse=[{id:"6",name:"Emma Wilson",email:"emma.wilson@example.com",description:"Emma is a dedicated computer science student with exceptional coding skills and a passion for developing AI solutions.",careerInterests:["Computer Science","Artificial Intelligence","Software Engineering"],essayActivities:95,academicPerformance:92,academicTrend:5,compositeStrength:91.5,strengthLabel:"Strong",composite_score:91.5,academic_performance:92,essay_activities_rating:95,academic_trend:5,universities:["Stanford University","UC Berkeley","University of Washington"],assignedDate:"2024-12-10"},{id:"7",name:"Sophie Chen",email:"sophie.chen@example.com",description:"Sophie is a robotics enthusiast who has won multiple national competitions and developed innovative solutions for accessibility.",careerInterests:["Mechanical Engineering","Robotics","Product Design"],essayActivities:89,academicPerformance:88,academicTrend:7,compositeStrength:87.8,strengthLabel:"Strong",composite_score:87.8,academic_performance:88,essay_activities_rating:89,academic_trend:7,universities:["MIT","University of Michigan","Purdue University","Georgia Tech"],assignedDate:"2024-12-12"}];function Ese({counselor:e,onLogout:t}){const[r,n]=y.useState("academic"),[s,i]=y.useState(Nse),[o,l]=y.useState(Sse),[c,u]=y.useState(null),[d,h]=y.useState("all"),[f,m]=y.useState(null),[p,x]=y.useState(null),[g,v]=y.useState(!1),[b,w]=y.useState(null),[_,j]=y.useState(!1),[N,C]=y.useState(!1),[I,E]=y.useState([]),[D,O]=y.useState(!1),[k,S]=y.useState(new Set),[T,R]=y.useState(""),[M,P]=y.useState(null),{counts:A}=xse(e.id,e.name),L=async()=>{if(e.role==="pool_management"){j(!0);try{console.log("Fetching pool data for counselor:",e.name);const $=await _se(e.name);console.log("Pool data received:",$),i($.activeStudents),P({totalCaseload:$.totalCaseload,totalAssigned:$.totalAssigned,averageStrength:$.averageStrength,progress:$.progress})}catch($){console.error("Error fetching pool data:",$)}finally{j(!1)}}},U=async()=>{if(e.role==="pool_management"){O(!0);try{console.log("Fetching assigned students for counselor:",e.name);const $=await lse(e.name);console.log("Assigned students received:",$),E($)}catch($){console.error("Error fetching assigned students:",$)}finally{O(!1)}}};y.useEffect(()=>{L(),U()},[e.name,e.role]);const H=()=>{L()},X=y.useMemo(()=>{let $=[...s];return d!=="all"&&($=$.filter(te=>{const J=te.compositeStrength;switch(d){case"90-100":return J>=90&&J<=100;case"80-89":return J>=80&&J<90;case"70-79":return J>=70&&J<80;case"below-70":return J<70;default:return!0}})),$.sort((te,J)=>J.compositeStrength-te.compositeStrength)},[s,d]),fe=(M==null?void 0:M.averageStrength)||0,ae=(M==null?void 0:M.totalAssigned)||0,ue=(M==null?void 0:M.totalCaseload)||0,Ae=()=>{u(null),L(),U()},_e=$=>{S(te=>{const J=new Set(te);return J.has($)?J.delete($):J.add($),J})},Ne=I.filter($=>{if(!T.trim())return!0;const te=T.toLowerCase(),J=$.name.toLowerCase().includes(te),z=$.universities.some(vt=>vt.name.toLowerCase().includes(te));return J||z});return p?a.jsx(cse,{studentId:p,counselorId:e.id,onBack:()=>x(null)}):a.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[a.jsxs("aside",{className:`bg-white border-r border-slate-200 fixed left-0 top-0 bottom-0 flex flex-col transition-all duration-300 ${g?"w-20":"w-72"}`,children:[a.jsx("button",{onClick:()=>v(!g),className:"absolute -right-3 top-24 bg-white border border-slate-200 rounded-full p-1.5 shadow-md hover:bg-slate-50 transition-colors z-50",title:g?"Expand sidebar":"Collapse sidebar",children:g?a.jsx(oO,{className:"w-4 h-4 text-slate-600"}):a.jsx(aO,{className:"w-4 h-4 text-slate-600"})}),a.jsx("div",{className:`p-6 border-b border-slate-200 ${g?"p-4":""}`,children:a.jsxs("div",{className:`flex items-center gap-3 mb-2 ${g?"justify-center":""}`,children:[a.jsx("img",{src:"/white_logo.png",alt:"EduCare",className:"w-10 h-10 object-contain"}),!g&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("p",{className:"text-xl font-bold text-[#04ADEE] leading-tight",children:"EduCare"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Counselor Portal"})]})]})}),a.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[a.jsxs("div",{className:"mb-4",children:[!g&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Profiles"}),a.jsxs("button",{onClick:()=>n("academic"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="academic"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Student Profiles":void 0,children:[a.jsx(nr,{className:"w-5 h-5 flex-shrink-0"}),!g&&a.jsx("span",{children:"Student Profiles"})]})]}),a.jsxs("div",{className:"mb-4",children:[!g&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Pool Management"}),a.jsxs("button",{onClick:()=>n("active"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="active"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Active Pool":void 0,children:[a.jsx(ja,{className:"w-5 h-5 flex-shrink-0"}),!g&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Active Pool"}),a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="active"?"bg-white/20 text-white":"bg-slate-100 text-slate-600"}`,children:X.length})]})]}),a.jsxs("button",{onClick:()=>n("assigned"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="assigned"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Assigned Students":void 0,children:[a.jsx($1,{className:"w-5 h-5 flex-shrink-0"}),!g&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Assigned Students"}),a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="assigned"?"bg-white/20 text-white":"bg-slate-100 text-slate-600"}`,children:ae})]})]})]}),a.jsxs("div",{className:"mb-4",children:[!g&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Essays"}),a.jsxs("button",{onClick:()=>n("essays"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="essays"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Essay Review":void 0,children:[a.jsx(Pe,{className:"w-5 h-5 flex-shrink-0"}),g&&A.unreviewedEssays>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!g&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Essay Review"}),A.unreviewedEssays>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="essays"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:A.unreviewedEssays})]})]})]}),a.jsxs("div",{className:"mb-4",children:[!g&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Communication"}),a.jsxs("button",{onClick:()=>n("inbox"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="inbox"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Inbox":void 0,children:[a.jsx(Pu,{className:"w-5 h-5 flex-shrink-0"}),g&&A.unreadMessages>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!g&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Inbox"}),A.unreadMessages>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="inbox"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:A.unreadMessages})]})]}),a.jsxs("button",{onClick:()=>n("meetings"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="meetings"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Meeting Requests":void 0,children:[a.jsx(bt,{className:"w-5 h-5 flex-shrink-0"}),g&&A.pendingMeetings>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!g&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Meeting Requests"}),A.pendingMeetings>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="meetings"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:A.pendingMeetings})]})]})]}),a.jsxs("div",{children:[!g&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Resources"}),a.jsxs("button",{onClick:()=>n("scholarships"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="scholarships"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Scholarships":void 0,children:[a.jsx(or,{className:"w-5 h-5 flex-shrink-0"}),!g&&a.jsx("span",{children:"Scholarships"})]}),a.jsxs("button",{onClick:()=>n("resources"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${g?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="resources"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:g?"Resources":void 0,children:[a.jsx(mr,{className:"w-5 h-5 flex-shrink-0"}),!g&&a.jsx("span",{children:"Resources"})]})]})]}),a.jsx("div",{className:`border-t border-slate-200 ${g?"p-2":"p-4"}`,children:g?a.jsx("button",{onClick:t,className:"w-full flex items-center justify-center p-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors",title:"Sign Out",children:a.jsx(w0,{className:"w-5 h-5"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("img",{src:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",alt:e.name,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:e.name}),a.jsx("p",{className:"text-xs text-slate-500",children:"Counselor"})]})]}),a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors",children:[a.jsx(w0,{className:"w-4 h-4"}),a.jsx("span",{children:"Sign Out"})]})]})})]}),a.jsxs("main",{className:`flex-1 overflow-y-auto transition-all duration-300 ${g?"ml-20":"ml-72"}`,children:[(r==="active"||r==="assigned")&&a.jsx("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20",children:a.jsxs("div",{className:"px-8 py-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx($n,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Pool Management Dashboard"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 hover:border-[#04ADEE] text-slate-700 hover:text-[#04ADEE] rounded-lg text-sm font-semibold transition-all shadow-sm hover:shadow",children:[a.jsx(p7,{className:"w-4 h-4"}),"Set Weighting"]}),a.jsxs("div",{className:"flex items-center gap-2 bg-emerald-500 px-3 py-1.5 rounded-full",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),a.jsx("span",{className:"text-xs font-semibold text-white",children:"Active"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ja,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Active Pool"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-slate-900",children:a.jsx(dt,{end:X.length,duration:1500})}),a.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx($1,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Assigned"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-slate-900",children:a.jsx(dt,{end:ae,duration:1500})}),a.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx($n,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Avg Strength"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-[#04ADEE]",children:a.jsx(dt,{end:fe,duration:1500,decimals:1})}),a.jsx("span",{className:"text-sm text-slate-600",children:"%"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Progress"})}),a.jsx("div",{className:"mb-2",children:a.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[a.jsx(dt,{end:ae,duration:1500})," / ",a.jsx(dt,{end:ue,duration:1500})]})}),a.jsx("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${ae/ue*100}%`}})})]})]})]})}),a.jsxs("div",{className:"px-8 py-6",children:[r==="academic"&&a.jsx(hse,{}),r==="inbox"&&a.jsx(HR,{userRole:"counselor"}),r==="essays"&&a.jsx(Pp,{}),r==="meetings"&&a.jsx(fse,{counselorId:e.id,counselorName:e.name}),r==="student_profiles"&&(b?a.jsx(vse,{studentId:b,onBack:()=>w(null)}):a.jsx(pse,{onSelectStudent:w})),r==="scholarships"&&a.jsx(ese,{onBack:()=>n("active"),onLogout:()=>{}}),r==="resources"&&a.jsx(tse,{onBack:()=>n("active"),onLogout:()=>{}}),r==="active"&&a.jsx("div",{children:_?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Loading Pool Data"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Fetching students from Firebase..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Filter by Composite:"}),a.jsxs("select",{value:d,onChange:$=>h($.target.value),className:"px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Students"}),a.jsx("option",{value:"90-100",children:"90-100 (Excellent)"}),a.jsx("option",{value:"80-89",children:"80-89 (Strong)"}),a.jsx("option",{value:"70-79",children:"70-79 (Competitive)"}),a.jsx("option",{value:"below-70",children:"Below 70 (Developing)"})]})]}),a.jsxs("span",{className:"text-sm text-slate-500",children:["Showing ",X.length," of ",s.length," students"]})]}),X.length===0?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx($n,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:s.length===0&&ae===ue&&ue>0?"All students in your caseload have been assigned universities":"No Students Found"}),a.jsx("p",{className:"text-sm text-slate-600",children:s.length===0&&ae===ue&&ue>0?'Great work! Check the "Assigned Students" tab to view all assignments.':"Try adjusting your filter to see more students."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X.map($=>{const J=$.description.length>120,z=J?$.description.slice(0,120)+"...":$.description;return a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 hover:border-slate-300 hover:shadow-lg transition-all p-5 flex flex-col",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:$.name}),a.jsx("span",{className:`inline-block px-2.5 py-1 rounded-full text-xs font-semibold ${$.strengthLabel==="Strong"?"bg-emerald-100 text-emerald-700":$.strengthLabel==="Competitive"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:$.strengthLabel})]}),a.jsxs("div",{className:"text-center bg-slate-50 rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Composite"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:a.jsx(dt,{end:$.compositeStrength,duration:1500,decimals:1})})]})]}),a.jsxs("div",{className:"text-sm text-slate-600 leading-relaxed mb-4 flex-grow",children:[a.jsx("p",{className:"inline",children:z}),J&&a.jsx("button",{onClick:()=>m($),className:"ml-1 text-[#04ADEE] hover:text-[#0396d5] font-medium inline",children:"Read More"})]}),a.jsxs("div",{className:"space-y-2.5 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Essay & Activities"}),a.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[a.jsx(dt,{end:$.essayActivities,duration:1500}),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Current Average"}),a.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[a.jsx(dt,{end:$.academicPerformance,duration:1500}),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Past Overall Average"}),a.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[a.jsx(dt,{end:$.academicTrend,duration:1500}),"%"]})]})]}),a.jsx("button",{onClick:()=>u($),className:"w-full px-4 py-2.5 bg-[#04ADEE] hover:bg-[#0396d5] text-white text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow",children:"Assign Universities"})]},$.id)})})]})}),r==="assigned"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by student or university name...",value:T,onChange:$=>R($.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent outline-none"})]})}),D?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600",children:"Loading assigned students..."})]}):Ne.length===0?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx($n,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:T.trim()?"No Matching Students":"No Assigned Students Yet"}),a.jsx("p",{className:"text-sm text-slate-600",children:T.trim()?"Try a different search term.":"Students will appear here once universities are assigned."})]}):Ne.map($=>{const te=k.has($.id);return a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-bold text-slate-900 mb-1",children:$.name}),a.jsxs("span",{className:"inline-block px-2.5 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-600",children:[$.assignedCount," ",$.assignedCount===1?"University":"Universities"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-slate-500",children:"Composite"}),a.jsx("div",{className:"text-xl font-bold text-[#04ADEE]",children:a.jsx(dt,{end:$.compositeScore,duration:1500,decimals:1})})]})]}),a.jsxs("button",{onClick:()=>_e($.id),className:"w-full py-2 px-3 bg-slate-50 hover:bg-slate-100 rounded-lg text-sm font-medium text-slate-700 transition-colors flex items-center justify-between",children:[a.jsxs("span",{children:[te?"Hide":"Show"," Universities"]}),a.jsx("span",{className:`transform transition-transform ${te?"rotate-180":""}`,children:""})]}),te&&a.jsx("div",{className:"border-t border-slate-100 pt-3 mt-3",children:a.jsx("div",{className:"space-y-1.5",children:$.universities.map((J,z)=>a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("span",{className:"text-sm font-medium text-slate-900",children:J.name}),a.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${J.tier==="Reach"?"bg-red-100 text-red-700 border border-red-200":J.tier==="Mid"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:J.tier})]},z))})})]},$.id)})]})]})]}),c&&a.jsx(nse,{student:c,counselorId:"counselor-demo",onClose:()=>u(null),onComplete:Ae}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Student Details"}),a.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(St,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:f.name}),a.jsx("p",{className:"text-sm text-slate-600",children:f.email}),a.jsx("span",{className:`inline-block mt-3 px-3 py-1.5 rounded-full text-sm font-semibold ${f.strengthLabel==="Strong"?"bg-emerald-100 text-emerald-700":f.strengthLabel==="Competitive"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:f.strengthLabel})]}),a.jsxs("div",{className:"text-center bg-slate-50 rounded-xl px-4 py-3 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Composite Score"}),a.jsx("div",{className:"text-3xl font-bold text-slate-900",children:a.jsx(dt,{end:f.compositeStrength,duration:1500,decimals:1})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-2",children:"About"}),a.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:f.description})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Essay & Activities"}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[a.jsx(dt,{end:f.essayActivities,duration:1500}),"%"]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Current Average"}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[a.jsx(dt,{end:f.academicPerformance,duration:1500}),"%"]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Past Overall Average"}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[a.jsx(dt,{end:f.academicTrend,duration:1500}),"%"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Career Interests"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.careerInterests.map(($,te)=>a.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium border border-blue-200",children:$},te))})]}),a.jsxs("button",{onClick:()=>{m(null),u(f)},className:"w-full px-4 py-3 bg-[#04ADEE] hover:bg-[#0396d5] text-white text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow",children:["Assign Universities to ",f.name]})]})]})}),N&&a.jsx(jse,{counselorName:e.name,onClose:()=>C(!1),onSave:H})]})}function Cse(){const[e,t]=y.useState(null),[r,n]=y.useState(!1),[s,i]=y.useState(null),[o,l]=y.useState(null),[c,u]=y.useState(!0),d=_5();y.useEffect(()=>{(async()=>{at.clearUser(),D1.logout(),n(!1),i(null),t(null),u(!1)})()},[]);const h=p=>{console.log("User logged in:",p),i(p),t("student"),n(!0)},f=p=>{l(p),t("counselor"),n(!0)},m=()=>{e==="counselor"?D1.logout():CU(),i(null),n(!1),t(null)};return c?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e==="counselor"&&r&&o?a.jsx("div",{className:"App",children:a.jsx(Ese,{counselor:o,onLogout:m})}):e==="student"&&r?d==="mobile"?a.jsx("div",{className:"App",children:a.jsx(Zne,{onLogout:m,user:s})}):a.jsx("div",{className:"App",children:a.jsx(Hne,{onLogout:m})}):d==="mobile"?a.jsx("div",{className:"App",children:a.jsx(qne,{onLogin:h,onCounselorLogin:f})}):a.jsx("div",{className:"App",children:a.jsx(w7,{onLogin:h,onCounselorLogin:f})})}Nk(document.getElementById("root")).render(a.jsx(y.StrictMode,{children:a.jsx(Cse,{})}));
